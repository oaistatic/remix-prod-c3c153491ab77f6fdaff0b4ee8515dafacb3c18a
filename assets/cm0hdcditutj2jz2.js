const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ng8iludi91g2bys9.js","assets/hi1g9go8t53qsjy9.js","assets/fs6h2trisr1juto6.js","assets/d7a6rc8fexfzu7dt.js","assets/njq6ygky3ttysgdk.js","assets/root-cl538jor.css","assets/conversation-small-m9kq0y4e.css","assets/du7r5avor7ljqoml.js","assets/o3d0pfqxdj7nivvr.js","assets/loh8e64j4csffv26.js"])))=>i.map(i=>d[i]);
import{j as e,M as c,r as k,e as je,d as ve,R as Re}from"./fs6h2trisr1juto6.js";import{bQ as le,bR as ce,F as de,E as ue,d as w,aX as Q,aY as O,a3 as me,am as ge,aD as _e,c5 as Ce,S as te,cH as se,T as be,a as W,g0 as Te,ef as H,aF as Ee,bS as ke,g1 as we,g2 as De,D as Pe,g3 as Ne,g4 as Le,z as Ae}from"./njq6ygky3ttysgdk.js";import{bi as Se,d3 as Fe,fm as Oe,fn as fe,fo as Ge,fp as Qe,eG as Ve,fq as qe,eL as ae,fr as Be,en as ze,fs as Ye,ft as We,fu as Ie,fv as Ke,fw as He,fx as ne,fy as Ue,fz as Ze,fA as I,fB as K,fC as $e,fD as Je,fE as Xe,fF as et,bO as tt,fG as st,fH as at,fI as nt,fJ as ot}from"./d7a6rc8fexfzu7dt.js";import{u as rt}from"./gunpso70jnmarvod.js";const it=le(()=>ce(()=>import("./ng8iludi91g2bys9.js").then(t=>t.i),__vite__mapDeps([0,1,2,3,4,5,6]))),lt=({errorState:t,nodeId:a,clientThreadId:n,isFeedbackEnabled:o,isUserTurn:s})=>{const r=de.isLastActorMessage(ue(n),a),g=t.canRetry&&r;if(s){const u=t?.flagSeverity;return e.jsxs("div",{className:"flex w-full flex-col items-end justify-between gap-2",children:[e.jsxs("div",{className:w("flex max-w-[var(--user-chat-width,70%)] flex-row-reverse items-start gap-1 text-start text-sm",u==="danger"&&"text-token-text-error",u==="warning"&&"text-orange-600",(u==="info"||!u)&&"text-token-text-secondary"),children:[e.jsx(Se,{className:w("icon-md mt-[0.0625em] shrink-0")}),e.jsx(oe,{errorState:t,clientThreadId:n,isFeedbackEnabled:o})]}),g&&e.jsx(ie,{clientThreadId:n,nodeId:a,errorState:t})]})}return e.jsx(Fe,{type:t?.flagSeverity,className:"mb-2 w-fit self-start",primaryAction:g&&e.jsx(ie,{clientThreadId:n,nodeId:a,errorState:t}),children:e.jsx("div",{className:"flex flex-row items-center justify-between gap-4",children:e.jsx(oe,{errorState:t,clientThreadId:n,isFeedbackEnabled:o})})})},oe=({errorState:t,clientThreadId:a,isFeedbackEnabled:n})=>{const{errCode:o,errMessage:s}=t;switch(o){case O.ContentPolicy:return e.jsx(mt,{isFeedbackEnabled:n});case O.ModelIncompatibility:return e.jsx(c,{id:"cyOWhN",defaultMessage:"Your request was flagged as potentially violating our usage policy. Please try again with a different prompt."});case O.ContentOrTos:return e.jsx(dt,{isFeedbackEnabled:n});case O.ContentRegurgitation:return e.jsx(ut,{});case Q.ModelCapExceeded:return e.jsx(ct,{clientThreadId:a});case Q.HistoryDisabledConversationNotFound:return e.jsx(c,{id:"TextMessageDisplay.historyDisabledConversationMissing",defaultMessage:"Sorry, conversations created when Chat History is off expire after 6 hours of inactivity. Please start a new conversation to continue using ChatGPT."});case Q.MissingLastCompletion:return e.jsx(c,{id:"TextMessageDisplay.somethingWentWrong",defaultMessage:"Something went wrong."});default:return s?e.jsx(it,{rehypePlugins:[[Oe,{target:"_new",rel:"noopener noreferrer"}]],className:"markdown break-words [&>:last-child]:mb-0",children:s}):null}};function ct({clientThreadId:t}){const a=fe(r=>r.isoDate),n=Ge(a),o=me(t,r=>r?.mode),s=o&&o.kind!==ge.PrimaryAssistant;return a?e.jsx(c,{id:"TextMessageDisplay.gptUsageCapExceededExpired",defaultMessage:"You previously reached your usage cap for GPT-4, but you can now try sending your message again"}):e.jsx("span",{children:s!=null?e.jsx(c,{id:"TextMessageDisplay.gptUsageCapExceededCustomFeature",defaultMessage:"You've reached the current usage cap for GPT-4, please try again {formattedTime}. <link>Learn more</link>",values:{link:re,formattedTime:n}}):e.jsx(c,{id:"TextMessageDisplay.gptUsageCapExceeded",defaultMessage:"You've reached the current usage cap for GPT-4. You can continue with the default model now, or try again {formattedTime}. <link>Learn more</link>",values:{link:re,formattedTime:n}})})}const re=t=>e.jsx("a",{href:"https://share.hsforms.com/16d0ZZVM3QZirXnCD_q7u1Q4sk30",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t});function dt({isFeedbackEnabled:t}){return e.jsxs("div",{children:[e.jsx("div",{className:t?"font-semibold":"",children:e.jsx(c,{id:"TextMessageDisplay.contentOrTosViolationNoFeedback",defaultMessage:"This content may violate our <termsLink>Terms of Use</termsLink> or <contentPolicyLink>usage policies</contentPolicyLink>.",values:{contentPolicyLink:xe,termsLink:gt}})}),e.jsx("div",{children:t&&e.jsx(c,{id:"TextMessageDisplay.contentPolicyFeedback",defaultMessage:"Did we get it wrong? Please tell us by giving this response a thumbs down."})})]})}function ut(){return e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:e.jsx(c,{id:"kAMQnd",defaultMessage:"ChatGPT isn't designed to provide this type of content."})}),e.jsx("div",{children:e.jsx(c,{id:"fQ0JYv",defaultMessage:"Read the <modelSpecLink>Model Spec</modelSpecLink> for more on how ChatGPT handles creators' content.",values:{modelSpecLink:ft}})})]})}function mt({isFeedbackEnabled:t}){return e.jsxs("div",{children:[e.jsx("div",{className:t?"font-semibold":"",children:e.jsx(c,{id:"TextMessageDisplay.contentPolicyViolationNoFeedback",defaultMessage:"This content may violate our <contentPolicyLink>usage policies</contentPolicyLink>.",values:{contentPolicyLink:xe}})}),e.jsx("div",{children:t&&e.jsx(c,{id:"TextMessageDisplay.contentPolicyFeedback",defaultMessage:"Did we get it wrong? Please tell us by giving this response a thumbs down."})})]})}const xe=t=>e.jsx(U,{href:"https://openai.com/policies/usage-policies",children:t}),gt=t=>e.jsx(U,{href:"https://openai.com/policies/terms-of-use",children:t}),ft=t=>e.jsx(U,{href:"https://model-spec.openai.com",children:t}),U=({href:t,children:a})=>e.jsx("a",{target:"_blank",rel:"noreferrer",href:t,className:"underline hover:no-underline",children:a}),ie=({clientThreadId:t,nodeId:a,errorState:n})=>{const o=rt({clientThreadId:t}),s=n?.errCode===Q.ModelCapExceeded,r=fe(x=>x.isoDate),g=s&&!!r,u=me(t,x=>x?.mode),y=u&&u.kind!==ge.PrimaryAssistant,d=g&&!y,f=g&&y,j=Qe(),{data:D}=_e(),l=Ve(D)?.id,i=x=>{s?te.logEvent("chatgpt_regenerate_due_to_rate_limit_button_clicked",void 0,{...se({clientThreadId:t}),useDefaultModel:d?"true":"false"}):te.logEvent("chatgpt_regenerate_due_to_error_button_clicked",void 0,{...se({clientThreadId:t}),inlineButton:"true"}),d?(j({modelId:l,location:"Model switcher menu item"}),o({sourceEvent:x,nodeId:a,requestedModelId:l})):o({sourceEvent:x,nodeId:a})};return e.jsx(Ce,{as:"button",color:"secondary",disabled:f,onClick:i,icon:qe,"data-testid":"regenerate-thread-error-button",children:d?e.jsx(c,{id:"MessageError.buttonUseDefaultModel",defaultMessage:"Use default model"}):e.jsx(c,{id:"MessageError.buttonRetryResponse",defaultMessage:"Retry"})})},xt=le(()=>ce(()=>import("./du7r5avor7ljqoml.js"),__vite__mapDeps([7,2,4,5,3,6,8,9])).then(t=>t.TextMessageImageGroup));function ht({attachments:t,citations:a,contentReferences:n,className:o,clientThreadId:s,displayParts:r,isCompletionInProgress:g,hasActiveRequest:u,id:y,isActivelyStreaming:d,isUserTurn:f,isFinalUserTurn:j,turnIndex:D,isFeedbackEnabled:l,messages:i,parts:x,prevGroupedMessageType:v,prevGroupedMessages:R,size:V="medium",errorState:_}){const q=i.length>1,P=x.some(h=>h!==""),C=!P&&i[0].metadata?.content_references?.length===0,N=i[0].metadata?.targeted_reply_label??i[0].metadata?.targeted_reply,L=i[0].metadata?.targeted_reply_image;k.useEffect(()=>{const h=i[0];if(h.author.metadata?.real_author===`tool:${be.SEARCHGPT}`&&P){const T=h.metadata?.search_source;ae.logEvent(W.searchToolRequestTimeToFirstTextToken,s,h.id,{search_source:T},()=>{T===Te.InstantQuery&&Be.logEvent(W.searchToolPageLoadTimeToFirstTextToken,{message_id:h.id,search_source:T})})}},[s,P,i]),k.useEffect(()=>{if(!C)switch(v){case H.Browsing:ae.logEvent(W.browsingTimeToFirstTextToken,s,i[0].id);break}},[C,i,s,v]);const b=e.jsxs(e.Fragment,{children:[N&&e.jsxs("div",{className:"mb-1 ml-6 mt-1 flex items-center gap-1.5 text-sm font-normal text-token-text-tertiary sm:ml-7 lg:ml-8",children:[L?e.jsx("img",{className:"h-6 rounded border border-token-border-light object-contain",src:L,alt:N}):e.jsx(ze,{className:"icon-md shrink-0"}),e.jsx("p",{className:"mr-2 line-clamp-3",children:N})]}),f&&e.jsx(Ye,{messages:i,clientThreadId:s}),f&&e.jsx(We,{hint:i[0]?.metadata?.retrieval_hint_file_data}),e.jsx(Ie,{messages:i,clientThreadId:s}),e.jsx(pt,{parts:x,attachments:t,isUserTurn:f,isCompletionInProgress:g,turnIndex:D,displayParts:r,isActivelyStreaming:d,shouldHideContent:!!_?.shouldHideContent&&!l,clientThreadId:s,id:y,isEmpty:C,prevGroupedMessageType:v,prevGroupedMessages:R,flagSeverity:_?.flagSeverity,messages:i,citations:a,contentReferences:n,size:V}),_&&e.jsx(lt,{errorState:_,nodeId:y,isFeedbackEnabled:l,clientThreadId:s,isUserTurn:f}),e.jsx(Ke,{message:q?void 0:i[0]}),!f&&!d&&R&&v===H.SearchResult&&e.jsx(He,{messages:R})]}),{value:B}=Ee("4043415092"),A=B&&j&&u;return e.jsx("div",{"data-message-author-role":i[0].author.role,"data-message-id":i[0].id,dir:"auto",className:w(o,"text-message relative flex w-full flex-col items-end gap-2 whitespace-normal break-words text-start [.text-message+&]:mt-5",A&&ne.slideUp),"data-message-model-slug":i[0].metadata?.model_slug,children:f?e.jsx("div",{className:w("w-full",A&&ne.slideRightAndFade),children:b}):b})}function pt({clientThreadId:t,id:a,displayParts:n,turnIndex:o,isActivelyStreaming:s,shouldHideContent:r,isEmpty:g,prevGroupedMessageType:u,prevGroupedMessages:y,messages:d,citations:f,contentReferences:j,size:D,isUserTurn:l,parts:i,attachments:x}){const v=je(),R=k.useRef(!1),V=Ue(n),_=d[0].metadata?.serialization_metadata,q=d[0].metadata?.image_results?.length??0,P=k.useMemo(()=>({clientThreadId:t,messageId:a,turnIndex:o}),[t,a,o]),{toggleThreadSidebar:C}=ke(),N=k.useCallback((m,M)=>{C({type:"searchSources",scrollToHeader:M,clientThreadId:t,turnIndex:o,messageId:a})},[t,o,a,C]),L=e.jsx($e,{parts:i,attachments:x,isUserTurn:l,clientThreadId:t},"files-and-tables"),b=!!(x?.length||n.some(m=>m.type==="images")),B=Ze();function A(m,M,p){const S=u===H.CodeInterpreter?y:void 0,{text:Z,contentReferences:$}=Je(M,f,j);let J=$;B&&(J=$.filter(E=>E.type!=="attribution"));let{processedText:F,displayedContentReferences:X}=we(Z,J,s?void 0:S,!1,s);F.includes(De)&&!R.current&&(R.current=!0,Pe.addError(new Error("Failed replaceTextWithDirectives"),{text:F,displayedContentReferences:X}));const z=d[0],ee=z.metadata?.message_locale,he=d.find(E=>E.id===a),pe=Xe(he),Me=et()?"streaming-animation block-entry-animation":"streaming-animation",ye=F?Me:"result-thinking";let Y=e.jsx(tt,{clientThreadId:t,componentOverrides:pe?st:null,messageId:a,size:D,isActivelyStreaming:s,className:w(s&&ye),isDeepResearchResultMessage:z.metadata?.is_async_task_result_message,children:F===""?"&#8203;":F});if(ee!=null){const E=Ne(ee);E!=null&&(Y=e.jsx(Le,{locale:E,children:Y}))}return e.jsx(at.Provider,{value:{analyticsMetadata:P,message:z,contentReferences:X,onShowSearchResults:N,numImageResults:q,isActivelyStreaming:s,useSafeUrls:!0,clientThreadId:t},children:Y},m)}const h=n.map((m,M)=>{if(m.type==="transcription"){const p=r?null:m.text;let S=null;if(l&&r)S=e.jsx("span",{className:"italic opacity-30",children:e.jsx(c,{...G.contentRemoved})});else if(l&&p!=null)S=p.trim().length===0?e.jsx("span",{className:"italic opacity-30",children:e.jsx(I,{text:v.formatMessage(G.transcriptUnavailable),customSymbolOffsets:void 0})}):e.jsx("span",{className:"italic opacity-65",children:e.jsx(I,{text:`“${p.trim()}”`,customSymbolOffsets:void 0})});else if(!l&&p!=null)return A(M,p);return e.jsx(K,{containsImagesOrAttachments:b,isUserTurn:l,children:S},M)}else if(m.type==="text"){const p=r?null:m.text;return!g&&!r&&!l?A(M,V):g&&s&&!l?e.jsx("div",{className:"result-streaming",children:e.jsx("span",{children:e.jsx("pre",{})})},M):e.jsx(K,{containsImagesOrAttachments:b,isUserTurn:l,children:l&&r?e.jsx("span",{className:"italic opacity-30",children:e.jsx(c,{...G.contentRemoved})}):p?e.jsx(I,{text:p,customSymbolOffsets:_?.custom_symbol_offsets}):null},M)}else if(m.type==="images"){const p=d[0].metadata?.attachments??[];return e.jsx(xt,{assets:m.imageAssets,attachments:p,isUserTurn:l,clientThreadId:t},M)}else return null}),T=n.findIndex(m=>m.type==="text");if(T!==-1?h.splice(T,0,L):h.push(L),r&&l)h.length=0,h.push(e.jsx(K,{containsImagesOrAttachments:b,isUserTurn:l,children:e.jsx("span",{className:"italic opacity-30",children:e.jsx(c,{...G.contentRemoved})})}));else if(r&&!l)return null;return e.jsx("div",{className:Mt(l),children:h})}function Mt(t){return w("flex w-full flex-col gap-1 empty:hidden",t&&"items-end rtl:items-start",!t&&"first:pt-[3px]")}const G=ve({contentRemoved:{id:"textMessage.contentRemoved",defaultMessage:"Content removed"},transcriptUnavailable:{id:"textMessage.transcriptUnavailable",defaultMessage:"Transcript Unavailable"}});function yt({message:t,isCompletionInProgress:a,hasActiveRequest:n,clientThreadId:o,className:s,isUserTurn:r,isFinalUserTurn:g,turnIndex:u,isFeedbackEnabled:y,prevGroupedMessageType:d,prevGroupedMessages:f}){const j=k.useMemo(()=>"parts"in t.content?t.content.parts:[Ae(t)],[t]);return e.jsx(jt,{parts:j,messages:[t],hasActiveRequest:n,isCompletionInProgress:a,className:s,citations:t.metadata?.citations,contentReferences:t.metadata?.content_references,attachments:t.metadata?.attachments,isUserTurn:r,isFinalUserTurn:g,turnIndex:u,id:t.id,isFeedbackEnabled:y,clientThreadId:o,prevGroupedMessageType:d,prevGroupedMessages:f})}const bt=Re.memo(yt);function jt(t){const n=t.messages.length>1,o=de.isLastActorMessage(ue(t.clientThreadId),t.messages[0].id),s=n?void 0:nt(t.messages[0],o,!1,t.isCompletionInProgress||t.hasActiveRequest),r=s?.flagSeverity!=="danger"&&t.isCompletionInProgress;return e.jsx(ht,{...t,displayParts:ot({isUserTurn:t.isUserTurn,parts:t.parts}),isActivelyStreaming:r,errorState:s})}export{jt as T,bt as a,ht as b,Mt as g};
//# sourceMappingURL=cm0hdcditutj2jz2.js.map
