import{g as y,j as r,a5 as c,r as o,d as M,M as a}from"./fs6h2trisr1juto6.js";import{o as G,gw as U,gx as k,d as N,bT as H,P as V,a as g,l as Y}from"./njq6ygky3ttysgdk.js";import{cS as x,kt as B,cT as i,ku as X,z as Z,E as d,g$ as b,dp as F,kv as J}from"./d7a6rc8fexfzu7dt.js";import{N as K}from"./l4ce2zdnnawhaijx.js";import{S as q}from"./c1p22j8o7hm9vv5x.js";var z=G;function $(t){return typeof t=="function"?t:z}var Q=$,L=U,W=Q,tt=k,st=9007199254740991,_=4294967295,rt=Math.min;function et(t,s){if(t=tt(t),t<1||t>st)return[];var e=_,n=rt(t,_);s=W(s),t-=_;for(var u=L(n,s);++e<t;)s(e);return u}var it=et;const nt=y(it),St=({gap:t,padding:s=4,size:e=3})=>r.jsx(c.div,{className:N("grid h-full max-w-full flex-1 grid-cols-3 items-center"),style:{gap:t,padding:s},children:nt(3,n=>r.jsx(c.div,{className:"dark:bg-white-400 aspect-square rounded-full bg-gray-400",animate:{translateY:["0%","-50%","0%","0%","0%"]},style:{translateX:.5,width:e,height:e},transition:{repeat:1/0,type:"keyframes",delay:n/10,duration:.7}},n))});var at=(t=>(t.READY="ready",t.LOG="log",t.RUN_START="run_start",t.ENVIRONMENT_STATUS="environment_status",t.ENVIRONMENT_ERROR="environment_error",t.SET_BACKGROUND_COLOR="set_background_color",t.INSTRUMENT="instrument",t.OUTPUT="output",t.ERROR="error",t.RUN_COMPLETE="run_complete",t))(at||{}),lt=(t=>(t.SW_RECONNECT="sw_reconnect",t.SW_NOT_SUPPORTED="sw_not_supported",t))(lt||{});const ct=["python","javascript","typescript","html","react"];function ot(t){return ct.includes(t)}var ut=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.INSTALLING_PACKAGES=1]="INSTALLING_PACKAGES",t[t.RUNNING_CODE=2]="RUNNING_CODE",t))(ut||{}),pt=(t=>(t.RUN_CODE="run",t.STOP_CODE="stop",t.PREPARE_ENVIRONMENT="prepare_environment",t))(pt||{}),mt=(t=>(t.SW_RECONNECT_RESPONSE="sw_reconnect_response",t))(mt||{}),ht=(t=>(t.FLUSH="flush",t.SW_RECONNECT_RESPONSE="sw_reconnect_response",t.FETCH_RESPONSE="fetch_response",t.INIT="init",t.PING="ping",t.DISCONNECT="disconnect",t))(ht||{}),A=(t=>(t.javascript="javascript",t.typescript="typescript",t.bash="bash",t.zsh="zsh",t.html="html",t.css="css",t.python="python",t.json="json",t.sql="sql",t.go="go",t.yaml="yaml",t.java="java",t.rust="rust",t.cpp="cpp",t.swift="swift",t.php="php",t.xml="xml",t.ruby="ruby",t.haskell="haskell",t.kotlin="kotlin",t.csharp="csharp",t.c="c",t.objectivec="objectivec",t.r="r",t.lua="lua",t.dart="dart",t.scala="scala",t.perl="perl",t.commonlisp="commonlisp",t.clojure="clojure",t.ocaml="ocaml",t.powershell="powershell",t.verilog="verilog",t.dockerfile="dockerfile",t.vue="vue",t.other="other",t))(A||{});function I(t){if(x(t))switch(t){case i.CODE_REACT:return"typescript";default:return B(t.replace(/^code\//,""),Object.values(A),"other")}}function S(t){return t.includes("'react'")||t.includes('"react"')}function wt(t,s){switch(t){case i.CODE_HTML:case i.CODE_REACT:return!0;case i.CODE_JAVASCRIPT:case i.CODE_TYPESCRIPT:return S(s);default:return!1}}function Ct(t){return X([i.CODE_PYTHON],t)}function jt(t,s){let e=I(t)??null;return(S(s)||t===i.CODE_REACT)&&(e="react"),e&&ot(e)?e:null}const Et=36,Pt=-24,_t=280,Dt=_t+Et,Tt=40;var Nt=(t=>(t.COLLAPSED="collapsed",t.EXPANDED="expanded",t))(Nt||{});const ft=t=>o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...t},o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM9 8.963v6.074c0 .9.996 1.444 1.754.957l4.723-3.037a1.138 1.138 0 0 0 0-1.914l-4.723-3.037A1.138 1.138 0 0 0 9 8.963Z",clipRule:"evenodd"}));function yt({isDisabled:t=!1,isCodePreviewable:s=!1,isCodeRunning:e,disabledTooltip:n,clientThreadId:u,textdocType:p,onClick:w}){const[m,f]=o.useState(e),h=Z(d.hasSeenCanvasCodeExecutionNux),[{width:v},C]=b();o.useEffect(()=>{let R=null;return!e||s?f(e):(R=setTimeout(()=>{f(e)},200),()=>clearTimeout(R))},[e,s]);const j=()=>({conversation_id:u?Y(u):void 0}),P=()=>{V.logEventWithStatsig(g.canvasRunCodeButtonClicked,"chatgpt_canvas_run_code_button_clicked",j()),setTimeout(()=>w?.())},E=r.jsx(c.button,{disabled:t||e&&!m,onClick:P,className:N("btn rounded-full border transition-colors",m?N(K,"border-transparent"):"border-token-border-light bg-transparent hover:bg-token-surface-hover"),animate:{width:v??0},initial:{width:v??0},transition:{type:"spring",bounce:.24,duration:.4},children:r.jsx("div",{ref:C,children:m?r.jsxs(c.div,{className:"flex items-center gap-2 px-3 sm:px-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[r.jsx(q,{className:"icon-md"}),r.jsx("span",{className:"hidden sm:inline",children:r.jsx(a,{...l.stopCode})})]}):r.jsxs(c.div,{className:"flex items-center gap-2 px-3 sm:px-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[r.jsx(ft,{className:"icon-md"}),r.jsx("span",{className:"hidden sm:inline",children:r.jsx(a,{...s?l.previewCode:l.runCode})})]})})}),D=!h.isLoading&&h.eligible,O=t&&n?n:e?null:r.jsx(a,{...s?l.previewCodeTooltip:l.runCodeTooltip}),T=o.useMemo(()=>{if(!p)return"canvas";switch(p){case i.CODE_JAVASCRIPT:return"JavaScript";case i.CODE_TYPESCRIPT:return"TypeScript";case i.CODE_HTML:return"HTML";case i.CODE_PYTHON:return"Python";case i.CODE_REACT:return"React"}return I(p)??"canvas"},[p]);return D?r.jsx(F,{announcementKey:d.hasSeenCanvasCodeExecutionNux,show:!0,side:"bottom",align:"end",theme:"bright",dismissOnOutsideClick:!0,badge:"new",title:s?r.jsx(a,{id:"O8VBVO",defaultMessage:"Preview your output"}):r.jsx(a,{id:"2sN/zT",defaultMessage:"Run {language}",values:{language:T}}),description:s?r.jsx(a,{id:"CMJOVI",defaultMessage:"Run your code to see how it looks and interact with the output."}):r.jsx(a,{id:"ew1tTJ",defaultMessage:"See your output and get help debugging without leaving the canvas."}),onDismiss:h.markAsViewed,sideOffset:0,children:E}):O?r.jsx(H,{label:O,children:E}):E}const l=M({previewCode:{id:"a08baM",defaultMessage:"Preview"},runCode:{id:"O/1aYA",defaultMessage:"Run"},stopCode:{id:"nCwG4+",defaultMessage:"Stop"},runCodeTooltip:{id:"UeNB/S",defaultMessage:"See output and debug"},previewCodeTooltip:{id:"XLZZHl",defaultMessage:"Preview your output"}});class vt{constructor(s){this.params=s}get isReadonly(){return Object.values(this.params).some(s=>!!s)}get isHistoricalVersion(){return!!this.params.isHistoricalVersion}get isStreaming(){return!!this.params.isTextdocStreaming||!!this.params.isRequestActive}get isTextdocStreaming(){return!!this.params.isTextdocStreaming}get isStreamingFromNative(){return this.isStreaming&&this.params.streamingSource===J.NATIVE}get isRestoring(){return!!this.params.isRestoring}get isShowingChanges(){return!!this.params.isShowingChanges}get isReadonlyFromQueryParam(){return!!this.params.isReadonlyFromQueryParam}}const Mt=t=>new vt(t);export{Tt as C,_t as E,Nt as G,at as M,St as T,I as a,Mt as b,Dt as c,Ct as d,yt as e,A as f,jt as g,Et as h,wt as i,ht as j,lt as k,mt as l,l as m,ut as n,pt as o,Pt as p};
//# sourceMappingURL=cw7s5l0nt7rrqvcw.js.map
