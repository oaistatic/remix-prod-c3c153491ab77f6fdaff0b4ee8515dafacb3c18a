const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jpl5qao05rdthsry.js","assets/fs6h2trisr1juto6.js"])))=>i.map(i=>d[i]);
import{bH as ee,al as ve,aq as ke,bw as E,by as L,bx as qe,bQ as Ke,bR as Qe,V as be,aA as Ye,dA as D,dv as De,c5 as O,d as se,c3 as w,el as ue,c4 as Ve,dC as He,Z as Xe,R as Je}from"./njq6ygky3ttysgdk.js";import{j as e,M as r,r as M,n as h,e as Q,b as ae,u as Ze,d as we}from"./fs6h2trisr1juto6.js";import{af as i,d6 as Me,o as $e,d7 as te,d8 as g,bk as es,d9 as ss,da as as,db as ts,dc as is,dd as Se,de as rs,df as pe,dg as Z,dh as $,di as ns,dj as x,dk as P,dl as q,dm as ls,aa as os,dn as cs,z as ds,E as me,dp as us,ad as ps,dq as ms,dr as gs,ds as xs,dt as hs,du as fs,dv as js,dw as ys}from"./d7a6rc8fexfzu7dt.js";import{S as ge}from"./ms40jzicf31mvoix.js";import{S as H}from"./eq34zwf9q18c17ro.js";import{P as vs}from"./ijutvl794yycgs5p.js";import{g as Ne,h as X,i as A}from"./hg126uudzxua38kv.js";import{G as ks}from"./en8ogvlmn3lccz09.js";import{a as xe}from"./bhsw6t55h66bayr8.js";const he=ee.a`bold underline`,bs=ee.textarea`w-full text-sm overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium bg-token-main-surface-primary h-32`;var _e=(s=>(s[s.None=0]="None",s[s.AppealAvailable=1]="AppealAvailable",s[s.AppealSent=2]="AppealSent",s))(_e||{}),Pe=(s=>(s[s.None=0]="None",s[s.PublishBlocked=1]="PublishBlocked",s[s.RemovedFromMarketplace=2]="RemovedFromMarketplace",s[s.RemovedFromPublic=3]="RemovedFromPublic",s[s.RemovedFromPrivate=4]="RemovedFromPrivate",s[s.Recategorized=5]="Recategorized",s))(Pe||{});function Ys(s){if(!s)return;const a=s.gizmo.appeal_info?.state.kind==="appeal_sent",l=ws(s.gizmo.share_recipient,s.gizmo.sharing_targets);return{sharingRecipient:s.gizmo.share_recipient,categories:s.gizmo.categories,gizmoId:s.gizmo.id,moderationType:l,sharingTargets:s.gizmo.sharing_targets,showModal:a?2:l!==0?1:0}}const fe={[i.User]:i.Private,[i.Group]:i.Private,[i.WorkspaceLink]:i.Workspace};function ws(s,a=[]){const l=new Set(a.filter(p=>p.allowed).map(p=>p.recipient));if(!s||(s in fe&&(s=fe[s]),l.has(s)))return 0;const o=l.has(i.Private)||l.has(i.Workspace),n=l.has(i.Link)||l.has(i.Marketplace);return s===i.Marketplace&&n?2:!n&&o?3:4}function je(s){switch(s){case 0:case 1:return h({id:"gizmo.appeals.publishBlockedTitle",defaultMessage:"Your changes couldn’t be published"});case 2:return h({id:"gizmo.appeals.removedFromMarketplaceTitle",defaultMessage:"Your GPT has been removed from the marketplace"});case 3:return h({id:"gizmo.appeals.removedFromPublicTitle",defaultMessage:"Your GPT has been removed from public view"});case 5:return h({id:"gizmo.appeals.recategorizedTitle",defaultMessage:"Your GPT has been recategorized"});default:Me(s)}}function Ms(s){switch(s){case"profile_picture":return h({id:"gizmo.appeals.profilePictureFieldName",defaultMessage:"Profile Picture"});case"gizmo_name":return h({id:"gizmo.appeals.gizmoNameFieldName",defaultMessage:"Name"});case"gizmo_description":return h({id:"gizmo.appeals.gizmoDescriptionFieldName",defaultMessage:"Description"});case"gizmo_instructions":return h({id:"gizmo.appeals.gizmoInstructionsFieldName",defaultMessage:"Instructions"});case"gizmo_welcome_message":return h({id:"gizmo.appeals.gizmoWelcomeMessageFieldName",defaultMessage:"Welcome Message"});case"custom_actions":return h({id:"gizmo.appeals.customActionsFieldName",defaultMessage:"Custom Actions"});case"conversation_starter":return h({id:"gizmo.appeals.conversationStarterFieldName",defaultMessage:"Conversation Starter"});case"file":return h({id:"gizmo.appeals.fileFieldName",defaultMessage:"File"});case"gizmo_combined_content":return h({id:"gizmo.appeals.gizmoCombinedContentFieldName",defaultMessage:"Overall GPT Config"})}}function Ss(s){switch(s){case i.Private:case i.Workspace:return h({id:"gizmo.appeals.privateRecipientModerationText",defaultMessage:"Your GPT can’t be updated because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case i.Link:return h({id:"gizmo.appeals.linkRecipientModerationText",defaultMessage:"Your GPT can’t be shared publicly because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case i.Marketplace:return h({id:"gizmo.appeals.marketplaceRecipientModerationText",defaultMessage:"Your GPT can’t appear in the Explore GPTs page because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});default:Me(s)}}function Ce({sharingRecipient:s,moderatedFields:a,appealAvailable:l}){const o=a.length;return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx(r,{...Ss(s),values:{usagePolicyLink:n=>e.jsx(he,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:n})}})," ",o>0&&e.jsx(r,{id:"gizmo.appeals.seeBelowForSpecificIssues",defaultMessage:`{numModeratedFields, plural,
              one {See below for the specific issue:}
              other {See below for the specific issues:}
            }`,values:{numModeratedFields:o}})]}),o>0&&a?.map(n=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:e.jsx(r,{...Ms(n.name)})}),e.jsx("ul",{className:"list-disc pl-5",children:n.reasons.map(p=>e.jsxs("li",{children:[p.description," ",p.link?e.jsx(he,{href:p.link,target:"_blank",rel:"noreferrer",children:e.jsx(r,{id:"gizmo.appeals.learnMore",defaultMessage:"Learn more"})}):""]},p.description))})]})),l&&e.jsx("p",{children:e.jsx(r,{id:"gizmo.appeals.appealAvailableText",defaultMessage:"Alternatively you may appeal this decision and we will get back to you as soon as possible. Or you can publish to “Only me” and use this GPT privately."})})]})}function Ns({gizmoId:s,sharingRecipient:a,categories:l,moderationType:o,sharingTargets:n,appealAvailable:p,onClose:j,onAppealSubmitted:f}){const d=Q(),[R,k]=M.useState(""),[S,C]=M.useState(0),b=ae(),T=async()=>{await te.postGizmoAppeal(b,s,R,a,l),C(2),f?.()},N=Ne(a,n),y=N?.length??0,u=ke();if(y==0&&u?.isEnterprisey())return e.jsx(E,{title:d.formatMessage(je(o)),isOpen:!0,onClose:j,showCloseButton:!0,type:"warning",primaryButton:e.jsx(L.Button,{color:"primary",onClick:j,children:e.jsx(r,{id:"wEsAOU",defaultMessage:"OK"})}),children:e.jsx("p",{className:"text-sm",children:e.jsx(r,{id:"gizmo.appeals.workspaceSettingsMessage",defaultMessage:"Access to your GPT has been reduced by your workspace's GPT sharing settings. An owner of the workspace can change these settings in the workspace settings page."})})});switch(S){case 0:return e.jsx(E,{title:d.formatMessage(je(o)),isOpen:!0,onClose:j,showCloseButton:!0,primaryButton:e.jsx(L.Button,{color:"primary",onClick:j,children:e.jsx(r,{id:"gizmo.appeals.contunueButton",defaultMessage:"Continue"})}),secondaryButton:p?e.jsx(L.Button,{onClick:()=>C(1),children:e.jsx(r,{id:"gizmo.appeals.appealButton",defaultMessage:"Appeal"})}):void 0,type:"warning",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx(Ce,{sharingRecipient:a,moderatedFields:N??[],appealAvailable:p})})});case 1:return e.jsx(E,{title:d.formatMessage({id:"gizmo.appeals.appealModalTitle",defaultMessage:"Appeal"}),isOpen:!0,onClose:j,showCloseButton:!0,shouldIgnoreClickOutside:!0,primaryButton:e.jsx(L.Button,{color:"primary",onClick:T,disabled:R.trim().length===0,children:e.jsx(r,{id:"gizmo.appeals.submitAppealButton",defaultMessage:"Submit"})}),secondaryButton:e.jsx(L.Button,{onClick:()=>C(0),children:e.jsx(r,{id:"gizmo.appeals.backButton",defaultMessage:"Back"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("p",{children:e.jsx(r,{id:"gizmo.appeals.appealReasonText",defaultMessage:"Please provide a reason for why you believe this GPT doesn’t violate our policies and should be published"})}),e.jsx(bs,{value:R,onChange:B=>k(B.target.value)})]})});case 2:return e.jsx(e.Fragment,{})}}function _s({onClose:s}){const a=Q();return e.jsx(E,{title:a.formatMessage({id:"gizmo.appeals.appealSubmittedModalTitle",defaultMessage:"Appeal submitted"}),isOpen:!0,onClose:s,showCloseButton:!0,primaryButton:e.jsx(L.Button,{color:"primary",onClick:s,children:e.jsx(r,{id:"gizmo.appeals.closeButton",defaultMessage:"Close"})}),type:"success",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx("div",{children:e.jsx(r,{id:"gizmo.appeals.appealSubmittedText",defaultMessage:"Your appeal has been submitted. We will get back to you as soon as possible."})})})})}function Ps({gizmoId:s,onClose:a}){const{data:l}=$e(s,!0),o=ae(),n=async()=>{await te.postGizmoCancelAppeal(o,s)};return e.jsx(E,{isOpen:!0,onClose:qe,primaryButton:e.jsx(L.Button,{color:"primary",onClick:()=>{n(),a?.()},children:e.jsx(r,{id:"gizmo.appeals.cancelAppealButton",defaultMessage:"Cancel appeal"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("h2",{className:"text-lg font-semibold",children:e.jsx(r,{id:"gizmo.appeals.appealReviewingHeader",defaultMessage:"Reviewing your appeal"})}),e.jsx("p",{children:e.jsx(r,{id:"gizmo.appeals.appealSentModalText",defaultMessage:"During the review you can continue using “{gizmoName}” as your private GPT, but won’t be able to update it or share it with others.",values:{gizmoName:l?.gizmo.display.name}})})]})})}function Ds({appealState:s,onAppealClose:a,onAppealSubmitted:l}){const{value:o}=ve("4226692983"),[n,p]=M.useState(!1);return n?e.jsx(_s,{onClose:()=>{p(!1),l?.()}}):e.jsxs(e.Fragment,{children:[s?.showModal==2&&e.jsx(Ps,{gizmoId:s.gizmoId,onClose:a}),s?.showModal==1&&e.jsx(Ns,{gizmoId:s.gizmoId,sharingRecipient:s.sharingRecipient,categories:s.categories,moderationType:s.moderationType,sharingTargets:s.sharingTargets,appealAvailable:o,onClose:()=>a?.(),onAppealSubmitted:()=>p(!0)})]})}const Re=Ke(()=>Qe(()=>import("./jpl5qao05rdthsry.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication)),Cs=s=>s?[P,q,ms]:[P,q];function Rs(s,a){return s.type===g.USER?s.user_id===a.user_id:s.type===g.GROUP?s.group_id===a.group_id:s.type===a.type}const Ts={[g.USER]:i.User,[g.GROUP]:i.Group,[g.WORKSPACE]:i.Workspace,[g.ALL]:i.Marketplace};function zs(s){const a=Ts[s.type];if(!a)throw new Error("Unknown sharing subject type: "+s.type);return{...s,type:a}}function Vs({gizmo:s,publishedGizmo:a,updateGizmo:l,promoteGizmo:o,appealGizmo:n,setAppealState:p,showActionsModal:j,shareOnly:f,onClose:d,workspaceOwner:R=!1}){const k=Q(),S=be(),C=Ye(),b=C?.data?.name??"your workspace",T=es(),N=ss(),[y,u]=M.useState(void 0);M.useEffect(()=>{if(y==null)if(a?.gizmo.display.categories&&a?.gizmo.display.categories.length>0){const t=N.data?.categories.find(m=>m.id===a?.gizmo.display.categories[0]);t&&u(t)}else N.data!=null&&u(N.data.categories[N.data.categories.length-1])},[N.data,y,a]);const[c,B]=M.useState(s.sharingRecipient??i.Private),[v,W]=M.useState(s.sharing?.subjects??[]),[ie,Ue]=M.useState(null),[re,ne]=M.useState(!1),{value:Be}=ve("2687575887"),Fe=M.useCallback(()=>!D(s.sharing?.subjects,v)||s.sharingRecipient!==c,[s.sharing,s.sharingRecipient,c,v]),U=ae(),le=as(s,c,y?.id??void 0),Ge=le.includes(ts.MissingPublicActionPrivacyPolicyURL),Le=s.tools.find(t=>t.type===De.JIT_PLUGIN&&!t.metadata.privacy_policy_url);if(ie)return e.jsx(Us,{publishedGizmo:ie,sharing:{recipient:c,subjects:v},workspaceName:b,onClose:d});function Ee(t){v.find(m=>Rs(m,t))||W([...v,t])}const F=is(v);function V(t){const m=v.filter(z=>[g.WORKSPACE,g.ALL].indexOf(z.type)===-1);t!=null&&m.push(t),W(m)}function Ie(t){switch(B(t),t){case i.Marketplace:case i.Link:V({type:g.ALL,capabilities:P});break;case i.Workspace:case i.WorkspaceLink:V({type:g.WORKSPACE,capabilities:P});break;default:V(null)}}function oe(t){F!=null&&W(v.map(m=>m===F?{...m,capabilities:t}:m))}function We(t,m,z){return t.type===g.USER&&t.user_id.indexOf("__")===-1?{...t,user_id:t.user_id+"__"+C?.getWorkspaceId()}:t}async function Oe(t,m){if(re)return;if(t&&!m)throw new Error("Cannot share a gizmo that hasn't been promoted before");if(!y)return;ne(!0);let G=v.map(We).map(zs);if(G=gs(c,G,F?.capabilities??P),R)return!C||!m?(S.warning("Unable to change sharing settings"),d()):(await Je.safePost("/accounts/{account_id}/gpts/{gizmo_id}/share",{parameters:{path:{account_id:C.id,gizmo_id:m}},requestBody:{sharing:G}}),S.success(k.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),U.invalidateQueries({queryKey:["workspace"]}),d());if(t){if(!m||!a)throw new Error("No gizmo ID to share");try{const _={sharing:G};y&&(_.categories=[y.id]);const Y=await te.shareGizmo(m,_);Y.error?X(c,Y.sharing_targets)?(p({gizmoId:a.gizmo.id,sharingRecipient:c,categories:a.gizmo.display.categories,moderationType:Pe.PublishBlocked,sharingTargets:Y.sharing_targets,showModal:_e.AppealAvailable}),d()):S.warning(k.formatMessage({id:"tmIKmp",defaultMessage:"Unable to share GPT"})):(U.setQueryData(["gizmo",{gizmoId:a.gizmo.id},{draft:!1}],de=>Y.resource),l(de=>({...de,sharingRecipient:c})),S.success(k.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),d())}catch{return S.warning(k.formatMessage({id:"dKC65l",defaultMessage:"Failed to update sharing settings"})),d()}}else{const _=await o({subjects:G,recipient:c},y.id);m||(m=_?.gizmo.id),Ue(_??null),l({liveVersion:_?.gizmo.live_version??void 0}),U.invalidateQueries({queryKey:["gizmo",{gizmoId:m}]})}ne(!1),U.invalidateQueries({queryKey:["gizmos"]}),U.refetchQueries({queryKey:["gizmos","discovery"]}),U.refetchQueries({queryKey:["gizmo",{gizmoId:m}]}),U.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:m}]}),U.invalidateQueries({queryKey:["workspace"]}),l({sharing:{recipient:c,subjects:v},sharingRecipient:c},!1)}const ce=!a||Fs(a.gizmo.author.user_id.split("__")[0],T?.id);return e.jsx(E,{type:"success",className:"max-w-[555px]",size:"custom",isOpen:!0,onClose:d,primaryButton:X(c,s.sharingTargets)?e.jsx(O,{onClick:()=>n(c,y?.id),children:e.jsx(r,{id:"HRzqKK",defaultMessage:"Appeal"})}):e.jsx(O,{onClick:()=>Oe(f,a?.gizmo.id),loading:re,disabled:le.length>0||!A(c,s.sharingTargets),children:f?e.jsx(r,{id:"BEKjVh",defaultMessage:"Save"}):e.jsx(r,{id:"24j5ts",defaultMessage:"Update"})}),secondaryButton:e.jsxs(e.Fragment,{children:[Fe()&&e.jsx("div",{className:"absolute bottom-8 left-6 text-sm text-token-text-secondary",children:e.jsx(r,{id:"9CkgC4",defaultMessage:"Unsaved changes"})}),a&&e.jsx(O,{color:"secondary",onClick:t=>Se(a,S,t,k.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(r,{id:"wvL15a",defaultMessage:"Copy link"})})]}),title:k.formatMessage({id:"7JggXH",defaultMessage:"Share GPT"}),showCloseButton:!0,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(Bs,{onAdd:t=>Ee(t),publishedGizmo:a}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(r,{id:"bNQXcV",defaultMessage:"Share with..."})}),e.jsxs("div",{className:"max-h-[200px] space-y-2 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx("div",{className:"shrink-0 grow-0 self-start",children:ce?e.jsx(rs,{user:T,size:"gizmoConversation",roundedStyle:"rounded-full"}):e.jsx(pe,{name:a.gizmo.author.display_name??"User",initialsCount:2,size:"gizmoConversation"})}),e.jsx("div",{className:"grow text-base font-semibold",children:ce?e.jsxs("div",{className:"flex flex-col",children:[e.jsx(r,{id:"U7tzof",defaultMessage:"{userName} (you)",values:{userName:T?.name}}),e.jsx("span",{className:"-mt-1 text-sm text-token-text-secondary",children:T?.email})]}):e.jsx(r,{id:"scRZqV",defaultMessage:"{userName} (builder)",values:{userName:a.gizmo.author.display_name}})})]}),v.map((t,m)=>Z(t)&&e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx(pe,{name:t.type===g.GROUP?t.group_name:`${t.user_name} ${t.user_email}`,initialsCount:t.type===g.USER?2:1,size:"gizmoConversation",className:se("shrink-0 grow-0",t.type===g.USER&&"self-start")}),e.jsxs("div",{className:"flex grow flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"mr-2 text-base font-semibold",children:t.type===g.GROUP?t.group_name:t.user_name}),t.type===g.GROUP&&t.is_scim_managed&&e.jsx(Re,{})]}),t.type===g.USER&&e.jsx("span",{className:"-mt-1 text-sm text-token-text-secondary",children:t.user_email})]}),e.jsxs(w.Root,{children:[e.jsxs(w.Trigger,{className:"whitespace-nowrap text-base text-token-text-secondary",children:[e.jsx(r,{...K(t.capabilities)}),e.jsx($,{className:"icon-md"})]}),e.jsx(w.Portal,{children:e.jsxs(w.Content,{className:"max-w-[320px]",children:[Cs(Be).map((z,G)=>e.jsx(J,{capabilities:z,selected:D(z,t.capabilities),onClick:()=>{W(v.map(_=>_===t?{..._,capabilities:z}:_))}},G)),e.jsx(w.Separator,{className:"my-2"}),e.jsx(w.Item,{onClick:()=>W(v.filter(z=>z!==t)),color:"danger",icon:ns,children:e.jsx(r,{id:"NU0BOB",defaultMessage:"Remove"})})]})})]})]},m))]}),e.jsx("hr",{className:"border-token-border-medium"}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(r,{id:"uqD7Y8",defaultMessage:"Access"})}),e.jsxs("div",{className:"-ms-3.5 flex flex-row items-center justify-between space-x-3",children:[e.jsxs(x.Root,{value:c,onValueChange:t=>Ie(t),children:[e.jsxs(x.Trigger,{children:[e.jsx(x.Value,{}),e.jsx(x.Icon,{})]}),e.jsx(x.Portal,{children:e.jsxs(x.Content,{children:[e.jsxs(x.Group,{children:[e.jsx(x.Label,{children:e.jsx(r,{id:"YIQwaP",defaultMessage:"Private"})}),c===i.User?e.jsx(x.Item,{value:i.User,children:e.jsx(I,{shareLevel:i.User,workspaceName:b})}):e.jsx(x.Item,{value:i.Private,children:e.jsx(I,{shareLevel:i.Private,workspaceName:b})})]}),e.jsx(x.Separator,{}),e.jsx(ue,{label:k.formatMessage({id:"n0m61x",defaultMessage:"Your workspace has disabled sharing with the workspace."}),side:"bottom",disabled:A("workspace",s.sharingTargets),children:e.jsxs(x.Group,{children:[e.jsx(x.Label,{children:b}),e.jsx(x.Item,{value:i.WorkspaceLink,disabled:!A(i.WorkspaceLink,s.sharingTargets)&&!A(i.Workspace,s.sharingTargets),children:e.jsx(I,{shareLevel:i.WorkspaceLink,workspaceName:b})}),e.jsx(x.Item,{value:i.Workspace,disabled:!A("workspace",s.sharingTargets),children:e.jsx(I,{shareLevel:i.Workspace,workspaceName:b})})]})}),e.jsx(x.Separator,{}),e.jsx(ue,{label:k.formatMessage({id:"IHnort",defaultMessage:"Your workspace has disabled public sharing."}),side:"bottom",disabled:A("marketplace",s.sharingTargets),children:e.jsxs(x.Group,{children:[e.jsx(x.Label,{children:e.jsx(r,{id:"PjY9bi",defaultMessage:"Public"})}),e.jsx(x.Item,{value:i.Link,disabled:!A("link",s.sharingTargets),children:e.jsx(I,{shareLevel:i.Link,workspaceName:b})}),e.jsx(x.Item,{disabled:!A("marketplace",s.sharingTargets),value:i.Marketplace,children:e.jsx(I,{shareLevel:i.Marketplace,workspaceName:b})})]})})]})})]}),c!==i.Private&&c!==i.User&&e.jsxs(w.Root,{children:[e.jsxs(w.Trigger,{className:"whitespace-nowrap text-base text-token-text-secondary",children:[F==null?e.jsx(r,{...K(P)}):e.jsx(r,{...K(F.capabilities)}),e.jsx($,{className:"icon-md"})]}),e.jsx(w.Portal,{children:e.jsxs(w.Content,{className:"max-w-[320px]",children:[e.jsx(J,{onClick:()=>oe(P),capabilities:P,selected:D(F?.capabilities,P)}),c!==i.Marketplace&&c!==i.Link&&e.jsx(J,{onClick:()=>oe(q),capabilities:q,selected:D(F?.capabilities,q)})]})})]})]}),Ge&&e.jsx("div",{className:"text-xs text-red-500",children:e.jsx(r,{id:"/iw1Iv",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update.",values:{fixlink:t=>e.jsx("button",{onClick:()=>{j(Le?.metadata.action_id),d()},className:"underline",children:t})}})}),(c===i.Marketplace||c===i.Workspace)&&(A(c,s.sharingTargets)?e.jsx(Ae,{gizmo:s,category:y?.id,categories:N.data?.categories,onCategoryChange:t=>u(t)}):X(c,s.sharingTargets)?e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(Ce,{sharingRecipient:c,moderatedFields:Ne(c,s.sharingTargets)??[],appealAvailable:!0})}):e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(r,{id:"BzqqKH",defaultMessage:"Your workspace's settings don't allow this level of access. An owner of the workspace can change this setting in the workspace's GPTs settings."})}))]})})}const Te=we({private:{id:"pSXBWQ",defaultMessage:"Invite-only"},user:{id:"pSXBWQ",defaultMessage:"Invite-only"},group:{id:"pSXBWQ",defaultMessage:"Invite-only"},workspace_link:{id:"Giaxt1",defaultMessage:"Anyone at {workspaceName} with the link"},workspace:{id:"XLHaTU",defaultMessage:"{workspaceName}"},link:{id:"uP1+Ri",defaultMessage:"Anyone with the link"},marketplace:{id:"82Ilac",defaultMessage:"GPT Store"}}),As=we({workspace:{id:"1kpopF",defaultMessage:"Published to {workspaceName}"},marketplace:{id:"hdTRpJ",defaultMessage:"Published to GPT Store"}});function K(s){return s.can_write?h({id:"SubCqD",defaultMessage:"Can edit"}):s.can_view_config?h({id:"V6OjbX",defaultMessage:"Can view settings"}):s.can_read?h({id:"/0j34W",defaultMessage:"Can chat"}):h({id:"x2E8ET",defaultMessage:"Unknown"})}function J({capabilities:s,selected:a,onClick:l}){let o=null;s.can_write?o=xs:s.can_view_config?o=hs:s.can_read&&(o=fs);const n=s.can_write?e.jsx(r,{id:"wKFMT1",defaultMessage:"Edit settings, duplicate, and chat"}):s.can_view_config?e.jsx(r,{id:"Y/J4TZ",defaultMessage:"See settings, duplicate, and chat"}):s.can_read?e.jsx(r,{id:"PvgEQP",defaultMessage:"Chat with this GPT only"}):null;return e.jsxs(w.Item,{className:"flex h-auto flex-row items-center px-3 py-3",onClick:l,icon:o,children:[e.jsxs("div",{className:"mr-1 flex grow flex-col",children:[e.jsx("span",{className:"mb-0.5 text-base leading-tight",children:e.jsx(r,{...K(s)})}),e.jsx("span",{className:"text-xs text-token-text-secondary",children:n})]}),e.jsx(Ve,{className:se("icon-lg shrink-0",!a&&"invisible")})]})}const ze={private:H,user:H,group:H,workspace_link:ge,workspace:js,link:ge,marketplace:ys};function I({shareLevel:s,workspaceName:a,hasInviteSharing:l=!0}){(s===i.User||s===i.Group)&&(s=i.Private);const o=ze[s];return e.jsxs("div",{className:"flex flex-row items-center gap-3 text-sm",children:[e.jsx(o,{className:"icon-md-heavy text-token-text-secondary"}),e.jsx("div",{className:"pt-px text-start",children:!l&&s===i.Private?e.jsx(r,{id:"vVJhYB",defaultMessage:"Only me"}):e.jsx(r,{...Te[s],values:{workspaceName:a}})})]})}function Us({publishedGizmo:s,sharing:a,workspaceName:l,onClose:o}){const n=a.recipient,p=ze[n],j=Q(),f=be();return e.jsxs(E,{isOpen:!0,onClose:o,showCloseButton:!0,className:"w-[304px]",title:e.jsx(r,{id:"5CEceY",defaultMessage:"GPT Updated"}),primaryButton:e.jsx(O,{onClick:()=>{window.location.href=`/g/${s.gizmo.id}`},children:e.jsx(r,{id:"RF75o5",defaultMessage:"View GPT"})}),secondaryButton:e.jsx(O,{color:"secondary",onClick:d=>Se(s,f,d,j.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(r,{id:"9hLOl9",defaultMessage:"Copy link"})}),type:"success",children:[e.jsx(Ae,{gizmo:{profilePictureUrl:s.gizmo.display.profile_picture_url??void 0,name:s.gizmo.display.name}}),a.subjects.filter(d=>Z(d)).length>0&&e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-token-text-secondary",children:e.jsx(r,{id:"/paYH9",defaultMessage:"Shared with"})}),a.subjects&&a.subjects.map((d,R)=>Z(d)&&e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold",children:d.type===g.GROUP?d.group_name:d.user_name}),d.type===g.USER&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:d.user_email})]})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(r,{...K(d.capabilities)})})]},R))]}),e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-token-text-secondary",children:e.jsx(r,{id:"q9XNZ7",defaultMessage:"Access"})}),e.jsxs("div",{className:"ml-[3px] flex flex-row items-center py-3 text-left text-base font-semibold",children:[e.jsx(p,{className:"md:icon-lg mr-3 h-6 w-6 shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(r,{...As[n]??Te[n],values:{workspaceName:l}})}),(n===i.Workspace||n===i.Marketplace)&&e.jsx("span",{className:"text-xs text-token-text-secondary"})]})]})]})]})}function Ae({gizmo:s,category:a,categories:l,onCategoryChange:o}){const{data:n,isLoading:p}=ls(),j=l?.find(f=>f.id===a);return e.jsxs("div",{children:[e.jsxs("div",{className:se("mb-[1px] flex flex-row items-center space-x-2 bg-token-main-surface-secondary p-4",p&&"invisible",l?"rounded-t-lg":"rounded-lg"),children:[e.jsx(ks,{isFirstParty:!1,className:"h-11 w-11",src:s.profilePictureUrl}),e.jsxs("div",{className:"flex grow flex-col space-y-0",children:[e.jsx("span",{className:"text-base font-semibold",children:s.name}),e.jsx(os,{builderName:n?.display_name,builderUrl:n?.website_url,socials:[n?.socials.linkedin,n?.socials.github,n?.socials.twitter].filter(f=>f!=null),className:"text-xs text-token-text-secondary"})]})]}),l&&e.jsxs("div",{className:"flex min-h-[56px] flex-row items-center justify-between space-x-2 rounded-b-lg bg-token-main-surface-secondary px-4 text-base",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(r,{id:"JcA4/t",defaultMessage:"Category"})}),e.jsx("div",{className:"text-token-text-secondary",children:o?e.jsx(He,{size:"small",triggerButton:e.jsxs("button",{className:"flex items-center gap-1",children:[j?.title,e.jsx($,{className:"icon-md"})]}),children:l.map((f,d)=>e.jsx(w.Item,{onClick:()=>o(f),children:f.title},d))}):e.jsx("span",{className:"text-token-text-secondary",children:j?.title})})]})]})}const ye=ee.li`flex flex-col rounded-sm p-1 hover:bg-token-main-surface-secondary`;function Bs({onAdd:s,publishedGizmo:a}){const l=Q(),o=ke(),[n,p]=M.useState(""),f=cs(o?.id,0,n,5).data?.items.filter(u=>u.account_user_id!==a?.gizmo.author.user_id),{data:d}=Ze({queryKey:[o?.id,"groups","filtered",n],queryFn:()=>Xe.getWorkspaceGroups(o.id,{query:n,orderby:"@score"}),enabled:n.trim()!==""&&o!=null&&!!o.getWorkspaceId()}),R=(f?.length??0)>0||(d?.items.length??0)>0,[k,S]=M.useState(!1);function C(u,c,B){s({type:g.GROUP,group_id:u,group_name:c,capabilities:{...P},is_scim_managed:B}),p("")}function b(u,c,B){o&&(s({type:g.USER,user_id:u,user_name:c,user_email:B,capabilities:{...P}}),p(""))}const T=o?.isEnterprisey()?l.formatMessage({id:"xy/AMO",defaultMessage:"Add people and groups from your workspace"}):l.formatMessage({id:"Lh9njB",defaultMessage:"Add people from your workspace"}),{eligible:N,markAsViewed:y}=ds(me.hasSeenMultipleGPTEditorsTooltip);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex w-full flex-row space-x-3",children:e.jsx(us,{announcementKey:me.hasSeenMultipleGPTEditorsTooltip,show:N,side:"right",align:"center",className:"w-full",sideOffset:0,contentClassName:"z-[100]",childrenWrapperClassName:"w-full",theme:"bright",dismissOnOutsideClick:!0,badge:"new",description:l.formatMessage({id:"SR33A6",defaultMessage:"You can now add editors to collaborate on your GPTs."}),onDismiss:y,children:e.jsxs(xe,{as:"div",className:"group relative z-10 grow",children:[e.jsx(ps,{ariaLabel:T,list:"suggested-choices",name:"share-with-input",placeholder:T,value:n,onChange:u=>p(u.target.value),onFocus:()=>S(!0),onBlur:()=>S(!1)}),e.jsx(vs,{show:n.trim()!==""&&R&&k,children:e.jsx(xe.Panel,{static:!0,className:"absolute top-8 ml-0 w-full cursor-pointer overflow-y-auto rounded-lg rounded-t-none border border-t-0 border-token-border-light bg-token-main-surface-primary px-1 py-1 group-has-[:focus]:border-token-border-xheavy",children:n.trim()!==""&&e.jsxs("ul",{id:"suggested-choices",children:[f&&f.map(u=>e.jsxs(ye,{tabIndex:0,className:"rounded-sm p-1 text-sm hover:bg-token-main-surface-secondary",onClick:()=>b(u.account_user_id,u.name,u.email??""),children:[e.jsx("span",{className:"w-full font-semibold",children:u.name}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:u.email})]},u.id)),d?.items&&d.items.slice(0,5).map(u=>e.jsx(ye,{tabIndex:0,onClick:()=>C(u.id,u.name,u.is_scim_managed??!1),children:e.jsxs("span",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"mr-2 font-semibold",children:u.name}),u.is_scim_managed&&e.jsx(Re,{})]}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:e.jsx(r,{id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}",values:{numMembers:u.num_members}})})]})},u.id))]})})})]})})})})}function Fs(s,a){return s===void 0||a===void 0?!1:s.split("__")[0]===a.split("__")[0]}export{_e as A,Ae as G,Pe as M,Vs as S,I as a,ze as b,Us as c,Ds as d,Ys as g,zs as s};
//# sourceMappingURL=koxewv8brsagv80m.js.map
