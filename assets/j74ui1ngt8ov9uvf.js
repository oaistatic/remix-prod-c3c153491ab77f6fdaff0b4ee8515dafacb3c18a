const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/l6yvlx37rodvxl2p.js","assets/bh03466e2487ys4q.js","assets/o3m65hw8d23edpzw.js","assets/fs6h2trisr1juto6.js","assets/d7a6rc8fexfzu7dt.js","assets/njq6ygky3ttysgdk.js","assets/root-cl538jor.css","assets/conversation-small-m9kq0y4e.css","assets/cw7s5l0nt7rrqvcw.js","assets/l4ce2zdnnawhaijx.js","assets/c1p22j8o7hm9vv5x.js","assets/gy64pge8qevmvg7e.js","assets/ora9zmv2zdoi2bvo.js","assets/fzrn137102spawew.js","assets/n9whwsbg0rx5cs8k.js","assets/occh8mf97swpkjvj.js","assets/k1b3ln66263ojn97.js","assets/nnsbuhuxhmqlqawt.js","assets/zspdzani26qes8ve.js","assets/onk9eekclt902z8g.js","assets/ochh5oqbjt3wjpg4.js","assets/iutog9udb18o5s2d.js","assets/hg871o1m8oojnode.js","assets/ntrgre29trz3kv7y.js","assets/ilxh32n4rd3a29eh.js","assets/fj5ag1ad0s1ficn2.js","assets/bjlck4g8h908ns2z.js","assets/fslrs25kdv6q5887.js"])))=>i.map(i=>d[i]);
import{i as Oe,F as X,E as V,D as H,K as yt,j as Ge,S as Y,V as Tt,L as kt,k as rs,l as Tr,m as On,P as Nt,M as It,W as cn,G as is,R as Nr,N as Mt,T as fn,O as dt,s as Ir,Q as ss,A as un,a as v,U as Jt,X as be,Y as ie,Z as Qt,_ as os,$ as Mr,a0 as _r,n as ls,a1 as as,a2 as Ke,a3 as _t,g as Bn,a4 as cs,a5 as fs,a6 as zt,a7 as us,a8 as hs}from"./o3m65hw8d23edpzw.js";import{bR as P,x as ds,n as ps,B as Er}from"./njq6ygky3ttysgdk.js";import{f as S}from"./cw7s5l0nt7rrqvcw.js";import{_ as Or}from"./fzrn137102spawew.js";import{P as Br,f as ms,c as gs,s as ys,R as ks,a as bs,D as Dn,b as Dr}from"./n9whwsbg0rx5cs8k.js";import{jK as xs,bF as Lr,nm as vs,m5 as ws}from"./d7a6rc8fexfzu7dt.js";import{H as Ss}from"./l4ce2zdnnawhaijx.js";const Cs=1024;let As=0;class ee{constructor(e,t){this.from=e,this.to=t}}class w{constructor(e={}){this.id=As++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=G.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}w.closedBy=new w({deserialize:n=>n.split(" ")});w.openedBy=new w({deserialize:n=>n.split(" ")});w.group=new w({deserialize:n=>n.split(" ")});w.isolate=new w({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});w.contextHash=new w({perNode:!0});w.lookAhead=new w({perNode:!0});w.mounted=new w({perNode:!0});class qe{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[w.mounted.id]}}const Ps=Object.create(null);class G{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):Ps,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new G(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(w.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(w.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}}G.none=new G("",Object.create(null),0,8);class hn{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}t.push(i?new G(r.name,i,r.id,r.flags):r)}return new hn(t)}}const lt=new WeakMap,Ln=new WeakMap;var D;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(D||(D={}));class E{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=qe.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new bt(this.topNode,e)}cursorAt(e,t=0,r=0){let i=lt.get(this)||this.topNode,s=new bt(i);return s.moveTo(e,t),lt.set(this,s._tree),s}get topNode(){return new $(this,0,0,null)}resolve(e,t=0){let r=Je(lt.get(this)||this.topNode,e,t,!1);return lt.set(this,r),r}resolveInner(e,t=0){let r=Je(Ln.get(this)||this.topNode,e,t,!0);return Ln.set(this,r),r}resolveStack(e,t=0){return Is(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,l=(o&D.IncludeAnonymous)>0;for(let a=this.cursor(o|D.IncludeAnonymous);;){let c=!1;if(a.from<=s&&a.to>=i&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&r&&(l||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:mn(G.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new E(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new E(G.none,t,r,i)))}static build(e){return Ms(e)}}E.empty=new E(G.none,[],[],0);class dn{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new dn(this.buffer,this.index)}}class ve{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return G.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(Rr(s,i,o[a+1],o[a+2])&&(l=a,r>0));a=o[a+3]);return l}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){s[a++]=i[l++],s[a++]=i[l++]-r;let c=s[a++]=i[l++]-r;s[a++]=i[l++]-e,o=Math.max(o,c)}return new ve(s,o,this.set)}}function Rr(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Je(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof $&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:D.IgnoreOverlays;if(r)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof $&&o.index<0&&((i=l.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=l);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class Fr{cursor(e=0){return new bt(this,e)}getChild(e,t=null,r=null){let i=Rn(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Rn(this,e,t,r)}resolve(e,t=0){return Je(this,e,t,!1)}resolveInner(e,t=0){return Je(this,e,t,!0)}matchContext(e){return Xt(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class $ extends Fr{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=t>0?l.length:-1;e!=c;e+=t){let f=l[e],u=a[e]+o.from;if(Rr(i,r,u,u+f.length)){if(f instanceof ve){if(s&D.ExcludeBuffers)continue;let d=f.findChild(0,f.buffer.length,t,r-u,i);if(d>-1)return new ue(new Ts(o,f,e,u),null,d)}else if(s&D.IncludeAnonymous||!f.type.isAnonymous||pn(f)){let d;if(!(s&D.IgnoreMounts)&&(d=qe.get(f))&&!d.overlay)return new $(d.tree,u,e,o);let p=new $(f,u,e,o);return s&D.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?f.children.length-1:0,t,r,i)}}}if(s&D.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&D.IgnoreOverlays)&&(i=qe.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:l}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new $(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Rn(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Xt(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class Ts{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class ue extends Fr{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new ue(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&D.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new ue(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ue(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ue(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new E(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Vr(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof $&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new Ns(i,t)}class Ns{constructor(e,t){this.heads=e,this.node=t}get next(){return Vr(this.heads)}}function Is(n,e,t){let r=n.resolveInner(e,t),i=null;for(let s=r instanceof $?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,t)),s=o}else{let o=qe.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new $(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Je(l,e,t,!1))}}return i?Vr(i):r}class bt{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof $)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof $?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&D.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&D.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&D.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let l=r._tree.children[s];if(this.mode&D.IncludeAnonymous||l instanceof ve||!l.type.isAnonymous||pn(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new ue(this.buffer,t,this.stack[i]);return this.bufferNode=new ue(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Xt(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Xt(this.node,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function pn(n){return n.children.some(e=>e instanceof ve||!e.type.isAnonymous||pn(e))}function Ms(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=Cs,reused:s=[],minRepeatType:o=r.types.length}=n,l=Array.isArray(t)?new dn(t,t.length):t,a=r.types,c=0,f=0;function u(k,N,y,R,_,I){let{id:C,start:A,end:F,size:B}=l,K=f;for(;B<0;)if(l.next(),B==-1){let me=s[C];y.push(me),R.push(A-k);return}else if(B==-3){c=C;return}else if(B==-4){f=C;return}else throw new RangeError(`Unrecognized record size: ${B}`);let Ae=a[C],Be,Pe,_n=A-k;if(F-A<=i&&(Pe=O(l.pos-N,_))){let me=new Uint16Array(Pe.size-Pe.skip),Z=l.pos-Pe.size,oe=me.length;for(;l.pos>Z;)oe=M(Pe.start,me,oe);Be=new ve(me,F-Pe.start,r),_n=Pe.start-k}else{let me=l.pos-B;l.next();let Z=[],oe=[],Te=C>=o?C:-1,De=0,ot=F;for(;l.pos>me;)Te>=0&&l.id==Te&&l.size>=0?(l.end<=ot-i&&(g(Z,oe,A,De,l.end,ot,Te,K),De=Z.length,ot=l.end),l.next()):I>2500?d(A,me,Z,oe):u(A,me,Z,oe,Te,I+1);if(Te>=0&&De>0&&De<Z.length&&g(Z,oe,A,De,A,ot,Te,K),Z.reverse(),oe.reverse(),Te>-1&&De>0){let En=p(Ae);Be=mn(Ae,Z,oe,0,Z.length,0,F-A,En,En)}else Be=b(Ae,Z,oe,F-A,K-F)}y.push(Be),R.push(_n)}function d(k,N,y,R){let _=[],I=0,C=-1;for(;l.pos>N;){let{id:A,start:F,end:B,size:K}=l;if(K>4)l.next();else{if(C>-1&&F<C)break;C<0&&(C=B-i),_.push(A,F,B),I++,l.next()}}if(I){let A=new Uint16Array(I*4),F=_[_.length-2];for(let B=_.length-3,K=0;B>=0;B-=3)A[K++]=_[B],A[K++]=_[B+1]-F,A[K++]=_[B+2]-F,A[K++]=K;y.push(new ve(A,_[2]-F,r)),R.push(F-k)}}function p(k){return(N,y,R)=>{let _=0,I=N.length-1,C,A;if(I>=0&&(C=N[I])instanceof E){if(!I&&C.type==k&&C.length==R)return C;(A=C.prop(w.lookAhead))&&(_=y[I]+C.length+A)}return b(k,N,y,R,_)}}function g(k,N,y,R,_,I,C,A){let F=[],B=[];for(;k.length>R;)F.push(k.pop()),B.push(N.pop()+y-_);k.push(b(r.types[C],F,B,I-_,A-I)),N.push(_-y)}function b(k,N,y,R,_=0,I){if(c){let C=[w.contextHash,c];I=I?[C].concat(I):[C]}if(_>25){let C=[w.lookAhead,_];I=I?[C].concat(I):[C]}return new E(k,N,y,R,I)}function O(k,N){let y=l.fork(),R=0,_=0,I=0,C=y.end-i,A={size:0,start:0,skip:0};e:for(let F=y.pos-k;y.pos>F;){let B=y.size;if(y.id==N&&B>=0){A.size=R,A.start=_,A.skip=I,I+=4,R+=4,y.next();continue}let K=y.pos-B;if(B<0||K<F||y.start<C)break;let Ae=y.id>=o?4:0,Be=y.start;for(y.next();y.pos>K;){if(y.size<0)if(y.size==-3)Ae+=4;else break e;else y.id>=o&&(Ae+=4);y.next()}_=Be,R+=B,I+=Ae}return(N<0||R==k)&&(A.size=R,A.start=_,A.skip=I),A.size>4?A:void 0}function M(k,N,y){let{id:R,start:_,end:I,size:C}=l;if(l.next(),C>=0&&R<o){let A=y;if(C>4){let F=l.pos-(C-4);for(;l.pos>F;)y=M(k,N,y)}N[--y]=A,N[--y]=I-k,N[--y]=_-k,N[--y]=R}else C==-3?c=R:C==-4&&(f=R);return y}let x=[],T=[];for(;l.pos>0;)u(n.start||0,n.bufferStart||0,x,T,-1,0);let L=(e=n.length)!==null&&e!==void 0?e:x.length?T[0]+x[0].length:0;return new E(a[n.topID],x.reverse(),T.reverse(),L)}const Fn=new WeakMap;function pt(n,e){if(!n.isAnonymous||e instanceof ve||e.type!=n)return 1;let t=Fn.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof E)){t=1;break}t+=pt(n,r)}Fn.set(e,t)}return t}function mn(n,e,t,r,i,s,o,l,a){let c=0;for(let g=r;g<i;g++)c+=pt(n,e[g]);let f=Math.ceil(c*1.5/8),u=[],d=[];function p(g,b,O,M,x){for(let T=O;T<M;){let L=T,k=b[T],N=pt(n,g[T]);for(T++;T<M;T++){let y=pt(n,g[T]);if(N+y>=f)break;N+=y}if(T==L+1){if(N>f){let y=g[L];p(y.children,y.positions,0,y.children.length,b[L]+x);continue}u.push(g[L])}else{let y=b[T-1]+g[T-1].length-k;u.push(mn(n,g,b,L,T,k,y,null,a))}d.push(k+x-s)}}return p(e,t,r,i,0),(l||a)(u,d,o)}class yc{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof ue?this.setBuffer(e.context.buffer,e.index,t):e instanceof $&&this.map.set(e.tree,t)}get(e){return e instanceof ue?this.getBuffer(e.context.buffer,e.index):e instanceof $?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class ge{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new ge(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let f=l<t.length?t[l]:null,u=f?f.fromA:1e9;if(u-a>=r)for(;o&&o.from<u;){let d=o;if(a>=d.from||u<=d.to||c){let p=Math.max(d.from,a)-c,g=Math.min(d.to,u)-c;d=p>=g?null:new ge(p,g,d.tree,d.offset+c,l>0,!!f)}if(d&&i.push(d),o.to>u)break;o=s<e.length?e[s++]:null}if(!f)break;a=f.toA,c=f.toA-f.toB}return i}}class zr{startParse(e,t,r){return typeof e=="string"&&(e=new _s(e)),r=r?r.length?r.map(i=>new ee(i.from,i.to)):[new ee(0,0)]:[new ee(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class _s{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function kc(n){return(e,t,r,i)=>new Os(e,n,t,r,i)}class Vn{constructor(e,t,r,i,s){this.parser=e,this.parse=t,this.overlay=r,this.target=i,this.from=s}}function zn(n){if(!n.length||n.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(n))}class Es{constructor(e,t,r,i,s,o,l){this.parser=e,this.predicate=t,this.mounts=r,this.index=i,this.start=s,this.target=o,this.prev=l,this.depth=0,this.ranges=[]}}const Yt=new w({perNode:!0});class Os{constructor(e,t,r,i,s){this.nest=t,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new E(r.type,r.children,r.positions,r.length,r.propValues.concat([[Yt,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[w.mounted.id]=new qe(t,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new Ls(this.fragments),t=null,r=null,i=new bt(new $(this.baseTree,this.ranges[0].from,0,null),D.IncludeAnonymous|D.IgnoreMounts);e:for(let s,o;;){let l=!0,a;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)l=!1;else if(e.hasNode(i)){if(t){let c=t.mounts.find(f=>f.frag.from<=i.from&&f.frag.to>=i.to&&f.mount.overlay);if(c)for(let f of c.mount.overlay){let u=f.from+c.pos,d=f.to+c.pos;u>=i.from&&d<=i.to&&!t.ranges.some(p=>p.from<d&&p.to>u)&&t.ranges.push({from:u,to:d})}}l=!1}else if(r&&(o=Bs(r.ranges,i.from,i.to)))l=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||Ds(i);let c=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")t=new Es(s.parser,s.overlay,c,this.inner.length,i.from,i.tree,t);else{let f=Hn(this.ranges,s.overlay||(i.from<i.to?[new ee(i.from,i.to)]:[]));f.length&&zn(f),(f.length||!s.overlay)&&this.inner.push(new Vn(s.parser,f.length?s.parser.startParse(this.input,$n(c,f),f):s.parser.startParse(""),s.overlay?s.overlay.map(u=>new ee(u.from-i.from,u.to-i.from)):null,i.tree,f.length?f[0].from:i.from)),s.overlay?f.length&&(r={ranges:f,depth:0,prev:r}):l=!1}}else t&&(a=t.predicate(i))&&(a===!0&&(a=new ee(i.from,i.to)),a.from<a.to&&t.ranges.push(a));if(l&&i.firstChild())t&&t.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(t&&!--t.depth){let c=Hn(this.ranges,t.ranges);c.length&&(zn(c),this.inner.splice(t.index,0,new Vn(t.parser,t.parser.startParse(this.input,$n(t.mounts,c),c),t.ranges.map(f=>new ee(f.from-t.start,f.to-t.start)),t.target,c[0].from))),t=t.prev}r&&!--r.depth&&(r=r.prev)}}}}function Bs(n,e,t){for(let r of n){if(r.from>=t)break;if(r.to>e)return r.from<=e&&r.to>=t?2:1}return 0}function jn(n,e,t,r,i,s){if(e<t){let o=n.buffer[e+1];r.push(n.slice(e,t,o)),i.push(o-s)}}function Ds(n){let{node:e}=n,t=[],r=e.context.buffer;do t.push(n.index),n.parent();while(!n.tree);let i=n.tree,s=i.children.indexOf(r),o=i.children[s],l=o.buffer,a=[s];function c(f,u,d,p,g,b){let O=t[b],M=[],x=[];jn(o,f,O,M,x,p);let T=l[O+1],L=l[O+2];a.push(M.length);let k=b?c(O+4,l[O+3],o.set.types[l[O]],T,L-T,b-1):e.toTree();return M.push(k),x.push(T-p),jn(o,l[O+3],u,M,x,p),new E(d,M,x,g)}i.children[s]=c(0,l.length,G.none,0,o.length,t.length-1);for(let f of a){let u=n.tree.children[f],d=n.tree.positions[f];n.yield(new $(u,d+n.from,f,n._tree))}}class Un{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(D.IncludeAnonymous|D.IgnoreMounts)}moveTo(e){let{cursor:t}=this,r=e-this.offset;for(;!this.done&&t.from<r;)t.to>=e&&t.enter(r,1,D.IgnoreOverlays|D.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof E)t=t.children[0];else break}return!1}}class Ls{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(t=r.tree.prop(Yt))!==null&&t!==void 0?t:r.to,this.inner=new Un(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(Yt))!==null&&e!==void 0?e:t.to,this.inner=new Un(t.tree,-t.offset)}}findMounts(e,t){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(w.mounted);if(o&&o.parser==t)for(let l=this.fragI;l<this.fragments.length;l++){let a=this.fragments[l];if(a.from>=s.to)break;a.tree==this.curFrag.tree&&i.push({frag:a,pos:s.from-a.offset,mount:o})}}}return i}}function Hn(n,e){let t=null,r=e;for(let i=1,s=0;i<n.length;i++){let o=n[i-1].to,l=n[i].from;for(;s<r.length;s++){let a=r[s];if(a.from>=l)break;a.to<=o||(t||(r=t=e.slice()),a.from<o?(t[s]=new ee(a.from,o),a.to>l&&t.splice(s+1,0,new ee(l,a.to))):a.to>l?t[s--]=new ee(l,a.to):t.splice(s--,1))}}return r}function Rs(n,e,t,r){let i=0,s=0,o=!1,l=!1,a=-1e9,c=[];for(;;){let f=i==n.length?1e9:o?n[i].to:n[i].from,u=s==e.length?1e9:l?e[s].to:e[s].from;if(o!=l){let d=Math.max(a,t),p=Math.min(f,u,r);d<p&&c.push(new ee(d,p))}if(a=Math.min(f,u),a==1e9)break;f==a&&(o?(o=!1,i++):o=!0),u==a&&(l?(l=!1,s++):l=!0)}return c}function $n(n,e){let t=[];for(let{pos:r,mount:i,frag:s}of n){let o=r+(i.overlay?i.overlay[0].from:0),l=o+i.tree.length,a=Math.max(s.from,o),c=Math.min(s.to,l);if(i.overlay){let f=i.overlay.map(d=>new ee(d.from+r,d.to+r)),u=Rs(e,f,a,c);for(let d=0,p=a;;d++){let g=d==u.length,b=g?c:u[d].from;if(b>p&&t.push(new ge(p,b,i.tree,-o,s.from>=p||s.openStart,s.to<=b||s.openEnd)),g)break;p=u[d].to}}else t.push(new ge(a,c,i.tree,-o,s.from>=o||s.openStart,s.to<=l||s.openEnd))}return t}let Fs=0;class fe{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=Fs++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new fe([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new xt;return t=>t.modified.indexOf(e)>-1?t:xt.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let Vs=0;class xt{constructor(){this.instances=[],this.id=Vs++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(l=>l.base==e&&zs(t,l.modified));if(r)return r;let i=[],s=new fe(i,e,t);for(let l of t)l.instances.push(s);let o=js(t);for(let l of e.set)if(!l.modified.length)for(let a of o)i.push(xt.get(l,a));return s}}function zs(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function js(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function Us(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,l=i;for(let u=0;;){if(l=="..."&&u>0&&u+3==i.length){o=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!d)throw new RangeError("Invalid path: "+i);if(s.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),u+=d[0].length,u==i.length)break;let p=i[u++];if(u==i.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);l=i.slice(u)}let a=s.length-1,c=s[a];if(!c)throw new RangeError("Invalid path: "+i);let f=new vt(r,o,a>0?s.slice(0,a):null);e[c]=f.sort(e[c])}}return jr.add(e)}const jr=new w;class vt{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}vt.empty=new vt([],2,null);function Ur(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let l of s)for(let a of l.set){let c=t[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function Hs(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function $s(n,e,t,r=0,i=n.length){let s=new Ws(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class Ws{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:l,to:a}=e;if(l>=r||a<=t)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=i,f=Gs(e)||vt.empty,u=Hs(s,f.tags);if(u&&(c&&(c+=" "),c+=u,f.mode==1&&(i+=(i?" ":"")+u)),this.startSpan(Math.max(t,l),c),f.opaque)return;let d=e.tree&&e.tree.prop(w.mounted);if(d&&d.overlay){let p=e.node.enter(d.overlay[0].from+l,1),g=this.highlighters.filter(O=>!O.scope||O.scope(d.tree.type)),b=e.firstChild();for(let O=0,M=l;;O++){let x=O<d.overlay.length?d.overlay[O]:null,T=x?x.from+l:a,L=Math.max(t,M),k=Math.min(r,T);if(L<k&&b)for(;e.from<k&&(this.highlightRange(e,L,k,i,s),this.startSpan(Math.min(k,e.to),c),!(e.to>=T||!e.nextSibling())););if(!x||T>r)break;M=x.to+l,M>t&&(this.highlightRange(p.cursor(),Math.max(t,x.from+l),Math.min(r,M),"",g),this.startSpan(Math.min(r,M),c))}b&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function Gs(n){let e=n.type.prop(jr);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const m=fe.define,at=m(),ye=m(),Wn=m(ye),Gn=m(ye),ke=m(),ct=m(ke),jt=m(ke),ce=m(),Ne=m(ce),le=m(),ae=m(),Zt=m(),Ue=m(Zt),ft=m(),h={comment:at,lineComment:m(at),blockComment:m(at),docComment:m(at),name:ye,variableName:m(ye),typeName:Wn,tagName:m(Wn),propertyName:Gn,attributeName:m(Gn),className:m(ye),labelName:m(ye),namespace:m(ye),macroName:m(ye),literal:ke,string:ct,docString:m(ct),character:m(ct),attributeValue:m(ct),number:jt,integer:m(jt),float:m(jt),bool:m(ke),regexp:m(ke),escape:m(ke),color:m(ke),url:m(ke),keyword:le,self:m(le),null:m(le),atom:m(le),unit:m(le),modifier:m(le),operatorKeyword:m(le),controlKeyword:m(le),definitionKeyword:m(le),moduleKeyword:m(le),operator:ae,derefOperator:m(ae),arithmeticOperator:m(ae),logicOperator:m(ae),bitwiseOperator:m(ae),compareOperator:m(ae),updateOperator:m(ae),definitionOperator:m(ae),typeOperator:m(ae),controlOperator:m(ae),punctuation:Zt,separator:m(Zt),bracket:Ue,angleBracket:m(Ue),squareBracket:m(Ue),paren:m(Ue),brace:m(Ue),content:ce,heading:Ne,heading1:m(Ne),heading2:m(Ne),heading3:m(Ne),heading4:m(Ne),heading5:m(Ne),heading6:m(Ne),contentSeparator:m(ce),list:m(ce),quote:m(ce),emphasis:m(ce),strong:m(ce),link:m(ce),monospace:m(ce),strikethrough:m(ce),inserted:m(),deleted:m(),changed:m(),invalid:m(),meta:ft,documentMeta:m(ft),annotation:m(ft),processingInstruction:m(ft),definition:fe.defineModifier(),constant:fe.defineModifier(),function:fe.defineModifier(),standard:fe.defineModifier(),local:fe.defineModifier(),special:fe.defineModifier()};Ur([{tag:h.link,class:"tok-link"},{tag:h.heading,class:"tok-heading"},{tag:h.emphasis,class:"tok-emphasis"},{tag:h.strong,class:"tok-strong"},{tag:h.keyword,class:"tok-keyword"},{tag:h.atom,class:"tok-atom"},{tag:h.bool,class:"tok-bool"},{tag:h.url,class:"tok-url"},{tag:h.labelName,class:"tok-labelName"},{tag:h.inserted,class:"tok-inserted"},{tag:h.deleted,class:"tok-deleted"},{tag:h.literal,class:"tok-literal"},{tag:h.string,class:"tok-string"},{tag:h.number,class:"tok-number"},{tag:[h.regexp,h.escape,h.special(h.string)],class:"tok-string2"},{tag:h.variableName,class:"tok-variableName"},{tag:h.local(h.variableName),class:"tok-variableName tok-local"},{tag:h.definition(h.variableName),class:"tok-variableName tok-definition"},{tag:h.special(h.variableName),class:"tok-variableName2"},{tag:h.definition(h.propertyName),class:"tok-propertyName tok-definition"},{tag:h.typeName,class:"tok-typeName"},{tag:h.namespace,class:"tok-namespace"},{tag:h.className,class:"tok-className"},{tag:h.macroName,class:"tok-macroName"},{tag:h.propertyName,class:"tok-propertyName"},{tag:h.operator,class:"tok-operator"},{tag:h.comment,class:"tok-comment"},{tag:h.meta,class:"tok-meta"},{tag:h.invalid,class:"tok-invalid"},{tag:h.punctuation,class:"tok-punctuation"}]);var Ut;const Ie=new w;function Hr(n){return X.define({combine:n?e=>e.concat(n):void 0})}const Ks=new w;class te{constructor(e,t,r=[],i=""){this.data=e,this.name=i,Ge.prototype.hasOwnProperty("tree")||Object.defineProperty(Ge.prototype,"tree",{get(){return j(this)}}),this.parser=t,this.extension=[we.of(this),Ge.languageData.of((s,o,l)=>{let a=Kn(s,o,l),c=a.type.prop(Ie);if(!c)return[];let f=s.facet(c),u=a.type.prop(Ks);if(u){let d=a.resolve(o-a.from,l);for(let p of u)if(p.test(d,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(f)}}return f})].concat(r)}isActiveAt(e,t,r=-1){return Kn(e,t,r).type.prop(Ie)==this.data}findRegions(e){let t=e.facet(we);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Ie)==this.data){r.push({from:o,to:o+s.length});return}let l=s.prop(w.mounted);if(l){if(l.tree.prop(Ie)==this.data){if(l.overlay)for(let a of l.overlay)r.push({from:a.from+o,to:a.to+o});else r.push({from:o,to:o+s.length});return}else if(l.overlay){let a=r.length;if(i(l.tree,l.overlay[0].from+o),r.length>a)return}}for(let a=0;a<s.children.length;a++){let c=s.children[a];c instanceof E&&i(c,s.positions[a]+o)}};return i(j(e),0),r}get allowsNesting(){return!0}}te.setState=Y.define();function Kn(n,e,t){let r=n.facet(we),i=j(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,D.ExcludeBuffers))s.type.isTop&&(i=s);return i}class en extends te{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=Hr(e.languageData);return new en(t,e.parser.configure({props:[Ie.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new en(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function j(n){let e=n.field(te.state,!1);return e?e.tree:E.empty}class qs{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let He=null;class Fe{constructor(e,t,r=[],i,s,o,l,a){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Fe(e,t,[],E.empty,0,r,[],null)}startParse(){return this.parser.startParse(new qs(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=E.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(ge.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(ge.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=He;He=this;try{return e()}finally{He=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=qn(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,f,u,d)=>a.push({fromA:c,toA:f,fromB:u,toB:d})),r=ge.applyChanges(r,a),i=E.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let f=e.mapPos(c.from,1),u=e.mapPos(c.to,-1);f<u&&l.push({from:f,to:u})}}}return new Fe(this.parser,t,r,i,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=qn(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends zr{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let a=He;if(a){for(let c of i)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new E(G.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return He}}function qn(n,e,t){return ge.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ve{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Ve(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Fe.create(e.facet(we).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Ve(r)}}te.state=Oe.define({create:Ve.init,update(n,e){for(let t of e.effects)if(t.is(te.setState))return t.value;return e.startState.facet(we)!=e.state.facet(we)?Ve.init(e.state):n.apply(e)}});let $r=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&($r=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Ht=typeof navigator<"u"&&(!((Ut=navigator.scheduling)===null||Ut===void 0)&&Ut.isInputPending)?()=>navigator.scheduling.isInputPending():null,Js=Tt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(te.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(te.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=$r(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(te.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Ht?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>Ht&&Ht()||Date.now()>o,i+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:te.setState.of(new Ve(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>kt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),we=X.define({combine(n){return n.length?n[0]:null},enables:n=>[te.state,Js,V.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class Qs{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const Wr=X.define(),Et=X.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function _e(n){let e=n.facet(Et);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Qe(n,e){let t="",r=n.tabSize,i=n.facet(Et)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function gn(n,e){n instanceof Ge&&(n=new Ot(n));for(let r of n.state.facet(Wr)){let i=r(n,e);if(i!==void 0)return i}let t=j(n.state);return t.length>=e?Ys(n,t,e):null}class Ot{constructor(e,t={}){this.state=e,this.options=t,this.unit=_e(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return Mt(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Xs=new w;function Ys(n,e,t){let r=e.resolveStack(t),i=r.node.enterUnfinishedNodesBefore(t);if(i!=r.node){let s=[];for(let o=i;o!=r.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return Gr(r,n,t)}function Gr(n,e,t){for(let r=n;r;r=r.next){let i=eo(r.node);if(i)return i(yn.create(e,t,r))}return 0}function Zs(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function eo(n){let e=n.type.prop(Xs);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(w.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>Kr(o,!0,1,void 0,s&&!Zs(o)?i.from:void 0)}return n.parent==null?to:null}function to(){return 0}class yn extends Ot{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new yn(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(no(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return Gr(this.context.next,this.base,this.pos)}}function no(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function ro(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==r)return null;if(!a.type.isSkipped)return a.from<o?t:null;l=a.to}}function xc({closing:n,align:e=!0,units:t=1}){return r=>Kr(r,e,t,n)}function Kr(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,l=r&&s.slice(o,o+r.length)==r||i==n.pos+o,a=e?ro(n):null;return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}const vc=n=>n.baseIndent;function wc({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const io=200;function Sc(){return Ge.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+io)return n;let s=t.sliceString(i.from,r);if(!e.some(c=>c.test(s)))return n;let{state:o}=n,l=-1,a=[];for(let{head:c}of o.selection.ranges){let f=o.doc.lineAt(c);if(f.from==l)continue;l=f.from;let u=gn(o,f.from);if(u==null)continue;let d=/^\s*/.exec(f.text)[0],p=Qe(o,u);d!=p&&a.push({from:f.from,to:f.from+d.length,insert:p})}return a.length?[n,{changes:a,sequential:!0}]:n})}const so=X.define(),oo=new w;function Cc(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function lo(n,e,t){let r=j(n);if(r.length<t)return null;let i=r.resolveStack(t,1),s=null;for(let o=i;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(s&&l.from<e)break;let a=l.type.prop(oo);if(a&&(l.to<r.length-50||r.length==n.doc.length||!ao(l))){let c=a(l,n);c&&c.from<=t&&c.from>=e&&c.to>t&&(s=c)}}return s}function ao(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function wt(n,e,t){for(let r of n.facet(so)){let i=r(n,e,t);if(i)return i}return lo(n,e,t)}function qr(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const Bt=Y.define({map:qr}),nt=Y.define({map:qr});function Jr(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const Ee=Oe.define({create(){return H.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(Bt)&&!co(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(Yr),i=r?H.replace({widget:new go(r(e.state,t.value))}):Jn;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(nt)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,s)=>{i<r&&s>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return n},provide:n=>V.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Jn.range(r,i))}return H.set(e,!0)}});function St(n,e,t){var r;let i=null;return(r=n.field(Ee,!1))===null||r===void 0||r.between(e,t,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function co(n,e,t){let r=!1;return n.between(e,e,(i,s)=>{i==e&&s==t&&(r=!0)}),r}function Qr(n,e){return n.field(Ee,!1)?e:e.concat(Y.appendConfig.of(Zr()))}const fo=n=>{for(let e of Jr(n)){let t=wt(n.state,e.from,e.to);if(t)return n.dispatch({effects:Qr(n.state,[Bt.of(t),Xr(n,t)])}),!0}return!1},uo=n=>{if(!n.state.field(Ee,!1))return!1;let e=[];for(let t of Jr(n)){let r=St(n.state,t.from,t.to);r&&e.push(nt.of(r),Xr(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Xr(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return V.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const ho=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),s=wt(e,i.from,i.to);s&&t.push(Bt.of(s)),r=(s?n.lineBlockAt(s.to):i).to+1}return t.length&&n.dispatch({effects:Qr(n.state,t)}),!!t.length},po=n=>{let e=n.state.field(Ee,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(nt.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},Ac=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:fo},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:uo},{key:"Ctrl-Alt-[",run:ho},{key:"Ctrl-Alt-]",run:po}],mo={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Yr=X.define({combine(n){return It(n,mo)}});function Zr(n){return[Ee,ko]}function ei(n,e){let{state:t}=n,r=t.facet(Yr),i=o=>{let l=n.lineBlockAt(n.posAtDOM(o.target)),a=St(n.state,l.from,l.to);a&&n.dispatch({effects:nt.of(a)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const Jn=H.replace({widget:new class extends cn{toDOM(n){return ei(n,null)}}});class go extends cn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return ei(e,this.value)}}const yo={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class $t extends is{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function Pc(n={}){let e=Object.assign(Object.assign({},yo),n),t=new $t(e,!0),r=new $t(e,!1),i=Tt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(we)!=o.state.facet(we)||o.startState.field(Ee,!1)!=o.state.field(Ee,!1)||j(o.startState)!=j(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Nr;for(let a of o.viewportLineBlocks){let c=St(o.state,a.from,a.to)?r:wt(o.state,a.from,a.to)?t:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:s}=e;return[i,rs({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(i))===null||l===void 0?void 0:l.markers)||Tr.empty},initialSpacer(){return new $t(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let c=St(o.state,l.from,l.to);if(c)return o.dispatch({effects:nt.of(c)}),!0;let f=wt(o.state,l.from,l.to);return f?(o.dispatch({effects:Bt.of(f)}),!0):!1}})}),Zr()]}const ko=V.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class rt{constructor(e,t){this.specs=e;let r;function i(l){let a=On.newName();return(r||(r=Object.create(null)))["."+a]=l,a}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof te?l=>l.prop(Ie)==o.data:o?l=>l==o:void 0,this.style=Ur(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=r?new On(r):null,this.themeType=t.themeType}static define(e,t){return new rt(e,t||{})}}const tn=X.define(),ti=X.define({combine(n){return n.length?[n[0]]:null}});function mt(n){let e=n.facet(tn);return e.length?e:n.facet(ti)}function bo(n,e){let t=[vo],r;return n instanceof rt&&(n.module&&t.push(V.styleModule.of(n.module)),r=n.themeType),e?.fallback?t.push(ti.of(n)):r?t.push(tn.computeN([V.darkTheme],i=>i.facet(V.darkTheme)==(r=="dark")?[n]:[])):t.push(tn.of(n)),t}function Tc(n,e,t){let r=mt(n),i=null;if(r){for(let s of r)if(!s.scope||t){let o=s.style(e);o&&(i=i?i+" "+o:o)}}return i}class xo{constructor(e){this.markCache=Object.create(null),this.tree=j(e.state),this.decorations=this.buildDeco(e,mt(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=j(e.state),r=mt(e.state),i=r!=mt(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return H.none;let r=new Nr;for(let{from:i,to:s}of e.visibleRanges)$s(this.tree,t,(o,l,a)=>{r.add(o,l,this.markCache[a]||(this.markCache[a]=H.mark({class:a})))},i,s);return r.finish()}}const vo=Nt.high(Tt.fromClass(xo,{decorations:n=>n.decorations})),Nc=rt.define([{tag:h.meta,color:"#404740"},{tag:h.link,textDecoration:"underline"},{tag:h.heading,textDecoration:"underline",fontWeight:"bold"},{tag:h.emphasis,fontStyle:"italic"},{tag:h.strong,fontWeight:"bold"},{tag:h.strikethrough,textDecoration:"line-through"},{tag:h.keyword,color:"#708"},{tag:[h.atom,h.bool,h.url,h.contentSeparator,h.labelName],color:"#219"},{tag:[h.literal,h.inserted],color:"#164"},{tag:[h.string,h.deleted],color:"#a11"},{tag:[h.regexp,h.escape,h.special(h.string)],color:"#e40"},{tag:h.definition(h.variableName),color:"#00f"},{tag:h.local(h.variableName),color:"#30a"},{tag:[h.typeName,h.namespace],color:"#085"},{tag:h.className,color:"#167"},{tag:[h.special(h.variableName),h.macroName],color:"#256"},{tag:h.definition(h.propertyName),color:"#00c"},{tag:h.comment,color:"#940"},{tag:h.invalid,color:"#f00"}]),wo=V.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),ni=1e4,ri="()[]{}",ii=X.define({combine(n){return It(n,{afterCursor:!0,brackets:ri,maxScanDistance:ni,renderMatch:Ao})}}),So=H.mark({class:"cm-matchingBracket"}),Co=H.mark({class:"cm-nonmatchingBracket"});function Ao(n){let e=[],t=n.matched?So:Co;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const Po=Oe.define({create(){return H.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(ii);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=he(e.state,i.head,-1,r)||i.head>0&&he(e.state,i.head-1,1,r)||r.afterCursor&&(he(e.state,i.head,1,r)||i.head<e.state.doc.length&&he(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return H.set(t,!0)},provide:n=>V.decorations.from(n)}),To=[Po,wo];function Ic(n={}){return[ii.of(n),To]}const No=new w;function nn(n,e,t){let r=n.prop(e<0?w.openedBy:w.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function rn(n){let e=n.type.prop(No);return e?e(n.node):n}function he(n,e,t,r={}){let i=r.maxScanDistance||ni,s=r.brackets||ri,o=j(n),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let c=nn(a.type,t,s);if(c&&a.from<a.to){let f=rn(a);if(f&&(t>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return Io(n,e,t,a,f,c,s)}}return Mo(n,e,t,o,l.type,i,s)}function Io(n,e,t,r,i,s,o){let l=r.parent,a={from:i.from,to:i.to},c=0,f=l?.cursor();if(f&&(t<0?f.childBefore(r.from):f.childAfter(r.to)))do if(t<0?f.to<=r.from:f.from>=r.to){if(c==0&&s.indexOf(f.type.name)>-1&&f.from<f.to){let u=rn(f);return{start:a,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(nn(f.type,t,o))c++;else if(nn(f.type,-t,o)){if(c==0){let u=rn(f);return{start:a,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}c--}}while(t<0?f.prevSibling():f.nextSibling());return{start:a,matched:!1}}function Mo(n,e,t,r,i,s,o){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},f=n.doc.iterRange(e,t>0?n.doc.length:0),u=0;for(let d=0;!f.next().done&&d<=s;){let p=f.value;t<0&&(d+=p.length);let g=e+d*t;for(let b=t>0?0:p.length-1,O=t>0?p.length:-1;b!=O;b+=t){let M=o.indexOf(p[b]);if(!(M<0||r.resolveInner(g+b,1).type!=i))if(M%2==0==t>0)u++;else{if(u==1)return{start:c,end:{from:g+b,to:g+b+1},matched:M>>1==a>>1};u--}}t>0&&(d+=p.length)}return f.done?{start:c,matched:!1}:null}function Qn(n,e,t,r=0,i=0){e==null&&(e=n.search(/[^\s\u00a0]/),e==-1&&(e=n.length));let s=i;for(let o=r;o<e;o++)n.charCodeAt(o)==9?s+=t-s%t:s++;return s}class si{constructor(e,t,r,i){this.string=e,this.tabSize=t,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),r;if(typeof e=="string"?r=t==e:r=t&&(e instanceof RegExp?e.test(t):e(t)),r)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Qn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Qn(this.string,null,this.tabSize)}match(e,t,r){if(typeof e=="string"){let i=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function _o(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||Eo,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||xn}}function Eo(n){if(typeof n!="object")return n;let e={};for(let t in n){let r=n[t];e[t]=r instanceof Array?r.slice():r}return e}const Xn=new WeakMap;class kn extends te{constructor(e){let t=Hr(e.languageData),r=_o(e),i,s=new class extends zr{createParse(o,l,a){return new Bo(i,o,l,a)}};super(t,s,[Wr.of((o,l)=>this.getIndent(o,l))],e.name),this.topNode=Ro(t),i=this,this.streamParser=r,this.stateAfter=new w({perNode:!0}),this.tokenTable=e.tokenTable?new ci(r.tokenTable):Lo}static define(e){return new kn(e)}getIndent(e,t){let r=j(e.state),i=r.resolve(t);for(;i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;let s,{overrideIndentation:o}=e.options;o&&(s=Xn.get(e.state),s!=null&&s<t-1e4&&(s=void 0));let l=bn(this,r,0,i.from,s??t),a,c;if(l?(c=l.state,a=l.pos+1):(c=this.streamParser.startState(e.unit),a=0),t-a>1e4)return null;for(;a<t;){let u=e.state.doc.lineAt(a),d=Math.min(t,u.to);if(u.length){let p=o?o(u.from):-1,g=new si(u.text,e.state.tabSize,e.unit,p<0?void 0:p);for(;g.pos<d-u.from;)li(this.streamParser.token,g,c)}else this.streamParser.blankLine(c,e.unit);if(d==t)break;a=u.to+1}let f=e.lineAt(t);return o&&s==null&&Xn.set(e.state,f.from),this.streamParser.indent(c,/^\s*(.*)/.exec(f.text)[1],e)}get allowsNesting(){return!1}}function bn(n,e,t,r,i){let s=t>=r&&t+e.length<=i&&e.prop(n.stateAfter);if(s)return{state:n.streamParser.copyState(s),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=t+e.positions[o],c=l instanceof E&&a<i&&bn(n,l,a,r,i);if(c)return c}return null}function oi(n,e,t,r,i){if(i&&t<=0&&r>=e.length)return e;!i&&e.type==n.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],l=e.children[s],a;if(o<r&&l instanceof E){if(!(a=oi(n,l,t-o,r-o,i)))break;return i?new E(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),o+a.length):a}}return null}function Oo(n,e,t,r){for(let i of e){let s=i.from+(i.openStart?25:0),o=i.to-(i.openEnd?25:0),l=s<=t&&o>t&&bn(n,i.tree,0-i.offset,t,o),a;if(l&&(a=oi(n,i.tree,t+i.offset,l.pos+i.offset,!1)))return{state:l.state,tree:a}}return{state:n.streamParser.startState(r?_e(r):4),tree:E.empty}}class Bo{constructor(e,t,r,i){this.lang=e,this.input=t,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=Fe.get(),o=i[0].from,{state:l,tree:a}=Oo(e,r,o,s?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let c=0;c<a.children.length;c++)this.chunks.push(a.children[c]),this.chunkPos.push(a.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(_e(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Fe.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(t,this.chunkStart+2048);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let r=t.indexOf(`
`);r>-1&&(t=t.slice(0,r))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),r=e+t.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(t=t.slice(0,s-(r-t.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,l=this.lineAfter(o);t+=l,r=o+l.length}return{line:t,end:r}}skipGapsTo(e,t,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+t;if(r>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;t+=o-i}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,r,i,s){if(this.ranges.length>1){s=this.skipGapsTo(t,s,1),t+=s;let o=this.chunk.length;s=this.skipGapsTo(r,s,-1),r+=s,i+=this.chunk.length-o}return this.chunk.push(e,t,r,i),s}parseLine(e){let{line:t,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new si(t,e?e.state.tabSize:4,e?_e(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=li(s.token,o,this.state);if(l&&(i=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,4,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=E.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Do,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new E(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new E(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function li(n,e,t){e.start=e.pos;for(let r=0;r<10;r++){let i=n(e,t);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const xn=Object.create(null),Xe=[G.none],Do=new hn(Xe),Yn=[],Zn=Object.create(null),ai=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ai[n]=fi(xn,e);class ci{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),ai)}resolve(e){return e?this.table[e]||(this.table[e]=fi(this.extra,e)):0}}const Lo=new ci(xn);function Wt(n,e){Yn.indexOf(n)>-1||(Yn.push(n),console.warn(e))}function fi(n,e){let t=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let f=n[c]||h[c];f?typeof f=="function"?a.length?a=a.map(f):Wt(c,`Modifier ${c} used at start of tag`):a.length?Wt(c,`Tag ${c} used as modifier`):a=Array.isArray(f)?f:[f]:Wt(c,`Unknown highlighting tag ${c}`)}for(let c of a)t.push(c)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(l=>l.id),s=Zn[i];if(s)return s.id;let o=Zn[i]=G.define({id:Xe.length,name:r,props:[Us({[r]:t})]});return Xe.push(o),o.id}function Ro(n){let e=G.define({id:Xe.length,name:"Document",props:[Ie.add(()=>n)],top:!0});return Xe.push(e),e}yt.RTL,yt.LTR;const Fo="_modelCursor_1mtn0_1",Mc={modelCursor:Fo};class ui{constructor(e,t,r,i){this.state=e,this.pos=t,this.explicit=r,this.view=i,this.abortListeners=[]}tokenBefore(e){let t=j(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(hi(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function er(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Vo(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=er(e)+er(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function zo(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Vo(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}function _c(n,e){return t=>{for(let r=j(t.state).resolveInner(t.pos,-1);r;r=r.parent){if(n.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(t)}}class tr{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function xe(n){return n.selection.main.from}function hi(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const vn=un.define();function jo(n,e,t,r){let{main:i}=n.selection,s=t-i.from,o=r-i.from;return Object.assign(Object.assign({},n.changeByRange(l=>l!=i&&t!=r&&n.sliceDoc(l.from+s,l.from+o)!=n.sliceDoc(t,r)?{range:l}:{changes:{from:l.from+s,to:r==i.from?l.to:l.from+o,insert:e},range:v.cursor(l.from+s+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const nr=new WeakMap;function Uo(n){if(!Array.isArray(n))return n;let e=nr.get(n);return e||nr.set(n,e=zo(n)),e}const Ct=Y.define(),Ye=Y.define();class Ho{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=ie(e,t),i=be(r);this.chars.push(r);let s=e.slice(t,t+i),o=s.toUpperCase();this.folded.push(ie(o==s?s.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:o}=this;if(t.length==1){let x=ie(e,0),T=be(x),L=T==e.length?0:-100;if(x!=t[0])if(x==r[0])L+=-200;else return null;return this.ret(L,[0,T])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,c=0;if(l<0){for(let x=0,T=Math.min(e.length,200);x<T&&c<a;){let L=ie(e,x);(L==t[c]||L==r[c])&&(i[c++]=x),x+=be(L)}if(c<a)return null}let f=0,u=0,d=!1,p=0,g=-1,b=-1,O=/[a-z]/.test(e),M=!0;for(let x=0,T=Math.min(e.length,200),L=0;x<T&&u<a;){let k=ie(e,x);l<0&&(f<a&&k==t[f]&&(s[f++]=x),p<a&&(k==t[p]||k==r[p]?(p==0&&(g=x),b=x+1,p++):p=0));let N,y=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(N=_r(k))!=N.toLowerCase()?1:N!=N.toUpperCase()?2:0;(!x||y==1&&O||L==0&&y!=0)&&(t[u]==k||r[u]==k&&(d=!0)?o[u++]=x:o.length&&(M=!1)),L=y,x+=be(k)}return u==a&&o[0]==0&&M?this.result(-100+(d?-200:0),o,e):p==a&&g==0?this.ret(-200-e.length+(b==e.length?0:-100),[0,b]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[g,b]):u==a?this.result(-100+(d?-200:0)+-700+(M?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],s=0;for(let o of t){let l=o+(this.astral?be(ie(r,o)):1);s&&i[s-1]==o?i[s-1]=l:(i[s++]=o,i[s++]=l)}return this.ret(e-r.length,i)}}class $o{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const U=X.define({combine(n){return It(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Wo,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>rr(e(r),t(r)),optionClass:(e,t)=>r=>rr(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function rr(n,e){return n?e?n+" "+e:n:e}function Wo(n,e,t,r,i,s){let o=n.textDirection==yt.RTL,l=o,a=!1,c="top",f,u,d=e.left-i.left,p=i.right-e.right,g=r.right-r.left,b=r.bottom-r.top;if(l&&d<Math.min(g,p)?l=!1:!l&&p<Math.min(g,d)&&(l=!0),g<=(l?d:p))f=Math.max(i.top,Math.min(t.top,i.bottom-b))-e.top,u=Math.min(400,l?d:p);else{a=!0,u=Math.min(400,(o?e.right:i.right-e.left)-30);let x=i.bottom-e.bottom;x>=b||x>e.top?f=t.bottom-e.top:(c="bottom",f=e.bottom-t.top)}let O=(e.bottom-e.top)/s.offsetHeight,M=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${f/O}px; max-width: ${u/M}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function Go(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let c=0;c<s.length;){let f=s[c++],u=s[c++];f>a&&o.appendChild(document.createTextNode(l.slice(a,f)));let d=o.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(l.slice(f,u))),d.className="cm-completionMatchedText",a=u}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function Gt(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class Ko{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:o}=i.open,l=e.state.facet(U);this.optionContent=Go(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Gt(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=e.state.field(t).open;for(let f=a.target,u;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(u=/-(\d+)$/.exec(f.id))&&+u[1]<c.length){this.applyCompletion(e,c[+u[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(U).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Ye.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:l}=r.open;(!i.open||i.open.options!=s)&&(this.range=Gt(s.length,o,e.state.facet(U).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),l!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Gt(t.options.length,t.selected,this.view.state.facet(U).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>kt(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&Jo(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(U).positionInfo(this.view,t,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=r.from;o<r.to;o++){let{completion:l,match:a}=e[o],{section:c}=l;if(c){let d=typeof c=="string"?c:c.name;if(d!=s&&(o>r.from||r.from==0))if(s=d,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let p=i.appendChild(document.createElement("completion-section"));p.textContent=d}}const f=i.appendChild(document.createElement("li"));f.id=t+"-"+o,f.setAttribute("role","option");let u=this.optionClass(l);u&&(f.className=u);for(let d of this.optionContent){let p=d(l,this.view.state,this.view,a);p&&f.appendChild(p)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function qo(n,e){return t=>new Ko(t,n,e)}function Jo(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function ir(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function Qo(n,e){let t=[],r=null,i=c=>{t.push(c);let{section:f}=c.completion;if(f){r||(r=[]);let u=typeof f=="string"?f:f.name;r.some(d=>d.name==u)||r.push(typeof f=="string"?{name:u}:f)}},s=e.facet(U);for(let c of n)if(c.hasResult()){let f=c.result.getMatch;if(c.result.filter===!1)for(let u of c.result.options)i(new tr(u,c.source,f?f(u):[],1e9-t.length));else{let u=e.sliceDoc(c.from,c.to),d,p=s.filterStrict?new $o(u):new Ho(u);for(let g of c.result.options)if(d=p.match(g.label)){let b=g.displayLabel?f?f(g,d.matched):[]:d.matched;i(new tr(g,c.source,b,d.score+(g.boost||0)))}}}if(r){let c=Object.create(null),f=0,u=(d,p)=>{var g,b;return((g=d.rank)!==null&&g!==void 0?g:1e9)-((b=p.rank)!==null&&b!==void 0?b:1e9)||(d.name<p.name?-1:1)};for(let d of r.sort(u))f-=1e5,c[d.name]=f;for(let d of t){let{section:p}=d.completion;p&&(d.score+=c[typeof p=="string"?p:p.name])}}let o=[],l=null,a=s.compareCompletions;for(let c of t.sort((f,u)=>u.score-f.score||a(f.completion,u.completion))){let f=c.completion;!l||l.label!=f.label||l.detail!=f.detail||l.type!=null&&f.type!=null&&l.type!=f.type||l.apply!=f.apply||l.boost!=f.boost?o.push(c):ir(c.completion)>ir(l)&&(o[o.length-1]=c),l=c.completion}return o}class Le{constructor(e,t,r,i,s,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Le(this.options,sr(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s){let o=Qo(e,t);if(!o.length)return i&&e.some(a=>a.state==1)?new Le(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let l=t.facet(U).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let a=i.options[i.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==a){l=c;break}}return new Le(o,sr(r,l),{pos:e.reduce((a,c)=>c.hasResult()?Math.min(a,c.from):a,1e8),create:nl,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new Le(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class At{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new At(el,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(U),s=(r.override||t.languageDataAt("autocomplete",xe(t)).map(Uo)).map(l=>(this.active.find(c=>c.source==l)||new Q(l,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,a)=>l==this.active[a])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Xo(s,this.active)?o=Le.build(s,t,this.id,o,r):o&&o.disabled&&!s.some(l=>l.state==1)&&(o=null),!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Q(l.source,0):l));for(let l of e.effects)l.is(mi)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new At(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Yo:Zo}}function Xo(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}const Yo={"aria-autocomplete":"list"},Zo={};function sr(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const el=[];function di(n,e){if(n.isUserEvent("input.complete")){let r=n.annotation(vn);if(r&&e.activateOnCompletion(r))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class Q{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=di(e,t),i=this;(r&8||r&16&&this.touches(e))&&(i=new Q(i.source,0)),r&4&&i.state==0&&(i=new Q(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(Ct))i=new Q(i.source,1,s.value?xe(e.state):-1);else if(s.is(Ye))i=new Q(i.source,0);else if(s.is(pi))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,t){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Q(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(xe(e.state))}}class Re extends Q{constructor(e,t,r,i,s){super(e,2,t),this.result=r,this.from=i,this.to=s}hasResult(){return!0}updateFor(e,t){var r;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=xe(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>o||!i||t&2&&xe(e.startState)==this.from)return new Q(this.source,t&4?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return tl(i.validFor,e.state,s,o)?new Re(this.source,a,i,s,o):i.update&&(i=i.update(i,s,o,new ui(e.state,l,a>=0)))?new Re(this.source,a,i,i.from,(r=i.to)!==null&&r!==void 0?r:xe(e.state)):new Q(this.source,1,a)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Re(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Q(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function tl(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):hi(n,!0).test(i)}const pi=Y.define({map(n,e){return n.map(t=>t.map(e))}}),mi=Y.define(),q=Oe.define({create(){return At.start()},update(n,e){return n.update(e)},provide:n=>[os.from(n,e=>e.tooltip),V.contentAttributes.from(n,e=>e.attrs)]});function wn(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(q).active.find(i=>i.source==e.source);return r instanceof Re?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},jo(n.state,t,r.from,r.to)),{annotations:vn.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}const nl=qo(q,wn);function ut(n,e="option"){return t=>{let r=t.state.field(q,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(U).interactionDelay)return!1;let i=1,s;e=="page"&&(s=Mr(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,l=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:mi.of(l)}),!0}}const rl=n=>{let e=n.state.field(q,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(U).interactionDelay?!1:wn(n,e.open.options[e.open.selected])},il=n=>n.state.field(q,!1)?(n.dispatch({effects:Ct.of(!0)}),!0):!1,sl=n=>{let e=n.state.field(q,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Ye.of(null)}),!0)};class ol{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const ll=50,al=1e3,cl=Tt.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(q).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(q),t=n.state.facet(U);if(!n.selectionSet&&!n.docChanged&&n.startState.field(q)==e)return;let r=n.transactions.some(s=>{let o=di(s,t);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.updates.length+n.transactions.length>ll&&Date.now()-o.time>al){for(let l of o.context.abortListeners)try{l()}catch(a){kt(this.view.state,a)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(o=>o.is(Ct)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.state==1&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of n.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(q);for(let t of e.active)t.state==1&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=xe(e),r=new ui(e,t,n.explicitPos==t,this.view),i=new ol(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Ye.of(null)}),kt(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(U).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(U);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let o=new Re(i.active.source,i.active.explicitPos,i.done,i.done.from,(n=i.done.to)!==null&&n!==void 0?n:xe(i.updates.length?i.updates[0].startState:this.view.state));for(let l of i.updates)o=o.update(l,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(q).active.find(o=>o.source==i.active.source);if(s&&s.state==1)if(i.done==null){let o=new Q(i.active.source,0);for(let l of i.updates)o=o.update(l,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:pi.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(q,!1);if(e&&e.tooltip&&this.view.state.facet(U).closeOnBlur){let t=e.open&&Mr(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Ye.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ct.of(!1)}),20),this.composing=0}}}),fl=typeof navigator=="object"&&/Win/.test(navigator.platform),ul=Nt.highest(V.domEventHandlers({keydown(n,e){let t=e.state.field(q,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(fl&&n.altKey)||n.metaKey)return!1;let r=t.open.options[t.open.selected],i=t.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&wn(e,r),!1}})),gi=V.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class hl{constructor(e,t,r,i){this.field=e,this.line=t,this.from=r,this.to=i}}class Sn{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,Jt.TrackDel),r=e.mapPos(this.to,1,Jt.TrackDel);return t==null||r==null?null:new Sn(this.field,t,r)}}class Cn{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],i=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let a of this.lines){if(r.length){let c=o,f=/^\t*/.exec(a)[0].length;for(let u=0;u<f;u++)c+=e.facet(Et);i.push(t+c.length-f),a=c+a.slice(f)}r.push(a),t+=a.length+1}let l=this.fieldPositions.map(a=>new Sn(a.field,i[a.line]+a.from,i[a.line]+a.to));return{text:r,ranges:l}}static parse(e){let t=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let l=s[1]?+s[1]:null,a=s[2]||s[3]||"",c=-1,f=a.replace(/\\[{}]/g,u=>u[1]);for(let u=0;u<t.length;u++)(l!=null?t[u].seq==l:f&&t[u].name==f)&&(c=u);if(c<0){let u=0;for(;u<t.length&&(l==null||t[u].seq!=null&&t[u].seq<l);)u++;t.splice(u,0,{seq:l,name:f}),c=u;for(let d of i)d.field>=c&&d.field++}i.push(new hl(c,r.length,s.index,s.index+f.length)),o=o.slice(0,s.index)+a+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(l,a,c)=>{for(let f of i)f.line==r.length&&f.from>c&&(f.from--,f.to--);return a}),r.push(o)}return new Cn(r,i)}}let dl=H.widget({widget:new class extends cn{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),pl=H.mark({class:"cm-snippetField"});class ze{constructor(e,t){this.ranges=e,this.active=t,this.deco=H.set(e.map(r=>(r.from==r.to?dl:pl).range(r.from,r.to)))}map(e){let t=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;t.push(i)}return new ze(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(r=>r.field==this.active&&r.from<=t.from&&r.to>=t.to))}}const it=Y.define({map(n,e){return n&&n.map(e)}}),ml=Y.define(),Ze=Oe.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(it))return t.value;if(t.is(ml)&&n)return new ze(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>V.decorations.from(n,e=>e?e.deco:H.none)});function An(n,e){return v.create(n.filter(t=>t.field==e).map(t=>v.range(t.from,t.to)))}function gl(n){let e=Cn.parse(n);return(t,r,i,s)=>{let{text:o,ranges:l}=e.instantiate(t.state,i),a={changes:{from:i,to:s,insert:fn.of(o)},scrollIntoView:!0,annotations:r?[vn.of(r),dt.userEvent.of("input.complete")]:void 0};if(l.length&&(a.selection=An(l,0)),l.some(c=>c.field>0)){let c=new ze(l,0),f=a.effects=[it.of(c)];t.state.field(Ze,!1)===void 0&&f.push(Y.appendConfig.of([Ze,vl,wl,gi]))}t.dispatch(t.state.update(a))}}function yi(n){return({state:e,dispatch:t})=>{let r=e.field(Ze,!1);if(!r||n<0&&r.active==0)return!1;let i=r.active+n,s=n>0&&!r.ranges.some(o=>o.field==i+n);return t(e.update({selection:An(r.ranges,i),effects:it.of(s?null:new ze(r.ranges,i)),scrollIntoView:!0})),!0}}const yl=({state:n,dispatch:e})=>n.field(Ze,!1)?(e(n.update({effects:it.of(null)})),!0):!1,kl=yi(1),bl=yi(-1),xl=[{key:"Tab",run:kl,shift:bl},{key:"Escape",run:yl}],or=X.define({combine(n){return n.length?n[0]:xl}}),vl=Nt.highest(Ir.compute([or],n=>n.facet(or)));function Ec(n,e){return Object.assign(Object.assign({},e),{apply:gl(n)})}const wl=V.domEventHandlers({mousedown(n,e){let t=e.state.field(Ze,!1),r;if(!t||(r=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let i=t.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==t.active?!1:(e.dispatch({selection:An(t.ranges,i.field),effects:it.of(t.ranges.some(s=>s.field>i.field)?new ze(t.ranges,i.field):null),scrollIntoView:!0}),!0)}}),et={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Me=Y.define({map(n,e){let t=e.mapPos(n,-1,Jt.TrackAfter);return t??void 0}}),Pn=new class extends ss{};Pn.startSide=1;Pn.endSide=-1;const ki=Oe.define({create(){return Tr.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(Me)&&(n=n.update({add:[Pn.range(t.value,t.value+1)]}));return n}});function Oc(){return[Cl,ki]}const Kt="()[]{}<>";function bi(n){for(let e=0;e<Kt.length;e+=2)if(Kt.charCodeAt(e)==n)return Kt.charAt(e+1);return _r(n<128?n:n+1)}function xi(n,e){return n.languageDataAt("closeBrackets",e)[0]||et}const Sl=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Cl=V.inputHandler.of((n,e,t,r)=>{if((Sl?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&be(ie(r,0))==1||e!=i.from||t!=i.to)return!1;let s=Pl(n.state,r);return s?(n.dispatch(s),!0):!1}),Al=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=xi(n,n.selection.main.head).brackets||et.brackets,i=null,s=n.changeByRange(o=>{if(o.empty){let l=Tl(n.doc,o.head);for(let a of r)if(a==l&&Dt(n.doc,o.head)==bi(ie(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:v.cursor(o.head-a.length)}}return{range:i=o}});return i||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},Bc=[{key:"Backspace",run:Al}];function Pl(n,e){let t=xi(n,n.selection.main.head),r=t.brackets||et.brackets;for(let i of r){let s=bi(ie(i,0));if(e==i)return s==i?Ml(n,i,r.indexOf(i+i+i)>-1,t):Nl(n,i,s,t.before||et.before);if(e==s&&vi(n,n.selection.main.from))return Il(n,i,s)}return null}function vi(n,e){let t=!1;return n.field(ki).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function Dt(n,e){let t=n.sliceString(e,e+2);return t.slice(0,be(ie(t,0)))}function Tl(n,e){let t=n.sliceString(e-2,e);return be(ie(t,0))==t.length?t:t.slice(1)}function Nl(n,e,t,r){let i=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Me.of(o.to+e.length),range:v.range(o.anchor+e.length,o.head+e.length)};let l=Dt(n.doc,o.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:Me.of(o.head+e.length),range:v.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Il(n,e,t){let r=null,i=n.changeByRange(s=>s.empty&&Dt(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:v.cursor(s.head+t.length)}:r={range:s});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Ml(n,e,t,r){let i=r.stringPrefixes||et.stringPrefixes,s=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Me.of(l.to+e.length),range:v.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=Dt(n.doc,a),f;if(c==e){if(lr(n,a))return{changes:{insert:e+e,from:a},effects:Me.of(a+e.length),range:v.cursor(a+e.length)};if(vi(n,a)){let d=t&&n.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+d.length,insert:d},range:v.cursor(a+d.length)}}}else{if(t&&n.sliceDoc(a-2*e.length,a)==e+e&&(f=ar(n,a-2*e.length,i))>-1&&lr(n,f))return{changes:{insert:e+e+e+e,from:a},effects:Me.of(a+e.length),range:v.cursor(a+e.length)};if(n.charCategorizer(a)(c)!=Qt.Word&&ar(n,a,i)>-1&&!_l(n,a,e,i))return{changes:{insert:e+e,from:a},effects:Me.of(a+e.length),range:v.cursor(a+e.length)}}return{range:s=l}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function lr(n,e){let t=j(n).resolveInner(e+1);return t.parent&&t.from==e}function _l(n,e,t,r){let i=j(n).resolveInner(e,-1),s=r.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),a=l.indexOf(t);if(!a||a>-1&&r.indexOf(l.slice(0,a))>-1){let f=i.firstChild;for(;f&&f.from==i.from&&f.to-f.from>t.length+a;){if(n.sliceDoc(f.to-t.length,f.to)==t)return!1;f=f.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function ar(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=Qt.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=Qt.Word)return s}return-1}function Dc(n={}){return[ul,q,U.of(n),cl,Ol,gi]}const El=[{key:"Ctrl-Space",run:il},{key:"Escape",run:sl},{key:"ArrowDown",run:ut(!0)},{key:"ArrowUp",run:ut(!1)},{key:"PageDown",run:ut(!0,"page")},{key:"PageUp",run:ut(!1,"page")},{key:"Enter",run:rl}],Ol=Nt.highest(Ir.computeN([U],n=>n.facet(U).defaultKeymap?[El]:[])),Bl=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=Nn(n.state,t.from);return r.line?Dl(n):r.block?Rl(n):!1};function Tn(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const Dl=Tn(zl,0),Ll=Tn(wi,0),Rl=Tn((n,e)=>wi(n,e,Vl(e)),0);function Nn(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const $e=50;function Fl(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-$e,r),o=n.sliceDoc(i,i+$e),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,c=s.length-l;if(s.slice(c-e.length,c)==e&&o.slice(a,a+t.length)==t)return{open:{pos:r-l,margin:l&&1},close:{pos:i+a,margin:a&&1}};let f,u;i-r<=2*$e?f=u=n.sliceDoc(r,i):(f=n.sliceDoc(r,r+$e),u=n.sliceDoc(i-$e,i));let d=/^\s*/.exec(f)[0].length,p=/\s*$/.exec(u)[0].length,g=u.length-p-t.length;return f.slice(d,d+e.length)==e&&u.slice(g,g+t.length)==t?{open:{pos:r+d+e.length,margin:/\s/.test(f.charAt(d+e.length))?1:0},close:{pos:i-p-t.length,margin:/\s/.test(u.charAt(g-1))?1:0}}:null}function Vl(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function wi(n,e,t=e.selection.ranges){let r=t.map(s=>Nn(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,o)=>Fl(e,r[o],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let o=0,l;o<i.length;o++)if(l=i[o]){let a=r[o],{open:c,close:f}=l;s.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:f.pos-f.margin,to:f.pos+a.close.length})}return{changes:s}}return null}function zl(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of t){let l=r.length,a=1e9,c=Nn(e,s).line;if(c){for(let f=s;f<=o;){let u=e.doc.lineAt(f);if(u.from>i&&(s==o||o>u.from)){i=u.from;let d=/^\s*/.exec(u.text)[0].length,p=d==u.length,g=u.text.slice(d,d+c.length)==c?d:-1;d<u.text.length&&d<a&&(a=d),r.push({line:u,comment:g,token:c,indent:d,empty:p,single:!1})}f=u.to+1}if(a<1e9)for(let f=l;f<r.length;f++)r[f].indent<r[f].line.text.length&&(r[f].indent=a);r.length==l+1&&(r[l].single=!0)}}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:c,empty:f,single:u}of r)(u||!f)&&s.push({from:l.from+c,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of r)if(l>=0){let c=o.from+l,f=c+a.length;o.text[f-o.from]==" "&&f++,s.push({from:c,to:f})}return{changes:s}}return null}const sn=un.define(),jl=un.define(),Ul=X.define(),Si=X.define({combine(n){return It(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}}),Ci=Oe.define({create(){return de.empty},update(n,e){let t=e.state.facet(Si),r=e.annotation(sn);if(r){let a=J.fromTransaction(e,r.selection),c=r.side,f=c==0?n.undone:n.done;return a?f=Pt(f,f.length,t.minDepth,a):f=Ti(f,e.startState.selection),new de(c==0?r.rest:f,c==0?f:r.rest)}let i=e.annotation(jl);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(dt.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=J.fromTransaction(e),o=e.annotation(dt.time),l=e.annotation(dt.userEvent);return s?n=n.addChanges(s,o,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new de(n.done.map(J.fromJSON),n.undone.map(J.fromJSON))}});function Lc(n={}){return[Ci,Si.of(n),V.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?Ai:e.inputType=="historyRedo"?on:null;return r?(e.preventDefault(),r(t)):!1}})]}function Lt(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(Ci,!1);if(!i)return!1;let s=i.pop(n,t,e);return s?(r(s),!0):!1}}const Ai=Lt(0,!1),on=Lt(1,!1),Hl=Lt(0,!0),$l=Lt(1,!0);class J{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new J(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new J(e.changes&&ls.fromJSON(e.changes),[],e.mapped&&as.fromJSON(e.mapped),e.startSelection&&v.fromJSON(e.startSelection),e.selectionsAfter.map(v.fromJSON))}static fromTransaction(e,t){let r=ne;for(let i of e.startState.facet(Ul)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new J(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,ne)}static selection(e){return new J(void 0,ne,void 0,void 0,e)}}function Pt(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function Wl(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,o,l)=>{for(let a=0;a<t.length;){let c=t[a++],f=t[a++];l>=c&&o<=f&&(r=!0)}}),r}function Gl(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function Pi(n,e){return n.length?e.length?n.concat(e):n:e}const ne=[],Kl=200;function Ti(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Kl));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),Pt(n,n.length-1,1e9,t.setSelAfter(r)))}else return[J.selection([e])]}function ql(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function qt(n,e){if(!n.length)return n;let t=n.length,r=ne;for(;t;){let i=Jl(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[J.selection(r)]:ne}function Jl(n,e,t){let r=Pi(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):ne,t);if(!n.changes)return J.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new J(i,Y.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}const Ql=/^(input\.type|delete)($|\.)/;class de{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new de(this.done,this.undone):this}addChanges(e,t,r,i,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||Ql.test(r))&&(!l.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,Wl(l.changes,e.changes))||r=="input.type.compose")?o=Pt(o,o.length-1,i.minDepth,new J(e.changes.compose(l.changes),Pi(e.effects,l.effects),l.mapped,l.startSelection,ne)):o=Pt(o,o.length,i.minDepth,e),new de(o,ne,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:ne;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&Gl(s[s.length-1],e)?this:new de(Ti(this.done,e),this.undone,t,r)}addMapping(e){return new de(qt(this.done,e),qt(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||t.selection;if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:sn.of({side:e,rest:ql(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=i.length==1?ne:i.slice(0,i.length-1);return s.mapped&&(l=qt(l,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:sn.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}de.empty=new de(ne,ne);const Rc=[{key:"Mod-z",run:Ai,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:on,preventDefault:!0},{linux:"Ctrl-Shift-z",run:on,preventDefault:!0},{key:"Mod-u",run:Hl,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:$l,preventDefault:!0}];function je(n,e){return v.create(n.ranges.map(e),n.mainIndex)}function pe(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function se({state:n,dispatch:e},t){let r=je(n.selection,t);return r.eq(n.selection,!0)?!1:(e(pe(n,r)),!0)}function Rt(n,e){return v.cursor(e?n.to:n.from)}function Ni(n,e){return se(n,t=>t.empty?n.moveByChar(t,e):Rt(t,e))}function W(n){return n.textDirectionAt(n.state.selection.main.head)==yt.LTR}const Ii=n=>Ni(n,!W(n)),Mi=n=>Ni(n,W(n));function _i(n,e){return se(n,t=>t.empty?n.moveByGroup(t,e):Rt(t,e))}const Xl=n=>_i(n,!W(n)),Yl=n=>_i(n,W(n));function Zl(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Ft(n,e,t){let r=j(n).resolveInner(e.head),i=t?w.closedBy:w.openedBy;for(let a=e.head;;){let c=t?r.childAfter(a):r.childBefore(a);if(!c)break;Zl(n,c,i)?r=c:a=t?c.to:c.from}let s=r.type.prop(i),o,l;return s&&(o=t?he(n,r.from,1):he(n,r.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?r.to:r.from,v.cursor(l,t?-1:1)}const ea=n=>se(n,e=>Ft(n.state,e,!W(n))),ta=n=>se(n,e=>Ft(n.state,e,W(n)));function Ei(n,e){return se(n,t=>{if(!t.empty)return Rt(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const Oi=n=>Ei(n,!1),Bi=n=>Ei(n,!0);function Di(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let s of n.state.facet(V.scrollMargins)){let o=s(n);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function Li(n,e){let t=Di(n),{state:r}=n,i=je(r.selection,o=>o.empty?n.moveVertically(o,e,t.height):Rt(o,e));if(i.eq(r.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(r.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,c=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<c&&(s=V.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-a}))}return n.dispatch(pe(r,i),{effects:s}),!0}const cr=n=>Li(n,!1),ln=n=>Li(n,!0);function Se(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=v.cursor(r.from+s))}return i}const na=n=>se(n,e=>Se(n,e,!0)),ra=n=>se(n,e=>Se(n,e,!1)),ia=n=>se(n,e=>Se(n,e,!W(n))),sa=n=>se(n,e=>Se(n,e,W(n))),oa=n=>se(n,e=>v.cursor(n.lineBlockAt(e.head).from,1)),la=n=>se(n,e=>v.cursor(n.lineBlockAt(e.head).to,-1));function aa(n,e,t){let r=!1,i=je(n.selection,s=>{let o=he(n,s.head,-1)||he(n,s.head,1)||s.head>0&&he(n,s.head-1,1)||s.head<n.doc.length&&he(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return v.cursor(l)});return r?(e(pe(n,i)),!0):!1}const ca=({state:n,dispatch:e})=>aa(n,e);function re(n,e){let t=je(n.state.selection,r=>{let i=e(r);return v.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(pe(n.state,t)),!0)}function Ri(n,e){return re(n,t=>n.moveByChar(t,e))}const Fi=n=>Ri(n,!W(n)),Vi=n=>Ri(n,W(n));function zi(n,e){return re(n,t=>n.moveByGroup(t,e))}const fa=n=>zi(n,!W(n)),ua=n=>zi(n,W(n)),ha=n=>re(n,e=>Ft(n.state,e,!W(n))),da=n=>re(n,e=>Ft(n.state,e,W(n)));function ji(n,e){return re(n,t=>n.moveVertically(t,e))}const Ui=n=>ji(n,!1),Hi=n=>ji(n,!0);function $i(n,e){return re(n,t=>n.moveVertically(t,e,Di(n).height))}const fr=n=>$i(n,!1),ur=n=>$i(n,!0),pa=n=>re(n,e=>Se(n,e,!0)),ma=n=>re(n,e=>Se(n,e,!1)),ga=n=>re(n,e=>Se(n,e,!W(n))),ya=n=>re(n,e=>Se(n,e,W(n))),ka=n=>re(n,e=>v.cursor(n.lineBlockAt(e.head).from)),ba=n=>re(n,e=>v.cursor(n.lineBlockAt(e.head).to)),hr=({state:n,dispatch:e})=>(e(pe(n,{anchor:0})),!0),dr=({state:n,dispatch:e})=>(e(pe(n,{anchor:n.doc.length})),!0),pr=({state:n,dispatch:e})=>(e(pe(n,{anchor:n.selection.main.anchor,head:0})),!0),mr=({state:n,dispatch:e})=>(e(pe(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),xa=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),va=({state:n,dispatch:e})=>{let t=Vt(n).map(({from:r,to:i})=>v.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:v.create(t),userEvent:"select"})),!0},wa=({state:n,dispatch:e})=>{let t=je(n.selection,r=>{var i;let s=j(n).resolveStack(r.from,1);for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&(!((i=l.parent)===null||i===void 0)&&i.parent))return v.range(l.to,l.from)}return r});return e(pe(n,t)),!0},Sa=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=v.create([t.main]):t.main.empty||(r=v.create([v.cursor(t.main.head)])),r?(e(pe(n,r)),!0):!1};function st(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(s);a<o?(t="delete.backward",a=ht(n,a,!1)):a>o&&(t="delete.forward",a=ht(n,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=ht(n,o,!1),l=ht(n,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:v.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?V.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function ht(n,e,t){if(n instanceof V)for(let r of n.state.facet(V.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const Wi=(n,e,t)=>st(n,r=>{let i=r.from,{state:s}=n,o=s.doc.lineAt(i),l,a;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,i-o.from))){if(l[l.length-1]=="	")return i-1;let c=Mt(l,s.tabSize),f=c%_e(s)||_e(s);for(let u=0;u<f&&l[l.length-1-u]==" ";u++)i--;a=i}else a=Ke(o.text,i-o.from,e,e)+o.from,a==i&&o.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,i-o.from))&&(a=Ke(o.text,a-o.from,!1,!1)+o.from);return a}),an=n=>Wi(n,!1,!0),Gi=n=>Wi(n,!0,!1),Ki=(n,e)=>st(n,t=>{let r=t.head,{state:i}=n,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let l=null;;){if(r==(e?s.to:s.from)){r==t.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=Ke(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),f=o(c);if(l!=null&&f!=l)break;(c!=" "||r!=t.head)&&(l=f),r=a}return r}),qi=n=>Ki(n,!1),Ca=n=>Ki(n,!0),Aa=n=>st(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),Pa=n=>st(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),Ta=n=>st(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),Na=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:fn.of(["",""])},range:v.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},Ia=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),o=i==s.from?i-1:Ke(s.text,i-s.from,!1)+s.from,l=i==s.to?i+1:Ke(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:n.doc.slice(i,l).append(n.doc.slice(o,i))},range:v.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Vt(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function Ji(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of Vt(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let a of s.ranges)i.push(v.range(Math.min(n.doc.length,a.anchor+l),Math.min(n.doc.length,a.head+l)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let a of s.ranges)i.push(v.range(a.anchor-l,a.head-l))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:v.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Ma=({state:n,dispatch:e})=>Ji(n,e,!1),_a=({state:n,dispatch:e})=>Ji(n,e,!0);function Qi(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of Vt(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Ea=({state:n,dispatch:e})=>Qi(n,e,!1),Oa=({state:n,dispatch:e})=>Qi(n,e,!0),Ba=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Vt(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=je(e.selection,i=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(i.head),l=n.coordsAtPos(i.head,i.assoc||1);l&&(s=o.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,s)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Da(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=j(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(w.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const La=Xi(!1),Ra=Xi(!0);function Xi(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,l=e.doc.lineAt(s),a=!n&&s==o&&Da(e,s);n&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new Ot(e,{simulateBreak:s,simulateDoubleBreak:!!a}),f=gn(c,s);for(f==null&&(f=Mt(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let u=["",Qe(e,f)];return a&&u.push(Qe(e,c.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:fn.of(u)},range:v.cursor(s+1+u[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function In(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let l=n.doc.lineAt(o);l.number>t&&(r.empty||r.to>l.from)&&(e(l,i,r),t=l.number),o=l.to+1}let s=n.changes(i);return{changes:i,range:v.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const Fa=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new Ot(n,{overrideIndentation:s=>{let o=t[s];return o??-1}}),i=In(n,(s,o,l)=>{let a=gn(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let c=/^\s*/.exec(s.text)[0],f=Qe(n,a);(c!=f||l.from<s.from+c.length)&&(t[s.from]=a,o.push({from:s.from,to:s.from+c.length,insert:f}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},Yi=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(In(n,(t,r)=>{r.push({from:t.from,insert:n.facet(Et)})}),{userEvent:"input.indent"})),!0),Zi=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(In(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=Mt(i,n.tabSize),o=0,l=Qe(n,Math.max(0,s-_e(n)));for(;o<i.length&&o<l.length&&i.charCodeAt(o)==l.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),Va=n=>(n.setTabFocusMode(),!0),za=[{key:"Ctrl-b",run:Ii,shift:Fi,preventDefault:!0},{key:"Ctrl-f",run:Mi,shift:Vi},{key:"Ctrl-p",run:Oi,shift:Ui},{key:"Ctrl-n",run:Bi,shift:Hi},{key:"Ctrl-a",run:oa,shift:ka},{key:"Ctrl-e",run:la,shift:ba},{key:"Ctrl-d",run:Gi},{key:"Ctrl-h",run:an},{key:"Ctrl-k",run:Aa},{key:"Ctrl-Alt-h",run:qi},{key:"Ctrl-o",run:Na},{key:"Ctrl-t",run:Ia},{key:"Ctrl-v",run:ln}],ja=[{key:"ArrowLeft",run:Ii,shift:Fi,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Xl,shift:fa,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:ia,shift:ga,preventDefault:!0},{key:"ArrowRight",run:Mi,shift:Vi,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Yl,shift:ua,preventDefault:!0},{mac:"Cmd-ArrowRight",run:sa,shift:ya,preventDefault:!0},{key:"ArrowUp",run:Oi,shift:Ui,preventDefault:!0},{mac:"Cmd-ArrowUp",run:hr,shift:pr},{mac:"Ctrl-ArrowUp",run:cr,shift:fr},{key:"ArrowDown",run:Bi,shift:Hi,preventDefault:!0},{mac:"Cmd-ArrowDown",run:dr,shift:mr},{mac:"Ctrl-ArrowDown",run:ln,shift:ur},{key:"PageUp",run:cr,shift:fr},{key:"PageDown",run:ln,shift:ur},{key:"Home",run:ra,shift:ma,preventDefault:!0},{key:"Mod-Home",run:hr,shift:pr},{key:"End",run:na,shift:pa,preventDefault:!0},{key:"Mod-End",run:dr,shift:mr},{key:"Enter",run:La},{key:"Mod-a",run:xa},{key:"Backspace",run:an,shift:an},{key:"Delete",run:Gi},{key:"Mod-Backspace",mac:"Alt-Backspace",run:qi},{key:"Mod-Delete",mac:"Alt-Delete",run:Ca},{mac:"Mod-Backspace",run:Pa},{mac:"Mod-Delete",run:Ta}].concat(za.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),Fc=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:ea,shift:ha},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:ta,shift:da},{key:"Alt-ArrowUp",run:Ma},{key:"Shift-Alt-ArrowUp",run:Ea},{key:"Alt-ArrowDown",run:_a},{key:"Shift-Alt-ArrowDown",run:Oa},{key:"Escape",run:Sa},{key:"Mod-Enter",run:Ra},{key:"Alt-l",mac:"Ctrl-l",run:va},{key:"Mod-i",run:wa,preventDefault:!0},{key:"Mod-[",run:Zi},{key:"Mod-]",run:Yi},{key:"Mod-Alt-\\",run:Fa},{key:"Shift-Mod-k",run:Ba},{key:"Shift-Mod-\\",run:ca},{key:"Mod-/",run:Bl},{key:"Alt-A",run:Ll},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Va}].concat(ja),Vc={key:"Tab",run:Yi,shift:Zi};function z(n){return new Qs(kn.define(n))}const gr=()=>P(()=>import("./pbl95wx6493wq92j.js"),[]).then(n=>z(n.shell)),es={[S.bash]:gr,[S.zsh]:gr,[S.swift]:()=>P(()=>import("./pijqfo56g5y7ss6b.js"),[]).then(n=>z(n.swift)),[S.css]:()=>P(()=>import("./l6yvlx37rodvxl2p.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(n=>n.css()),[S.html]:()=>P(()=>import("./occh8mf97swpkjvj.js"),__vite__mapDeps([15,1,0,2,3,4,5,6,7,8,9,10,11,12,13,14,16])).then(n=>n.html()),[S.javascript]:()=>P(()=>import("./k1b3ln66263ojn97.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(n=>n.javascript({jsx:!0,typescript:!1})),[S.typescript]:()=>P(()=>import("./k1b3ln66263ojn97.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(n=>n.javascript({jsx:!0,typescript:!0})),[S.json]:()=>P(()=>import("./nnsbuhuxhmqlqawt.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(n=>n.json()),[S.python]:()=>P(()=>import("./zspdzani26qes8ve.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(n=>n.python()),[S.sql]:()=>P(()=>import("./onk9eekclt902z8g.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(n=>n.sql()),[S.go]:()=>P(()=>import("./ochh5oqbjt3wjpg4.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(n=>n.go()),[S.yaml]:()=>P(()=>import("./iutog9udb18o5s2d.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(n=>n.yaml()),[S.java]:()=>P(()=>import("./hg871o1m8oojnode.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(n=>n.java()),[S.rust]:()=>P(()=>import("./ntrgre29trz3kv7y.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(n=>n.rust()),[S.cpp]:()=>P(()=>import("./ilxh32n4rd3a29eh.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(n=>n.cpp()),[S.php]:()=>P(()=>import("./fj5ag1ad0s1ficn2.js"),__vite__mapDeps([25,1,15,0,2,3,4,5,6,7,8,9,10,11,12,13,14,16])).then(n=>n.php()),[S.xml]:()=>P(()=>import("./bjlck4g8h908ns2z.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(n=>n.xml()),[S.vue]:()=>P(()=>import("./fslrs25kdv6q5887.js"),__vite__mapDeps([27,15,1,0,2,3,4,5,6,7,8,9,10,11,12,13,14,16])).then(n=>n.vue()),[S.ruby]:()=>P(()=>import("./e4lhyu305wu0fcut.js"),[]).then(n=>z(n.ruby)),[S.haskell]:()=>P(()=>import("./bf6r3t2rw7f01so5.js"),[]).then(n=>z(n.haskell)),[S.kotlin]:()=>P(()=>import("./rlk4qi7ndmxxmstb.js"),[]).then(n=>z(n.kotlin)),[S.csharp]:()=>P(()=>import("./rlk4qi7ndmxxmstb.js"),[]).then(n=>z(n.csharp)),[S.c]:()=>P(()=>import("./rlk4qi7ndmxxmstb.js"),[]).then(n=>z(n.c)),[S.objectivec]:()=>P(()=>import("./rlk4qi7ndmxxmstb.js"),[]).then(n=>z(n.objectiveC)),[S.r]:()=>P(()=>import("./n0t2rpizlasjzcxa.js"),[]).then(n=>z(n.r)),[S.lua]:()=>P(()=>import("./harowmpdmpnd9wki.js"),[]).then(n=>z(n.lua)),[S.dart]:()=>P(()=>import("./rlk4qi7ndmxxmstb.js"),[]).then(n=>z(n.dart)),[S.scala]:()=>P(()=>import("./rlk4qi7ndmxxmstb.js"),[]).then(n=>z(n.scala)),[S.perl]:()=>P(()=>import("./gq1ss5v2zpbborxl.js"),[]).then(n=>z(n.perl)),[S.commonlisp]:()=>P(()=>import("./jr6cjysmysifr6mr.js"),[]).then(n=>z(n.commonLisp)),[S.clojure]:()=>P(()=>import("./gf1tfl9d2himhfic.js"),[]).then(n=>z(n.clojure)),[S.ocaml]:()=>P(()=>import("./khji33iw1sxityyt.js"),[]).then(n=>z(n.oCaml)),[S.powershell]:()=>P(()=>import("./i9u5kd7kvamutmln.js"),[]).then(n=>z(n.powerShell)),[S.verilog]:()=>P(()=>import("./fix340p09fldyqxz.js"),[]).then(n=>z(n.verilog)),[S.dockerfile]:()=>P(()=>import("./cgm5tyzi32u32j10.js"),[]).then(n=>z(n.dockerFile)),[S.other]:()=>null},Ua=n=>n in es,gt={},zc=async n=>{if(gt[n]!=null)return gt[n];if(Ua(n)){const e=await es[n]();return gt[n]=e,e}return null},jc=n=>gt[n]??null;var ts=n=>{var{theme:e,settings:t={},styles:r=[]}=n,i={".cm-gutters":{}},s={};t.background&&(s.backgroundColor=t.background),t.backgroundImage&&(s.backgroundImage=t.backgroundImage),t.foreground&&(s.color=t.foreground),t.fontSize&&(s.fontSize=t.fontSize),(t.background||t.foreground)&&(i["&"]=s),t.fontFamily&&(i["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(i[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(i[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(i[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(i[".cm-content"]={caretColor:t.caret},i[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var o={};t.gutterActiveForeground&&(o.color=t.gutterActiveForeground),t.lineHighlight&&(i[".cm-activeLine"]={backgroundColor:t.lineHighlight},o.backgroundColor=t.lineHighlight),i[".cm-activeLineGutter"]=o,t.selection&&(i["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(i["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var l=V.theme(i,{dark:e==="dark"}),a=rt.define(r),c=[l,bo(a)];return c},Ha={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#f0f0f0",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},$a=[{tag:[h.keyword,h.operatorKeyword,h.modifier,h.color,h.constant(h.name),h.standard(h.name),h.standard(h.tagName),h.special(h.brace),h.atom,h.bool,h.special(h.variableName)],color:"#0000ff"},{tag:[h.moduleKeyword,h.controlKeyword],color:"#af00db"},{tag:[h.name,h.deleted,h.character,h.macroName,h.propertyName,h.variableName,h.labelName,h.definition(h.name)],color:"#0070c1"},{tag:h.heading,fontWeight:"bold",color:"#0070c1"},{tag:[h.typeName,h.className,h.tagName,h.number,h.changed,h.annotation,h.self,h.namespace],color:"#267f99"},{tag:[h.function(h.variableName),h.function(h.propertyName)],color:"#795e26"},{tag:[h.number],color:"#098658"},{tag:[h.operator,h.punctuation,h.separator,h.url,h.escape,h.regexp],color:"#383a42"},{tag:[h.regexp],color:"#af00db"},{tag:[h.special(h.string),h.processingInstruction,h.string,h.inserted],color:"#a31515"},{tag:[h.angleBracket],color:"#383a42"},{tag:h.strong,fontWeight:"bold"},{tag:h.emphasis,fontStyle:"italic"},{tag:h.strikethrough,textDecoration:"line-through"},{tag:[h.meta,h.comment],color:"#008000"},{tag:h.link,color:"#4078f2",textDecoration:"underline"},{tag:h.invalid,color:"#e45649"}];function Wa(n){var{theme:e="dark",settings:t={},styles:r=[]}=n||{};return ts({theme:e,settings:Or({},Ha,t),styles:[...$a,...r]})}Wa();var Ga={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},Ka=[{tag:[h.keyword,h.operatorKeyword,h.modifier,h.color,h.constant(h.name),h.standard(h.name),h.standard(h.tagName),h.special(h.brace),h.atom,h.bool,h.special(h.variableName)],color:"#569cd6"},{tag:[h.controlKeyword,h.moduleKeyword],color:"#c586c0"},{tag:[h.name,h.deleted,h.character,h.macroName,h.propertyName,h.variableName,h.labelName,h.definition(h.name)],color:"#9cdcfe"},{tag:h.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[h.typeName,h.className,h.tagName,h.number,h.changed,h.annotation,h.self,h.namespace],color:"#4ec9b0"},{tag:[h.function(h.variableName),h.function(h.propertyName)],color:"#dcdcaa"},{tag:[h.number],color:"#b5cea8"},{tag:[h.operator,h.punctuation,h.separator,h.url,h.escape,h.regexp],color:"#d4d4d4"},{tag:[h.regexp],color:"#d16969"},{tag:[h.special(h.string),h.processingInstruction,h.string,h.inserted],color:"#ce9178"},{tag:[h.angleBracket],color:"#808080"},{tag:h.strong,fontWeight:"bold"},{tag:h.emphasis,fontStyle:"italic"},{tag:h.strikethrough,textDecoration:"line-through"},{tag:[h.meta,h.comment],color:"#6a9955"},{tag:h.link,color:"#6a9955",textDecoration:"underline"},{tag:h.invalid,color:"#ff0000"}];function qa(n){var{theme:e="dark",settings:t={},styles:r=[]}=n||{};return ts({theme:e,settings:Or({},Ga,t),styles:[...Ka,...r]})}var Uc=qa();function Ja(n){return n.nodeSize-2}function Hc(n,e){return e>=0&&e<=Ja(n)}class tt extends _t{unistNodeName(){return"text"}static proseMirrorNodeName(){return"text"}proseMirrorNodeSpec(){return{group:"inline"}}unistNodeToProseMirrorNodes({node:e,schema:t,attrs:r}){return xs(e,t,r)}proseMirrorNodeToUnistNodes(e){return[{type:this.unistNodeName(),value:e.text??""}]}}class Ce{constructor(e,t,r={}){this.match=e,this.match=e,this.handler=typeof t=="string"?Qa(t):t,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1}}function Qa(n){return function(e,t,r,i){let s=n;if(t[1]){let o=t[0].lastIndexOf(t[1]);s+=t[0].slice(o+t[1].length),r+=o;let l=r-i;l>0&&(s=t[0].slice(o-l,o)+s,r=i)}return e.tr.insertText(s,r,i)}}const Xa=500;function $c({rules:n}){let e=new Br({state:{init(){return null},apply(t,r){let i=t.getMeta(this);return i||(t.selectionSet||t.docChanged?null:r)}},props:{handleTextInput(t,r,i,s){return yr(t,r,i,s,n,e)},handleDOMEvents:{compositionend:t=>{setTimeout(()=>{let{$cursor:r}=t.state.selection;r&&yr(t,r.pos,r.pos,"",n,e)})}}},isInputRules:!0});return e}function yr(n,e,t,r,i,s){if(n.composing)return!1;let o=n.state,l=o.doc.resolve(e),a=l.parent.textBetween(Math.max(0,l.parentOffset-Xa),l.parentOffset,null,"")+r;for(let c=0;c<i.length;c++){let f=i[c];if(l.parent.type.spec.code){if(!f.inCode)continue}else if(f.inCode==="only")continue;let u=f.match.exec(a),d=u&&f.handler(o,u,e-(u[0].length-r.length),t);if(d)return f.undoable&&d.setMeta(s,{transform:d,from:e,to:t,text:r}),n.dispatch(d),!0}return!1}new Ce(/--$/,"");new Ce(/\.\.\.$/,"");new Ce(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"");new Ce(/"$/,"");new Ce(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"");new Ce(/'$/,"");function Wc(n,e,t=null,r){return new Ce(n,(i,s,o,l)=>{let a=t instanceof Function?t(s):t,c=i.tr.delete(o,l),f=c.doc.resolve(o),u=f.blockRange(),d=u&&ms(u,e,a);if(!d)return null;c.wrap(u,d);let p=c.doc.resolve(o-1).nodeBefore;return p&&p.type==e&&gs(c.doc,o-1)&&(!r||r(s,p))&&c.join(o-1),c})}function Ya(n,e,t=null){return new Ce(n,(r,i,s,o)=>{let l=r.doc.resolve(s),a=t instanceof Function?t(i):t;return l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),e)?r.tr.delete(s,o).setBlockType(s,s,e,a):null})}function Mn(n,e,t,r={}){if(n==null)return null;const i=(Array.isArray(t)?t:[t]).filter(Lr),s=e.nodes[n].createAndFill(r,i);return s??null}const Za={content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},ec="paragraph";class tc extends _t{unistNodeName(){return ec}static proseMirrorNodeName(){return"paragraph"}proseMirrorNodeSpec(){return Za}unistNodeToProseMirrorNodes({schema:e,convertedChildren:t,attrs:r}){return Mn(this.proseMirrorNodeName(),e,t,r)}proseMirrorNodeToUnistNodes(e,t){return[{type:this.unistNodeName(),children:t}]}}class We extends _t{static isAtStart(e,t){return e.selection.empty?t!==void 0?t.endOfTextblock("backward",e):e.selection.$anchor.parentOffset>0:!1}static headingLevelCommandBuilder(e,t,r){return(i,s,o)=>{if(r&&!We.isAtStart(i,o))return!1;const{$anchor:l}=i.selection,a=l.parent;if(a.type.name!=="heading")return!1;const c=a.attrs.level+t;if(c<0||c>6)return!1;if(s===void 0)return!0;const f=l.before(l.depth);return c>0?s(i.tr.setNodeMarkup(f,void 0,{level:c})):s(i.tr.setNodeMarkup(f,e.nodes.paragraph)),!0}}dependencies(){return[new tc,new tt]}unistNodeName(){return"heading"}static proseMirrorNodeName(){return"heading"}proseMirrorNodeSpec(){return{attrs:{level:{default:1}},content:"text*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(e){return["h"+e.attrs.level.toString(),0]}}}proseMirrorInputRules(e){return[Ya(/^\s{0,3}(#{1,6})\s$/,e.nodes[this.proseMirrorNodeName()],t=>({level:t[1].length}))]}proseMirrorKeymap(e){const t={Tab:We.headingLevelCommandBuilder(e,1,!1),"#":We.headingLevelCommandBuilder(e,1,!0),"Shift-Tab":We.headingLevelCommandBuilder(e,-1,!1)};for(let r=1;r<=6;r++)t[`Shift-Mod-${r.toString()}`]=ys(e.nodes[this.proseMirrorNodeName()],{level:r});return t}unistNodeToProseMirrorNodes({node:e,schema:t,convertedChildren:r,attrs:i}){const{depth:s}=e;return Mn(this.proseMirrorNodeName(),t,r,{...i,level:s})}proseMirrorNodeToUnistNodes(e,t){return[{type:this.unistNodeName(),depth:e.attrs.level,children:t}]}}class nc extends _t{unistNodeName(){return"root"}static proseMirrorNodeName(){return"doc"}proseMirrorNodeSpec(){return{content:"block+"}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:t,attrs:r}){return Mn(this.proseMirrorNodeName(),e,t,r)}proseMirrorNodeToUnistNodes(e,t){return[{type:this.unistNodeName(),children:t}]}}const kr=(n,e)=>{if(!e)return!1;const[t,r]=e;return n>=t&&n<r},ns=(n,e)=>n.pmPos-e.pmPos,br=(n,e)=>{const t=e[e.length-1].sourcePos;return Math.min(Math.max(n,0),t)},xr=(n,e)=>{const t=Er(e)?.sourcePos??0;return Math.min(Math.max(n,0),t)},vr=({positions:n,sourcePos:e,sourceEndPos:t})=>{const r=[];for(let i=0;i<n.length;i++){const s=n[i],{sourcePos:o,leafSourceRange:l,isClose:a=!1}=s;if(t!=null&&o>t)break;const c=n[i+1]??null,f=u=>{let d=n[u];if(d==null)return u;let p=n[u+1],{leafSourceRange:g}=d;for(;d.nodeTypeName!==tt.proseMirrorNodeName()&&!d.isClose&&p!=null&&!kr(e,g);)r.push(p),d=p,p=n[u+2],g=d.leafSourceRange,u++;return u};if(o===e&&!a||kr(e,l))r.push(s),i=f(i);else if(o<=e&&(c?.sourcePos??Number.POSITIVE_INFINITY)>=e){let u=i+1;const d=[];for(;n[u]?.isClose===!0;)d.push(u),u++;if(n[u]){const{sourcePos:p}=n[u];do r.push(n[u]);while(n[++u].sourcePos===p);u=f(u-1)}else{(o===e||a)&&r.push(s);for(const p of d)r.push(n[p])}i=u}}return r.sort(ns)},wr=({positions:n,sourcePos:e})=>{const t=[],r=i=>{i&&t.push(i)};for(let i=0;i<n.length;i++){const s=n[i],{sourcePos:o}=s;if(e==null||o>e)break;const l=n[i-1]??null,a=n[i+1]??null,c=e>o&&e<(a?.sourcePos??-1),f=s.nodeTypeName===tt.proseMirrorNodeName();if(o===e||c&&!f){if(s.isClose&&!l?.isClose&&s.nodeTypeName===l?.nodeTypeName||!s.isClose&&a.isClose&&s.nodeTypeName===a.nodeTypeName||s.isClose&&l?.isClose||!s.isClose&&l!=null&&l?.nodeTypeName!==tt.proseMirrorNodeName()){r(l);let g=i-2,b=n[g];for(;g>=0&&b.isClose;)r(b),b=n[--g]}let u=i,d=s,p=d;do r(d),p=d,d=n[++u];while(d?.sourcePos===e||d?.depth<p?.depth);break}else if(c&&f){let u=i+1,d=n[u];for(;d?.isClose;)r(d),d=n[++u];break}}return t.sort(ns)},rc=n=>{const e=new vs(ws.GetPositionTransformer,{debug:!1});e.startBlock("get_positition_transformer");const t=new Map;n.descendants((s,o)=>{const l=Bn(s);if(!l)return;const{start:a,end:c}=l,f=s.type.name,{depth:u}=n.resolve(o);if(t.set(o,{pmPos:o,sourcePos:a,leafSourceRange:s.isBlock?void 0:[a,c],depth:u,nodeTypeName:f,isClose:!1,parentNodeTypeNameStack:[]}),s.isBlock){const d=o+s.nodeSize-1;t.set(d,{pmPos:d,sourcePos:c,depth:n.resolve(d).depth,nodeTypeName:f,isClose:!0,parentNodeTypeNameStack:[]})}if(s.isText)for(let d=0;d<(s.text?.length??0);d++){const p=o+d;t.set(p,{pmPos:p,sourcePos:a+d,depth:u,nodeTypeName:f,isClose:!1,parentNodeTypeNameStack:[]})}}),t.set(n.content.size,{pmPos:n.content.size,nodeTypeName:n.type.name,depth:0,isClose:!0,sourcePos:ps(Bn(n)).end,parentNodeTypeNameStack:[]});const r=Array.from(t.entries()).sort(([s],[o])=>s-o).map(([,s])=>s),i=[nc.proseMirrorNodeName()];for(const s of r)s.isClose?(s.parentNodeTypeNameStack=i.concat(),i.pop()):(s.parentNodeTypeNameStack=i.concat(),s.nodeTypeName!==tt.proseMirrorNodeName()&&Er(i)!==s.nodeTypeName&&i.push(s.nodeTypeName));return e.endBlock("get_positition_transformer"),{positions:r,pmRangeToSourceRange:({start:s,end:o})=>({start:r[Math.max(s,0)].sourcePos,end:r[Math.min(o,r.length-1)].sourcePos}),sourceStartToPmPos:s=>vr({sourcePos:br(s,r),positions:r,sourceEndPos:null}),sourceEndToPmPos:s=>wr({sourcePos:xr(s,r),positions:r}),sourceRangeToPmRange:s=>{e.startBlock("source_range_to_pm_range");const{start:o,end:l}=s,a=xr(l,r),c=vr({sourcePos:br(o,r),sourceEndPos:a,positions:r}),f=wr({sourcePos:a,positions:r});return e.endBlock("source_range_to_pm_range"),{start:c,end:f}}}},ic=ds(rc);function Gc(n,e){return e?n.getState(e)??null:null}const Sr=(n,e,t)=>{const r=t==="min"?0:e.length-1;for(let i=r;t==="min"?i<e.length:i>=0;t==="min"?i++:i--){const{sourcePos:s,pmPos:o}=e[i];if(s===n)return o;if(t==="min"&&s>n||t==="max"&&s<n)return t==="min"?e[i-1]?.pmPos??o:o}return null};function sc(n,e){const t=ac(n);if(t.length===0)return e;let r=e;return t.forEach(i=>{r=oc(i,r)}),r}function oc(n,e){return cs(e,{start:n.from,end:n.to},lc(n))}function lc(n){return n.slice.size-(n.to-n.from)}function ac(n){return n.steps.filter(e=>e instanceof ks)}const Cr=new bs("comments");function Ar(n,e){const{sourceRangeToPmRange:t}=ic(n),r=e.map(({id:i,at:s})=>{const{start:o,end:l}=t(s),a=Sr(s.start,o,"max"),c=Sr(s.end,l,"min");return c==null||a==null?null:[i,{start:a,end:c}]}).filter(Lr);return new Map(r)}function cc(n,e){const{type:t}=e;if(t===us.SELECTION){const{from:s,to:o}=e;return[s,o]}const{pos:r}=e,i=r+(n.nodeAt(r)?.nodeSize??0);return[r,i]}const Pr=(n,e,t=null,r=null)=>{const i=[],s=Array.from(e.entries()).reverse(),o=new Map(n.map(l=>[l.id,l]));for(const[l,a]of s){const c=o.get(l),d=hs({isHovered:t===l,isFocused:r===l,isCode:!1,diffStatus:c?.diffStatus});i.push(Dr.inline(a.start,a.end,{class:d,"data-comment-id":l,nodeName:"span"}))}return i},Kc=n=>new Br({key:Cr,state:{init:(e,{doc:t})=>{const r=Ar(t,n);return{comments:n,commentingOn:null,hoveredOnBlock:null,hoveredCommentId:null,focusedCommentId:null,decorations:Pr(n,r),positions:r}},apply:(e,t)=>{const r=e.getMeta(Cr)??{},i=r.comments,s=i??t.comments,o=i!=null?Ar(e.doc,s):t.positions;let l=r.commentingOn;l===void 0&&(l=t.commentingOn);let a=r.hoveredCommentId;a===void 0&&(a=t.hoveredCommentId);let c=r.focusedCommentId;c===void 0&&(c=t.focusedCommentId);const f=sc(e,o),u=fs(s,f);return{comments:u,commentingOn:l,hoveredCommentId:a,focusedCommentId:c,decorations:Pr(u,f,a,c),positions:f}}},props:{handleClickOn:(e,t,r,i,s)=>{const{target:o}=s;if(o instanceof HTMLElement){const{commentId:l}=o.dataset;if(!l)return;zt.focusComment(l)}},handleDOMEvents:{mouseover(e,t){const{target:r}=t;if(r instanceof HTMLElement){const{commentId:i}=r.dataset;i?zt.mouseEnterComment(i):zt.mouseLeaveComment()}}},decorations(e){const t=this.getState(e);if(!t)return Dn.empty;const{commentingOn:r,decorations:i}=t,{doc:s}=e;if(r){const[o,l]=cc(s,r);o!=null&&l!=null&&i.push(Dr.inline(o,l,{class:Ss.document},{comment:{pattern:r}}))}return Dn.create(s,i.concat())}}});export{Sc as $,Oc as A,bo as B,Nc as C,Cs as D,Ic as E,Pc as F,Bc as G,We as H,D as I,Fc as J,Ac as K,en as L,El as M,hn as N,Rc as O,zr as P,Vc as Q,Dc as R,qa as S,E as T,Wa as U,zc as V,jc as W,Gc as X,Cr as Y,tt as Z,Uc as _,G as a,Wc as a0,Mn as a1,Ce as a2,Ya as a3,Za as a4,ec as a5,nc as a6,$c as a7,ic as a8,Sr as a9,Kc as aa,Ja as ab,w as b,Qs as c,zo as d,Xs as e,wc as f,oo as g,j as h,_c as i,Cc as j,yc as k,No as l,Ec as m,vc as n,xc as o,kc as p,Ks as q,Hr as r,Us as s,h as t,Hc as u,tc as v,$s as w,Tc as x,Mc as y,Lc as z};
//# sourceMappingURL=j74ui1ngt8ov9uvf.js.map
