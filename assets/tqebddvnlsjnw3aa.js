import{d as oe,j as e,M as x,e as b,r as u,i as re,f as $,c as ie}from"./fs6h2trisr1juto6.js";import{bM as le,V as U,e$ as ce,d as E,c3 as I,J as ue,cT as de,c5 as T,dA as me,aF as fe,bw as he}from"./njq6ygky3ttysgdk.js";import{gy as k,lj as xe,cs as m,jH as G,lk as ge,ah as K,bU as X,bi as we,fT as Q,el as je,em as pe,bV as ye,dG as De}from"./d7a6rc8fexfzu7dt.js";import{S as ve}from"./jfi01owl9mian83i.js";const H={messages:oe({delete:{id:"jawbone.delete",defaultMessage:"Delete"},pause:{id:"jawbone.pause",defaultMessage:"Pause"},pauseFailure:{id:"jawbone.pauseAutomationFailure",defaultMessage:"Failed to pause the automation"},resume:{id:"jawbone.resume",defaultMessage:"Resume"},enableFailure:{id:"jawbone.resumeFailure",defaultMessage:"Failed to resume the automation"},notificationsTitle:{id:"jawbone.notificationsTitle",defaultMessage:"Notifications"},notificationsDesktopAndMobile:{id:"jawbone.notificationsDesktopAndMobile",defaultMessage:"Desktop & mobile"},notificationsEmail:{id:"jawbone.notificationsEmail",defaultMessage:"Email"}}),components:{nextRunTime:t=>e.jsx(x,{id:"jawbone.nextRunTime",defaultMessage:"Scheduled: {localizedNextRunTime}",values:{localizedNextRunTime:t}})}};function be({targetTimeUTC:t,useShortForm:s=!1}){return e.jsx(le,{fallback:void 0,name:"JawboneLocalizedRuntime",children:e.jsx(Me,{targetTimeUTC:t,useShortForm:s})})}function Me({targetTimeUTC:t,useShortForm:s=!1}){const r=b(),{localDate:a,today:i,tomorrow:o,dayAfterTomorrow:n,newWeek:l,localizedTime:d}=Se(t,r.locale);if(a.toDateString()===i.toDateString())return k.runtimeToday(d);if(a.toDateString()===o.toDateString())return k.runtimeTomorrow(d);if(a>=n&&a<l){const c=new Intl.DateTimeFormat(r.locale,{weekday:"long"}).format(a);return k.runtimeNextFiveDays(c,d)}else if(a.getFullYear()===i.getFullYear()){const c=new Intl.DateTimeFormat(r.locale,{month:"long",day:"numeric"}).format(a);return s?c:k.runtimeThisYear(c,d)}else{const c=new Intl.DateTimeFormat(r.locale,{year:"numeric",month:"short",day:"numeric"}).format(a);return s?c:k.runtimeOutsideThisYear(c,d)}}function Se(t,s){const r=new Date(t);if(isNaN(r.getTime()))throw new Error(`Invalid targetTimeUTC provided: ${t}`);const a=r,i=new Date;i.setHours(0,0,0,0);const o=new Date(i);o.setDate(o.getDate()+1);const n=new Date(i);n.setDate(n.getDate()+2);const l=new Date(i);l.setDate(i.getDate()+7);const d=new Intl.DateTimeFormat(s,{hour:"numeric",minute:a.getMinutes()===0?void 0:"numeric",hour12:!0}).format(a);return{localDate:a,today:i,tomorrow:o,dayAfterTomorrow:n,newWeek:l,localizedTime:d}}function Ce({item:t,onClose:s,onConfirm:r}){const a=b(),i=U(),{mutate:o,isPending:n}=xe({automation_id:t.id,onSuccess:()=>{i.success(a.formatMessage(m.deleteModalSuccess),{hasCloseButton:!0}),r()},onError:()=>{i.danger(a.formatMessage(m.deleteModalFailure),{hasCloseButton:!0})}});return e.jsx(G,{isOpen:!0,title:a.formatMessage(m.deleteModalTitle),primaryButtonColor:"danger",onClose:s,confirmText:a.formatMessage(H.messages.delete),onConfirm:()=>{o()},loading:n,children:e.jsx("div",{className:"text-sm",children:e.jsx(x,{...m.deleteModalConfirmation})})})}const y=u.createContext({scheduleComponents:{frequency:"custom"},setFrequency:()=>{},setStartDate:()=>{},setByDay:()=>{},setByMonthDay:()=>{},setByYearDay:()=>{},setByMonth:()=>{},setTime:()=>{},startDate:void 0,nextRunTimes:[],scheduleErrors:void 0});function at({initialScheduleComponents:t,nextRunTimes:s,children:r}){const[a,i]=u.useState(t),[o,n]=u.useState(void 0),[l,d]=u.useState(void 0);return e.jsx(y.Provider,{value:{scheduleComponents:a,setFrequency:c=>{i({...a,frequency:c})},setStartDate:c=>{n(c),d(Te(c)),i({...a,start_time:c.toISOString()})},setByDay:c=>{i({...a,by_day:c})},setByMonthDay:c=>{i({...a,by_month_day:c})},setByYearDay:c=>{i({...a,by_year_day:c})},setByMonth:c=>{i({...a,by_month:c})},setTime:(c,g)=>{i({...a,by_hour:c,by_minute:g,by_second:0})},startDate:o,scheduleErrors:a.frequency!=="once"?void 0:l,nextRunTimes:s},children:r})}function Te(t){let s=!1;const r=new Date;r.setFullYear(r.getFullYear()+2),t.getTime()>=r.getTime()&&(s=!0);let a=!1;const i=new Date;if(i.setSeconds(0,0),t.getTime()<i.getTime()&&(a=!0),s||a)return{tooFarInFuture:s,inPast:a}}function Z(t){switch(t.frequency){case"once":return t.start_time?new Date(t.start_time):void 0;case"daily":case"weekly":case"monthly":case"yearly":return t.by_hour==null||t.by_minute==null?void 0:new Date(0,0,0,t.by_hour,t.by_minute);case"custom":return}}function Ne(t,s){const r=s.scheduleComponents.start_time?new Date(s.scheduleComponents.start_time):new Date;r.setHours(t.getHours(),t.getMinutes()),s.setStartDate(r)}function Fe(t,s){const r=Z(s.scheduleComponents),a=new Date(t);a.setHours(r?.getHours()??0,r?.getMinutes()??0),s.setStartDate(a)}function ke({initialDate:t,onClick:s}){const r=b(),{scheduleComponents:a}=u.useContext(y),i=u.useMemo(()=>Ie(a),[a]),[o,n]=u.useState(t),d=new Intl.DateTimeFormat(r.locale,{month:"short",year:"numeric"}).format(o);return e.jsxs("div",{className:"mx-5 my-2 flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-grow text-lg font-semibold",children:d}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{onClick:()=>n(new Date(o.getFullYear(),o.getMonth()-1,1)),children:e.jsx(ce,{className:"icon-sm"})}),e.jsx(L,{onClick:()=>{n(new Date(o.getFullYear(),o.getMonth()+1,1))},children:e.jsx(ge,{className:"icon-sm"})})]})]}),e.jsx(_e,{visibleDate:o,selectedDate:i,onClick:s})]})}function L(t){const{children:s,...r}=t;return e.jsx("button",{...r,className:"flex h-10 w-10 items-center justify-center",children:s})}function Ie(t){return t.start_time?new Date(t.start_time):void 0}function V(t,s){return new Date(t,s+1,0).getDate()}function Ee(t,s){return new Date(t,s,1).getDay()}function _e({visibleDate:t,selectedDate:s,onClick:r}){const a=b(),i=u.useContext(y),o=6,n=u.useMemo(()=>{const c=t.getFullYear(),g=t.getMonth(),j=V(c,g),M=Ee(c,g),h=[];for(let w=M-1;w>=0;w--)h.push(new Date(c,g-1,V(c,g-1)-w));for(let w=1;w<=j;w++)h.push(new Date(c,g,w));const D=o*7-h.length;for(let w=1;w<=D;w++)h.push(new Date(c,g+1,w));return h},[t]),l=u.useMemo(()=>{const c=new Intl.DateTimeFormat(a.locale,{weekday:"narrow"});return Array.from({length:7},(g,j)=>c.format(new Date(1970,0,j+4)))},[a.locale]),d=new Date;return d.setHours(0,0,0,0),e.jsxs("div",{children:[e.jsx("div",{className:"flex",children:l.map((c,g)=>e.jsx("div",{className:"flex h-10 w-10 items-center justify-center text-sm font-medium",children:c},g))}),Array.from({length:o}).map((c,g)=>e.jsx("div",{className:"flex",children:n.slice(g*7,(g+1)*7).map(j=>{const M=j>=d;return e.jsx("button",{className:"h-10 w-10",onClick:()=>{M&&(Fe(j,i),r())},children:e.jsx(Je,{dayNumber:j.getDate(),isSelected:!!s&&s.toDateString()===j.toDateString(),isSelectable:M})},j.getDay())})},g))]})}function Je({dayNumber:t,isSelected:s,isSelectable:r}){return e.jsx("div",{className:"h-full w-full p-1",children:e.jsx("div",{className:E("flex h-full w-full items-center justify-center rounded-full text-sm",!r&&"text-token-text-tertiary",!s&&r&&"hover:bg-token-main-surface-secondary",s&&"bg-black font-semibold text-white dark:bg-white dark:text-black"),children:t})})}const Oe="flex-1",Be="max-h-96 overflow-y-auto";function B({rootClassName:t,contentClassName:s,trigger:r,children:a,open:i,modal:o=!0,onOpenChange:n,onCloseAutoFocus:l}){return e.jsx("div",{className:E(t??Oe),children:e.jsxs(I.Root,{open:i,onOpenChange:n,modal:o,children:[r,e.jsx(I.Portal,{children:e.jsx(I.Content,{className:s??Be,side:"bottom",onCloseAutoFocus:l,children:a})})]})})}const Ae="w-full justify-start rounded-lg border-token-border-medium";function A({className:t,showError:s=!1,children:r}){return e.jsx(I.Trigger,{className:E(Ae,t),style:{borderColor:s?"var(--text-error)":void 0},children:e.jsxs("div",{className:"flex w-full items-center gap-1",children:[e.jsx("div",{className:"flex-grow text-left",children:r}),e.jsx(K,{className:"icon-sm text-token-text-tertiary"})]})})}function Y({options:t,initialOption:s,showError:r=!1,onClick:a}){return e.jsx(B,{trigger:e.jsx(A,{showError:r,children:s?.label??t[0].label}),children:e.jsx(ee,{options:t,onClick:a})})}function ee({options:t,onClick:s}){return e.jsx(e.Fragment,{children:t.map((r,a)=>e.jsx(I.Item,{onClick:()=>s?.(r),children:r.label},a))})}function te(t){const s=new Date,r=s.getFullYear(),a=s.getMonth(),i=s.getDate();let o;if(o=t.match(/^(\d{1,2}):(\d{2})\s?([ap]m)$/i),o){let n=parseInt(o[1],10);const l=parseInt(o[2],10),d=o[3].toLowerCase();if(n>=1&&n<=12&&l>=0&&l<=59)return d==="pm"&&n!==12&&(n+=12),d==="am"&&n===12&&(n=0),new Date(r,a,i,n,l)}if(o=t.match(/^([ap]m)\s?(\d{1,2}):(\d{2})$/i),o){let n=parseInt(o[2],10);const l=parseInt(o[3],10),d=o[1].toLowerCase();if(n>=1&&n<=12&&l>=0&&l<=59)return d==="pm"&&n!==12&&(n+=12),d==="am"&&n===12&&(n=0),new Date(r,a,i,n,l)}if(o=t.match(/^(\d{1,2})\s?([ap]m)$/i),o){let n=parseInt(o[1],10);const l=o[2].toLowerCase();if(n===12&&l==="am")return n=0,new Date(r,a,i,n,0);if(n>=1&&n<=11&&l==="pm")return n+=12,new Date(r,a,i,n,0);if(n>=1&&n<=12)return new Date(r,a,i,n,0)}if(o=t.match(/^(\d{1,2}):(\d{2})$/),o){const n=parseInt(o[1],10),l=parseInt(o[2],10);if(n>=0&&n<=23&&l>=0&&l<=59)return new Date(r,a,i,n,l)}if(o=t.match(/^(\d{1,2})(\d{2})$/),o){const n=parseInt(o[1],10),l=parseInt(o[2],10);if(n>=0&&n<=23&&l>=0&&l<=59)return new Date(r,a,i,n,l)}if(o=t.match(/^(\d{1,2})$/),o){const n=parseInt(o[1],10);if(n>=0&&n<=23)return new Date(r,a,i,n,0)}if(o=t.match(/^(\d{1,2}):$/),o){const n=parseInt(o[1],10);if(n>=0&&n<=23)return new Date(r,a,i,n,0)}}function O(t){return te(t)}function W(t){return te(t)!==void 0}function P(t){const s=O(t);return R(s)}function R(t){return t?t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!(new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h23"||new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h24")}):""}function ne(t,s){const r=new Date(0,0,0,t,s);return R(r)}function Re(t){const s=O(t);return s&&s.setMinutes(0),R(s)}function _(){const t=u.useContext(y),[s,r]=u.useState(!1),[a,i]=u.useState(!0),o=u.useRef(null),n=u.useRef(null),l=u.useMemo(()=>qe(),[]),d=Z(t.scheduleComponents),c=u.useMemo(()=>d??new Date(new Date().setHours(14,0,0,0)),[d]);u.useEffect(()=>{d||z(c,t)},[d,c,t]);const g=R(c),[j,M]=u.useState(!0),h=u.useRef(g),D=u.useRef(h.current);u.useEffect(()=>{const f=setTimeout(()=>{s&&o.current&&o.current.select()},0);return()=>clearTimeout(f)},[s]),u.useEffect(()=>{const f=setTimeout(()=>{if(s&&n.current){const p=Re(h.current),v=ue(l,S=>S.label===h.current||S.label===p);if(v!==-1&&n.current){const S=n.current.children[v];S&&S.scrollIntoView({block:"center"})}}},0);return()=>clearTimeout(f)},[s,h,l]);const w=f=>{const p=W(f);M(p),D.current=f,p&&(h.current=P(f))},N=()=>{if(W(D.current)){const p=P(D.current);h.current=p,D.current=p;const v=O(p);z(v,t)}else{D.current=h.current;const p=O(h.current);z(p,t)}M(!0),o.current&&(o.current.value=h.current)};return e.jsx(B,{trigger:e.jsx(A,{showError:!j||!!t.scheduleErrors,children:e.jsx("div",{className:"flex w-full items-center",children:e.jsx("textarea",{className:"m-0 w-full resize-none border-none bg-transparent p-0 text-sm",defaultValue:h.current,ref:o,rows:1,wrap:"off",onBlur:()=>{N()},onChange:f=>{const p=f.target.value;w(p)},onKeyDown:f=>{f.key===" "&&f.stopPropagation()}})})}),open:s,onOpenChange:f=>{r(f),f?i(!0):N()},onCloseAutoFocus:f=>{f.preventDefault(),o.current&&o.current.select()},modal:!1,children:e.jsx("ul",{ref:n,children:l.map((f,p)=>e.jsx("li",{onClick:()=>{const v=ne(f.value.hour,f.value.minute);w(v),N(),r(!1),o.current&&o.current.select()},onMouseOver:()=>i(!1),onMouseOut:()=>i(!1),children:e.jsx(de,{$spoofHovered:a&&P(D.current)===f.label,children:f.label})},p))})})}function qe(){return Array.from({length:96},(s,r)=>{const a=Math.floor(r/4),i=r%4*15;return{label:ne(a,i),value:{hour:a,minute:i}}})}function z(t,s){if(t)switch(s.scheduleComponents.frequency){case"once":{Ne(t,s);break}case"daily":case"weekly":case"monthly":case"yearly":{s.setTime(t.getHours(),t.getMinutes());break}}}function F(){const t=b(),{scheduleComponents:s,scheduleErrors:r,setFrequency:a}=u.useContext(y),i=u.useMemo(()=>[{label:t.formatMessage(m.scheduleFrequencyOnce),value:"once"},{label:t.formatMessage(m.scheduleFrequencyDaily),value:"daily"},{label:t.formatMessage(m.scheduleFrequencyWeekly),value:"weekly"},{label:t.formatMessage(m.scheduleFrequencyMonthly),value:"monthly"},{label:t.formatMessage(m.scheduleFrequencyYearly),value:"yearly"},{label:t.formatMessage(m.scheduleFrequencyCustom),value:"custom"}],[t]),o=i.find(n=>n.value===s.frequency);return u.useEffect(()=>{o||a(i[0].value)},[o,i,a]),e.jsx(Y,{options:i,initialOption:o,onClick:n=>a(n.value),showError:!!r})}function Pe(){const t=b(),{scheduleComponents:s,scheduleErrors:r,setByDay:a}=u.useContext(y),i=Array.from({length:7},(d,c)=>new Intl.DateTimeFormat(t.locale,{weekday:"long"}).format(new Date(Date.UTC(2021,5,c+1)))),o=["MO","TU","WE","TH","FR","SA","SU"],n=i.map((d,c)=>({label:d,value:o[c]})),l=n.find(d=>d.value===s.by_day);return u.useEffect(()=>{l||a(n[0].value)},[l,n,a]),e.jsx(Y,{options:n,initialOption:l,onClick:d=>a(d.value),showError:!!r})}function se({useShortForm:t=!1}){const{scheduleComponents:s,scheduleErrors:r,setByMonthDay:a}=u.useContext(y),i=Array.from({length:31},(d,c)=>({label:(c+1).toString(),value:c+1})),o=(d,c=new Date().getFullYear())=>new Date(c,d,0).getDate(),n=i.slice(0,o(s.by_month??1)),l=n.find(d=>d.value===s.by_month_day);return u.useEffect(()=>{l||a(n[0].value)},[l,n,a]),e.jsx(B,{rootClassName:t?"flex-none":void 0,trigger:e.jsx(A,{className:t?"w-[75px]":void 0,showError:!!r,children:l?.label}),children:e.jsx(ee,{options:n,onClick:d=>a(d.value)})})}function ze(){const t=b(),{scheduleComponents:s,scheduleErrors:r,setByMonth:a}=u.useContext(y),i=new Intl.DateTimeFormat(t.locale,{month:"long"}),o=Array.from({length:12},(l,d)=>({label:i.format(new Date(0,d)),value:d+1})),n=o.find(l=>l.value===s.by_month);return u.useEffect(()=>{n||a(o[0].value)},[n,o,a]),e.jsx(Y,{options:o,initialOption:n,onClick:l=>a(l.value),showError:!!r})}function He(){const t=b(),{scheduleComponents:s,scheduleErrors:r,setStartDate:a}=u.useContext(y),[i,o]=u.useState(!1);u.useEffect(()=>{s.start_time||a(new Date)},[s.start_time,a]);const n=s.start_time?new Date(s.start_time):new Date,l=new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"long",day:"numeric"});return e.jsx(B,{trigger:e.jsx(A,{showError:!!r,children:l.format(n)}),contentClassName:"min-w-[224px]",open:i,onOpenChange:o,children:e.jsx(ke,{initialDate:n,onClick:()=>o(!1)})})}function Ye(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(He,{}),e.jsx(_,{})]})}function Le(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(_,{})]})}function Ve(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(Pe,{}),e.jsx(_,{})]})}function We(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(se,{}),e.jsx(_,{})]})}function $e(){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{}),e.jsx(ze,{}),e.jsx(se,{useShortForm:!0}),e.jsx(_,{})]})}function Ue({automationId:t,conversationId:s,onModalClose:r}){return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(F,{}),e.jsx(Ge,{automationId:t}),e.jsx(Ke,{conversationId:s,onModalClose:r})]})}function Ge({automationId:t}){const{data:s,fetchNextPage:r,hasNextPage:a,isFetchingNextPage:i}=re({queryKey:["automation-next-run-times",t],queryFn:({pageParam:n})=>X.getAutomationNextRunTimes(t,n),getNextPageParam:n=>n.has_more?n.next_run_times[n.next_run_times.length-1]:void 0,initialPageParam:null}),o=u.useRef(null);return u.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[s]),e.jsx("div",{className:"rounded-lg bg-token-main-surface-secondary p-3",children:e.jsxs("div",{ref:o,className:"flex h-full max-h-52 flex-col gap-3 overflow-y-auto text-sm",children:[s?.pages?.flatMap(n=>n.next_run_times).map((n,l)=>e.jsx("div",{children:e.jsx(be,{targetTimeUTC:n})},l)),a&&e.jsx("button",{onClick:()=>r(),disabled:i,children:e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium",children:[e.jsx(x,{id:"qL17GV",defaultMessage:"See more"}),e.jsx(K,{className:"icon-md"})]})})]})})}function Ke({conversationId:t,onModalClose:s}){const r=$();return t?e.jsxs("div",{className:"flex gap-3 rounded-lg border border-token-border-medium p-4",children:[e.jsx(we,{}),e.jsxs("div",{className:"flex flex-grow flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:e.jsx(x,{...m.scheduleCustomScheduleTitle})}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:e.jsx(x,{...m.scheduleCustomScheduleContent})})]}),e.jsx(T,{onClick:()=>{s(),r(Q(t))},children:e.jsx(x,{...m.scheduleCustomScheduleOpenChat})})]}):null}function Xe({automationId:t,conversationId:s,onModalClose:r}){const{scheduleComponents:a}=u.useContext(y);switch(a.frequency){case"once":return e.jsx(Ye,{});case"daily":return e.jsx(Le,{});case"weekly":return e.jsx(Ve,{});case"monthly":return e.jsx(We,{});case"yearly":return e.jsx($e,{});case"custom":return e.jsx(Ue,{automationId:t,conversationId:s,onModalClose:r})}}function Qe({onClose:t,onConfirm:s}){const r=b();return e.jsx(G,{isOpen:!0,title:r.formatMessage(m.editModalCancel),primaryButtonColor:"danger",onClose:()=>{t()},onConfirm:()=>{s()},children:e.jsx("div",{className:"text-sm",children:e.jsx(x,{...m.cancelModalDescription})})})}function Ze({onClick:t}){return e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-token-border-medium p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium",children:[e.jsx(ve,{className:"icon-lg"}),e.jsx(x,{...m.pauseBanner})]}),e.jsx("div",{children:e.jsx(T,{onClick:t,children:e.jsx(x,{...H.messages.resume})})})]})}function ot({item:t,source:s,onClose:r}){const a=b(),i=U();u.useEffect(()=>{je.count(pe.JAWBONE,"jawbone_edit_modal.open")},[]);const{scheduleComponents:o,scheduleErrors:n}=u.useContext(y),[l,d]=u.useState(!1),[c,g]=u.useState(!1),[j,M]=u.useState(t.title),[h,D]=u.useState(t.prompt),[w,N]=u.useState(t.is_enabled);u.useEffect(()=>{if(n?.tooFarInFuture||n?.inPast){d(!1);return}d(j!==t.title&&j.length>0||h!==t.prompt&&h.length>0||w!==t.is_enabled||!me(o,t.schedule_components))},[n?.tooFarInFuture,n?.inPast,j,h,w,t,o]);const{mutate:f}=ie({mutationFn:()=>X.saveAutomation(t.id,j,t.schedule,w,h,t.schedule_components.start_time!==o.start_time?Intl.DateTimeFormat().resolvedOptions().timeZone:t.default_timezone,o,t.last_run_time),onSuccess:C=>{C&&ye.setAutomation(C.id,C),r(a.formatMessage(m.editModalSaveSuccess))},onError:()=>{i.danger(a.formatMessage(m.editModalSaveFailure),{hasCloseButton:!0}),d(!0),g(!1)}}),[p,v]=u.useState(!1),[S,q]=u.useState(!1);fe("156153730");const ae=$();return e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"min-w-[680px] text-sm",isOpen:!0,onClose:()=>{if(l){q(!0);return}r()},showCloseButton:!0,title:e.jsx(x,{...m.editModalTitle}),headerAccessory:s==="tasks"&&e.jsx(T,{icon:De,color:"secondary",onClick:()=>{ae(Q(t.conversation_id))},children:e.jsx(x,{id:"KkyshF",defaultMessage:"View chat"})}),type:"success",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[!w&&e.jsx(Ze,{onClick:()=>{N(!0)}}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:e.jsx(x,{...m.editModalName})}),e.jsx("textarea",{className:E("w-full resize-none rounded-lg border-token-border-medium bg-token-main-surface-primary text-sm",j.length===0&&"border-token-text-error focus:border-token-text-error"),rows:1,value:j,onChange:C=>M(C.target.value),placeholder:a.formatMessage({id:"GB3SVK",defaultMessage:"Summarize AI news"})}),j.length===0&&e.jsx(J,{children:e.jsx(x,{...m.editModalMissingTaskName})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:e.jsx(x,{...m.editModalInstructions})}),e.jsx("textarea",{className:E("w-full resize-none rounded-lg border-token-border-medium bg-token-main-surface-primary text-sm",h.length===0&&"border-token-text-error focus:border-token-text-error"),rows:3,value:h,onChange:C=>D(C.target.value),placeholder:a.formatMessage({id:"XDXPIp",defaultMessage:"Send a summary of the latest news in AI, focusing on especially surprising stories."})}),h.length===0&&e.jsx(J,{children:e.jsx(x,{...m.editModalMissingInstructions})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:e.jsx(x,{...m.editModalSchedule})}),e.jsx("div",{children:e.jsx(Xe,{automationId:t.id,conversationId:t.conversation_id,onModalClose:r})}),e.jsxs("div",{children:[n?.tooFarInFuture&&e.jsx(J,{children:e.jsx(x,{...m.editModalTooFarInFuture})}),n?.inPast&&e.jsx(J,{children:e.jsx(x,{...m.editModalInPast})})]}),!1]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[w&&e.jsx(T,{color:"secondary",onClick:()=>{N(!1)},children:e.jsx(x,{...H.messages.pause})}),e.jsx(T,{color:"secondary",onClick:()=>{v(!0)},children:e.jsx(x,{...m.editModalDelete})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{color:"secondary",onClick:()=>{if(l){q(!0);return}r()},children:e.jsx(x,{...m.editModalCancel})}),e.jsx(T,{disabled:!l,loading:c,color:"primary",onClick:()=>{g(!0),f()},children:e.jsx(x,{...m.editModalSave})})]})]})]})}),S&&e.jsx(Qe,{onClose:()=>q(!1),onConfirm:()=>r()}),p&&e.jsx(Ce,{item:t,onClose:()=>v(!1),onConfirm:()=>{v(!1),r()}})]})}function J({children:t}){return e.jsx("div",{className:"text-sm font-medium text-token-text-error",children:t})}export{at as J,ot as a,be as b,H as c,Ce as d};
//# sourceMappingURL=tqebddvnlsjnw3aa.js.map
