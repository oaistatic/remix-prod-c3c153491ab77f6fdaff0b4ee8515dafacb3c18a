import{r as u,e as b,j as e,M as d,d as D}from"./fs6h2trisr1juto6.js";import{fK as N,fL as A,V as I,fM as j,c5 as E,aF as F,aM as L,bG as T,cN as y,cM as f,al as k}from"./njq6ygky3ttysgdk.js";import{S as U}from"./il50daha0kb70ufn.js";import{bN as R,dP as G,dQ as W,dR as V,dS as Y,dT as x,dU as _,dV as z,dW as H,dX as J,dj as a,dY as B,bj as K}from"./d7a6rc8fexfzu7dt.js";import{S as O}from"./lscxa7r7b9o6yh7m.js";import{S as Q}from"./c1p22j8o7hm9vv5x.js";function X({voice:s}){const[r,o]=u.useState(!1),n=b(),t=N(),g=s.voice,c=s.preview_url,i=u.useRef({playPromise:null}).current,l=A(h=>h.isPlaying&&h.sourceUrl===c),S=I(),m=u.useCallback(async()=>{if(!t)return;const h={voice:g,source:c};j.previews.click(h);try{o(!0),t.changeSource(c),i.playPromise=t.play(),o(!1)}catch(C){j.previews.error(C,h),S.danger(n.formatMessage({id:"DeIYxH",defaultMessage:"Something went wrong playing preview"}))}},[n,t,c,g,i,S]),p=u.useCallback(()=>{t&&(i.playPromise?i.playPromise.then(()=>{t.stop(),i.playPromise=null}):t.stop())},[t,i]),P=u.useCallback(()=>{l?p():r||m()},[p,m,r,l]);return u.useEffect(()=>()=>{l&&p()},[s,l,p]),e.jsx(E,{onClick:P,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:r,icon:l?Q:O,children:l?e.jsx(d,{id:"yGpEMJ",defaultMessage:"Stop"}):e.jsx(d,{id:"JwYDVp",defaultMessage:"Play"})})}const le={Trigger:q,Content:Z};function M(){return k("174366048")?.value}function q(){return M()?e.jsx(W,{value:V.Speech,icon:e.jsx(U,{className:"icon-sm"}),label:e.jsx(d,{id:"speechSettings.trigger",defaultMessage:"Speech"})}):null}function Z(){const s=M(),r=F("3940529303").value,o=L();if(!s)return null;const n=r&&o?.length&&!o?.includes(T.VideoScreenSharing);return e.jsxs(Y,{value:V.Speech,children:[e.jsx(x,{children:e.jsx($,{})}),_()?e.jsx(x,{children:e.jsx(ee,{})}):null,n?e.jsx(x,{children:e.jsx(se,{})}):null]})}function w(s){const{data:r,isLoading:o}=R(s)||{},n=G();return{isLoading:o,value:r,setValue:t=>{n.mutate({setting:s,value:t})}}}function $(){const{isLoading:s,value:r,setValue:o}=w(y.VoiceName),n=z(),t=H(),g=s?"":J(r,t),c=n.find(({voice:i})=>i===g);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(d,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),e.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[c?e.jsxs(e.Fragment,{children:[e.jsx(X,{voice:c}),e.jsx("div",{className:"h-4 border-l"})]}):null,e.jsxs(a.Root,{value:g,onValueChange:i=>o(i),disabled:s,children:[e.jsxs(a.Trigger,{children:[e.jsx(a.Value,{}),e.jsx(a.Icon,{})]}),e.jsx(a.Portal,{children:e.jsx(a.Content,{children:n.map(({voice:i,name:l})=>e.jsx(a.Item,{value:i,children:l},i))})})]})]})]})})})}function ee(){const{isLoading:s,value:r,setValue:o}=w(y.VoiceMainLanguage);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(d,{id:"speechSettings.content.language",defaultMessage:"Main Language"})}),e.jsxs(a.Root,{value:s?"":r??f.Auto,onValueChange:n=>o(n),disabled:s,children:[e.jsxs(a.Trigger,{children:[e.jsx(a.Value,{}),e.jsx(a.Icon,{})]}),e.jsx(a.Portal,{children:e.jsxs(a.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[e.jsx(a.Item,{value:f.Auto,children:e.jsx(d,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-Detect"})}),Object.entries(f).filter(([n,t])=>t!==f.Auto).map(([n,t])=>e.jsx(a.Item,{value:t,className:"capitalize",children:n},t))]})})]})]}),e.jsx(B,{children:e.jsx(d,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function se(){const s=b();return e.jsx(K,{label:s.formatMessage(v.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:s.formatMessage(v.voiceAndScreenSharingDescription)})}const v=D({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}});export{le as S,w as u};
//# sourceMappingURL=e3h9yvwr92nxzy63.js.map
