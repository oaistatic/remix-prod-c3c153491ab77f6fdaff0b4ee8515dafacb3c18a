import{j as e,M as C,r as i,a7 as W}from"./fs6h2trisr1juto6.js";import{c as G,d as O}from"./ijutvl794yycgs5p.js";import{ea as P,eb as z,ec as V,ed as q,ee as K,ef as X,eg as H,eh as J,ei as Q}from"./d7a6rc8fexfzu7dt.js";import{d as N,c7 as Y}from"./njq6ygky3ttysgdk.js";import{S as Z}from"./crv164w6r8tn71zi.js";import"./csg4i0wk6hi0jvkd.js";import"./lj0prj6na7gf1jpf.js";import"./n9whwsbg0rx5cs8k.js";const $=({pressed:s,onClick:r})=>{const o=e.jsx("div",{className:"whitespace-nowrap pl-1 pr-1 [display:--force-hide-label]",children:e.jsx(C,{id:"0MS4cd",defaultMessage:"Selection"})});return e.jsxs("div",{className:N("inline-flex max-h-9 min-h-9 rounded-full border text-[13px] font-medium radix-state-open:bg-black/10",{"text-token-text-secondary":!s,"border-transparent bg-[#DAEEFF] text-blue-1000 can-hover:hover:bg-[#BDDCF4] dark:bg-[#2A4A6D] dark:text-[#48AAFF] dark:can-hover:hover:bg-[#1A416A]":s,"border-token-border-light focus-visible:outline-black can-hover:hover:bg-token-main-surface-secondary dark:focus-visible:outline-white dark:can-hover:hover:bg-gray-700":!s}),children:[e.jsxs("div",{className:"flex h-full min-w-8 cursor-default select-none flex-row items-center justify-center p-2","aria-pressed":s,children:[e.jsx(Z,{className:"h-5 w-5 pr-1"}),o]}),e.jsx("button",{className:"flex h-full min-w-8 flex-row items-center justify-center border-l border-blue-1000/10 p-2","aria-pressed":s,onClick:r,children:e.jsx(Y,{className:"h-4 w-4"})})]})},k=.0025,ce=i.forwardRef(function({type:r,placeholder:o,state:a,renderFiles:_,leftSideActions:I,onSubmit:f,inputState:u,composerController:t,clientThreadId:h,gizmoId:p,disableReason:b,controlsDisabled:l,setControlsDisabled:c},y){const{isInpainting:d,onCancelInpaint:E}=P(),g=z(),[v,S]=i.useState(void 0);let j=null;const{isLoading:x}=g;x||(j=g.modelId);const[D,A]=i.useState(300),F=V(n=>{n.contentRect&&A(n.contentRect.width)});i.useEffect(()=>{x||q()||t.focus()},[j,t,x]);const M=n=>{ee({target:n.target,rootId:"composer-background",additonalInteractiveIds:["reply-regions"]})||t.focus()};function T(n){if(!(t instanceof G))return;const m=t.getSelectionStart();c?.(!1),requestAnimationFrame(()=>{const{state:B,dispatch:L}=t.view;L(B.tr.insertText(n,m,m)),requestAnimationFrame(()=>{t.setSelection(m+n.length)}),t.usedDictation=!0})}const R=i.useCallback(()=>e.jsx(K,{inputState:u,state:a,onSubmit:f,composerController:t,clientThreadId:h,gizmoId:p,disableReason:b}),[u,a,f,t,h,p,b]),w=e.jsx(O,{composerController:t,placeholder:o},"userInput"),U=d||l;return e.jsx(X,{id:"composer-background",ref:y,className:N("flex w-full cursor-text flex-col rounded-3xl border-l border-r border-t border-token-border-xlight duration-150 ease-in-out contain-inline-size motion-safe:transition-[color,background-color,border-color,text-decoration-color,fill,stroke,box-shadow,bottom] dark:border-none dark:shadow-none",r!=="temporary"&&"shadow-[0_9px_9px_0px_rgba(0,0,0,0.01),_0_2px_5px_0px_rgba(0,0,0,0.06)] has-[:focus]:shadow-[0_2px_12px_0px_rgba(0,0,0,0.04),_0_9px_9px_0px_rgba(0,0,0,0.01),_0_2px_5px_0px_rgba(0,0,0,0.06)]",r!=="temporary"&&"bg-token-main-surface-primary dark:bg-[#303030]",r==="temporary"&&"dark bg-[#303030]"),onClick:M,style:{viewTransitionName:"var(--vt-composer)"},children:e.jsx("div",{className:"px-1 py-1",children:e.jsxs(e.Fragment,{children:[_,e.jsx(W,{initial:!1,children:e.jsxs("div",{className:"flex flex-col justify-start",children:[U&&e.jsx("div",{className:"mx-1 flex flex-row pt-1",children:l?v&&e.jsx(H,{waveform:v,containerWidth:D,scaleFactor:10,initialValue:k}):e.jsx("div",{className:"mx-2 max-h-12 flex-grow overflow-x-auto",children:w})}),e.jsx("div",{className:"flex min-h-[44px] items-center pl-1",ref:F,children:e.jsx("div",{className:"min-w-0 max-w-full flex-1",children:e.jsxs("div",{className:"flex flex-row items-center justify-between gap-x-1.5",children:[e.jsxs("div",{className:"mr-3 flex flex-shrink gap-x-1.5 text-token-text-primary",children:[I,d&&e.jsx($,{pressed:!0,onClick:()=>E()})]}),!d&&e.jsx("div",{className:"mx-2 max-h-16 flex-grow overflow-x-auto",children:w}),e.jsx("div",{className:"flex flex-shrink gap-x-1.5 justify-self-end pr-2",children:l?e.jsx(J,{initialValue:k,onSuccess:T,onWaveformDataUpdate:S,onExit:()=>{c?.(!1)}}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{size:"small",onExit:()=>{c?.(!0)}}),R()]})})]})})})]})})]})})})});function ee({target:s,rootId:r,additonalInteractiveIds:o}){let a=s;for(;a&&a!=null;){if(a.tagName==="BUTTON"||a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable||o.includes(a.id))return!0;if(a.id===r)return!1;a=a.parentElement}return!1}export{ce as ImageGenComposer};
//# sourceMappingURL=jwwhrtj6dkdymig3.js.map
