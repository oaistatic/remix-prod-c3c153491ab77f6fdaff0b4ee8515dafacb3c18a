import{r as o,j as e,L as ie,e as B,v as J,M as v,d as ne,ac as ke,f as le}from"./fs6h2trisr1juto6.js";import{al as ce,d as z,aq as de,P as E,a as C,c5 as O,az as A,cD as me,bH as we,g as q,L as X,aA as ue,c1 as ze,fE as Ne,fD as Se,el as Ee,bT as Ge,g6 as Le}from"./njq6ygky3ttysgdk.js";import{q as Z,bJ as Me,ge as Ce,gf as Pe,gg as ge,gh as fe,gi as Ae,gj as Re,a8 as I,aa as xe,dG as he,gk as Te,co as Oe,d3 as De,gl as ee,gm as Ie,dj as R,P as _e,gn as We,go as U,gp as Ue,dD as He,dB as Be,bb as Ve}from"./d7a6rc8fexfzu7dt.js";import{S as Fe}from"./jhoqcbqmt1jrh2rh.js";import{S as pe}from"./eq34zwf9q18c17ro.js";import{A as se}from"./dpwzd04w8cjus29t.js";import{G as ye}from"./en8ogvlmn3lccz09.js";import{G as Ke,a as $e,b as Qe}from"./ctdkjhicvcmudkqr.js";import{G as Q}from"./fiydxnpdsx8rzlpw.js";import{P as Ye,E as Je,e as qe}from"./ijutvl794yycgs5p.js";import{a as te}from"./bhsw6t55h66bayr8.js";function Y({gizmo:s,children:t,onClick:r,onModalOpen:a,onModalClose:c,selectOnly:n,className:u}){const f=ce("1825130190").value,[x,d]=o.useState(!1);return n?e.jsx("a",{className:z("gizmo-link cursor-pointer",u),href:"#",onClick:m=>{m.preventDefault(),r?.(m)},children:t}):f?e.jsxs(e.Fragment,{children:[x&&e.jsx(Ke,{gizmoId:s.gizmo.id,creatorId:s.gizmo.author.user_id,onClose:()=>{d(!1),c?.()},children:e.jsx($e,{as:"link",to:Z(s)})}),e.jsx("a",{className:z("gizmo-link cursor-pointer",u),href:"#",onClick:m=>{m.preventDefault(),r?.(m),d(!0),a?.()},children:t})]}):e.jsx(ie,{to:Z(s),className:z("gizmo-link",u),target:"_blank",onClick:r,children:t})}const ve=o.forwardRef(function({className:t,inputClassName:r,iconClassName:a,open:c,setOpen:n,resultsSizeOffset:u,placeholder:f,effectiveRole:x,onSelect:d},m){const y=B(),[p,i]=o.useState(""),[l,j]=o.useState(""),[b,P]=o.useState(!1),S=c??b,N=n??P,w=o.useRef(null),T=de()?.isWorkspaceAccount(),_=ce("3054422710").value,h=T!==void 0&&T&&_;o.useEffect(()=>{if(!S)return;const L=K=>{K.key==="Escape"&&(N(!1),w.current?.blur())},F=K=>{K.target instanceof Node&&typeof m!="function"&&!m?.current?.contains(K.target)&&N(!1)};return document.addEventListener("keydown",L,!1),document.addEventListener("mousedown",F,!1),()=>{document.removeEventListener("keydown",L,!1),document.removeEventListener("mousedown",F,!1)}},[S,N,w,m]);const[g,k]=o.useState();o.useEffect(()=>{const L=()=>{k(window.visualViewport?.height)};return window.visualViewport?.addEventListener("resize",L),L(),()=>{window.visualViewport?.removeEventListener("resize",L)}},[k]);const[W,V]=o.useState(!1);return o.useEffect(()=>{W&&!S&&N(!0)},[W,N,S]),o.useEffect(()=>{const L=setTimeout(()=>{j(p)},250);return()=>{clearTimeout(L)}},[p]),e.jsxs(te,{as:"div",className:z("group relative rounded-xl screen-arch:md:w-[calc(min(var(--screen-content-ideal-size,40rem),var(--container-w-except-padding))-1rem)]",t),ref:m,children:[e.jsx(Me,{className:z("pointer-none icon-md absolute top-0 h-full text-token-text-tertiary",a)}),e.jsx("input",{className:z("z-10 w-full rounded-xl border border-token-border-light bg-token-main-surface-primary py-2 pr-3 font-normal outline-0 delay-100","",r),placeholder:f??y.formatMessage(M.discoverySearch),value:p,onChange:L=>i(L.target.value),onFocus:()=>{N(!0),E.logEvent(C.searchOpened)},ref:w}),e.jsx(Ye,{show:S,children:e.jsx(te.Panel,{static:!0,className:"absolute top-[calc(100%-10px)] w-full overflow-y-auto rounded-lg rounded-t-none border border-t-0 border-token-border-light bg-token-main-surface-primary px-3 py-2",style:{maxHeight:g!=null?g+(u??0):"100vh"},children:e.jsx(Xe,{query:l,effectiveRole:x,setPopoverForceOpen:V,onSelect:d,showWorkspaceResults:h})})})]})});function $(){return e.jsx("div",{className:"flex items-center justify-center py-1",children:e.jsx(me,{})})}function Xe({query:s,effectiveRole:t,setPopoverForceOpen:r,showWorkspaceResults:a,onSelect:c}){const[n,u]=o.useState("ALL");o.useEffect(()=>{E.logEvent(C.searchStart)},[]);const{data:f,isLoading:x}=Ce(s),{data:d,isLoading:m}=Pe(s,a),{data:y,isLoading:p}=ge({cutId:"recent",limit:3});return e.jsx(Ze,{debouncedQuery:s,searchResults:f?.items,isLoadingSearch:x,searchResultsCursor:f?.cursor,showWorkspaceResults:a,workspaceSearchResults:d?.items,workspaceSearchResultsCursor:d?.cursor,isLoadingWorkspaceSearch:m,isLoadingRecent:p,recent:y?.pages.flatMap(i=>i.list.items.map(l=>l.resource))??[],effectiveRole:t,setPopoverForceOpen:r,onSelect:c,activeTab:n,setActiveTab:u})}function Ze({debouncedQuery:s,searchResults:t,isLoadingSearch:r,searchResultsCursor:a,showWorkspaceResults:c,workspaceSearchResults:n,workspaceSearchResultsCursor:u,isLoadingWorkspaceSearch:f,recent:x,isLoadingRecent:d,effectiveRole:m,setPopoverForceOpen:y,onSelect:p,activeTab:i,setActiveTab:l}){const j=o.useRef(J());if(o.useEffect(()=>{E.logEvent(C.searchStart)},[]),o.useEffect(()=>{!r&&t&&(j.current=J(),t.length>0?Promise.all(t.map((b,P)=>{E.logEvent(C.searchDisplayResult,{search_id:j.current,gizmo_id:b.gizmo.id,position:P,query:s})})):E.logEvent(C.searchNoResults,{query:s}))},[t,r,s]),s===""&&d)return e.jsx($,{});if(c){if(i==="ALL"&&r||i==="WORKSPACE"&&f)return e.jsx($,{});if(s!==""&&!r&&!f&&(!t||t.length===0)&&(!n||n.length===0))return e.jsx("div",{className:"mx-2",children:e.jsx(D,{onClick:void 0,isSelected:void 0,isClickable:!1,children:e.jsx(v,{...M.discoveryNoResultsSearch})})})}else{if(r)return e.jsx($,{});if(s!==""&&!r&&(!t||t.length===0))return e.jsx("div",{className:"mx-2",children:e.jsx(D,{onClick:void 0,isSelected:void 0,isClickable:!1,children:e.jsx(v,{...M.discoveryNoResultsSearch})})})}return e.jsxs(e.Fragment,{children:[e.jsx(ss,{query:s,activeTab:i,setActiveTab:l,showWorkspaceResults:c,recentSearchResults:x??[]}),e.jsx(es,{query:s}),e.jsx(ts,{query:s,searchIdRef:j.current,searchResults:t,searchResultsCursor:a,isLoadingSearch:r,workspaceSearchResults:n,workspaceSearchResultsCursor:u,isLoadingWorkspaceSearch:f,recentSearchResults:x??[],activeTab:i,setPopoverForceOpen:y,effectiveRole:m,onSelect:p})]})}function es({query:s}){return/search\s?gpt/i.test(s)?e.jsx("div",{className:"mb-1 mt-2 rounded-lg bg-gray-50 py-3 text-center text-xs dark:bg-gray-750",children:e.jsx(v,{id:"NEGLw8",defaultMessage:"Learn more about OpenAI's <searchGPTLink>SearchGPT prototype</searchGPTLink>",values:{searchGPTLink:r=>e.jsx(ie,{to:"/search",target:"_blank",className:"text-brand-blue-800 dark:text-blue-400",onClick:()=>{E.logEvent(C.searchGPTGizmoBannerLinkClicked)},children:r})}})}):null}function D({children:s,onClick:t,isSelected:r,isClickable:a}){return e.jsx("div",{className:`px-3 pb-2 text-xs text-token-text-tertiary ${r?"border-b-2 font-bold":"font-semibold"} ${a?"cursor-pointer":""}`,onClick:()=>{t?.()},children:s})}function ss({query:s,activeTab:t,setActiveTab:r,showWorkspaceResults:a,recentSearchResults:c}){const n=fe();return s===""?c&&c.length>0?e.jsx(D,{onClick:void 0,isSelected:!1,isClickable:!1,children:e.jsx(v,{...M.discoverySearchRecentlyUsed})}):e.jsx(D,{onClick:void 0,isSelected:void 0,isClickable:!1,children:e.jsx(v,{...M.discoverySearchRecentlyUsedEmpty})}):e.jsxs("div",{className:"flex",children:[e.jsx(D,{onClick:()=>r("ALL"),isSelected:t==="ALL"&&a,isClickable:a,children:e.jsx(v,{...M.discoveryAllResultsHeader})}),a&&e.jsx(D,{onClick:()=>r("WORKSPACE"),isSelected:t==="WORKSPACE",isClickable:!0,children:e.jsx(v,{...M.discoveryWorkspaceResultsHeader,values:{workspaceName:n}})})]})}function ts({query:s,searchIdRef:t,searchResults:r,searchResultsCursor:a,isLoadingSearch:c,workspaceSearchResults:n,workspaceSearchResultsCursor:u,isLoadingWorkspaceSearch:f,recentSearchResults:x,setPopoverForceOpen:d,activeTab:m,effectiveRole:y,onSelect:p}){const[i,l]=o.useState(!1),j=Ae(s,i,m==="WORKSPACE",m==="WORKSPACE"?u:a),{data:b,hasNextPage:P,fetchNextPage:S,isFetchingNextPage:N,isError:w}={...j,data:j.data?.pages.flatMap(g=>g.items.map(k=>k))??[]},[T,_]=o.useState(b.length),h=o.useRef(null);return o.useEffect(()=>{b.length>T&&(_(b.length),h.current?.scrollIntoView({behavior:"smooth",block:"nearest"}))},[b.length,T]),s===""&&x&&x.length>0?e.jsx(e.Fragment,{children:x.map((g,k)=>e.jsx(H,{searchId:t,position:k,query:s,resource:g,effectiveRole:y,setPopoverForceOpen:d,onSelect:p},g.gizmo.id))}):s!==""&&!c&&m==="ALL"&&(r==null||r.length===0)?e.jsx("div",{className:"mt-4 px-3 pb-2 text-xs font-semibold text-token-text-tertiary",children:e.jsx(v,{...M.discoveryNoResultsSearch})}):s!==""&&!f&&m==="WORKSPACE"&&(n==null||n.length===0)?e.jsx("div",{className:"mt-4 px-3 pb-2 text-xs font-semibold text-token-text-tertiary",children:e.jsx(v,{...M.discoveryNoResultsSearch})}):e.jsx("div",{children:m==="ALL"?e.jsxs("div",{children:[r&&r.map((g,k)=>e.jsx(H,{searchId:t,position:k,query:s,resource:g,effectiveRole:y,setPopoverForceOpen:d,onSelect:p},g.gizmo.id)),r&&b&&b.map((g,k)=>e.jsx(H,{searchId:t,position:k+r?.length,query:s,resource:g,effectiveRole:y,setPopoverForceOpen:d,onSelect:p},g.gizmo.id)),(!i&&b.length===0||P||N||w)&&a!=null&&e.jsx(O,{color:w?"danger-outline":"secondary",onClick:()=>{l(!0),S(),d?.(!0)},loading:N,fullWidth:!0,className:"mt-2 md:mt-3",children:w?e.jsx(v,{...M.discoveryLoadMoreError}):e.jsx(v,{...M.discoveryLoadMore})})]}):e.jsxs("div",{children:[n&&n.map((g,k)=>e.jsx(H,{searchId:t,position:k,resource:g,query:s,setPopoverForceOpen:d},g.gizmo.id)),n&&b&&b.map((g,k)=>e.jsx(H,{searchId:t,position:k+n?.length,query:s,resource:g,effectiveRole:y,setPopoverForceOpen:d,onSelect:p},g.gizmo.id)),(!i&&b.length===0||P||N||w)&&u!=null&&e.jsx(O,{color:w?"danger-outline":"secondary",onClick:()=>{l(!0),S(),d?.(!0)},fullWidth:!0,className:"mt-2 md:mt-3",loading:N,children:w?e.jsx(v,{...M.discoveryLoadMoreError}):e.jsx(v,{...M.discoveryLoadMore})})]})})}function H({searchId:s,resource:t,position:r,query:a,effectiveRole:c,setPopoverForceOpen:n,onSelect:u}){const f=t.gizmo.vanity_metrics?.num_conversations_str,x=Re(),d=t.gizmo.tags?.includes(I.WorkspaceDisabled)&&c!==A.OWNER;return e.jsxs(Y,{gizmo:t,className:z("group mx-2 flex items-center gap-3 rounded-lg px-3 py-2 hover:bg-gray-50 dark:hover:bg-white/10",d&&"opacity-50 hover:opacity-100"),onClick:()=>{u?u(t):E.logEvent(C.storeClickGizmo,{search_id:s,gizmo_id:t.gizmo.id,position:r,query:a,section:"search"})},onModalOpen:()=>{n?.(!0)},onModalClose:()=>{n?.(!1)},selectOnly:!!u,children:[e.jsx(ye,{isFirstParty:!!t.gizmo.tags?.includes(I.FirstParty),src:t.gizmo.display.profile_picture_url??void 0,className:z("h-8 w-8 shrink-0",d&&"grayscale group-hover:grayscale-0")}),e.jsxs("div",{className:"flex flex-col space-y-1 truncate",children:[e.jsx("div",{className:"flex flex-row items-end space-x-2",children:e.jsx("span",{className:"shrink-0 truncate text-sm font-semibold",children:t.gizmo.display.name})}),x&&e.jsx("span",{className:"max-w-md truncate text-xs text-token-text-tertiary",children:t.gizmo.display.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"-mt-1",children:e.jsx(xe,{gizmo:t,className:"truncate text-xs text-token-text-tertiary",hideLink:!0})}),f&&e.jsxs("div",{className:"flex items-center gap-1 font-semibold text-token-text-tertiary",style:{marginTop:"-2px"},children:[e.jsx(he,{className:"icon-xs"}),e.jsx("span",{className:"line-clamp-1 text-xs",children:f})]})]})]})]})}const M=ne({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"}}),je=we.div`grid grid-cols-1 gap-x-1.5 gap-y-1 md:gap-x-2 md:gap-y-1.5 lg:grid-cols-2 lg:gap-x-3 lg:gap-y-2.5`,re="gpt_store";function rs(s,t){t.scrollLeft>s.offsetLeft?t.scrollBy({left:s.offsetLeft-t.scrollLeft-20,behavior:"smooth"}):t.scrollLeft+t.clientWidth<s.offsetLeft+s.clientWidth&&t.scrollBy({left:s.offsetLeft+s.clientWidth-t.clientWidth-t.scrollLeft+20,behavior:"smooth"})}function Ns({anon:s}){const[t,r]=o.useState(()=>q.getItem(X.GizmoDiscoveryLocale)),a=x=>{r(x),q.setItem(X.GizmoDiscoveryLocale,x)},c=ue(),[n,u]=o.useState(!1),f=c?.isOwnerOfAccount()&&!n?A.OWNER:A.STANDARD;return e.jsx(os,{anon:s,currAccount:c,requestedLocale:t,effectiveRole:f,setPretendStandardUser:u,setLocale:a})}function os({anon:s,currAccount:t,requestedLocale:r,effectiveRole:a,setPretendStandardUser:c,setLocale:n}){const[u,f]=o.useState(void 0),x=!!s||t?.isPersonalAccount()&&!0,{data:d,isLoading:m,isError:y}=Te(r,x);o.useEffect(()=>{d&&f({locale:d.locale,workspace_filtered:d.workspace_filtered,cuts:d.cuts.map(i=>({info:i.info,list:{items:i.list.items.map(l=>l.resource),cursor:i.list.cursor}}))})},[d]);const p=(...i)=>{const l=ge(...i);return{...l,data:l.data?.pages.flatMap(j=>j.list.items.map(b=>b.resource))??[]}};return e.jsx(as,{anon:s,discoveryLanding:u,isLoading:m,isError:y,effectiveRole:a,setPretendStandardUser:c,requestedLocale:r,setLocale:n,useFetchMoreQuery:p})}function as({anon:s,discoveryLanding:t,isLoading:r,isError:a,effectiveRole:c,setPretendStandardUser:n,requestedLocale:u,setLocale:f,useFetchMoreQuery:x}){const d=ue(),m=t?.locale??u,y=o.useRef({}),[p,i]=o.useState({}),l=o.useMemo(()=>Oe(ze(t?.cuts.map(h=>({id:h.info.id,name:h.info.display_group}))),"name"),[t]),j=o.useRef(null),b=l.find(h=>p[h.id])??l[0];o.useEffect(()=>{const h=y.current,g=new IntersectionObserver(k=>{k.forEach(W=>{for(const V of l){const L=h[V.id];L!=null&&W.target===L&&i(F=>({...F,[V.id]:W.isIntersecting}))}})},{root:null,rootMargin:"-96px",threshold:.1});return Object.values(h).forEach(k=>{k!=null&&g.observe(k)}),()=>{Object.values(h).forEach(k=>{k!=null&&g.unobserve(k)})}},[y,l]);const P=o.useRef(null),S=o.useRef(null),[N,w]=o.useState(0);o.useEffect(()=>{const h=S.current,g=()=>{h!=null&&w(h.scrollTop)};return h?.addEventListener("scroll",g),window.addEventListener("resize",g),g(),()=>{h?.removeEventListener("scroll",g),window.removeEventListener("resize",g)}},[S,w]);const T=e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:a?e.jsx(De,{type:"danger",children:e.jsx(v,{...G.discoveryError})}):e.jsx(me,{})}),_=e.jsxs("div",{className:"mx-auto max-w-3xl overflow-x-clip px-4 screen-arch:w-full",children:[e.jsx(is,{}),!s&&e.jsx(ve,{ref:P,className:z("z-20 mb-6 mt-2 flex-grow shadow-[0px_10px_10px_-6px_rgba(0,0,0,0.04)]"),inputClassName:"md:h-14 h-12 text-base pl-12",iconClassName:"left-5",resultsSizeOffset:Math.min(N-260,-110)}),l.length>1&&e.jsx(ns,{displayGroups:l,currentDisplayGroup:b,scrollToDisplayGroup:h=>{(y.current[h.id]??j.current).scrollIntoView({behavior:"smooth",block:"start"})}}),e.jsx("div",{ref:j,className:"scroll-mt-28"}),t?.cuts.map(h=>h.info.display_type==="featured"?e.jsx(ms,{info:h.info,items:h.list.items,ref:g=>{g!=null&&(y.current[h.info.id]=g)},effectiveRole:c},h.info.id):e.jsx(gs,{info:h.info,items:h.list.items,cursor:h.list.cursor??void 0,ref:g=>{g!=null&&(y.current[h.info.id]=g)},anon:s,effectiveRole:c,useFetchMoreQuery:x},h.info.id))??[]]});return r||a?e.jsxs(e.Fragment,{children:[s?e.jsx(se,{redirectUrl:ee(),className:"sticky top-0 z-30 h-14 bg-token-main-surface-primary"}):e.jsx(oe,{locale:m,setLocale:f,currAccount:d}),T]}):e.jsxs("div",{ref:S,className:"h-full overflow-y-auto",children:[s?e.jsx(se,{redirectUrl:ee(),className:"sticky top-0 z-30 h-14 bg-token-main-surface-primary"}):e.jsxs(e.Fragment,{children:[d?.isWorkspaceAccount()&&e.jsx(cs,{role:c,onPretendStandardUser:h=>{n(h)}}),e.jsx(oe,{pageSearchRef:P,locale:m,setLocale:f,currAccount:d})]}),_,t?.workspace_filtered&&!d?.isOwnerOfAccount()&&e.jsx(ls,{})]})}function is(){return e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"my-2 text-center text-3xl font-bold md:my-4 md:text-5xl",children:e.jsx(v,{...G.discoverySplashHeader})}),e.jsx("div",{className:"mx-auto w-full text-center text-sm text-token-text-secondary md:text-lg md:leading-tight",children:e.jsx(v,{...G.discoverySplashDescription})})]})}function ns({displayGroups:s,currentDisplayGroup:t,scrollToDisplayGroup:r}){const a=o.useRef(null),c=B(),n=(...i)=>c.formatMessage(...i),u=o.useRef({}),[f,x]=o.useState(!1);o.useEffect(()=>{if(f||t==null)return;const l=u.current[t.id];if(l==null)return;const j=a.current;j!=null&&rs(l,j)},[t,f]);const[d,m]=o.useState(!1),[y,p]=o.useState(!1);return o.useEffect(()=>{const i=a.current,l=()=>{i!=null&&(m(i.scrollLeft>0),p(i.scrollLeft+i.clientWidth<i.scrollWidth))};return i?.addEventListener("scroll",l),window.addEventListener("resize",l),l(),()=>{i?.removeEventListener("scroll",l),window.removeEventListener("resize",l)}},[a]),e.jsxs("div",{className:"sticky top-14 z-10 -ml-4 mb-12 w-screen bg-token-main-surface-primary py-2 text-sm md:ml-0 md:w-full md:pb-0",children:[d&&e.jsx("div",{className:"absolute left-0 top-2 hidden h-full items-end bg-gradient-to-r from-white from-50% to-transparent pr-8 dark:from-gray-800 md:block",children:e.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/20",onClick:()=>{a.current!=null&&a.current.scrollBy({left:-400,behavior:"smooth"})},children:e.jsx(Ne,{className:"icon-sm"})})}),e.jsx("div",{className:"no-scrollbar flex scroll-m-5 gap-1.5 overflow-x-auto md:overflow-hidden",ref:a,children:s.map(i=>e.jsx("div",{className:z("cursor-pointer select-none scroll-mx-5 whitespace-nowrap rounded-3xl px-3 py-2 first:ml-4 last:mr-4 md:px-2 md:first:ml-0 md:last:mr-0",i.id===t?.id?"border-token-text-primary bg-black text-token-main-surface-primary dark:bg-gray-100 md:rounded-none md:border-b-2 md:bg-transparent md:text-token-text-primary dark:md:bg-transparent":"bg-token-main-surface-secondary hover:bg-gray-100 hover:text-token-text-primary dark:hover:bg-white/20 md:rounded-lg md:bg-transparent md:text-token-text-tertiary md:hover:bg-gray-50 dark:md:bg-transparent dark:md:hover:bg-gray-700"),onClick:()=>{x(!0),r(i),setTimeout(()=>{x(!1)},1e3),E.logEvent(C.storeClickCategory,{category:i.id})},ref:l=>{l!=null&&(u.current[i.id]=l)},children:n({id:`gizmo.categoryName.${i.name}`,defaultMessage:i.name,description:"store category"})},i.id))}),y&&e.jsx("div",{className:"absolute right-0 top-2 hidden h-full bg-gradient-to-l from-white from-50% to-transparent pl-8 dark:from-gray-800 md:block",children:e.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/10",onClick:()=>{a.current!=null&&a.current.scrollBy({left:400,behavior:"smooth"})},children:e.jsx(Fe,{className:"icon-sm"})})})]})}function ls(){const s=B(),t=fe(),r=Ie();return e.jsxs("div",{className:z("fixed bottom-0 flex w-full items-center justify-center gap-2 bg-token-main-surface-secondary p-3 text-sm text-token-text-secondary screen-arch:static",!r&&"md:w-[calc(100%-16rem)]"),children:[e.jsx(pe,{className:"icon-sm"}),s.formatMessage(G.discoveryThirdPartyGPTsDisabled,{workspaceName:t})]})}function cs({role:s,onPretendStandardUser:t}){const r=B();return Se()?e.jsxs("div",{className:"h-52px flex w-full items-center justify-center gap-2 bg-gray-100 p-3 text-sm dark:bg-gray-700",children:[e.jsx(pe,{className:"icon-sm"}),e.jsx(v,{id:"gizmo.discovery.browsingAsOwner",defaultMessage:"You're viewing as a <b>workspace member</b>",values:{b:c=>e.jsxs(R.Root,{defaultValue:s,onValueChange:n=>{t(n===A.STANDARD)},children:[e.jsxs(R.Trigger,{className:"-mx-2 -my-2 bg-transparent px-1 font-semibold",children:[e.jsx(Ee,{disabled:s!==A.OWNER,label:r.formatMessage({id:"gizmo.discovery.browsingAsOwnerTooltip",defaultMessage:"Owners can access all third-party GPTs, even if they haven’t been approved."}),side:"bottom",children:e.jsx(R.Value,{})}),e.jsx(R.Icon,{})]}),e.jsx(R.Portal,{children:e.jsxs(R.Content,{children:[e.jsx(R.Item,{value:A.OWNER,children:e.jsx(v,{id:"gizmo.discovery.browsingOwnerRole",defaultMessage:"workspace owner"})}),e.jsx(R.Item,{value:A.STANDARD,children:e.jsx(v,{id:"gizmo.discovery.browsingMemberRole",defaultMessage:"workspace member"})})]})})]})}})]}):null}function oe({pageSearchRef:s,locale:t,setLocale:r,currAccount:a}){const c=Be(),n=le(),u=B(),f=_e(),[x,d]=o.useState(!1),[m,y]=o.useState(!1);o.useEffect(()=>{if(s==null||typeof s=="function"){d(!1);return}const i=s?.current,l=new IntersectionObserver(j=>{j.forEach(b=>{b.target===i&&d(!b.isIntersecting)})},{root:null,rootMargin:"20px",threshold:.5});return i!=null&&l.observe(i),()=>{i!=null&&l.unobserve(i)}},[s]);const p=a?.hasPlusFeatures();return e.jsx(e.Fragment,{children:e.jsxs(We,{className:"z-30 mx-auto flex w-full justify-center gap-2 whitespace-nowrap pt-[1.125rem]",children:[e.jsxs("div",{className:z("w-[calc((100%-768px)/2)] min-w-fit items-center",m?"hidden lg:flex":"flex"),children:[e.jsx(Je,{}),e.jsx(Ge,{side:"right",label:t===U.GLOBAL?u.formatMessage(G.discoveryGlobalViewOn):u.formatMessage(G.discoveryGlobalViewOff),children:e.jsx(O,{color:"ghost",onClick:()=>{t===U.GLOBAL?r(U.ENGLISH):r(U.GLOBAL)},children:e.jsx(Ue,{className:z("icon-sm",t===U.GLOBAL?"text-token-text-primary":"text-token-text-tertiary")})})})]}),e.jsx(ve,{className:"max-w-3xl flex-grow",inputClassName:z("h-10 text-sm pl-9",!x&&"hidden"),iconClassName:"left-4",open:m,setOpen:y,resultsSizeOffset:-90,placeholder:f?u.formatMessage(G.discoverySearch):u.formatMessage(G.discoverySearchSmall)}),e.jsxs("div",{className:z("w-[calc((100%-768px)/2)] min-w-fit justify-end gap-2",m?"hidden lg:flex":"flex"),children:[p&&e.jsx(O,{color:"ghost",onClick:()=>{n("/gpts/mine"),E.logEvent(C.storeMyGizmos)},children:e.jsx(v,{...G.discoveryMyGPTs})}),e.jsx(ds,{canCreateGPTs:p,createUrl:c})]}),e.jsx(qe,{})]})})}const ds=({canCreateGPTs:s,createUrl:t})=>{const[r,a]=o.useState(!1),c=o.useRef(void 0),n=Le(),f=de()?.planType??"unknown",x="create_gpt",d=()=>{s||(E.logPopoverHover({location:re,type:x,plan_type:f}),clearTimeout(c.current),a(!0))},m=()=>{s||(c.current=n(function(){a(!1)},300))},y=le(),p=()=>{E.logUpsellGetPlusButtonClicked({location:re,type:x,plan_type:f}),Ve(y,"Gizmo Discovery page upsell")},i=s?()=>E.logEvent(C.storeCreateGizmo):l=>l.preventDefault();return e.jsxs("div",{onMouseEnter:d,onMouseLeave:m,className:"relative screen-arch:flex screen-arch:items-center",children:[e.jsx(O,{color:"primary",disabled:!s,visuallyDisabled:!s,onClick:i,as:"link",to:t,icon:He,"data-testid":"create-gpt-discovery-button",children:e.jsx(v,{...G.discoveryCreateGPT})}),!s&&r&&e.jsxs("div",{className:"absolute right-0 z-10 mt-2 w-64 rounded-lg border border-token-border-light bg-token-main-surface-primary p-3 text-sm shadow-lg screen-arch:top-12",children:[e.jsx("p",{className:"mb-2 whitespace-normal break-words from-token-text-tertiary text-left font-normal",children:e.jsx(v,{...G.createGPTUpsell})}),e.jsx(O,{color:"secondary",onClick:p,size:"small",children:e.jsx(v,{...G.createGPTUpsellButtonLabel})})]})]})},ms=o.forwardRef(function({info:t,items:r,effectiveRole:a},c){return e.jsx(be,{title:t.title,description:t.description,ref:c,children:e.jsx(je,{children:r.map((n,u)=>e.jsx(us,{resource:n,effectiveRole:a},`${u}-${n.gizmo.id}`))})})});function us({resource:s,effectiveRole:t}){const r=s.gizmo.vanity_metrics?.num_conversations_str,a=s.gizmo.tags?.includes(I.WorkspaceDisabled)&&t!==A.OWNER;return e.jsx(Q,{children:e.jsxs(Y,{gizmo:s,className:z("group flex h-24 items-center gap-5 overflow-hidden rounded-xl bg-gray-50 px-7 py-8 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-white/10 md:h-32 lg:h-36",a&&"opacity-50 hover:opacity-100"),onClick:()=>{E.logEvent(C.storeClickGizmo,{gizmo_id:s.gizmo.id,section:"featured"})},children:[e.jsx(ye,{isFirstParty:!!s.gizmo.tags?.includes(I.FirstParty),src:s.gizmo.display.profile_picture_url??void 0,className:z("h-16 w-16 flex-shrink-0 md:h-24 md:w-24",a&&"grayscale group-hover:grayscale-0")}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"line-clamp-2 font-semibold md:text-lg",children:s.gizmo.display.name}),e.jsx("span",{className:"line-clamp-2 text-xs md:line-clamp-3",children:s.gizmo.display.description}),e.jsxs("div",{className:"mt-1 line-clamp-1 flex justify-start gap-1 text-xs text-token-text-tertiary",children:[e.jsx(xe,{gizmo:s,className:"text-xs",hideLink:!0}),r&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[10px]",children:"•"}),e.jsx(he,{className:"mt-0.5 h-3 w-3"}),r]})]})]})]})})}const gs=o.forwardRef(function({info:t,items:r,cursor:a,anon:c,effectiveRole:n,useFetchMoreQuery:u},f){const[x,d]=o.useState(r.length===0),{data:m,hasNextPage:y,fetchNextPage:p,isFetchingNextPage:i,isError:l}=u({cutId:t.id,locale:t.locale,limit:6,cursor:a,enabled:x});o.useEffect(()=>{r.length===0&&p()},[p,r.length]);const[j,b]=o.useState(m.length),P=o.useRef(null),S=ke(.1);return o.useEffect(()=>{m.length>j&&(b(m.length),P.current?.scrollIntoView({behavior:"smooth",block:"nearest"}))},[m.length,j]),e.jsxs(be,{title:t.title,description:t.description,ref:f,children:[e.jsxs(je,{children:[r.map((N,w)=>e.jsx(ae,{resource:N,rank:w+1,cutId:t.id,effectiveRole:n},w)),m.map((N,w)=>e.jsx(ae,{resource:N,rank:r.length+w+1,cutId:t.id,delay:S(w-j,m.length-j),effectiveRole:n},w))]}),(!x||y||i||l)&&!c&&a!=null&&e.jsx(O,{color:l?"danger-outline":"secondary",onClick:()=>{d(!0),E.logEvent(C.storeLoadMore,{section:t.id}),p()},fullWidth:!0,className:"mt-2 md:mt-3",loading:i,children:l?e.jsx(v,{...G.discoveryLoadMoreError}):e.jsx(v,{...G.discoveryLoadMore})}),e.jsx("div",{ref:P})]})});function ae({resource:s,rank:t,cutId:r,delay:a,effectiveRole:c}){const n=s.gizmo.tags?.includes(I.WorkspaceDisabled)&&c!==A.OWNER,u=s.gizmo.tags?.includes(I.FirstParty);return e.jsx(Q,{delay:a,children:e.jsxs(Y,{gizmo:s,className:z("group flex h-[104px] items-center gap-2.5 overflow-hidden rounded-xl px-1 py-4 hover:bg-token-main-surface-secondary md:px-3 md:py-4 lg:px-3",n&&"opacity-50 hover:opacity-100"),onClick:()=>{E.logEvent(C.storeClickGizmo,{gizmo_id:s.gizmo.id,position:t,section:u?"first_party":r})},children:[e.jsx("div",{className:"text-md flex w-8 shrink-0 items-center justify-center font-semibold",children:t}),e.jsx(Qe,{resource:s,grayedOut:n})]},s.gizmo.id)})}const be=o.forwardRef(function({title:t,description:r,className:a,children:c},n){return e.jsxs("div",{ref:n,className:"h-fit scroll-mt-28 last:min-h-[calc(100vh-8rem)]",children:[e.jsxs(Q,{animateTap:!1,children:[e.jsx("div",{className:"text-xl font-semibold md:text-2xl",children:t}),r&&e.jsx("div",{className:"text-sm text-token-text-tertiary md:text-base",children:r})]}),e.jsx("div",{className:z("mb-10 mt-4",a),children:c})]})}),G=ne({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryEmpty:{id:"gizmo.discovery.empty",defaultMessage:"Nothing to discover"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoveryError:{id:"gizmo.discovery.error",defaultMessage:"Error loading GPTs"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchSmall:{id:"gizmo.discovery.searchSmall",defaultMessage:"Search"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoverySearchResults:{id:"gizmo.discovery.search.results",defaultMessage:"Search Results"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"},discoveryMyGPTs:{id:"gizmo.discovery.myGPTs",defaultMessage:"My GPTs"},discoveryCreateGPT:{id:"gizmo.discovery.createGPT",defaultMessage:"Create"},discoveryThirdPartyGPTsDisabled:{id:"gizmo.discovery.thirdPartyGPTsDisabled",defaultMessage:"Your admin has blocked GPTs created outside {workspaceName}."},discoverySplashHeader:{id:"gizmo.discovery.splashHeader",defaultMessage:"GPTs"},discoverySplashDescription:{id:"gizmo.discovery.splashDescription",defaultMessage:"Discover and create custom versions of ChatGPT that combine instructions, extra knowledge, and any combination of skills."},discoveryGlobalViewOn:{id:"gizmo.discovery.globalViewOn",defaultMessage:"Global View On"},discoveryGlobalViewOff:{id:"gizmo.discovery.globalViewOff",defaultMessage:"Global View Off"},createdAgoLabel:{id:"gizmo.discovery.createdAgoLabel",defaultMessage:"Created {createdAgo}"},createGPTUpsell:{id:"gizmo.discovery.createGPTUpsell",defaultMessage:"Get ChatGPT Plus to create and share your own GPTs"},createGPTUpsellButtonLabel:{id:"gizmo.discovery.createGPTUpsellButtonLabel",defaultMessage:"Get Plus"}});export{ve as G,Ns as a};
//# sourceMappingURL=lzozr48eypicocb2.js.map
