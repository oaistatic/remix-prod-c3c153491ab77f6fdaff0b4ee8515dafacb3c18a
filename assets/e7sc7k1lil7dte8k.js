import{f9 as R,fa as E,de as g,fb as M,dd as F,am as B,$ as y,bL as N,B as O}from"./njq6ygky3ttysgdk.js";import{z as A,k as H,f as L,r as o,b as _,j as e}from"./fs6h2trisr1juto6.js";import{t as T,a as l,u as $,s as k,C as b,b as D,g as j,T as Q,c as q,d as K}from"./d7a6rc8fexfzu7dt.js";import{C as V}from"./o3m65hw8d23edpzw.js";import{T as z,C as G}from"./g68esxvkbqwuwphu.js";import{g as W}from"./cw7s5l0nt7rrqvcw.js";import{C as w,T as J}from"./dlgpg6875dx673ge.js";import{C as U}from"./ijutvl794yycgs5p.js";import{P as X}from"./csg4i0wk6hi0jvkd.js";import"./l4ce2zdnnawhaijx.js";import"./gy64pge8qevmvg7e.js";import"./ora9zmv2zdoi2bvo.js";import"./hi6ookkndgtqt4im.js";import"./npeck75bz46c490i.js";import"./gfo75oujoeaedm5y.js";import"./c1p22j8o7hm9vv5x.js";import"./lj0prj6na7gf1jpf.js";import"./hiayljqmnpspmyun.js";import"./au5ozv27zrqgic7w.js";import"./n9whwsbg0rx5cs8k.js";import"./kpohf9e68vj4dpvk.js";import"./fzrn137102spawew.js";import"./ktvbjknz372ja7i7.js";import"./m97sb2fnwj0a6vyo.js";import"./gunpso70jnmarvod.js";import"./cm0hdcditutj2jz2.js";import"./jcoe6v231ph25bfi.js";import"./mz766tu1yyo45fp0.js";import"./nikuofry28tl503c.js";import"./bk8slwxjkdlmxjxm.js";import"./ms40jzicf31mvoix.js";import"./ngj3h1w6uuxrb6ri.js";import"./no4qfibpbbv193yj.js";import"./o77dlyy0lhhjntje.js";const Ne=()=>(E(),null),Oe=R(function(){const r=A(),[s]=H(),u=L(),p=T(r.conversationId),i=l(s.get("readonly"),!1),c=l(s.get("isFullScreen"),!1),d=l(s.get("header"),!0),m=l(s.get("appPreview"),!1),a=g(()=>M()),C=g(()=>F()),P=l(s.get("hideBottomComposer"),!!i),n=T(r.canmoreId),t=p,f=$();o.useEffect(()=>{k({type:b.Textdoc,textdocId:n})},[n]),D(t,{kind:B.PrimaryAssistant});const h=_();if(o.useEffect(()=>(y.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),y.releaseThread(t)}),[t,h]),o.useEffect(()=>{n||u("/")},[n,u]),o.useEffect(()=>{j().sendMessage({type:w.Loaded})},[n]),!n||f?.type!==b.Textdoc)return null;const I=()=>{j().sendMessage({type:w.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(X,{clientThreadId:t,children:e.jsx(U,{clientThreadId:t,children:e.jsx(Q,{clientThreadId:t,children:m?e.jsx(N,{children:e.jsx(Y,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(z,{clientThreadId:t,disableScroll:!a,textdocId:f.textdocId}),e.jsx(G,{})]}):e.jsx(J,{isEmbedded:!0,hideRunCode:!a,isFullScreen:c,hideHeader:!d,hideBottomComposer:P,isReadonlyFromQueryParam:i,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:I},"textdocContent")})})})]})}),Y=({textdocId:x})=>{const r=o.useRef(null),s=q(x),[u,p]=o.useState(!1),i=s?.versions??[],c=O(i),d=o.useCallback(K(async m=>{const a=W(m.type,m.content);if(r.current&&(a==="react"||a==="html")){p(!0);const v=r.current.evalAsync({language:a,code:m.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(V,{visuallyHidden:!u,ref:r,enableTransition:!0,title:""})};export{Ne as clientLoader,Oe as default};
//# sourceMappingURL=e7sc7k1lil7dte8k.js.map
