import{r as a,ai as K,an as X,al as he,j as t,a5 as k,e as re,a7 as de,R as Fe}from"./fs6h2trisr1juto6.js";import{G as we,lJ as ke,kw as Ie,jA as Se,lK as Ue,iq as ge,lL as ze}from"./d7a6rc8fexfzu7dt.js";import{l as Oe}from"./ijutvl794yycgs5p.js";import{d as q,dE as Te,gq as Be,c5 as se,bJ as Ye,S as V,gG as je,gH as Ge,gI as He,eQ as Je,n as qe,E as Qe,bM as Ke}from"./njq6ygky3ttysgdk.js";import"./csg4i0wk6hi0jvkd.js";import"./lj0prj6na7gf1jpf.js";import"./n9whwsbg0rx5cs8k.js";const oe=()=>window.innerWidth>window.innerHeight||window.innerWidth>900,Xe=({bubbleData:e,isSelected:s,onClick:i,selectedPosition:l,onPositionUpdate:r,isVisible:u,hasSelectedCategory:f,index:N,selectedIndex:c,isVideoDonePlaying:d,videoCenter:v,isIntroDone:T,updatePositionRef:m})=>{const g=a.useRef(null),[y,E]=a.useState(!1),[A,w]=a.useState(s),[b,R]=a.useState(oe()),[j,M]=a.useState(()=>oe()?Math.min(Math.min(window.innerWidth-200,940),window.innerHeight*.8)/375:window.innerWidth/375),[O,P]=a.useState(()=>oe()?1:.5),[x,C]=a.useState({left:0,top:0}),L=K(0),I=K(0),Y=K(0),G=K(0),H=K(1),Q=a.useRef(!1),W={damping:18,stiffness:100,mass:3},Z={damping:50,stiffness:400,mass:2.5},D={damping:4,stiffness:1,mass:5},n=X(L,W),o=X(I,W),h=X(Y,Z),S=X(G,Z),F=K(0),Ce=K(0),Ee=X(F,D),Pe=X(Ce,D),U=X(H,{damping:80,stiffness:600,mass:2}),le=a.useRef(0),ce=a.useRef(0);a.useEffect(()=>{w(s)},[s]);const Ne=()=>{w(!0),i()},ne=a.useCallback(()=>{if(g.current){const p=window.getComputedStyle(g.current),z={left:parseFloat(p.left),top:parseFloat(p.top)};C(z),r(e.category,z)}},[e.category,r]);a.useEffect(()=>(m&&(m.current=ne),ne(),window.addEventListener("resize",ne),()=>{window.removeEventListener("resize",ne)}),[ne,m]),a.useEffect(()=>{const p=()=>{const z=oe();R(z),M(z?Math.min(Math.min(window.innerWidth-200,940),window.innerHeight*.8)/375:window.innerWidth/375),P(z?1:.5)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]),a.useEffect(()=>{if(u&&d&&v&&!Q.current){Q.current=!0;const p=g.current?.getBoundingClientRect();if(!p)return;le.current=v.x-p.left-p.width/2,ce.current=v.y-p.top-p.height/2,L.set(le.current),I.set(ce.current),n.jump(le.current),o.jump(ce.current);const _=20*j/p.width;H.set(_),U.jump(_);const B=[{x:le.current+(b?e.landscapeFirstSplitTarget.x:e.firstSplitTarget.x)*j,y:ce.current+(b?e.landscapeFirstSplitTarget.y:e.firstSplitTarget.y)*j}];B.push({x:B[0].x+(b?e.landscapeSecondSplitTarget.x:e.secondSplitTarget.x)*j,y:B[0].y+(b?e.landscapeSecondSplitTarget.y:e.secondSplitTarget.y)*j}),B.push({x:0,y:0});let J=0;const ue=[0,500,300,200];let $=400;const ee=2;for(const te of B)J<=ee&&($=$+ue[J],setTimeout(()=>{n.set(te.x),o.set(te.y)},$)),J++;setTimeout(()=>{U.set(1),E(!0)},$+e.scaleUpDelay*3)}},[u,d,v,e.firstSplitTarget.x,e.firstSplitTarget.y,e.secondSplitTarget.x,e.secondSplitTarget.y,e.scaleUpDelay,H,U,n,o,L,I,j,b,e.landscapeFirstSplitTarget.x,e.landscapeFirstSplitTarget.y,e.landscapeSecondSplitTarget.x,e.landscapeSecondSplitTarget.y]),a.useEffect(()=>{if(c!==null&&g.current&&l){const p=window.getComputedStyle(g.current),z={left:parseFloat(p.left),top:parseFloat(p.top)};if(N===c)u?(U.jump(0),U.set(1)):U.set(.8);else{const _=z.left-l.left,B=z.top-l.top,J=Math.atan2(B,_),ue=Math.sqrt(_*_+B*B);if(u){const ee=150+ue*1,te=ee*Math.cos(J),We=ee*Math.sin(J);n.jump(0),o.jump(0),h.jump(te),S.jump(We),h.set(0),S.set(0),U.set(1)}else{const ee=-16*Math.cos(J),te=-16*Math.sin(J);n.jump(0),o.jump(0),h.set(ee),S.set(te),U.set(.9)}}}},[c,l,N,U,h,S,n,o,u]);const Me={fontSize:"13px",lineHeight:"13px",letterSpacing:" -0.13px"};function Le(){return u&&f&&s?!0:!s&&!A&&f&&!u}const Re=he([h,n,Ee],p=>T?p[0]+p[1]+p[2]:p[1]+p[2]),De=he([S,o,Pe],p=>T?p[0]+p[1]+p[2]:p[1]+p[2]);return t.jsx(k.button,{ref:g,onClick:Ne,style:{...e.position,x:Re,y:De,scale:U,opacity:d?1:0,transition:"opacity 0.3s ease-in-out",pointerEvents:y?"auto":"none"},className:q("absolute grid place-items-center rounded-[50%] hover:opacity-80",Le()?"bg-token-main-surface-tertiary text-token-main-surface-primary-inverse":"bg-token-text-primary text-token-main-surface-secondary"),children:t.jsx("div",{style:{...Me,transform:"translate3d(0, 0, 0)",opacity:y?1:0,transition:"opacity 0.3s ease-in-out"},className:"text-center font-medium",children:e.category})})},Ve="webp",Ze=228,_e=229,$e="srgb",et=4,tt="uchar",at=72,st=!1,nt=8,it=!1,ot=!0,rt="data:image/webp;base64,UklGRq4MAABXRUJQVlA4WAoAAAAQAAAA4wAA5AAAQUxQSIAEAAABoNvaltxaOiFUCDeEApRAAUpAIRCyaNKVRUIR0KWlZ8j/Q/cDenqoHgKQK4DGNWVWCNfQxKHqXquBiJgAFJN8eNsTzEi75vSNk0ycLrFvdl5zbtecWBZ6+dYGpy9qTiyLv3yrvJ5cdUqyWj5VpKDQRln9pfWqCS1LJrn3SnHtRbLKFekjRMnwt0oVrk2SaW5IC6FPkvMTaSBEyf4plC5EKWIMJQtRinmiUtFJinqiErk2SWlbKk6VpMBclYWiFPpCBWml4G0pAkvRmYrQSvHb/NFFFMiUuSaJClOTM9eLGnuXLWJRJFOmdklUmXZZakWdbYZOotA+N+4iKr1QVohFqUwZIRa1MmXDJ1Es+0z4JKpNPgs+iXKTz4BPot7kV+eTKDj5lVESFSe/KmJRMtOKiEXNTKtxLIq+uLWcRdXfVnIQZferOIi6mxV4UbhfHLHGmJYWReVxYQdReruoIGoPCyLWG7vlnEXx3xZTieqrhRDrLtEyzqL8b4uoRP27BRDrj918vRiwn43EhH6uaIM4UyVGDPOwFXiWSszYzsF2SG66gxiynYzYEslNdRBTtlOxLZKbphJjttOwNdIklZgzTBHtESfwYtDw3tki/VtOLJrcO5VJpHkn2iS+QWJU/1pvlfY1tgq/5MWs4ZXeLu0rbBd+gcSw9OxgmeZZtEx8JpZN7lEwjYRHvW36R9E28YET47q7YJ1wd7BOc3e2zrc7tg4DcGJeBwT7BOBgnwbo7dMD/9nnG8D2YUAM7LyFKFhoV1moOlio7S3Uny10+s9C0UQXthDbKFkoyf86JgslthDb6D8LxWiis4VOvYX6g4XaykLVzkKBLOSdhQC2DwPf7ROB3j490NinAYJ9AuDs4wCwdRgAvlvn+11jneYuWCfcOeu4O0TbRDzsbdM/CrYJj5xt8DRaJj5rLNM8I8vQM7BdGC92dulfCXbxr4Ctwni5s0r/2sYq9BqiTSLe3Ntk/46ziXsHnUV6vB0s4t/Dlz0iJgz22E8BczAmPVpjP4272YIx8dEW3VTuZgmmqXC0RIfJ3c0OjBlrO+znwM0KjFmDFfbz4DcbRMzsbUBzYbDAB2Z3N/0xzYet/vZY4m/a+8Ai6aY7pmWg1t0eS/1Ncx9YrLvpjWk52OptgyV3Wuuw7N90FrFwummMaWnwGttg+bW+Oqxx0FaHdf6mqw+s1I2aYrcW0KgnJqyXRi0xYc0+6SgR1u2ThtIGa/dJP2mD9fuknbRBDn3STdogj37UTNoglzTqhQn5pFErTMgpjTq5OGR20MgH8tvpo0OOt0kXaYc806gJJuTaDXroHDJeJx2kDnmnUQMXQva78nUoIY1l44BCdiU7opw0luqLUNR6LFKN0lJXnNvRocA0lOWLUGgayvEVUPDtZxm+Agq/HfL3FaBAGrJ2OwYokeprrtLRQZP1Z45+C1An1de8jJ2DTv1wzcXYBWjWd9f1/dYF6Jfq4bqeNNQOavb153V541AT1O223ed1KeNQbx0U77f18Hmd7vo51FuCGclv3/aEYgJWUDggCAgAAHA8AJ0BKuQA5QA+bTSVSKQiv6QjEkpb8A2JYwSwBp9ZAP0ARRWvcRvwvyu6a/wmakmFny+KB+sfY380n64/sl7wHSAf1zzt/Yh9ADyyf3V+Bj9y/3F9o/VH+m/4X/oB9mDdmMXfAB66fcxm9e2ZGTP68MY8iRizzUZjU1cMbz7DlzQglPfrA/m273k1OhtGS2asyGY6DavN05rxORKEUyfbbl3pbbUEjJ89AZqe/0tkgmoTzb27RI1f+EgUz71cCaByN//+zVYU5TCq9cYJMxXLRC0Rd54ARvmAwjeobl0+tlZHCZ2iP1ZmjSPh7QSORBck/zdv730vCvKXdlgD9HtG5Ia1LhVO9MSu8Ub+QqZFDRXpcBxkQGZcmEOVvWVCzJcuE3d+zFByQQUDX298kCdWZYOLjWIr8cFCfsYUqql2f9Yaxcnb7Fn9y7Cyp0FExrxJVmxip0mbjPuTcjxBmg9wvsRWEwWV0uaYV3Hq9b7EucJyhCzWqOYEnwpCWFQ9btDVMk1pbIYXdnzgxK5Q+arLA7Lks8qi6QWBELFK4RgS5HQuv7hfIYUyrHUQRitR2e31H1M4xA063XePfy72qSZmejx1lqpuCA/VJ7gQnneBHJuxGQPMU+CO4HNQmO9MavDusw6DcfdKHd5mgAD+/PhBPfmNWp1swPXnKvcmx7AcaJCvubAXXT8iogVx3J7OjwOcwxAqJtixWvr4TzdvebQ1FdP////mep+K0Y2EBq4/+GhXPbtMC1/NV/+alC8atawK3UNu4mTJuLTZAAAAlzRD+O3ouVnhyKeJvuEV/hHTGF//63T//9X+mACEGTfuHADxFxgqnIAAMHweM8wBbA+dCIfXhW/nkQQjW8WCx3ncWd3GPi78MAAAWy1Xf2jl+nMbVu4E5zqRT8QSsD1irK3qYgAD+TxUadydZ9PbgqladB9UnnU2d3wbew1AABsW/NwytUFRw+n/LUeju6oZG9pI5udPeQBB5ap02+A3kSubWbTe/i4z7KcVYb8/d/ABtDgZzqROITrRoJ/muXkDi+v6rNp6CN8Ba03cRjPIDboOf4mP71FLV6gjMztzgglQ09X4LxRIYDyYt2/TAjEtau1keWrKI9yfXf6p0PabIeoqWQhoburavO1zcUDP0aER7b4ZlY19Zbj8RB3Cp2JY9uU39lIs+0C8xrMipP1kYZCzVJRWyujHG2r6iQU6pyDJiPrVg2k/Fz5vlUpUqnQbN8h+VfBuF1LAGO6I0Fwy3b5jDYrFDXeysULIn3H4cHDp9CjsJ4ECQ90CqYj46NZOBMfZvBNufzPK2oTdbWy9hcmyJk+lABQ8I0zpNdGxqO1SP8F/FzymvqLhMgBAYZ8Pg3KJRRAGzhMFlVsPVRZuHPyRzfNwwjgN3qPLJh8tOoDU5i/ZGAGsRSjIHsAFS105uAn075hhgXt0kGOvPymliWqy0KLZwCPzKIiui2fv/WzcYfoarDABqvUjfvMqHY27p5PSZsIOnpOjuxLDlbuLRdg2q5V4ESXDO/O6f7mz6UK8kkymScBYPI6KxfiCwmrhrb9rFuhFOWNZT9grv4JczmcGwdu86IAzZaTqEuYJt1anKp6iHcgBFFikX80Eo8Gs2QY8WXo493kkjpXaIcbrnOeqMTFCyjhim4MawEKN7KHcmiRCN/sWzvK+THVJUaTs0qlnZhuSbERedl6xpRblZXQaezMa98Dh4mpRPRh7Q2pdlvtpKyBpM06LpO+bsfIH6WkE8cuW2IU9gxf91Bmca+rnqFMc/6xmhu5uQYLUjZU4GygO8ipSLR+hdbhZtQx9GRvfkMbyTDlgyD04pbxfHh/yxPYihqi+7t6FviLEUmXoOnXSdHdDBl17+ugIyzIUkrkV4byr+5n8n82kWYEu9nqL6GNhBwPxKAjctrgJJaO4Jhyo3JfGpbzWrkEkm4iWlS58VgaoKJD0D3nAfagQOoaPzKTJN83WtYJuxI5bpT7H1+9L4DdxU8DDqbBT8AGS+5nf3JLs/vey5A2uA/7JY5h5WOzIYDDsUTwMwDm/DTbjKUVLgEg8mgywAMPrIqGhCCEQ8A+fmjj/TsE1k7AVFJXQfe0rkn65e4Bofe2Gs/23WOZ605ii7ji6QjvcISAjpPLwIuyv6fZXhmFoQgSSjIm/XoLO/MTdteENkmJZ0GfBSnUMRf2gydODo0QFwAHv9rI1tu8PRgYwD8/vxADJh0/cRXtRJVnCfaTFf85vuQH/7fB//7dn7wtEdVuAKf4FrXjrqlpNJZDFJXAEq812hl4C3Ijej8P2LnF/1hyOq04jO5gfntmbKvBkjPFZp8SYYqQ3ChMtlIcahToAb6g+f0Lx2TWnh9YeQgETegcV+3iJJMh7mNJ4D9N9i/xfPeO9GDgjGWCQTuUzHqR0Xawhp9cQR/V1quDmRGLqc3T/5JS32MAAKAZxNmEuHpXJMP/pp1RAtXQWK7cKQZslGsqcOUQVifbUM+um1mk2y4xKdIHTfyVo6k//19s3SEcvAeUlYBLY0T9RVsni2vQAAHE0k2BDyzFG8Xt/4kH608bkCG5wR9trAykfrX9I/U2Fb3ifU99Uthh15v1jTfEv/wElSuf1x26zf3TZAO+bmwQmfKNC1kNnbH3TxrMj/q5w9//wH8ox6rTpXeTDlcvZA/7FqlSkPolh8tGHmtFIKSj2teleSkt9MU2J/j9g594WoluuuU1yaW0Fd9FfRGTAx9mggZT9hfgmaIAAAAA=",lt={format:Ve,width:Ze,height:_e,space:$e,channels:et,depth:tt,density:at,isProgressive:st,paletteBitDepth:nt,hasProfile:it,hasAlpha:ot,src:rt},ct=1600,ie=0,pe=.35,fe=[{category:"Random",position:{left:"calc(var(--bubble-base) * 0.165)",top:"calc(var(--bubble-base) * 0.003)",width:"calc(var(--bubble-base) * 0.32)",height:"calc(var(--bubble-base) * 0.32)"},landscapePosition:{left:"calc(var(--bubble-base) * (0.278 + var(--landscape-offset-x, 0)))",top:"calc(var(--bubble-base) * (0.57 + var(--landscape-offset-y, 0)))",width:"calc(var(--bubble-base) * 0.248)",height:"calc(var(--bubble-base) * 0.248)"},firstSplitTarget:{x:-80,y:-20},secondSplitTarget:{x:60,y:-60},landscapeFirstSplitTarget:{x:-80,y:0},landscapeSecondSplitTarget:{x:-80,y:20},scaleUpDelay:180},{category:"Wellness",position:{left:"calc(var(--bubble-base) * 0.496)",top:"0",width:"calc(var(--bubble-base) * 0.44)",height:"calc(var(--bubble-base) * 0.44)"},landscapePosition:{left:"calc(var(--bubble-base) * (0.27 + var(--landscape-offset-x, 0)))",top:"calc(var(--bubble-base) * (0.217 + var(--landscape-offset-y, 0)))",width:"calc(var(--bubble-base) * 0.342)",height:"calc(var(--bubble-base) * 0.342)"},firstSplitTarget:{x:-80,y:-20},secondSplitTarget:{x:60,y:-60},landscapeFirstSplitTarget:{x:-80,y:0},landscapeSecondSplitTarget:{x:-100,y:20},scaleUpDelay:260},{category:"Cooking",position:{left:"calc(var(--bubble-base) * 0.293)",top:"calc(var(--bubble-base) * 0.32)",width:"calc(var(--bubble-base) * 0.275)",height:"calc(var(--bubble-base) * 0.275)"},landscapePosition:{left:"calc(var(--bubble-base) * (0.525 + var(--landscape-offset-x, 0)))",top:"calc(var(--bubble-base) * (0.502 + var(--landscape-offset-y, 0)))",width:"calc(var(--bubble-base) * 0.214)",height:"calc(var(--bubble-base) * 0.214)"},firstSplitTarget:{x:-80,y:-20},secondSplitTarget:{x:-40,y:-20},landscapeFirstSplitTarget:{x:-40,y:-10},landscapeSecondSplitTarget:{x:0,y:60},scaleUpDelay:200},{category:"Learning",position:{left:"calc(var(--bubble-base) * 0.069)",top:"calc(var(--bubble-base) * 0.585)",width:"calc(var(--bubble-base) * 0.469)",height:"calc(var(--bubble-base) * 0.469)"},landscapePosition:{left:"calc(var(--bubble-base) * (0.737 + var(--landscape-offset-x, 0)))",top:"calc(var(--bubble-base) * (0.526 + var(--landscape-offset-y, 0)))",width:"calc(var(--bubble-base) * 0.342)",height:"calc(var(--bubble-base) * 0.342)"},firstSplitTarget:{x:80,y:80},secondSplitTarget:{x:-120,y:60},landscapeFirstSplitTarget:{x:60,y:80},landscapeSecondSplitTarget:{x:40,y:60},scaleUpDelay:100}],ut=({onCategorySelect:e,isVisible:s=!0})=>{const[i,l]=a.useState(!1),[r,u]=a.useState(null),[f,N]=a.useState(null),[c,d]=a.useState(null),[v,T]=a.useState(!1),[m,g]=a.useState(!1),y=a.useRef(null),E=a.useRef(null),[A,w]=a.useState(null),b=a.useRef(new Map),[R,j]=a.useState(!1),[M,O]=a.useState(!1),[P,x]=a.useState(!1),C=a.useRef(new Map),[L,I]=a.useState(!1),{layer:Y}=Te("2259187367"),G=Y.get("additional_category",""),H=G?[...fe,{category:G,position:{left:"calc(var(--bubble-base) * 0.522)",top:"calc(var(--bubble-base) * 0.454)",width:"calc(var(--bubble-base) * 0.405)",height:"calc(var(--bubble-base) * 0.405)"},landscapePosition:{left:"calc(var(--bubble-base) * (0.625 + var(--landscape-offset-x, 0)))",top:"calc(var(--bubble-base) * (0.219 + var(--landscape-offset-y, 0)))",width:"calc(var(--bubble-base) * 0.317)",height:"calc(var(--bubble-base) * 0.317)"},firstSplitTarget:{x:80,y:80},secondSplitTarget:{x:60,y:10},landscapeFirstSplitTarget:{x:-40,y:-10},landscapeSecondSplitTarget:{x:0,y:-40},scaleUpDelay:150},{category:"Language",position:{left:"calc(var(--bubble-base) * 0.497)",top:"calc(var(--bubble-base) * 0.867)",width:"calc(var(--bubble-base) * 0.309)",height:"calc(var(--bubble-base) * 0.309)"},landscapePosition:{left:"calc(var(--bubble-base) * (0.947 + var(--landscape-offset-x, 0)))",top:"calc(var(--bubble-base) * (0.317 + var(--landscape-offset-y, 0)))",width:"calc(var(--bubble-base) * 0.243)",height:"calc(var(--bubble-base) * 0.243)"},firstSplitTarget:{x:80,y:80},secondSplitTarget:{x:60,y:10},landscapeFirstSplitTarget:{x:80,y:60},landscapeSecondSplitTarget:{x:60,y:-40},scaleUpDelay:230},{category:"Money",position:{left:"calc(var(--bubble-base) * 0.067)",top:"calc(var(--bubble-base) * 0.301)",width:"calc(var(--bubble-base) * 0.219)",height:"calc(var(--bubble-base) * 0.219)"},landscapePosition:{left:"calc(var(--bubble-base) * (0.505 + var(--landscape-offset-x, 0)))",top:"calc(var(--bubble-base) * (0.725 + var(--landscape-offset-y, 0)))",width:"calc(var(--bubble-base) * 0.177)",height:"calc(var(--bubble-base) * 0.177)"},firstSplitTarget:{x:-80,y:-20},secondSplitTarget:{x:-40,y:-20},landscapeFirstSplitTarget:{x:60,y:80},landscapeSecondSplitTarget:{x:-20,y:60},scaleUpDelay:280}]:[...fe,{category:"Money",position:{left:"calc(var(--bubble-base) * 0.067)",top:"calc(var(--bubble-base) * 0.301)",width:"calc(var(--bubble-base) * 0.219)",height:"calc(var(--bubble-base) * 0.219)"},landscapePosition:{left:"calc(var(--bubble-base) * (0.947 + var(--landscape-offset-x, 0)))",top:"calc(var(--bubble-base) * (0.317 + var(--landscape-offset-y, 0)))",width:"calc(var(--bubble-base) * 0.243)",height:"calc(var(--bubble-base) * 0.243)"},firstSplitTarget:{x:-80,y:-20},secondSplitTarget:{x:-40,y:-20},landscapeFirstSplitTarget:{x:80,y:60},landscapeSecondSplitTarget:{x:60,y:-40},scaleUpDelay:230},{category:"Language",position:{left:"calc(var(--bubble-base) * 0.522)",top:"calc(var(--bubble-base) * 0.454)",width:"calc(var(--bubble-base) * 0.405)",height:"calc(var(--bubble-base) * 0.405)"},landscapePosition:{left:"calc(var(--bubble-base) * (0.625 + var(--landscape-offset-x, 0)))",top:"calc(var(--bubble-base) * (0.219 + var(--landscape-offset-y, 0)))",width:"calc(var(--bubble-base) * 0.317)",height:"calc(var(--bubble-base) * 0.317)"},firstSplitTarget:{x:80,y:80},secondSplitTarget:{x:60,y:10},landscapeFirstSplitTarget:{x:-40,y:-10},landscapeSecondSplitTarget:{x:0,y:-40},scaleUpDelay:150}];a.useEffect(()=>{if(s){I(!0);const n=setTimeout(()=>{I(!1)},400);return()=>clearTimeout(n)}else I(!1)},[s]);const Q=a.useCallback((n,o)=>{b.current.set(n,o)},[]),W=a.useCallback(()=>{if(E.current){const n=E.current.getBoundingClientRect();w({x:n.left+n.width/2,y:n.top+n.height/2})}setTimeout(()=>{O(!0),setTimeout(()=>{j(!0)},800)},600),g(!0)},[]),Z=(n,o)=>{C.current.forEach(S=>S());const h=b.current.get(n);h&&(l(!0),u(n),N(o),d(h),e(n))};a.useEffect(()=>{const n=setTimeout(()=>{v||(console.warn("Video failed to load or play, proceeding with animation"),T(!0),W())},800);return()=>clearTimeout(n)},[v,W]),a.useEffect(()=>{v&&y.current&&y.current.play().then(()=>{setTimeout(W,ct)}).catch(n=>{console.warn("Video playback failed:",n),W()})},[v,W]),a.useEffect(()=>{const n=()=>{x(oe())};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]);const D=re();return t.jsxs(k.div,{className:q("text-token-main-text-primary fixed inset-x-0 top-0 z-20 flex max-h-full min-h-full w-full flex-col items-center overflow-y-auto overflow-x-hidden py-8 pb-10 pt-[calc(var(--dp-header-height-md)+2rem)] md:pb-[calc(var(--dp-header-height-md)+2rem)] md:pt-[calc(var(--dp-header-height-md)+2rem)]",{"pointer-events-none":!s,"overflow-y-hidden":L}),initial:!1,animate:{visibility:s?"visible":"hidden"},transition:{duration:0,delay:s?0:pe},role:"dialog","aria-modal":!s,"aria-label":D.formatMessage({id:"dp-bubble-layout.topic-selection",defaultMessage:"Select a topic"}),children:[t.jsx(k.div,{className:"bg-background fixed inset-0 flex items-center justify-center",initial:{opacity:1},animate:{opacity:s?1:0},transition:{duration:s?.3:0,delay:s?0:pe,ease:s?"easeIn":"anticipate"},style:{zIndex:M?-1:60},children:t.jsxs("div",{ref:E,className:"relative aspect-square w-[50%] overflow-hidden rounded-[50%] bg-token-text-primary bg-opacity-0 will-change-transform [max-width:278px]",style:{visibility:M?"hidden":"visible",transform:m?"scale(0.1)":"scale(1)",transition:"transform 0.8s cubic-bezier(1,.01,.02,.99)"},children:[t.jsx(k.img,{src:lt.src,className:"will-change-opacity overflow-hidden rounded-full object-cover [height:calc(100%+30px)] [max-width:calc(100%+30px)] [width:calc(100%+30px)]",alt:D.formatMessage({id:"dp-bubble-layout.logo-alt",defaultMessage:"Logo"}),initial:{x:-30,y:-15},animate:{x:0,y:-15},transition:{duration:1,ease:"easeOut",delay:.2},style:{opacity:m?0:1,transition:"opacity 0.6s linear"}}),t.jsx("video",{ref:y,muted:!0,autoPlay:!0,playsInline:!0,className:"will-change-opacity bg-white-100 relative ml-[-3px] mt-[-3px] w-full transition-opacity duration-300 [height:calc(100%+6px)] [max-width:calc(100%+6px)] [width:calc(100%+6px)]",style:{opacity:m?0:1,transitionTimingFunction:"cubic-bezier(0.215, 0.61, 0.355, 1)"},onPlay:()=>{T(!0)},onError:n=>{console.warn("Video error:",n),T(!0),W()}})]})}),t.jsxs("div",{className:q("flex w-full flex-col items-center",{"m-[auto]":P}),children:[t.jsx(de,{children:!i&&t.jsx(k.h2,{className:"z-10 pb-2 text-center text-3xl font-medium leading-tight tracking-wide",initial:{visibility:"visible",opacity:0,y:-30},animate:{opacity:m?1:0,y:m?0:-30},exit:{opacity:0,visibility:"hidden",transition:{visibility:{delay:pe,duration:0}}},transition:{opacity:{duration:i?.6:.4,delay:ie,ease:"linear"},y:{duration:.6,delay:ie,ease:"easeOut"}},children:D.formatMessage({id:"dp-bubble-layout.title-3",defaultMessage:"Hi, I’m ChatGPT."})})}),t.jsx(k.span,{className:"z-10 mt-2 block pb-12 text-center text-base font-medium md:mt-4",initial:{opacity:0,y:-40},animate:{opacity:s&&m?1:0,y:m?0:-40},transition:{duration:.2,opacity:{duration:i&&!s?.1:.3,delay:i&&!s?0:ie+.5,ease:"linear"},y:{duration:.6,delay:ie,ease:"easeOut"},delay:i?.2:ie},children:D.formatMessage({id:"dp-bubble-layout.pick-topic-2",defaultMessage:"Whatever you’re curious about,{newline}we can explore together."},{newline:t.jsx("br",{})})}),t.jsx("div",{className:"relative z-10 w-[var(--bubble-base)] shrink-0",style:{"--bubble-base":P?"min(min(calc(100vw - 200px), 940px), 80vh)":"calc(100vw - 34px)","--landscape-offset-x":"-0.269","--landscape-offset-y":"-0.217",height:P?"calc(var(--bubble-base) * 0.6855791962)":"calc(var(--bubble-base) * 1.34)",maxWidth:P?"min(min(calc(100vw - 200px), 940px), 80vh)":"calc(100vw - 34px)"},children:t.jsx("div",{className:"relative h-full",children:t.jsx("div",{className:"absolute left-0 top-0 h-full w-full",children:H.map((n,o)=>t.jsx(pt,{bubble:n,index:o,isLandscape:P,selectedCategory:r,selectedPosition:c,onCategorySelect:Z,onPositionUpdate:Q,isVisible:s,hasSelectedCategory:i,selectedIndex:f,isVideoDonePlaying:m,videoCenter:A,isIntroDone:R,bubbleUpdateRefs:C},n.category))})})})]})]})},pt=({bubble:e,index:s,isLandscape:i,selectedCategory:l,selectedPosition:r,onCategorySelect:u,onPositionUpdate:f,isVisible:N,hasSelectedCategory:c,selectedIndex:d,isVideoDonePlaying:v,videoCenter:T,isIntroDone:m,bubbleUpdateRefs:g})=>{const y=a.useRef(void 0);return a.useEffect(()=>{y.current&&g.current.set(e.category,y.current)},[e.category,g]),t.jsx(Xe,{bubbleData:{...e,position:i?e.landscapePosition:e.position},isSelected:l===e.category,selectedPosition:r,onClick:()=>u(e.category,s),onPositionUpdate:f,isVisible:N,hasSelectedCategory:c,index:s,selectedIndex:d,isVideoDonePlaying:v,videoCenter:T,isIntroDone:m,updatePositionRef:y})},dt=[{text:"I am trying to keep track of my meals, if I list what I had today, can you give me [input]?",suggestions:["calorie estimates","how to up my protein","give me healthier alternatives"]},{text:"What are some of the best hidden secrets of athletes? Give me a plan [input].",suggestions:["on a basic level","but make it fun","and make it hard"]},{text:"How can I [input]?",suggestions:["build muscle quickly","get the most out of swimming","get better at yoga"]},{text:"I’m curious about nutrition. Tell me about [input].",suggestions:["carbs","intermittent fasting","glucose spike"]},{text:"I’m ready to drink the kool-aid. Please explain [input].",suggestions:["holistic wellness","herbal tinctures","reiki"]},{text:"I just found out people sleep 30% of their lives. Wow. Tell me more about [input].",suggestions:["how to get the best sleep","mattress choices","supplements for great sleep"]},{text:"How do I take care of my mental wellbeing? Give me some tips on [input].",suggestions:["anxiety","meditation","journaling"]},{text:"I’ve got a lot going on at work. What are [input]?",suggestions:["stress-relieving techniques","signs of burnout","ways to balance life and work"]},{text:"What are some simple things I can do to be healthier? Tell me about [input].",suggestions:["supplements","immune boosting","5 minute daily work-outs"]},{text:"I want to make some health changes for my parent, who is older. How can I [input]?",suggestions:["help reduce their blood pressure","manage diabetes","make meals that are low in cholesterol"]},{text:"I’m done with the excuses! How can I [input]?",suggestions:["put an end to procrastinating","stop scrolling","wake up earlier"]},{text:"I have been feeling down on myself lately. Can you talk up [input].",suggestions:["how I look","my sense of humor","my brain","me in general"]}],gt=[{text:"What’s an easy week night, feel good meal that’s [input].",suggestions:["healthy","asian fusion","easy to make for 4 people"]},{text:"I’m too lazy to go shopping. What can I make with the random stuff I have in the fridge? I’ve got [input].",suggestions:["apples","tuna","mayo","cucumber","eggs","fennel","cornichons"]},{text:"I want to eat like an athlete, but dont have the funds for a chef nor the time to spend hours on cooking. What are some [input]?",suggestions:["simple prep ideas","protein packed meals","easy breakfast options"]},{text:"Help me out. I made the mistake of [input].",suggestions:["inviting 12 people for dinner","saying yes to hosting my in-laws","trying to do a juice cleanse"]},{text:"I got this great pasta recipe from a Nonna. Can you [input]?",suggestions:["change the ingredients","make it spicy","make it for a dinner party of 15"]},{text:"I want to make a fancy dinner for my partner. Can you give me three courses and recipes? But they [input].",suggestions:["have a gluten allergy","love seafood","dislike salads"]},{text:"I just moved out from home. Money is tight and cooking knowledge is zero. Give me a [input].",suggestions:["meal prep plan","easy things to cook in tight spaces","cheap and delicious dinner ideas"]},{text:"I just moved into my first place. What are [input]?",suggestions:["basic kitchen utensils I need","must have spices","cleaning schedules for my roommate"]},{text:"The illusive runny egg. What is [input]?",suggestions:["the perfect boiling time","the best way to poach an egg","the best topping"]},{text:"I’m far from a grilling expert. What is [input]?",suggestions:["the best set up","grilling time on hot dogs","sauce for a burger"]},{text:"I want to cook outside of my culture. Give me some easy recipes from [input].",suggestions:["France","China","Peru"]},{text:"I love brunch. Search the web, compile and combine every recipe you can find, and give me the world’s best [input].",suggestions:["stack of pancakes","shrimp and grits","mimosa"]},{text:"My kids are picky eaters. How do I [input].",suggestions:["hide vegetables in their meals","avoid food groupings touching each other","make chocolate healthy"]},{text:"What are some fool proof recipe ideas my teen can make? They like [input].",suggestions:["healthy stuff","vegan dishes","fast food"]}],mt=[{text:"My time management is so-so but I want to learn a new hobby. What’s a good way to get started on [input]?",suggestions:["martial arts","flower arranging","learning mandarin"]},{text:"I want to learn more niche knowledge. Can you explain [input]?",suggestions:["quantum physics","starwars lore","human consciousness"]},{text:"I’d like to sound like an expert on current affairs stuff. Can you give me a rundown of [input].",suggestions:["oscar nominations","elections in norway","south korea"]},{text:"I’m a bit stuck on the instrument I’ve been learning. Can you give me tips on [input].",suggestions:["how to play piano smoother","switch cords faster on the guitar","get my neighbors to accept that i play the drums"]},{text:"I want to absorb knowledge better. What are some [input]?",suggestions:["techniques to improve learning","tips on memory retention","different styles of learning"]},{text:"I want to learn soft skills to get better at my job. How can I be better at [input]?",suggestions:["public speaking","in my team","creative problem solving"]},{text:"Exam prep is already scaring me. How can I [input]?",suggestions:["manage exam stress","prepare for my SAT or GRE","get better at taking notes"]},{text:"I want my kids to get ahead. What are some [input]?",suggestions:["fun ways to teach kids","helpful homework tips","educational games for teens"]},{text:"I want my friend group to get closer. What are some [input].",suggestions:["interesting dinner conversation topics","games that go in-depth","questions I can ask"]},{text:"I want to learn something everyday. Can you send me a short article daily? I’m interested in [input].",suggestions:["finance","art history","animal wellbeing"]},{text:"My brain is lazy. What are some great tips for passive learning? I am interested in [input].",suggestions:["speaking a new language","finance tips","art history"]}],ht=[{text:"I am trying to get better with investing. Can you give me a few basic tips? Every month I’m looking to invest around [input].",suggestions:["50 dollars","125 dollars","500 dollars"]},{text:"I’m nervous about my performance review. Can we set up a mock version so i can [input]?",suggestions:["pratice my responses","ask for a raise","impress my boss"]},{text:"I want to start a side hustle. What are the most important things to know about [input].",suggestions:["shipping mail","making excel sheets not suck","writing non-cringe newsletters"]},{text:"I suck at managing my money. Give me some tips on [input].",suggestions:["the 50/30/20 rule","how to create a budget","what the best apps are for budgeting"]},{text:"I know everyone should have savings. But how much is enough? Tell me about [input].",suggestions:["saving for an emergency","high-yield savings accounts","the difference between savings and investing"]},{text:"I hate thinking about my credit card debt. Give me [input].",suggestions:["a plan on how to pay off my debt fast","details on debt consolidation","ways to improve my credit score"]},{text:"I’ve always wanted to work for myself. How do I [input]?",suggestions:["get started as a freelancer","find clients","manage finances"]},{text:"I want to learn more about investing. Please condense some info for me on [input].",suggestions:["the difference between stocks and bonds","what are ETFs","a diversified portfolio"]},{text:"I want to get ahead of my retirement now. I’d like to know [input]?",suggestions:["how much money I need to retire","what is a 401k?","how can I retire early"]},{text:"I don’t know what credit card is best for my needs. Can you [input]?",suggestions:["help me figure out the differences","show me my returns","tell me which one is cheapest"]}],ft=[{text:"I’d like to learn some common phrases for my upcoming trip to [input].",suggestions:["Lapland","Italy","South Korea"]},{text:"What is a charismatic sign-off I could use in an email to my team based in [input]?",suggestions:["Japan","Germany","South Africa"]},{text:"I want to learn a new language this year. What is [input].",suggestions:["the easiest language to learn","the most useful language to know","the best apps and tools to learn"]},{text:"How do I [input]?",suggestions:["master tones in Mandarin","understand French native speakers","roll my Rs in spanish"]},{text:"I want to impress my crush with some stuff in their language. They are [input].",suggestions:["Korean","Lebanese","Polish"]},{text:"I need to send an important email. Can you [input]?",suggestions:["spell-check","make it shorter","make me sound more confident"]},{text:"How did different languages evolve? Tell me specifically about [input].",suggestions:["Swedish","Arabic","Greek"]},{text:"Help me with my pronounciation in [input].",suggestions:["French","Mandarin","Portuguese"]},{text:"I’m interested in languages. What are the specific differences between [input]?",suggestions:["Moroccan Arabic and Lebanese Arabic","German in Germany vs. Switzerland","Portuguese in Brazil vs. Portugal"]},{text:"What is the origin of the name [input]?",suggestions:["Adam","Kendra","Josh"]},{text:"What is the easiest language to learn for people that already know [input].",suggestions:["English","Spanish","Hindi"]},{text:"What are the best cartoons for my kids to watch to learn a new language like [input].",suggestions:["French","Spanish","Mandarin"]},{text:"I want to write a hilarious birthday card for my dad’s birthday. Can you come up with something funny in the tone of [input].",suggestions:["a drunk pirate","our dog Koda","his beloved 1972 chevy"]},{text:"What is the phonetic spelling of a sentence in [input]?",suggestions:["Mandarin","Arabic","Greek"]}],yt=[{text:"I’ve got no fashion or color sense. Can you give me some basic tips for a guy on how to [input]?",suggestions:["shop better","pair items by color","create a modular closet"]},{text:"I have visitors next weekend but the weather looks like it’ll suck. What are some fun indoor activities for a [input]?",suggestions:["6 year old","my grandparents","a teenager"]},{text:"I am losing it with all these washing machine instructions. Can you break down [input]?",suggestions:["what this label is saying","how to take care of cashmere","why won’t this stain come out"]},{text:"I have a trip this week. Can you check the weather and tell me what I need to pack? I’m going to a [input].",suggestions:["relaxing retreat in lake tahoe","business trip in Dallas","visiting my family in Florida"]},{text:"My kids hate our chore list. Can you rewrite so it sounds like [input]?",suggestions:["an adventure quest game","a pirate scavenger hunt","a princess fairy story"]},{text:"I’m in a long distance relationship. What’s the best schedule for us to chat? They are [input].",suggestions:["9 hours ahead of me","traveling twice a week","working night shifts with a 3 hour time difference"]},{text:"I’m arguing with my friends about card game rules. Can you please give me a rundown of [input].",suggestions:["UNO household rules","what’s allowed in Piquet","how to win at Skat"]},{text:"I’m trying to impress my partner with horoscope knowledge. I’m dating a [input].",suggestions:["scorpio man","virgo woman","aries piece of work"]},{text:"I just graduated and don’t know what’s next. What type of jobs [input]?",suggestions:["are in the music field","could I do around the world for a year","have to do with sustainability"]},{text:"I want to do a roadtrip in the US. Give me some tips on [input].",suggestions:["what car I should take","what time of the year I should go","how to budget the best"]},{text:"I got a letter from my landlord. Can you [input]?",suggestions:["explain the legalese terms","help me craft a response","tell me what my options are"]},{text:"I’m traveling to [input], what [input]?",suggestions:["Estonia","Gambia","Switzerland","plugs do they use","currency do they have","climate should I prepare for"]},{text:"My house needs a deep clean. What are the [input].",suggestions:["best non-toxic cleaners","easiest ways to clean windows","best ways to get my kids involved"]}],ye=[{title:"Wellness",templates:dt},{title:"Money",templates:ht},{title:"Learning",templates:mt},{title:"Language",templates:ft},{title:"Cooking",templates:gt},{title:"Random",templates:yt}],bt=[{text:"This year I want to [input]. I'm interested in [input]. Can you give me some tips?",suggestions:[["stop doom-scrolling"],"boxing and art history"]},{text:"I want to [input]. I tried [input] and [input]. What else can I do?",suggestions:[["unwind at night"],"meditation","it only kind of works"]},{text:"I'm ready to drink the kool-aid. Tell me about [input] and how to [input].",suggestions:[["holistic wellbeing"],"read tarot cards"]},{text:"How can I stop [input]? I always avoid [input]. What should I do?",suggestions:[["procrastinating"],"hard decisions"]},{text:"What are some of the best kept secrets of [input] and how can I use them?",suggestions:[["athletes"]]},{text:"My [input] refuse to [input]. I want them to [input]. What should I do?",suggestions:[["elder parents"],"exercise","live healthy and longer"]},{text:"I have some pain in my [input]. What are some [input] that I can do daily to help?",suggestions:[["lower back"],"activities"]}],xt=[{text:"I've been a [input] for [input] years and want a [input]. How should I approach my boss?",suggestions:[["junior associate salesperson"],["2"],["20% raise"]]},{text:"I'm a [input] and want to work for myself. How do I [input], [input], and [input]?",suggestions:[["landscaper"],["manage time"],["find clients"],["do finances"]]},{text:"I want to [input]. Rent is [input]/month, income [input], expenses [input]. Please make me a plan.",suggestions:[["manage my money"],["$800"],["$6500"],["$3000"]]},{text:"I'm nervous about my performance review. Can we practice so I can [input]?",suggestions:[["impress my boss"]]},{text:"I want to start a [input]. What should I know about [input]?",suggestions:[["side hustle"],["getting started"]]}],vt=[{text:"I'm a [input] learner and want to learn more about [input]. I also love [input].",suggestions:[["visual"],["quantum physics"],["sci-fi"]]},{text:"I'm about to take my [input] exam. I'm worried about [input]. What are some preparation tips?",suggestions:[["SAT"],["math"]]},{text:"I want to [input]. What should we do when we get together?",suggestions:[["bring my friend group closer"]]},{text:"I want to sound like an expert. Can you give me a rundown of [input]?",suggestions:[["Oscar nominations"]]},{text:"I'm stuck. Can you give me tips on how to [input]?",suggestions:[["switch chords faster on the guitar"]]}],wt=[{text:"I'm traveling to [input]. What should I [input], and what are [input] I need to know? Make it [input].",suggestions:["Lapland","pack and see","common phrases","kid friendly"]},{text:"I want to impress [input] who speaks [input]. Give me [input] that are [input].",suggestions:["my crush","Portuguese","sweet one-liners","funny"]},{text:"I'm trying to learn [input]. Quiz me on [input]. ",suggestions:["Spanish","zoo animals"]},{text:"I got a letter from my landlord. Can you [input]?",suggestions:["explain the legalese terms"]},{text:"Help me write a [input] for my [input] in French in the tone of a [input].",suggestions:["hilarious 60th birthday card","Dad","drunk pirate"]}],kt=[{text:"My [input] is visiting me in [input]. It will be [input]. What can we do [input]?",suggestions:["anime and horse-loving 10-year-old niece","Dallas","rainy","indoors"]},{text:"I'm in [input]. I like [input], and dislike [input]. What jobs could work for me?",suggestions:["high school","music, sports, and math","wearing a suit"]},{text:"I've got no fashion or color sense. Can you give me some basic tips on how to [input]?",suggestions:["shop better"]}],It=[{text:"I've invited [input] people for [input]. Give me 3 recipes that [input] and are [input].",suggestions:["12","brunch","aren't too much work","healthy"]},{text:"Please make a recipe out of: [input].",suggestions:["kale, mayo, tomatoes, pickles, eggs, rice, apples, olives"]},{text:"I want to eat healthier to [input]. Give me [input] recipes that are [input].",suggestions:["reduce brain fog","3",["easy to make","cheap","fun"]]}],be=[{title:"Wellness",templates:bt},{title:"Money",templates:xt},{title:"Learning",templates:vt},{title:"Language",templates:wt},{title:"Cooking",templates:It},{title:"Random",templates:kt}];function xe(){return typeof window>"u"?!1:new URLSearchParams(window.location.search).get("multiple")==="true"}function me(){const{layer:e}=Te("2259187367"),s=e.get("use_multi_input",!1),i=Be("2821602598").config,l=e.get("additional_category","");return a.useMemo(()=>{const r=i.get(l,[]);return l&&r?s?[...r,...be]:[...r,...ye]:s?be:ye},[l,s,i])}const St={bubble:{scale:1},open:{scale:.5,transition:{type:"easeOut",duration:.2}},closing:{scale:[1.7,1],transition:{type:"anticipate",duration:.38,delay:.3}},input:{scale:1},tap:{scale:.7,transition:{type:"spring",stiffness:500,damping:30}}},Tt=({topic:e,isSelected:s=!1,onClick:i,viewState:l="input"})=>t.jsx(k.button,{onClick:i,variants:St,initial:!1,animate:l==="bubble"?"open":"closing","aria-controls":"category-selector","aria-selected":s,className:q("min-h-md text-cta pointer-events-auto flex h-[2rem] items-center justify-center gap-[0.3em] rounded-[2.5rem] px-5 outline-offset-2",{"bg-token-text-primary text-token-main-surface-secondary hover:opacity-70":s,"whitespace-wrap border-primary-12 text-primary-60 hover:bg-primary-4 border border-solid bg-transparent":!s}),children:t.jsx("span",{className:"relative font-medium",children:e})}),jt=({selectedCategory:e,onClick:s,viewState:i="input"})=>{const l=re(),r=me();return t.jsx(de,{children:i!=="chat"&&t.jsxs(k.div,{className:"mb-[24px] flex w-full items-center md:mb-[76px]",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{opacity:{duration:.3,ease:"easeIn"},height:{duration:.4,ease:"easeOut"}},exit:{opacity:0,height:0,transition:{opacity:{duration:.2,ease:"easeOut"},height:{duration:.4,delay:0,ease:"easeOut"}}},children:[t.jsx(Tt,{topic:r[e].title,isSelected:!0,onClick:s,viewState:i},r[e].title),t.jsx("button",{type:"button",onClick:s,className:"hover:text-primary-200 text-primary-100 flex items-center self-stretch pl-4 text-sm font-medium transition-colors","aria-controls":"category-selector","aria-label":l.formatMessage({id:"dp-category-selector.select-another-category",defaultMessage:"Select another category"}),children:l.formatMessage({id:"dp-category-selector.explore-other-topics",defaultMessage:"Explore other topics"})})]})})},At=e=>{const s={scale:1,opacity:1},i={scale:[1,.7,1],opacity:[1,.6,1]};return t.jsx(k.div,{initial:s,animate:e==="generating"?i:s,transition:{scale:{duration:1.5,ease:"easeInOut",repeat:Number.POSITIVE_INFINITY,repeatType:"reverse",repeatDelay:.1,delay:.5},opacity:{duration:1.5,ease:"linear",repeat:Number.POSITIVE_INFINITY,repeatType:"reverse",repeatDelay:.1,delay:.5}},className:"loader-dot bg-black-100 h-[15px] w-[15px] rounded-full"})},Ct=({onSubmit:e,onNextTemplate:s,isInputFocused:i=!1,visible:l,hideWhenReachedBottom:r=!1,clientThreadId:u})=>{const f=a.useRef({visible:l,isInputFocused:i}),N=i!==f.current.isInputFocused&&l===f.current.visible,[c,d]=a.useState("default"),[v,T]=a.useState("default"),m=we();a.useEffect(()=>{v!==c&&T(c),r&&d("hidden")},[r,v,c]),a.useEffect(()=>{f.current={visible:l,isInputFocused:i}},[i,l,N]);const g=re(),y=()=>{const R=c==="default"?0:60;return t.jsxs(k.div,{className:"generate-actions col-start-1 row-end-[-1] flex flex-col items-center gap-2.5 p-5 opacity-100",animate:{visibility:c==="default"?"visible":"hidden",opacity:c==="default"?1:0,y:R},transition:{y:{duration:.4,type:"spring",bounce:.4},opacity:{duration:.2,ease:"linear"}},children:[t.jsx(se,{color:"ghost",size:"large",onClick:()=>{s()},icon:Ie,className:"w-full whitespace-nowrap",children:g.formatMessage({id:"dp-madlib-input-action-bar.new-prompt",defaultMessage:"New example"})}),t.jsx(se,{color:"primary",size:"large",onClick:j=>{e(j)},icon:Se,className:"w-full",children:g.formatMessage({id:"dp-madlib-input-action-bar.generate-answer-2",defaultMessage:"Ask ChatGPT"})})]})},E=()=>{const b={from:-60,to:0},R=c==="generating"||c==="done"||c==="hidden",j="86px";return t.jsxs(k.div,{className:"generating-actions col-start-1 row-end-[-1] grid h-[68px] items-center justify-between gap-2.5 pl-5 pr-3",style:{gridTemplateColumns:c==="done"||c==="hidden"?`${j} calc(100% - ${j} - 0.625rem)`:`${j} calc(100% - 100px - 0.625rem)`,transition:"grid-template-columns 0.38s 0.08s ease-out"},initial:{opacity:1,visibility:"visible",y:b.from},animate:{opacity:R?1:0,visibility:"visible",y:R?b.to:b.from},transition:{y:{duration:.4,type:"spring",bounce:.4},opacity:{duration:.08,ease:"linear"}},children:[t.jsx(se,{color:"ghost",size:"large",children:t.jsx("span",{className:"text-primary-100",children:g.formatMessage({id:"dp-madlib-input-action-bar.back",defaultMessage:"Back"})})}),t.jsx("div",{className:"grid",children:t.jsx(k.div,{className:"loader item-end col-start-1 row-end-[-1] flex h-[40px] w-[40px] items-center justify-center self-center justify-self-end",initial:{opacity:1,y:0,scale:1},animate:{opacity:c==="done"||c==="hidden"?0:1,y:0,scale:c==="done"||c==="hidden"?2.6:1},transition:{opacity:{duration:.7,ease:"linear"},scale:{duration:.6,ease:"easeOut"}},children:At(c)})})]})},A=a.useMemo(()=>m?l:m?!0:c!=="default",[c,m,l]),w=b=>({hidden:{opacity:0,y:"100%",transition:{opacity:{duration:.2,ease:"linear"},y:{duration:.2,type:"spring",bounce:.15}}},visible:{opacity:1,y:"0%",transition:{opacity:{duration:.8,delay:b?.5:0,ease:"linear"},y:{duration:.8,delay:b?.4:0,type:"spring",bounce:.15}}},inputFocused:{opacity:0,y:"0%",transition:{opacity:{duration:.2,ease:"linear"},y:{duration:.2,type:"spring",bounce:.15}}}});return t.jsx(k.div,{className:"pointer-events-none sticky inset-x-0 left-0 top-[var(--dp-header-height)] z-10 flex h-[calc(100dvh-var(--dp-header-height))] flex-col items-center justify-end overflow-hidden pb-6 md:top-[var(--dp-header-height-md)] md:h-[calc(100dvh-var(--dp-header-height-md))]",children:t.jsxs(k.div,{className:"w-full",variants:w(m),initial:"hidden",animate:m?i?"inputFocused":A?"visible":"hidden":c!=="default"?"visible":"hidden",children:[t.jsx(k.div,{className:"morphing-wrapper relative mx-auto flex w-full max-w-[375px] items-end justify-end overflow-hidden bg-token-main-surface-tertiary backdrop-blur-3xl",style:{borderRadius:"20px"},animate:{opacity:c==="hidden"?0:1,borderRadius:c==="default"?"20px":"60px",height:c==="default"?"auto":"68px"},transition:{height:{duration:.4,type:"spring",bounce:.4},opacity:{duration:.4,ease:"easeOut"}},children:t.jsxs("div",{className:"flow-wrapper height-[min-content] relative z-20 grid w-full items-end",children:[y(),E()]})}),t.jsx("div",{className:"mt-3 px-3 text-center text-sm text-token-text-secondary",children:t.jsx(ke,{clientThreadId:u})})]})})},Et=()=>{const e=Ue(),s=re(),{close:i}=ge();return t.jsx("div",{className:"sticky left-0 top-0 z-50 w-full @container",children:t.jsxs("div",{className:"bg-secondary-12 bg-white-60 md:pl-3xl flex h-[var(--dp-header-height)] w-full items-center justify-between px-[25px] backdrop-blur-3xl @md:h-[3.75rem] @md:rounded-md md:h-[var(--dp-header-height-md)] md:max-h-[3.75rem]",children:[t.jsx("div",{className:"flex items-center",children:t.jsx(Ye,{})}),t.jsx("div",{className:q("right-0 flex items-center gap-[8px]",{"-mr-2 gap-[4px]":e}),children:t.jsx(se,{color:"secondary",size:"medium",className:"ease-curve-atext-nowrap flex-row-reverse border-token-main-surface-secondary bg-token-main-surface-secondary outline-offset-2 transition duration-200 hover:border-token-main-surface-secondary-selected hover:bg-token-main-surface-secondary-selected","aria-label":s.formatMessage({id:"dp-dialog-header.close-dialog",defaultMessage:"Close dialog"}),"aria-controls":"dialog",onClick:()=>{i(),V.logEvent("chatgpt_madlibs_skip")},icon:ze,"data-testid":"madlibs-skip-btn",children:s.formatMessage({id:"dp-dialog-header.skip-this-2",defaultMessage:"Skip this"})})})]})})};function Pt({showSurpriseMe:e,onNewPrompt:s,clientThreadId:i}){const l=re();return t.jsxs("div",{className:"ease-curve-a grid gap-[9px] transition-all duration-200",children:[t.jsx("div",{className:q("ease-curve-a pointer-events-none z-40 col-start-1 row-end-[-1] grid w-full max-w-[400px] grid-cols-[1fr_1fr] gap-[6px] transition-opacity",{"opacity-100":e,"opacity-0":!e}),style:{gridTemplateColumns:e?"calc(50% - 6px) calc(50% - 6px)":"calc(20% - 6px) calc(80% - 6px)",transitionProperty:"opacity, transform, grid-template-columns",transitionDuration:"200ms, 320ms, 250ms",transitionDelay:e?"0ms":"50ms, 0ms, 0ms",transitionTimingFunction:e?"var(--ease-in-out-cubic)":"var(--ease-out-cubic)",transform:e?"translateX(0)":"translateX(-10%)"},children:t.jsx(se,{color:"ghost",size:"large",onClick:r=>{r.preventDefault(),s()},icon:Ie,className:"w-full whitespace-nowrap border-token-main-surface-secondary bg-token-surface-hover transition duration-200 hover:border-token-main-surface-secondary-selected hover:bg-token-main-surface-secondary-selected",children:l.formatMessage({id:"dp-madlib-input-action-bar.new-example",defaultMessage:"New example"})})}),t.jsx("div",{className:"duration-400 pointer-events-none z-50 col-start-1 row-end-[-1] grid w-full max-w-[400px] justify-end transition-[grid-template-columns]",style:{gridTemplateColumns:e?"calc(50% - 6px) calc(50% - 6px)":"0 calc(100%)",transitionDuration:e?"400ms":"320ms",transitionTimingFunction:"var(--ease-out-cubic)"},children:t.jsx("div",{className:"col-end-[-1]",children:t.jsx(se,{color:"primary",type:"submit",size:"large",icon:Se,className:"w-full",children:l.formatMessage({id:"dp-madlib-input-action-bar.generate-answer",defaultMessage:"Ask ChatGPT"})})})}),t.jsx("div",{className:"mt-3 px-3 text-sm text-token-text-secondary",children:t.jsx(ke,{clientThreadId:i})})]})}const Nt=e=>{e.preventDefault();const s=e.clipboardData.getData("text/plain");document.execCommand("insertText",!1,s)},Mt=`
  @keyframes cursorBlink {
    0%, 100% {
      border-left-width: 2px;
      border-left-style: solid;
      border-image: linear-gradient(to bottom, rgba(0,0,255,0) 0%, rgba(0,0,255,0) 14.99%, #0066DE 15%, #0066DE 15%, #0066DE 85%, rgba(0,0,255,0) 85.01%, rgba(0,0,255,0) 100%) 1;
    }
    50% {
      border-left-width: 2px;
      border-left-style: solid;
      border-image: linear-gradient(to bottom, rgba(0,0,255,0) 0%, rgba(0,0,255,0) 14.99%, rgba(0,0,255,0.2) 15%, rgba(0,0,255,0.2) 15%, rgba(0,0,255,0.2) 85%, rgba(0,0,255,0) 85.01%, rgba(0,0,255,0) 100%) 1;
    }
  }
`;if(typeof document<"u"){const e=document.createElement("style");e.innerHTML=Mt,document.head.appendChild(e)}const Lt=({index:e,editModeEnabled:s,currentSuggestion:i,onInputStateChange:l,spanRef:r,onEnterPress:u,isAnimating:f=!1,onAnimationComplete:N,showSurpriseMe:c=!1})=>{const d=a.useRef(!1),v=a.useRef(null),[T,m]=a.useState(!1),[g,y]=a.useState("idle"),[E,A]=a.useState(-1),[w,b]=a.useState(i||""),[R,j]=a.useState(""),[M,O]=a.useState([]);a.useEffect(()=>{if(f){const C=(v.current?.textContent||"").trim()||R||"";b(C),y("highlight"),A(-1),O([])}else b(i||""),j(i||""),y("idle"),O([])},[i,f,R]),a.useEffect(()=>{const x=w||"";if(g==="highlight"&&E<x.length-1){const C=setTimeout(()=>{A(L=>L+1)},80);return()=>clearTimeout(C)}else if(g==="highlight"&&E===x.length-1){const C=setTimeout(()=>{y("fadeOut")},200);return()=>clearTimeout(C)}else if(g==="fadeOut"){const C=setTimeout(()=>{b(i||""),y("fadeIn"),O([])},200);return()=>clearTimeout(C)}else if(g==="fadeIn")if(M.length<x.length){const C=setTimeout(()=>{O(L=>[...L,M.length])},M.length===0?600:160);return()=>clearTimeout(C)}else y("idle"),N&&N()},[g,E,w,i,N,M.length]);const P=()=>{if(!f||g==="idle")return"";const C=(w||"").split("");return t.jsx(k.span,{style:{display:"inline",transition:"opacity 0.2s"},children:C.map((L,I)=>{const Y=g==="highlight"&&I<=E,G=g==="fadeIn"?M.includes(I):!0;return t.jsx(k.span,{style:{display:G?"inline":"none",backgroundColor:Y?"rgb(0, 0, 255, 0.2)":"rgba(0, 0, 255, 0)",color:Y||g==="fadeIn"?"#0066DE":"rgb(179, 179, 179)"},children:L},I)})})};return a.useEffect(()=>{d.current&&v.current?.focus()},[]),t.jsx(je,{delayDuration:0,children:t.jsx(Ge,{open:d.current&&c&&!f,children:t.jsx(He,{asChild:!0,children:t.jsxs("span",{children:[t.jsx("span",{ref:x=>{r(x),v.current=x},suppressContentEditableWarning:!0,contentEditable:s&&!f,onPaste:Nt,autoFocus:!0,role:"textbox",autoCapitalize:"none",tabIndex:s?1:-1,style:{wordBreak:"break-word",outline:"3px solid transparent",userSelect:"text",WebkitUserSelect:"auto","--cursor-blink":"cursorBlink 1.2s ease-in-out infinite",display:f?"none":"inline"},"data-placeholder":i,className:q("relative box-content inline max-w-full break-words bg-transparent underline decoration-token-text-primary",{"text-token-text-primary":T||f,"text-token-text-secondary":!T&&!f,"cursor-text":s,"cursor-default":!s},"after:ml-[-2px] after:box-content after:border-l-2 after:border-l-transparent empty:min-w-[1ch] empty:after:text-[#B3B3B3] empty:after:transition-[color] empty:after:duration-300 empty:after:content-[attr(data-placeholder)] focus:empty:after:[animation:var(--cursor-blink)]","focus:outline-none focus:empty:after:text-[#b3b3b373]"),onFocus:()=>{s&&(m(!0),d.current=!0,l?.(!0,e))},onBlur:()=>{s&&(d.current=!1,l?.(!1,e))},onKeyDown:x=>{s&&(x.nativeEvent.isComposing||x.key==="Enter"&&(x.shiftKey?x.preventDefault():(x.preventDefault(),u?.(x))))}}),P()]})})})})},ve=(e,s)=>{const i=e.suggestions,l=[...s];return[i.map((r,u)=>{if(Array.isArray(r)){if(s[u]===void 0)return l[u]=0,r[0];const f=(s[u]+1)%r.length;return l[u]=f,r[f]}return r}),l]},ae=(e,s,i)=>(i>=e[s].templates.length&&(i=0),e[s].templates[i]),Ae=a.forwardRef(({onSubmit:e,selectedCategoryIndex:s=0,onInputStateChange:i,showSurpriseMe:l=!1,visible:r,editModeEnabled:u=!0,onNewPrompt:f,clientThreadId:N},c)=>{const[d,v]=a.useState(0),[T,m]=a.useState([]),[g,y]=a.useState([]),[E,A]=a.useState(u),[w,b]=a.useState(!1),[R,j]=a.useState([]),[M,O]=a.useState(-1),P=a.useRef([]),x=a.useRef(null),C=a.useRef(!1),L=we(),I=me(),Y=n=>{const o=ae(I,s,d);return Array.isArray(o.suggestions[n])&&o.suggestions[n].length>1};a.useEffect(()=>{v(0)},[s]),a.useEffect(()=>{E!==u&&(b(!u),A(u))},[u,E]),a.useEffect(()=>{const n=ae(I,s,d),[o,h]=ve(n,[]);m(o),y(h),j(new Array(o.length).fill(!1)),P.current.forEach(S=>{S&&(S.textContent="")}),P.current=new Array(o.length).fill(null)},[s,d,I]);const G=(n,o)=>{n?(C.current=!0,o!==void 0&&O(o),x.current&&clearTimeout(x.current),i?.(!0)):(C.current=!1,x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{C.current||i?.(!1)},200))},H=n=>{if(n.preventDefault(),e){const o=ae(I,s,d),h=P.current.map(S=>S?.textContent?.trim()||"");e(n,h,o.text)}},Q=()=>{const n=ae(I,s,d),[o,h]=ve(n,g);if(y(h),M===-1){j(new Array(o.length).fill(!0)),m(o);return}j(S=>{const F=[...S];return F[M]=!0,F}),m(S=>{const F=[...S];return F[M]=o[M],F})},W=()=>{const n=I[s],o=(d+1)%n.templates.length;v(o),P.current.forEach(h=>{h&&(h.textContent="")})},Z=()=>ae(I,s,d).text,D=a.useMemo(()=>ae(I,s,d).text.split("[input]"),[s,d,I]);return a.useImperativeHandle(c,()=>({handleNextTemplate:W,handleSurpriseMe:Q,getCurrentTemplate:Z,getCurrentSuggestion:()=>T,getCurrentInput:()=>P.current.map(n=>n?.textContent?.trim()||""),getFinishedPrompt:()=>{const n=P.current.map((o,h)=>o?.textContent?.trim()||""||T[h]);return D.reduce((o,h,S)=>S===D.length-1?o+h:o+h+n[S],"")}})),t.jsx(je,{delayDuration:0,children:t.jsxs("div",{className:"md:gap-y-[80px]-d relative z-[1] grid overflow-clip p-[2px] [grid-template-areas:'stack'] md:p-[6px]",children:[t.jsx(k.form,{onSubmit:H,className:"text-token-main-text-primary",style:{minHeight:r&&u?"min(55vh, 700px)":0},initial:{opacity:0,y:"40px",height:"auto"},animate:{opacity:r&&u?1:0,y:r?"0":"40px",height:r&&u?"auto":0,transition:{duration:u&&!w?.8:.2,delay:r?u&&!w?.8:0:w?.2:.3,ease:u&&!w?"circOut":"easeOut",height:{duration:w?0:.4,delay:0,ease:"easeIn"}}},children:t.jsxs("div",{className:"flex flex-col gap-x-2 gap-y-[2.5rem] pb-16 [grid-area:stack] md:min-h-[50vh] md:gap-y-[5.75rem]",style:{minHeight:"min(55vh, 700px)"},children:[t.jsx(k.p,{className:q("relative max-w-full font-medium",{"text-[36px] md:text-[56px]":xe(),"text-[48px] md:text-[64px]":!xe()}),animate:{lineHeight:u?"100%":"70%"},transition:{duration:.4,ease:"easeOut"},children:D.map((n,o)=>t.jsxs(Fe.Fragment,{children:[n,o<D.length-1&&t.jsx(Lt,{index:o,editModeEnabled:u,currentSuggestion:T[o],onInputStateChange:G,spanRef:h=>P.current[o]=h,onEnterPress:H,isAnimating:R[o],showSurpriseMe:Y(o),onSurpriseMe:Q,onAnimationComplete:()=>{j(S=>{const F=[...S];return F[o]=!1,F});const h=P.current[o];h&&(h.textContent=T[o])}})]},`${I[s].title}-template-${d}-part-${o}`))}),t.jsx(k.div,{className:"mt-auto",initial:L?{opacity:0}:{opacity:1},animate:L?{opacity:l?1:0}:{opacity:1},transition:{duration:.2},children:t.jsx(Pt,{showSurpriseMe:!L&&!l,onNewPrompt:f,clientThreadId:N})})]})}),t.jsx(k.div,{className:"from-bg-token-main-surface-primary via-bg-token-main-surface-primary pointer-events-none absolute inset-0 z-[2] bg-gradient-to-b to-transparent",initial:{y:"0%",scaleY:2},animate:{y:r?"-150%":"0%",scaleY:2,transition:{y:{duration:.8,delay:r?.8:.3,ease:"easeOut"},scaleY:{duration:.8,delay:r?.8:.3,ease:"easeOut"}}}})]})})});Ae.displayName="DPMadLibInput";const Rt="bubble",Dt=()=>{const[e,s]=a.useState(Rt),[i,l]=a.useState(0),r=a.useRef(null),[u,f]=a.useState(!1),N=me(),{onRequestCompletion:c,clientThreadId:d}=Oe(),{close:v}=ge(),T=A=>{const w=r.current?.getFinishedPrompt();w&&(c({sourceEvent:A,promptMessage:Je(w),completionMetadata:{conversationMode:qe(Qe(d)?.mode)}}),V.logEvent("chatgpt_madlibs_generate_answer",null,{category:N[i]?.title}),v())},m=A=>{const w=N.findIndex(b=>b.title.toLowerCase()===A.toLowerCase());w!==-1&&(l(w),V.logEvent("chatgpt_madlibs_category_selected",null,{category:A}),E())},g=A=>{f(A)},y=()=>{r.current?.handleNextTemplate(),E(),V.logEvent("chatgpt_madlibs_new_example")},E=()=>{s("input")};return a.useEffect(()=>{V.logEvent("chatgpt_madlibs_nux_shown")},[]),t.jsxs(t.Fragment,{children:[t.jsx(Et,{}),t.jsx(ut,{onCategorySelect:m,isVisible:e==="bubble"}),t.jsxs(k.div,{className:"md:px-3xl flex w-full flex-col pl-[25px] pr-[25px]",initial:!1,animate:{opacity:e==="input"||e==="chat"?1:0},transition:{duration:.8},children:[t.jsx(Ct,{isInputFocused:u,visible:e==="input"||e==="chat",onSubmit:A=>{A.preventDefault(),r.current&&T(A)},onNextTemplate:y,clientThreadId:d}),t.jsxs("div",{className:"mx-auto mt-[calc(-100dvh+var(--dp-header-height))] min-h-[calc(100dvh-var(--dp-header-height))] w-full max-w-[1032px] pb-[var(--dp-controls-height)] pt-[var(--dp-header-height)] md:pb-0 md:pt-[60px]",children:[t.jsx(jt,{selectedCategory:i,onClick:()=>{s("bubble"),V.logEvent("chatgpt_madlibs_explore_topics")},viewState:e}),t.jsx("div",{className:"md:pt-[70px]d pt-4-d flex flex-col gap-6 pb-6",children:t.jsx(Ae,{ref:r,selectedCategoryIndex:i,onSubmit:T,onInputStateChange:g,showSurpriseMe:u,visible:e==="input"||e==="chat",editModeEnabled:e!=="chat",onEditClick:E,onNewPrompt:y,clientThreadId:d})})]})]})]})};function Gt(){const{close:e}=ge(),s=a.useMemo(()=>({"--dp-p-grid":"25px","--dp-header-height":"4rem","--dp-header-height-md":"4.75rem","--ease-out-cubic":"cubic-bezier(0.215, 0.61, 0.355, 1)","--ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1)"}),[]);return t.jsx(Ke,{fallback:()=>(e(),V.logEvent("chatgpt_madlibs_error"),t.jsx(t.Fragment,{})),name:"MadlibsModal",children:t.jsx(de,{children:t.jsx(k.div,{className:"absolute inset-0 left-0 top-0 z-50 bg-token-main-surface-primary",style:s,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25,ease:"easeIn"},children:t.jsx(Dt,{})})})})}export{Gt as MadlibsModal};
//# sourceMappingURL=h2e6s6ucndbipzzc.js.map
