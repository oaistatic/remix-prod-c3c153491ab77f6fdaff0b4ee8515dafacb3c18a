import{e as v,r as x,j as C,n as a}from"./fs6h2trisr1juto6.js";import{aM as I,a3 as _,M as p,l as u,P as g,a as c,S as E,Z as D,ef as n,z as P,bG as N,aY as h,F as R,y as B}from"./njq6ygky3ttysgdk.js";import{cu as O}from"./d7a6rc8fexfzu7dt.js";import{I as G}from"./m3ph5kqqbcm52gd5.js";const f=(...e)=>t=>e.some(l=>l(t)),m=({allGroupedMessages:e})=>e.some(t=>[n.Browsing,n.RetrievalBrowsing,n.ParallelBrowsing].includes(t.type)),b=({allGroupedMessages:e})=>e.some(t=>t.type===n.SearchGPTQuery),j=({allGroupedMessages:e})=>e.some(t=>t.type===n.Text&&t.messages[0]?.metadata?.followup_prompts?.length),y=({allGroupedMessages:e})=>e.some(t=>t.type===n.CodeInterpreter);function z(e){return!e||!e.instructions?"":typeof e.instructions=="string"?e.instructions:e.instructions.filter(t=>typeof t=="string").join("")}const A=[{match:f(m,b),tag:"Shouldn't have searched the web",label:a({id:"kL047b",defaultMessage:"Shouldn't have searched the web"})},{match:j,tag:"Don't like the followups",label:a({id:"xAFgPE",defaultMessage:"Donâ€™t like the suggested follow ups"})},{match:f(m,b),tag:"Don't like the source it cited",label:a({id:"OWjzGX",defaultMessage:"Don't like the sources it cited"})},{match:y,tag:"Shouldn't have run code",label:a({id:"53w4ay",defaultMessage:"Shouldn't have run code"})},{match:y,tag:"Couldn't handle my file",label:a({id:"EkFTQ5",defaultMessage:"Couldn't handle my file"})},{match:({allGroupedMessages:e})=>e.some(t=>t.type===n.Dalle),tag:"Shouldn't have created an image",label:a({id:"S8FRsr",defaultMessage:"Shouldn't have created an image"})},{match:({allGroupedMessages:e})=>e.some(t=>{if(t.type!==n.Text)return!1;const l=t.messages[0],{content:o}=l;return o.content_type===p.Text&&P(l).match(/^```[\S]+\n/gm)}),tag:"Code was incorrect",label:a({id:"4EBdQk",defaultMessage:"Code was incorrect"})},{match:({systemContent:e})=>z(e).includes("Personality")??!1,tag:"Too chatty or casual",label:a({id:"ATzJKW",defaultMessage:"Too chatty or casual"})},{match:({features:e})=>e.includes(N.Sunshine),tag:"Shouldn't have used Memory",label:a({id:"yfUEiz",defaultMessage:"Shouldn't have used Memory"})},{tag:"Don't like the style",label:a({id:"nGxjdj",defaultMessage:"Don't like the style"})},{tag:"Not factually correct",label:a({id:"Ke7JtQ",defaultMessage:"Not factually correct"})},{tag:"Didn't fully follow instructions",label:a({id:"Rdlt9V",defaultMessage:"Didn't fully follow instructions"})},{tag:"Refused when it shouldn't have",label:a({id:"2yRS/Q",defaultMessage:"Refused when it shouldn't have"})},{tag:"Being lazy",label:a({id:"14MPmT",defaultMessage:"Being lazy"})},{tag:"Unsafe or problematic",label:a({id:"02pXBl",defaultMessage:"Unsafe or problematic"})},{tag:"Biased",label:a({id:"pK35DW",defaultMessage:"Biased"})},{tag:"Other",label:a({id:"WiIGE+",defaultMessage:"Other"})}],Q=[{tag:"I disagree with the policy",label:a({id:"oKyDLz",defaultMessage:"I disagree with the policy"})},{tag:"This didn't violate the policy",label:a({id:"7fUkVF",defaultMessage:"This didn't violate the policy"})},{tag:"I don't understand the policy",label:a({id:"4Cdp6N",defaultMessage:"I don't understand the policy"})},{tag:"This didn't take the full context",label:a({id:"vnZJDP",defaultMessage:"This didn't take the full context"})}];function U(e,t,l){return t.filter(o=>!o.match||o.match(l)).map(o=>({value:o.tag,label:e.formatMessage(o.label)}))}function K(e){const t=O(e);return t!=null&&(t.errCode===h.ContentPolicy||t.errCode===h.ContentOrTos)}function X({clientThreadId:e,conversationMessage:t,currentModelId:l,allGroupedMessages:o}){const M=v(),k=I()??[],i=t.clientMetadata?.rating,r=_(e,s=>R.findNode(s,d=>d.message.author.role===B.System&&d.message.content.content_type==="system_content")),S=r?.message.content.content_type===p.SystemContent?r?.message.content:null,T=x.useCallback(s=>{const d=u(e);d&&(s.tags.length===0&&!s.textFeedback||(g.logEvent(s.source==="inline"?c.messageFeedbackInlineSubmitted:c.messageFeedbackDialogSubmitted,{id:t.id,threadId:d,tags:s.tags,content:s.textFeedback,model:l,rating:i}),E.logEvent(s.source==="inline"?"chatgpt_feedback_inline_submitted":"chatgpt_feedback_dialog_submitted",s.tags?.[0]??null,{id:t.id,threadId:d,tag:s.tags?.[0]??"",content:s.textFeedback??"",model:l,rating:i??""}),i&&D.submitMessageFeedback({message_id:t.id,conversation_id:d,rating:i,text:s.textFeedback,tags:s.tags,tag_choices:s.tagChoices})))},[e,t,l,i]),F=()=>{g.logEvent(c.messageFeedbackMoreOptionsClicked,{id:t.id,threadId:u(e),model:l,rating:i})},w=U(M,K(t)?Q:A,{allGroupedMessages:o,features:k,currentModelId:l,systemContent:S});return i==="thumbsUp"?null:C.jsx(G,{tagOptions:w,onSubmit:T,onMoreClicked:F})}export{X as default};
//# sourceMappingURL=nnks6z5apisamygz.js.map
