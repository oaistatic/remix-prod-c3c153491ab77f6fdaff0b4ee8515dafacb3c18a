import{j as G,d as Y,bT as F,P as A,a as R,c5 as b,bJ as j,R as W,bw as X,f9 as q}from"./njq6ygky3ttysgdk.js";import{e as P,j as e,d as L,r as d,c as K,A as $}from"./fs6h2trisr1juto6.js";import{C as Z,e as Q}from"./o3m65hw8d23edpzw.js";import{C as z}from"./f70m8vtlisx99cm1.js";import{P as J}from"./meykrts0f231390r.js";import{i as w,d as ee,e as te,a as se,b as oe}from"./cw7s5l0nt7rrqvcw.js";import{k as ie,el as y,em as M,bt as le,bx as ae,cS as T,je as ne,cT as re}from"./d7a6rc8fexfzu7dt.js";import{L as ce}from"./o0kxre2a6am6klyc.js";import{c as U}from"./b8zlh79k7yo0fu3r.js";import"./l4ce2zdnnawhaijx.js";import"./gy64pge8qevmvg7e.js";import"./ora9zmv2zdoi2bvo.js";import"./j74ui1ngt8ov9uvf.js";import"./fzrn137102spawew.js";import"./n9whwsbg0rx5cs8k.js";import"./iqgzc83lat3a2v2u.js";import"./onz2j6p63wwkp7m6.js";import"./e3bj8idaaiic9lls.js";import"./hi1g9go8t53qsjy9.js";import"./jhoqcbqmt1jrh2rh.js";import"./c1p22j8o7hm9vv5x.js";const de="webp",ue=1200,me=675,pe="srgb",fe=3,Ee="uchar",he=!1,ge=!0,xe=!1,_e="/assets/made-with-chatgpt-og-g73iyayd.webp",S={format:de,width:ue,height:me,space:pe,channels:fe,depth:Ee,isProgressive:he,hasProfile:ge,hasAlpha:xe,src:_e},Ie="https://openai.com/form/report-content/";function Ce(t){return`/?model=gpt-4o&sharedCanvas=${t.sharedTextdocId}`}const H=({areButtonsFullWidth:t,sharedTextdoc:o,onClickCodePreview:I,isCodeRunning:r,showRunCodeButton:E,setIsReportModalOpen:c})=>{const{isUnauthenticated:a}=G(),u=ie(),n=w(o.type,o.content),x=E&&(n||ee(o.type)),l=P(),m=Ce(o),p=()=>{y.count(M.CANVAS,"shared.click_edit_button",[{key:"type",value:o.type},{key:"authed",value:a?"false":"true"}]),A.logEvent(R.canvasSharedEditButtonClicked,{textdocId:o.sharedTextdocId,textdocType:o.type})};return e.jsx("div",{className:"flex w-full justify-center border-b-[0.5px] border-token-border-light px-6",children:e.jsxs("div",{className:Y("flex w-full items-center justify-between gap-4 py-4",!t&&"max-w-[1200px]"),children:[e.jsxs("div",{children:[e.jsx("h1",{className:"line-clamp-1 text-base font-semibold text-token-text-primary",children:o.title}),e.jsxs("div",{className:"flex flex-col gap-1.5 text-xs text-token-text-secondary xs:flex-col sm:flex-row",children:[e.jsx("div",{className:"cursor-default",children:e.jsx(F,{withArrow:!1,align:"start",size:"xsmall",theme:"primary",labelTextAlign:"left",wide:!0,contentClassName:"![&>*]:font-normal [&>*]:font-normal",customPrimaryLabelColorStyle:"primary",label:l.formatMessage({id:"RkWIbL",defaultMessage:"The content you’re seeing was made by a ChatGPT user. It may be unverified or contain potentially unsafe content that doesn’t reflect the views of OpenAI."}),children:l.formatMessage(h.madeWithCanvas)})}),e.jsx("div",{children:a?e.jsx("a",{className:"underline",href:Ie,target:"_blank",rel:"noreferrer",onClick:()=>{y.count(M.CANVAS,"shared.click_report_button",[{key:"type",value:o.type},{key:"authed",value:"false"}]),A.logEvent(R.canvasSharedUnauthedReportButtonClicked,{textdocId:o.sharedTextdocId,textdocType:o.type})},children:l.formatMessage(h.report)}):e.jsx("button",{className:"underline",onClick:()=>{y.count(M.CANVAS,"shared.click_report_button",[{key:"type",value:o.type},{key:"authed",value:"true"}]),A.logEvent(R.canvasSharedAuthedReportButtonClicked,{textdocId:o.sharedTextdocId,textdocType:o.type}),c(!0)},children:l.formatMessage(h.report)})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[x&&e.jsx(te,{textdocType:o.type,isCodePreviewable:n,onClick:()=>{y.count(M.CANVAS,"shared.click_run_button",[{key:"type",value:o.type},{key:"authed",value:a?"false":"true"}]),A.logEvent(R.canvasSharedRunButtonClicked,{textdocId:o.sharedTextdocId,textdocType:o.type}),I()},isCodeRunning:r}),a?e.jsxs(b,{onClick:()=>{u({authType:"login",callbackUrl:m}),p()},icon:j,children:[e.jsx("span",{className:"hidden sm:inline",children:l.formatMessage(h.editWithChatGPT)}),e.jsx("span",{className:"inline sm:hidden",children:l.formatMessage(h.edit)})]}):e.jsxs(b,{as:"link",to:m,openNewTab:!0,icon:j,onClick:p,children:[e.jsx("span",{className:"hidden sm:inline",children:l.formatMessage(h.editWithChatGPT)}),e.jsx("span",{className:"inline sm:hidden",children:l.formatMessage(h.edit)})]})]})]})})},h=L({report:{id:"DHsq+d",defaultMessage:"Report"},editWithChatGPT:{id:"DrcR8S",defaultMessage:"Edit with ChatGPT"},edit:{id:"PpEliN",defaultMessage:"Edit"},madeWithCanvas:{id:"h8SGou",defaultMessage:"You’re viewing user-generated content that may be unverified or unsafe."}});var s=(t=>(t.NUDITY_SEXUAL_ADULT="nudity_sexual/adult",t.NUDITY_SEXUAL_ABUSE="nudity_sexual/abuse",t.NUDITY_SEXUAL_NCII="nudity_sexual/ncii",t.CHILD_EXPLOITATION="child_exploitation",t.VIOLENCE_SELF_HARM="violence/self_harm",t.VIOLENCE_EATING="violence/eating_disorder",t.VIOLENCE_TERRORISM="violence/terrorism",t.VIOLENCE_THREATS="violence/threats",t.VIOLENCE_GENDER="violence/gender",t.VIOLENCE_WEAPONS="violence/weapons",t.DECEPTIVE_IMPERSONATION="deceptive/impersonation",t.DECEPTIVE_SCAM="deceptive/scam",t.DECEPTIVE_MISINFO="deceptive/misinfo",t.HATE_SPEECH="hate/speech",t.HATE_BULLYING="hate/bullying",t.HATE_UNWANTED="hate/unwanted",t.HATE_PRIVACY="hate/privacy",t.HATE_SPAM="hate/spam",t.OTHER_ILLEGAL="other/illegal",t.OTHER_UNSAFE="other/unsafe",t.OTHER_ANIMAL="other/animal",t.OTHER_HEALTH="other/health",t.OTHER_POLITICAL="other/political",t.OTHER_DONT_LIKE="other/dont_like",t.IP_COPYRIGHT="ip/copyright",t.IP_TRADEMARK="ip/trademark",t.MODERATION_INCORRECT="moderation/incorrect",t))(s||{});const be=U("Circle12Filled","12",["M6 1a5 5 0 1 0 0 10A5 5 0 0 0 6 1Z"]),Ne=U("Circle12Regular","12",["M6 2a4 4 0 1 0 0 8 4 4 0 0 0 0-8ZM1 6a5 5 0 1 1 10 0A5 5 0 0 1 1 6Z"]),Ae=[{id:"NUDITY_SEXUAL",label:"Nudity & Sexual Content"},{id:"CHILD_EXPLOITATION",label:"Child Exploitation"},{id:"VIOLENCE_SELF_HARM",label:"Violence & Self-Harm"},{id:"DECEPTIVE_SCAM",label:"Deceptive Behavior & Scams"},{id:"HATE_SPAM",label:"Hate, Harrassment & Spam"},{id:"OTHER_ILLEGAL",label:"Other inappropriate or illegal content"},{id:"IP",label:"Intellectual Property"}],Re={NUDITY_SEXUAL:[{id:s.NUDITY_SEXUAL_ADULT,label:"Adult nudity & sexual content"},{id:s.NUDITY_SEXUAL_ABUSE,label:"Sexual exploitation & abuse"},{id:s.NUDITY_SEXUAL_NCII,label:"Non-consensual or deepfake intimate imagery"}],CHILD_EXPLOITATION:[{id:s.CHILD_EXPLOITATION,label:"Child exploitation"}],VIOLENCE_SELF_HARM:[{id:s.VIOLENCE_SELF_HARM,label:"Suicide & self-harm"},{id:s.VIOLENCE_EATING,label:"Eating disorders"},{id:s.VIOLENCE_TERRORISM,label:"Terrorism"},{id:s.VIOLENCE_THREATS,label:"Threats or incitement to violence"},{id:s.VIOLENCE_GENDER,label:"Gender-based violence"},{id:s.VIOLENCE_WEAPONS,label:"Weapons creation & procurement"}],DECEPTIVE_SCAM:[{id:s.DECEPTIVE_IMPERSONATION,label:"Impersonation"},{id:s.DECEPTIVE_SCAM,label:"Fraud or scam"},{id:s.DECEPTIVE_MISINFO,label:"Misleading information"}],HATE_SPAM:[{id:s.HATE_SPEECH,label:"Hate speech or symbols"},{id:s.HATE_BULLYING,label:"Bullying & harassment"},{id:s.HATE_UNWANTED,label:"Unwanted depiction of real person"},{id:s.HATE_PRIVACY,label:"Privacy violating activities"},{id:s.HATE_SPAM,label:"Spam"}],OTHER_ILLEGAL:[{id:s.OTHER_UNSAFE,label:"Unsafe or prohibited products or activities"},{id:s.OTHER_ANIMAL,label:"Animal harm or welfare issues"},{id:s.OTHER_HEALTH,label:"Risks to public health and safety"},{id:s.OTHER_POLITICAL,label:"Deceptive content of political candidate or election equipment"},{id:s.OTHER_ILLEGAL,label:"Other inappropriate or illegal content"},{id:s.OTHER_DONT_LIKE,label:"I just don’t like it"}],IP:[{id:s.IP_COPYRIGHT,label:"Copyright",url:"https://openai.com/form/copyright-disputes"},{id:s.IP_TRADEMARK,label:"Trademark",url:"https://openai.com/form/trademark-disputes"}]},O={[s.IP_COPYRIGHT]:"https://openai.com/form/copyright-disputes",[s.IP_TRADEMARK]:"https://openai.com/form/trademark-disputes"},g=L({dialogTitle:{id:"reportModal.dialogTitle",defaultMessage:"Why are you reporting this content?"},cancelButton:{id:"reportModal.cancelButton",defaultMessage:"Cancel"},reportButton:{id:"reportModal.reportButton",defaultMessage:"Report"},submittingButton:{id:"reportModal.submittingButton",defaultMessage:"Submitting..."},submitSuccessMessage:{id:"reportModal.submitSuccessMessage",defaultMessage:"Your report has been submitted."},errorMessage:{id:"reportModal.errorMessage",defaultMessage:"An error occurred while submitting your report."},formRedirectMessage:{id:"reportModal.formRedirectMessage",defaultMessage:"Please use this form to report unlawful use of your work:"}}),D=({sharedTextdoc:t,isOpen:o,dismissModal:I})=>{const r=P(),[E,c]=d.useState(null),[a,u]=d.useState(null),[n,x]=d.useState(null),[l,m]=d.useState("toplevel"),p=()=>{u(null),x(null),m("toplevel"),c(null),I()},{mutate:_,isPending:C}=K({mutationFn:async i=>{if(n)return W.safePost("/textdoc/shared/{shared_textdoc_id}/report",{parameters:{path:{shared_textdoc_id:i.sharedTextdocId}},requestBody:{takedown_type:n}})},onSuccess:()=>{m("success")},onError:()=>{c(r.formatMessage(g.errorMessage))}}),f=n&&O[n];return e.jsxs(X,{isOpen:o,showCloseButton:!0,onClose:p,title:r.formatMessage(g.dialogTitle),type:"success",primaryButton:l==="takedown"&&!f&&e.jsx(b,{onClick:()=>_(t),disabled:!n,loading:C,children:C?r.formatMessage(g.submittingButton):r.formatMessage(g.reportButton)}),secondaryButton:l==="takedown"&&!f&&e.jsx(b,{onClick:p,color:"secondary",children:r.formatMessage(g.cancelButton)}),children:[l==="success"&&e.jsx("div",{children:r.formatMessage(g.submitSuccessMessage)}),l==="toplevel"&&e.jsx("div",{className:"flex flex-col gap-4",children:Ae.map(i=>e.jsx("div",{className:"flex items-start gap-2",children:e.jsx(b,{className:"text-sm",color:"secondary",onClick:()=>{u(i.id),m("takedown")},children:i.label})},i.id))}),l==="takedown"&&a&&e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"flex flex-grow flex-col gap-4",children:Re[a].map(i=>{const N=i.id===n;return e.jsx(ae,{className:"flex flex-grow items-center justify-start gap-2",value:i.id,children:e.jsx(ce,{htmlFor:i.id,className:"items-center text-left text-sm",onClick:()=>{x(i.id)},children:e.jsxs("div",{className:"flex items-center gap-2 text-token-text-primary",children:[N&&e.jsx(be,{className:"icon-md"}),!N&&e.jsx(Ne,{className:"icon-md text-token-text-tertiary"}),i.label]})},i.id)},i.id)})}),f&&e.jsxs("div",{className:"justify-between p-4 text-sm",children:[e.jsx("p",{children:r.formatMessage(g.formRedirectMessage)}),e.jsx("a",{href:O[n],target:"_blank",rel:"noreferrer",className:"text-primary underline",children:O[n]})]}),E&&e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-xs text-red-500",children:E})})]})]})};function ye({sharedTextdoc:t,disableNetworkRequests:o,disablePermissions:I,unsafeAllowAllNetworkRequests:r,showHeader:E=!0}){const c=T(t.type)&&w(t.type,t.content),[a,u]=d.useState(c),[n,x]=d.useState(!1),l=P(),m=d.useRef(null),p=d.useRef(null),_=d.useRef(null),[C,f]=d.useState(!1),i=c&&a,N=()=>{a?(_.current?.stopCode(),u(!1)):(u(!0),_.current?.runCode(t.type,t.content).finally(()=>u(!1)))},{type:k,content:B}=t,v=ne(()=>{c&&(u(!0),_.current?.runCode(k,B))});return d.useEffect(()=>{v()},[v]),t.type===re.DOCUMENT?e.jsxs("div",{className:"flex h-full w-full flex-col items-center overflow-y-auto",children:[e.jsx("div",{className:"flex w-full flex-grow justify-center bg-token-main-surface-secondary",children:e.jsxs("div",{className:"w-full max-w-[1000px] bg-token-main-surface-primary",style:{boxShadow:"0px 4px 32px 0px rgba(0, 0, 0, 0.08)"},children:[E&&e.jsx(H,{areButtonsFullWidth:!1,sharedTextdoc:t,onClickCodePreview:()=>{},isCodeRunning:a,showRunCodeButton:!1,setIsReportModalOpen:f}),e.jsx("div",{className:"px-12 pt-12",children:e.jsx(J,{value:t.content,onChange:()=>{},isDisabled:!0,showChanges:!1,comments:[],diff:null,safeUrls:[],contentRefereces:[],wrapperClassName:"pb-12"})})]})}),e.jsx(D,{sharedTextdoc:t,isOpen:C,dismissModal:()=>f(!1)})]}):T(t.type)?e.jsxs("div",{className:"justify-top flex h-full w-full flex-col justify-between overflow-auto",children:[e.jsxs("div",{className:"flex flex-grow flex-col justify-start overflow-auto",children:[E&&e.jsx(H,{areButtonsFullWidth:!0,sharedTextdoc:t,onClickCodePreview:N,isCodeRunning:a,showRunCodeButton:!c,setIsReportModalOpen:f}),e.jsx("div",{className:i?"flex-grow":void 0,children:e.jsx(Z,{isShare:!0,ref:p,enableTransition:c,visuallyHidden:!i,title:t.title,disableNetworkRequests:o,disablePermissions:I,unsafeAllowAllNetworkRequests:r})}),!i&&e.jsx("div",{children:e.jsx(z,{id:"published-codemirror",value:t.content,hoveredCommentId:null,focusedCommentId:null,language:se(t.type),readonlyReason:oe({isReadonly:!0,isRequestActive:!1,isTextdocStreaming:!1,isHistoricalVersion:!1,isShowingChanges:!1,isReadonlyFromQueryParam:!1}),editorRef:m,isPreview:!0})})]}),e.jsx("div",{className:!a&&c?"hidden":"",children:e.jsx(Q,{ref:_,isOpen:n,onOpenChange:x,sandboxRef:p,textdocId:"publishedCanvasTextdoc",textdocContent:t.content,textdocTitle:t.title,isTextdocAttachedPending:!1,highlightLine:V=>m.current?.highlightLine(V),isRequestActive:!1,createTextdocTurn:async()=>{}})}),e.jsx(D,{sharedTextdoc:t,isOpen:C,dismissModal:()=>f(!1)})]}):e.jsx("p",{children:l.formatMessage(Me.unsupportedTextdocType)})}const Me=L({unsupportedTextdocType:{id:"4hdXQX",defaultMessage:"Content type is not supported"}}),$e=q(function(){const o=$();return e.jsx(ye,{sharedTextdoc:o})}),Ze=({data:t})=>{const o=t;return o?[{title:"ChatGPT - "+o.title},{property:"og:site_name",content:"ChatGPT"},{property:"og:title",content:o.title},{property:"og:image",content:S.src},{property:"twitter:card",content:"summary_large_image"}]:[{title:"ChatGPT"},{name:"robots",content:"noindex,nofollow"},{property:"og:image",content:S.src},{property:"og:site_name",content:"ChatGPT"}]};export{$e as default,Ze as meta};
//# sourceMappingURL=iqb5rv0zjdx1dp2d.js.map
