import{j as e,M as g,r as h,a5 as _}from"./fs6h2trisr1juto6.js";import{ca as x,bG as N,cb as k,bH as S,cc as C,cd as E,ce as L,cf as T}from"./d7a6rc8fexfzu7dt.js";import{aF as F,a3 as j,d as w,cH as z,P as y,a as v,c1 as M,eW as A,F as G,eX as H}from"./njq6ygky3ttysgdk.js";import{f as P}from"./cil0xbyqug23yo24.js";function X({clientThreadId:t,turnIndex:a,messageId:n,scrollToHeader:i=x.Citations,shouldAnimateScroll:l,isInSidebar:r=!1}){const{value:o}=F("756982148"),[d,c]=W(t,n),s=j(t,p=>M(A(G.getNode(p,n).message))),u={clientThreadId:t,messageId:n,turnIndex:a},f=P(s,p=>p.entries).toSorted((p,R)=>(R?.pub_date??0)-(p?.pub_date??0));return e.jsxs("div",{className:w("flex w-full flex-col bg-token-main-surface-primary",r?"mt-[calc(var(--threadFlyOut-leading-height,57px)*-1)]":"mt-0",r?"":"border-t border-token-border-light"),children:[o&&c&&c.length>0&&e.jsx(m,{title:e.jsx(g,{id:"fYO0jL",defaultMessage:"Links"}),items:c,analyticsMetadata:{...u,linkType:"links"},scrollToHeader:i===x.Links,shouldAnimateScroll:l,messageId:n}),e.jsx(m,{title:e.jsx(g,{id:"dlVlo6",defaultMessage:"Citations"}),items:d,analyticsMetadata:{...u,linkType:"citation"},scrollToHeader:i===x.Citations,shouldAnimateScroll:l,messageId:n}),e.jsx(m,{title:e.jsx(g,{id:"Gz+4tE",defaultMessage:"More"}),items:f,analyticsMetadata:{...u,linkType:"search_result"},messageId:n,scrollToHeader:i===x.SearchResults,shouldAnimateScroll:l})]},`${a}-${t}`)}function m({title:t,items:a,analyticsMetadata:n,scrollToHeader:i,messageId:l,shouldAnimateScroll:r}){const o=h.useRef(null);return h.useEffect(()=>{o.current&&i&&setTimeout(()=>{o.current&&o.current.scrollIntoView({behavior:r?"smooth":"instant"})},300)},[i,r]),!a||a.length===0?null:e.jsxs("div",{ref:o,children:[e.jsx(b,{className:"sticky top-0 z-[1] flex h-[calc(var(--screen-thread-header-min-height,60px)+1px)] items-center border-b border-token-border-sharp bg-token-main-surface-primary px-6 pb-4 pt-4 text-sm font-medium text-token-text-primary",children:t}),e.jsx("div",{className:"flex flex-col px-3 py-2",children:a.map((d,c)=>e.jsx(b,{index:c,children:e.jsx($,{item:d,analyticsMetadata:{...n,groupIndex:c},messageId:l},c)},`${t}-${c}`))})]})}function b({children:t,index:a=0,className:n=""}){return e.jsx(_.div,{className:n,initial:{opacity:0},animate:{opacity:1},transition:{delay:(a+1)*.03+.2},children:t})}function $({item:t,analyticsMetadata:a,messageId:n}){const i=t.attribution??N(t.url,"short"),l=o=>"ref_id"in o&&"content_type"in o;return e.jsxs(O,{analyticsMetadata:a,href:t.url,target:"_blank",rel:"noopener",className:"flex flex-col gap-0.5 rounded-xl px-3 py-2.5 hover:bg-token-main-surface-secondary",onMouseEnter:()=>{k.setHighlightBySource(n,t)},onMouseLeave:()=>{k.clearHighlights()},children:[e.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[e.jsx(S,{url:t.url,className:"icon-sm rounded-full bg-token-main-surface-primary object-cover",size:32,minSize:20,fallback:e.jsx(C,{className:"icon-sm text-token-text-quaternary"})}),i,l(t)&&e.jsx(E,{searchResult:t,className:"inline h-4 w-4 text-token-text-tertiary"})]}),e.jsx("div",{className:"line-clamp-2 text-sm font-semibold",children:t.title}),(t.pub_date??t.snippet)&&e.jsxs("div",{className:"line-clamp-2 text-sm font-normal leading-snug text-token-text-secondary",children:[t.pub_date&&e.jsx(L,{date:t.pub_date}),t.pub_date&&t.snippet&&" â€” ",t.snippet]})]})}const O=h.forwardRef(function(a,n){const{analyticsMetadata:i,...l}=a,{groupIndex:r,linkType:o,...d}=i,c={...z(d),url:a.href,section_index:(r+1).toString(),link_type:"text",section:o,section_location:"sidebar"};return h.useEffect(()=>{y.logEventWithStatsig(v.linkAction,"link_action",{...c,action:"show"})},[]),e.jsx("a",{ref:n,...l,onClick:s=>{a.onClick?.(s),s.stopPropagation(),y.logEventWithStatsig(v.linkAction,"link_action",{...c,action:"click"})}})}),W=(t,a)=>j(t,n=>{const i=M(H(n?.tree.getNodeByIdOrMessageId(a).message)),l=T(i);let r=[];const o=i.filter(s=>s.type==="navigation");o.length>0&&(r=o.flatMap(s=>s.domains.flatMap(u=>[{title:u.title,snippet:u.domain,url:u.url},...u.sub_domains.map(f=>({title:f.title,snippet:u.domain,url:f.url}))])));const d=i.filter(s=>s.type==="tldr").filter(s=>!s.used_as_navigation);d.length>0&&d.forEach(s=>{r.push({title:s.display_title,url:s.url})});const c=r.length>0?r:void 0;return[l,c]});export{b as AnimatedContainer,X as SearchSources};
//# sourceMappingURL=hksusirp7740x6ob.js.map
