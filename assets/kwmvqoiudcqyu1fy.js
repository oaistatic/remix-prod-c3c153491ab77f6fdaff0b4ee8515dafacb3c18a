const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/c3j4246zja1wwlho.js","assets/fs6h2trisr1juto6.js","assets/d7a6rc8fexfzu7dt.js","assets/njq6ygky3ttysgdk.js","assets/root-cl538jor.css","assets/conversation-small-m9kq0y4e.css","assets/iqgzc83lat3a2v2u.js","assets/onz2j6p63wwkp7m6.js","assets/e3bj8idaaiic9lls.js","assets/hi1g9go8t53qsjy9.js","assets/jhoqcbqmt1jrh2rh.js","assets/gfo75oujoeaedm5y.js","assets/uer8rn1m59xnpdct.js","assets/grccwfqkma7x81tr.js","assets/o77dlyy0lhhjntje.js","assets/BusinessesMap-kyjj79rm.css"])))=>i.map(i=>d[i]);
import{g as Ie,r as f,j as o,e as P,M as N,R as Fe,a9 as Gs,u as Vt,b as Vs,d as ue,a5 as oe,n as pe,a7 as tt}from"./fs6h2trisr1juto6.js";import{uc as Zs,ku as Xs,q5 as Ks,ud as Js,el as Zt,em as Xt,pU as Qs,N as Re,fH as J,c0 as en,ue as tn,G as Kt,cl as ge,ck as sn,uf as nn,ug as Ky,uh as Jy,ui as Qy,bG as Oe,cn as F,uj as eb,uk as tb,ul as st,u4 as on,um as q,u3 as an,un as rn,uo as cn,jj as He,fm as ln,up as dn,pM as un,bH as se,uq as hn,g7 as mn,hm as fn,gP as Jt,gQ as Qt,P as Ue,ur as pn,nV as nt,hq as gn,hp as xn,ga as T,us as yn,gA as bn,cq as wn,lb as vn,lc as $n,ut as jn}from"./d7a6rc8fexfzu7dt.js";import{o as Nn,d as _,P as I,a as v,bw as _n,by as z,D as ze,c0 as kn,I as Be,e6 as Cn,fl as Sn,eQ as Mn,am as Pn,al as Dn,R as Tn,cL as he,bT as me,l as An,V as En,cD as Ln,Z as In,cx as Fn,hM as es,bK as Rn,cC as On,cJ as Hn,a3 as Un,ht as zn,bH as ts,c5 as ss,dC as Bn,c3 as Wn,bQ as Yn,bR as qn,aF as ns,bM as os}from"./njq6ygky3ttysgdk.js";import{u as Gn}from"./lj0prj6na7gf1jpf.js";import{a as as}from"./no4qfibpbbv193yj.js";import{u as Vn}from"./csg4i0wk6hi0jvkd.js";import{s as B,j as ot,k as at,r as Zn,b as Xn,c as Kn,d as Jn,e as Qn,l as rs,m as eo,g as to,n as so,C as no,o as oo}from"./iqgzc83lat3a2v2u.js";import{u as ao,b as ro,i as io}from"./grccwfqkma7x81tr.js";import{a as co}from"./onz2j6p63wwkp7m6.js";import{r as is,a as lo,b as uo,d as ho}from"./hrv8rdfcz5e1nz3e.js";import{g as mo,d as fo,b as cs,I as po}from"./e3bj8idaaiic9lls.js";import{w as We,s as Ye,f as ls,a as go,h as ds,p as rt,n as it,d as xo,M as qe,r as yo}from"./ng8iludi91g2bys9.js";import{b as Z}from"./gfo75oujoeaedm5y.js";import{v as ct,C as bo,A as wo,a as vo,L as $o,B as jo,p as No,b as _o,n as ko,P as Co,o as So,q as Mo,e as Po}from"./f25rpzpqicaw21n1.js";import{N as lt}from"./jcoe6v231ph25bfi.js";import{c as us}from"./b8zlh79k7yo0fu3r.js";import{u as Do,r as To}from"./hi1g9go8t53qsjy9.js";const Ao=us("ChevronDownFilled","1em",["M15.8 7.73c.28.3.27.78-.03 1.06l-5.25 5a.75.75 0 0 1-1.04 0l-5.25-5a.75.75 0 0 1 1.04-1.08L10 12.2l4.73-4.5a.75.75 0 0 1 1.06.02Z"]),Eo=us("ChevronLeftFilled","1em",["M12.27 15.8a.75.75 0 0 1-1.06-.03l-5-5.25a.75.75 0 0 1 0-1.04l5-5.25a.75.75 0 1 1 1.08 1.04L7.8 10l4.5 4.73c.29.3.28.78-.02 1.06Z"]);var Lo=Zs,Io=Nn;function Fo(e){return e&&e.length?Lo(e,Io):0}var Ro=Fo;const Oo=Ie(Ro),ae=({durationMs:e,delayMs:t})=>({"--duration":`${e}ms`,"--delay":`${t}ms`}),ke=e=>!!(f.isValidElement(e)&&Xs(["strong","em"],e.type)&&Ks(e.props)&&typeof e.props.children=="string"),hs=(e,t)=>typeof e=="string"?t(e).length:ke(e)?t(e.props.children).length:1,ms=(e,t)=>Array.isArray(e)?Oo(e.map(s=>ms(s,t))):hs(e,t),fs=({tag:e,children:t,start:s,end:n,isMarker:a,isLastNode:r,isOnlyNode:i})=>{const c=r==="",l=i==="",{enqueueElement:u,dequeueElement:d,updateElementBounds:h,reportComplete:x,reportProgress:m,reportReady:g,isDisabled:p,animationTiming:y,lastPositionCompletedAnimating:w,activeStartPos:j,segmentText:C}=f.useContext(Js),b=f.useRef(null),$=()=>{b.current!=null&&window.clearTimeout(b.current),b.current=window.setTimeout(()=>{Zt.count(Xt.DEFAULT,"text_entry_animation.timeout"),g(e,s??0),b.current=null},2e3)},k=!p;f.useEffect(()=>{if(!(s==null||!k))return u(e,s),()=>d(e,s)},[e,s,k]);const S=(!c||a)&&s!=null&&n!=null,A=f.useRef(!1),fe=a?1:ms(t,C),U=fe-1;f.useEffect(()=>{s!=null&&n!=null&&h(e,s,n,fe),S&&A.current!==!1&&A.current>=U?g(e,s):S&&$()},[S,U,fe,s,n]);const Ys=G=>{s!=null&&U>0&&m(e,s,G/U),A.current=G,S&&G>=U?g(e,s):S&&$()},qs=G=>{a||(S&&G===U||l&&n!=null)&&x(n)},Qe=j!=null&&s!=null&&n!=null&&j>s&&w!=null&&w>=n,et=j!=null&&s!=null&&s<=j;return{segmentText:C,onReady:Ys,onComplete:qs,isDisabled:p||Qe,shouldHide:!p&&!et&&!Qe,shouldAnimate:et,animationTiming:y}},Ho="_fadeIn_4f9by_7",Uo="_fade_4f9by_7",zo="_marker_4f9by_21",Bo="_hidden_4f9by_21",Wo="_animate_4f9by_25",W={fadeIn:Ho,fade:Uo,marker:zo,hidden:Bo,animate:Wo},dt=({children:e,"data-start":t=null,"data-end":s=null,"data-is-last-node":n,"data-is-only-node":a,tag:r})=>{const{animationTiming:i,shouldAnimate:c,shouldHide:l,isDisabled:u,onComplete:d,onReady:h}=fs({isMarker:!0,tag:r,children:e,start:t,end:s,isLastNode:n,isOnlyNode:a});return u||l?o.jsx(r,{"data-start":t,"data-end":s,className:_(l&&"hidden"),children:e}):o.jsx(r,{"data-start":t,"data-end":s,className:_(W.marker,c?W.animate:W.hidden),onAnimationStart:()=>h(0),onAnimationEnd:()=>d(0),style:ae(i),children:e})},Q=({animationTiming:e,children:t,delayMs:s,index:n,segmentText:a,onReady:r,onComplete:i})=>{const c=a(t);return o.jsx(o.Fragment,{children:c.map((l,u)=>{const d=s+u*e.delayMs;return o.jsx("span",{className:W.fadeIn,style:ae({delayMs:d,durationMs:e.durationMs}),onAnimationStart:()=>r(n+u),onAnimationEnd:()=>i(n+u),children:l},u)})})},R=({tag:e,children:t,"data-start":s=null,"data-end":n=null,"data-is-last-node":a,"data-is-only-node":r})=>{const{animationTiming:i,shouldHide:c,isDisabled:l,segmentText:u,onComplete:d,onReady:h}=fs({isMarker:!1,tag:e,children:t,start:s,end:n,isLastNode:a,isOnlyNode:r});if(l||c)return o.jsx(e,{"data-start":s,"data-end":n,className:_(c&&"!hidden"),children:t});let x=0,m=0;return o.jsx(e,{"data-start":s,"data-end":n,children:typeof t=="string"?o.jsx(Q,{index:0,segmentText:u,delayMs:x,animationTiming:i,onReady:h,onComplete:d,children:t},0):ke(t)?f.cloneElement(t,t.props,o.jsx(Q,{index:0,delayMs:x,animationTiming:i,segmentText:u,onReady:h,onComplete:d,children:t.props.children},0)):Array.isArray(t)?t.map(g=>{const p=x,y=m,w=hs(g,u);return m+=w,x+=w*i.delayMs,typeof g=="string"?o.jsx(Q,{index:y,delayMs:p,animationTiming:i,segmentText:u,onReady:h,onComplete:d,children:g},y):ke(g)?f.cloneElement(g,g.props,o.jsx(Q,{index:y,delayMs:p,animationTiming:i,segmentText:u,onReady:h,onComplete:d,children:g.props.children},y)):o.jsx("span",{className:W.fadeIn,style:ae({delayMs:x,durationMs:i.durationMs}),onAnimationStart:()=>h(y),onAnimationEnd:()=>d(y),children:g},y)}):o.jsx("span",{className:W.fadeIn,style:ae({delayMs:x,durationMs:i.durationMs}),onAnimationStart:()=>h(0),onAnimationEnd:()=>d(0),children:t},0)})},Yo={p:e=>o.jsx(R,{tag:"p",...e}),h1:e=>o.jsx(R,{tag:"h1",...e}),h2:e=>o.jsx(R,{tag:"h2",...e}),h3:e=>o.jsx(R,{tag:"h3",...e}),h4:e=>o.jsx(R,{tag:"h4",...e}),h5:e=>o.jsx(R,{tag:"h5",...e}),h6:e=>o.jsx(R,{tag:"h6",...e}),li:e=>o.jsx(dt,{tag:"li",isListItem:!0,...e}),hr:e=>o.jsx(dt,{tag:"hr",...e})};function qo({closeModal:e,url:t,onAction:s,onActionAborted:n}){const a=f.useRef(!1),r=P();f.useEffect(()=>{I.logEventWithStatsig(v.safeLinkWarningModalShown,"chatgpt_safe_link_warning_modal_shown")},[]);const i=async()=>{a.current=!0;try{await navigator.clipboard.writeText(t),I.logEventWithStatsig(v.safeLinkWarningModalCopyClicked,"chatgpt_safe_link_warning_modal_copy_clicked")}catch(x){ze.addError(x)}s?.("copy"),e()},c=()=>{a.current=!0,I.logEventWithStatsig(v.safeLinkWarningModalOpenClicked,"chatgpt_safe_link_warning_modal_open_clicked");const x=window.open(t,"_blank","noopener,noreferrer");x&&(x.opener=null),s?.("open"),e()},l=()=>{a.current||(I.logEventWithStatsig(v.safeLinkWarningModalCanceled,"chatgpt_safe_link_warning_modal_canceled"),n?.()),a.current=!1,e()};let u="",d=t,h="";try{d=new URL(t).hostname;const m=t.indexOf(d);m!==-1&&(u=t.substring(0,m),h=t.substring(m+d.length))}catch{}return o.jsxs(_n,{isOpen:!0,onClose:l,showCloseButton:!0,type:"warning",title:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Qs,{"aria-label":"",className:"icon-md"}),r.formatMessage({id:"dTWOFM",defaultMessage:"This link may be unsafe"})]}),primaryButton:o.jsx(z.Button,{title:r.formatMessage({id:"YGLt71",defaultMessage:"Copy link"}),color:"secondary",onClick:i}),secondaryButton:o.jsx(z.Button,{title:r.formatMessage({id:"gMzmDW",defaultMessage:"Open link"}),color:"primary",onClick:c}),children:[o.jsx("p",{className:"mb-4 text-pretty text-sm",children:o.jsx(N,{id:"sNrbkg",defaultMessage:"This link isn’t verified and may share data from your conversation with a third‑party site. Continue only if you trust it."})}),o.jsxs("div",{className:"break-all rounded-md bg-token-main-surface-tertiary p-2 font-mono text-sm",children:[o.jsx("span",{className:"text-token-text-secondary",children:u}),o.jsx("span",{className:"font-bold text-token-text-primary",children:d}),o.jsx("span",{className:"text-token-text-secondary",children:h})]})]})}const ut={},ht={},mt={};function ft(e,t){return`${e}::${t}`}function Ge({node:e,onClick:t,children:s,clientThreadId:n,messageId:a,href:r,disableSafeURLs:i,...c}){let l=t;const u=e?.properties?.href,d=Re(),h=f.useContext(J),x=kn(),m=Be(n),g=as(m,r,h?.useSafeUrls&&!i),{config:p}=Cn("1146308370"),y=g===void 0&&p.get("enable-copy-and-open",!1);return a!=null&&typeof u=="string"&&u.includes("/bing/redirect")&&(ut[a]||(I.logEvent(v.browsingShowBingLink,{id:a,content:u}),ut[a]=!0),l=w=>{ht[a]||(I.logEvent(v.browsingClickBingLink,{id:a,content:u}),ht[a]=!0),t?.(w)}),l=w=>{const j=""+u;if(a&&!mt[ft(a,j)]){const C=g||y?v.urlClickedAllowed:v.urlClickedBlocked;I.logEvent(C,{id:a,content:j}),mt[ft(a,j)]=!0}t?.(w),y&&r&&Sn(x,({closeModal:C})=>o.jsx(qo,{url:r,closeModal:C}))},o.jsx(o.Fragment,{children:o.jsx("a",{onClick:l,...c,className:_(c.className,y&&"cursor-pointer"),href:g,rel:d?"noopener noreferrer":"noopener",children:s})})}const ps="w";function Go({messageId:e,clientThreadId:t,text:s,children:n,...a}){const r=Gn(t),i=Vn(),c=en(t),u=`${window.location.origin}?q=${encodeURIComponent(s)}`,d=f.useCallback(async h=>{h.preventDefault(),Zt.count(Xt.DEFAULT,"instant_follow_up_anchor_clicked"),I.logEventWithStatsig(v.chatgptInstantFollowUpAnchorClicked,"chatgpt_instant_follow_up_anchor_clicked",{clientThreadId:t,messageId:e}),r({sourceEvent:h,promptMessage:Mn(s),completionMetadata:{systemHints:[...i],conversationMode:c??{kind:Pn.PrimaryAssistant}}})},[t,c,e,i,r,s]);return o.jsx(Ge,{...a,href:u,disableSafeURLs:!0,clientThreadId:t,messageId:e,className:"cursor-pointer",onClick:d,children:n})}const Vo=Fe.memo(Go);function Zo({messageId:e,clientThreadId:t,text:s,children:n,...a}){const{value:r}=Dn("374768818");return r?o.jsx(Vo,{messageId:e,clientThreadId:t,text:s,children:n,...a}):o.jsx(Ge,{messageId:e,clientThreadId:t,children:n,...a})}const Xo=Fe.memo(Zo);function Ko(e){const t=e.split(`
`),s=Jo(t.pop()).trimEnd();return s&&t.push(s),t.join(`
`)}function Jo(e){if(!e||/^\s*-\s*([*_]+)?\s*$/.test(e))return"";let t=[],s="",n=0;for(;n<e.length;){if(e[n]==="*"&&e[n+1]==="*"){s+="**",t.length&&t[t.length-1]==="**"?t.pop():t.push("**"),n+=2;continue}if(e[n]==="*"||e[n]==="_"){s+=e[n];const r=e[n];t.length&&t[t.length-1]===r?t.pop():t.push(r),n++;continue}s+=e[n],n++}if(t.length===0)return e;let a=s.trimEnd();for(;t.length;){const r=t.pop();if(r==null)break;a.endsWith(r)?a=a.slice(0,-r.length).trimEnd():a+=r}return a}const Qo=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],pt={}.hasOwnProperty;function ea(e,t){const s=t||{};function n(a,...r){let i=n.invalid;const c=n.handlers;if(a&&pt.call(a,e)){const l=String(a[e]);i=pt.call(c,l)?c[l]:n.unknown}if(i)return i.call(this,a,...r)}return n.handlers=s.handlers||{},n.invalid=s.invalid,n.unknown=s.unknown,n}const ta=/^>|^->|<!--|-->|--!>|<!-$/g,sa=[">"],na=["<",">"];function oa(e,t,s,n){return n.settings.bogusComments?"<?"+B(e.value,Object.assign({},n.settings.characterReferences,{subset:sa}))+">":"<!--"+e.value.replace(ta,a)+"-->";function a(r){return B(r,Object.assign({},n.settings.characterReferences,{subset:na}))}}function aa(e,t,s,n){return"<!"+(n.settings.upperDoctype?"DOCTYPE":"doctype")+(n.settings.tightDoctype?"":" ")+"html>"}const M=xs(1),gs=xs(-1),ra=[];function xs(e){return t;function t(s,n,a){const r=s?s.children:ra;let i=(n||0)+e,c=r[i];if(!a)for(;c&&We(c);)i+=e,c=r[i];return c}}const ia={}.hasOwnProperty;function ys(e){return t;function t(s,n,a){return ia.call(e,s.tagName)&&e[s.tagName](s,n,a)}}const Ve=ys({body:la,caption:xe,colgroup:xe,dd:ma,dt:ha,head:xe,html:ca,li:ua,optgroup:fa,option:pa,p:da,rp:gt,rt:gt,tbody:xa,td:xt,tfoot:ya,th:xt,thead:ga,tr:ba});function xe(e,t,s){const n=M(s,t,!0);return!n||n.type!=="comment"&&!(n.type==="text"&&We(n.value.charAt(0)))}function ca(e,t,s){const n=M(s,t);return!n||n.type!=="comment"}function la(e,t,s){const n=M(s,t);return!n||n.type!=="comment"}function da(e,t,s){const n=M(s,t);return n?n.type==="element"&&(n.tagName==="address"||n.tagName==="article"||n.tagName==="aside"||n.tagName==="blockquote"||n.tagName==="details"||n.tagName==="div"||n.tagName==="dl"||n.tagName==="fieldset"||n.tagName==="figcaption"||n.tagName==="figure"||n.tagName==="footer"||n.tagName==="form"||n.tagName==="h1"||n.tagName==="h2"||n.tagName==="h3"||n.tagName==="h4"||n.tagName==="h5"||n.tagName==="h6"||n.tagName==="header"||n.tagName==="hgroup"||n.tagName==="hr"||n.tagName==="main"||n.tagName==="menu"||n.tagName==="nav"||n.tagName==="ol"||n.tagName==="p"||n.tagName==="pre"||n.tagName==="section"||n.tagName==="table"||n.tagName==="ul"):!s||!(s.type==="element"&&(s.tagName==="a"||s.tagName==="audio"||s.tagName==="del"||s.tagName==="ins"||s.tagName==="map"||s.tagName==="noscript"||s.tagName==="video"))}function ua(e,t,s){const n=M(s,t);return!n||n.type==="element"&&n.tagName==="li"}function ha(e,t,s){const n=M(s,t);return!!(n&&n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd"))}function ma(e,t,s){const n=M(s,t);return!n||n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd")}function gt(e,t,s){const n=M(s,t);return!n||n.type==="element"&&(n.tagName==="rp"||n.tagName==="rt")}function fa(e,t,s){const n=M(s,t);return!n||n.type==="element"&&n.tagName==="optgroup"}function pa(e,t,s){const n=M(s,t);return!n||n.type==="element"&&(n.tagName==="option"||n.tagName==="optgroup")}function ga(e,t,s){const n=M(s,t);return!!(n&&n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot"))}function xa(e,t,s){const n=M(s,t);return!n||n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot")}function ya(e,t,s){return!M(s,t)}function ba(e,t,s){const n=M(s,t);return!n||n.type==="element"&&n.tagName==="tr"}function xt(e,t,s){const n=M(s,t);return!n||n.type==="element"&&(n.tagName==="td"||n.tagName==="th")}const wa=ys({body:ja,colgroup:Na,head:$a,html:va,tbody:_a});function va(e){const t=M(e,-1);return!t||t.type!=="comment"}function $a(e){const t=new Set;for(const n of e.children)if(n.type==="element"&&(n.tagName==="base"||n.tagName==="title")){if(t.has(n.tagName))return!1;t.add(n.tagName)}const s=e.children[0];return!s||s.type==="element"}function ja(e){const t=M(e,-1,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&We(t.value.charAt(0)))&&!(t.type==="element"&&(t.tagName==="meta"||t.tagName==="link"||t.tagName==="script"||t.tagName==="style"||t.tagName==="template"))}function Na(e,t,s){const n=gs(s,t),a=M(e,-1,!0);return s&&n&&n.type==="element"&&n.tagName==="colgroup"&&Ve(n,s.children.indexOf(n),s)?!1:!!(a&&a.type==="element"&&a.tagName==="col")}function _a(e,t,s){const n=gs(s,t),a=M(e,-1);return s&&n&&n.type==="element"&&(n.tagName==="thead"||n.tagName==="tbody")&&Ve(n,s.children.indexOf(n),s)?!1:!!(a&&a.type==="element"&&a.tagName==="tr")}const ee={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function ka(e,t,s,n){const a=n.schema,r=a.space==="svg"?!1:n.settings.omitOptionalTags;let i=a.space==="svg"?n.settings.closeEmptyElements:n.settings.voids.includes(e.tagName.toLowerCase());const c=[];let l;a.space==="html"&&e.tagName==="svg"&&(n.schema=Ye);const u=Ca(n,e.properties),d=n.all(a.space==="html"&&e.tagName==="template"?e.content:e);return n.schema=a,d&&(i=!1),(u||!r||!wa(e,t,s))&&(c.push("<",e.tagName,u?" "+u:""),i&&(a.space==="svg"||n.settings.closeSelfClosing)&&(l=u.charAt(u.length-1),(!n.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&c.push(" "),c.push("/")),c.push(">")),c.push(d),!i&&(!r||!Ve(e,t,s))&&c.push("</"+e.tagName+">"),c.join("")}function Ca(e,t){const s=[];let n=-1,a;if(t){for(a in t)if(t[a]!==null&&t[a]!==void 0){const r=Sa(e,a,t[a]);r&&s.push(r)}}for(;++n<s.length;){const r=e.settings.tightAttributes?s[n].charAt(s[n].length-1):void 0;n!==s.length-1&&r!=='"'&&r!=="'"&&(s[n]+=" ")}return s.join("")}function Sa(e,t,s){const n=ls(e.schema,t),a=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,r=e.settings.allowDangerousCharacters?0:1;let i=e.quote,c;if(n.overloadedBoolean&&(s===n.attribute||s==="")?s=!0:(n.boolean||n.overloadedBoolean&&typeof s!="string")&&(s=!!s),s==null||s===!1||typeof s=="number"&&Number.isNaN(s))return"";const l=B(n.attribute,Object.assign({},e.settings.characterReferences,{subset:ee.name[a][r]}));return s===!0||(s=Array.isArray(s)?(n.commaSeparated?go:tn)(s,{padLeft:!e.settings.tightCommaSeparatedLists}):String(s),e.settings.collapseEmptyAttributes&&!s)?l:(e.settings.preferUnquoted&&(c=B(s,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:ee.unquoted[a][r]}))),c!==s&&(e.settings.quoteSmart&&ot(s,i)>ot(s,e.alternative)&&(i=e.alternative),c=i+B(s,Object.assign({},e.settings.characterReferences,{subset:(i==="'"?ee.single:ee.double)[a][r],attribute:!0}))+i),l+(c&&"="+c))}const Ma=["<","&"];function bs(e,t,s,n){return s&&s.type==="element"&&(s.tagName==="script"||s.tagName==="style")?e.value:B(e.value,Object.assign({},n.settings.characterReferences,{subset:Ma}))}function Pa(e,t,s,n){return n.settings.allowDangerousHtml?e.value:bs(e,t,s,n)}function Da(e,t,s,n){return n.all(e)}const Ta=ea("type",{invalid:Aa,unknown:Ea,handlers:{comment:oa,doctype:aa,element:ka,raw:Pa,root:Da,text:bs}});function Aa(e){throw new Error("Expected node, not `"+e+"`")}function Ea(e){const t=e;throw new Error("Cannot compile unknown node `"+t.type+"`")}const La={},Ia={},Fa=[];function Ra(e,t){const s=t||La,n=s.quote||'"',a=n==='"'?"'":'"';if(n!=='"'&&n!=="'")throw new Error("Invalid quote `"+n+"`, expected `'` or `\"`");return{one:Oa,all:Ha,settings:{omitOptionalTags:s.omitOptionalTags||!1,allowParseErrors:s.allowParseErrors||!1,allowDangerousCharacters:s.allowDangerousCharacters||!1,quoteSmart:s.quoteSmart||!1,preferUnquoted:s.preferUnquoted||!1,tightAttributes:s.tightAttributes||!1,upperDoctype:s.upperDoctype||!1,tightDoctype:s.tightDoctype||!1,bogusComments:s.bogusComments||!1,tightCommaSeparatedLists:s.tightCommaSeparatedLists||!1,tightSelfClosing:s.tightSelfClosing||!1,collapseEmptyAttributes:s.collapseEmptyAttributes||!1,allowDangerousHtml:s.allowDangerousHtml||!1,voids:s.voids||Qo,characterReferences:s.characterReferences||Ia,closeSelfClosing:s.closeSelfClosing||!1,closeEmptyElements:s.closeEmptyElements||!1},schema:s.space==="svg"?Ye:ds,quote:n,alternative:a}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function Oa(e,t,s){return Ta(e,t,s,this)}function Ha(e){const t=[],s=e&&e.children||Fa;let n=-1;for(;++n<s.length;)t[n]=this.one(s[n],n,e);return t.join("")}function Ua(e){const t=this,s={...t.data("settings"),...e};t.compiler=n;function n(a){return Ra(a,s)}}function za(e){return e&&/^turn[0-9]+ifs[0-9]+$/.test(e)}const Ba=4;function Wa({metadata:e,analyticsMetadata:t,trackContentReferenceEvent:s}){const n=Kt(),a=e.images,r=a.some(d=>d.is_proxied_image)?[]:a.map(d=>d.thumbnail_url),i=Gs({queries:r.map(d=>mo(d)),combine:d=>{const h=new Set;return d.forEach((x,m)=>{x.isSuccess&&h.add(r[m])}),h}}),c=a.filter(d=>i.has(d.thumbnail_url)),l=e.images.length;if(a.some(d=>d.is_proxied_image)){const d=a.find(x=>x.is_proxied_image),h=_("mb-7 mt-1 min-w-32 max-w-[22%] rounded-xl border-[0.5px] border-token-border-light",d?.float_top?"relative block":"float-image z-10 float-right clear-right ml-7 overflow-hidden");return o.jsx(ye,{image:d,imageSource:ge.Turn,analyticsMetadata:t,trackContentReferenceEvent:s,className:h},d?.content_url)}if(l===0)return null;if(l===1){const d=e.images[0];return o.jsx(ye,{image:d,imageSource:ge.Turn,analyticsMetadata:t,trackContentReferenceEvent:s,className:"float-image z-10 float-right clear-right mb-7 ml-7 mt-1 min-w-32 max-w-[22%] overflow-hidden rounded-xl border-[0.5px] border-token-border-light"},d.content_url)}const u=n?c.length:Math.min(c.length,Ba);return o.jsx("div",{className:"no-scrollbar mb-6 mt-1 flex min-h-36 flex-nowrap gap-0.5 overflow-auto sm:gap-1 sm:overflow-hidden xl:min-h-44",children:c.slice(0,u).map((d,h)=>o.jsx("div",{className:_("relative aspect-square max-h-48 w-32 shrink-0 overflow-hidden rounded-xl border-[0.5px] border-token-border-light sm:w-[calc((100%-1rem)/4)] md:shrink",h===0&&"rounded-l-xl",h===u-1&&"rounded-r-xl"),children:o.jsx(ye,{image:d,imageSource:ge.Turn,analyticsMetadata:t,trackContentReferenceEvent:s,className:"h-full w-full"},d.thumbnail_url)},d.thumbnail_url))})}const ws=f.memo(Wa,(e,t)=>e.numImageResults===t.numImageResults&&e.analyticsMetadata===t.analyticsMetadata&&e.trackContentReferenceEvent===t.trackContentReferenceEvent&&e.metadata.images.length===t.metadata.images.length&&e.metadata.images.every((s,n)=>s.content_url===t.metadata.images[n].content_url));function ye({image:e,imageSource:t,className:s,imgClassName:n,style:a,analyticsMetadata:r,trackContentReferenceEvent:i}){const c=fo(e),{isSuccess:l}=cs(c),u=f.useMemo(()=>({image_url:c,title:e?.title}),[c,e?.title]);f.useEffect(()=>{e&&l&&i(v.searchContentReferenceShown,"search_content_reference_shown","image_v2",u)},[i,e,l,u]);const d=sn.useStore(),h=e?.is_proxied_image?e.url:c;return o.jsx("button",{className:_("relative aspect-square overflow-hidden",s),style:a,onClick:()=>{i(v.searchContentReferenceClicked,"search_content_reference_clicked","image_v2",u),d.setCurrentImage(e?{image:e,source:t,analyticsMetadata:r}:void 0)},children:e?e?.is_proxied_image||l?o.jsx(po,{children:o.jsx("img",{src:h,alt:e?.content_url,className:_("m-0 h-full w-full bg-token-main-surface-tertiary object-cover",n)})}):o.jsx("div",{className:"h-full w-full animate-pulse bg-token-main-surface-tertiary"}):o.jsx("div",{className:"aspect-square h-full w-full animate-pulse bg-token-main-surface-tertiary"})})}async function Ya({conversationId:e,messageId:t,assetPointerLinks:s}){return await Tn.safePost("/conversation/get_images_for_message",{requestBody:{conversation_id:e,message_id:t,asset_pointer_links:s}})}function qa({reference:e,conversationId:t,messageId:s}){return Vt({queryKey:["inline-images",e,t,s],queryFn:async()=>{if(!e.asset_pointer_links||e.asset_pointer_links.length===0||!t)return{images:[],formats:[]};const n=await Ya({conversationId:t,messageId:s,assetPointerLinks:e.asset_pointer_links});for(let a=0;a<n.images.length;a++){const r=n.images[a],c=`image/${n.formats[a]}`,l=Ga(r,c);n.images[a]=l}return n}})}function Ga(e,t="",s=512){const n=atob(e),a=[];for(let i=0;i<n.length;i+=s){const c=n.slice(i,i+s),l=new Array(c.length);for(let d=0;d<c.length;d++)l[d]=c.charCodeAt(d);const u=new Uint8Array(l);a.push(u)}const r=new Blob(a,{type:t});return URL.createObjectURL(r)}const Va=200;function Za({reference:e,clientThreadId:t,message:s,trackContentReferenceEvent:n}){const a=Be(t),{data:r,isLoading:i,isError:c,error:l}=qa({reference:e,conversationId:a,messageId:s.id}),u=f.useRef([]);if(f.useEffect(()=>()=>{u.current.forEach(x=>{URL.revokeObjectURL(x)}),u.current=[]},[]),i||c||l||!r||!("images"in r))return null;u.current=[];const d=(x,m)=>{const g=new RegExp(m+"\\s*([^\\n]+)","m"),p=x.match(g);return p&&p[1]?p[1].trim().length:0};let h=-1;return s.content.content_type==="text"&&(h=d(s.content.parts.join(""),e.matched_text)),o.jsx(o.Fragment,{children:r?.images.map((x,m)=>{const g={matched_text:e.matched_text,start_idx:e.start_idx,end_idx:e.end_idx,safe_urls:e.safe_urls,alt:e.alt,prompt_text:e.prompt_text,type:"image_v2",images:[{url:x,content_url:e.clicked_from_url??"",thumbnail_url:x,title:e.clicked_from_title??"",content_size:{width:141,height:143},thumbnail_size:{width:141,height:143},is_proxied_image:!0,float_top:h<Va||h===-1}]};return o.jsx(ws,{metadata:g,analyticsMetadata:{clientThreadId:t,messageId:s.id},numImageResults:1,trackContentReferenceEvent:n},`image-carousel-inline-${m}`)})})}const yt=/[#.]/g;function Xa(e,t){const s=e||"",n={};let a=0,r,i;for(;a<s.length;){yt.lastIndex=a;const c=yt.exec(s),l=s.slice(a,c?c.index:s.length);l&&(r?r==="#"?n.id=l:Array.isArray(n.className)?n.className.push(l):n.className=[l]:i=l,a+=l.length),c&&(r=c[0],a++)}return{type:"element",tagName:i||t||"div",properties:n,children:[]}}const Ka=new Set(["button","menu","reset","submit"]),Ce={}.hasOwnProperty;function vs(e,t,s){const n=s&&tr(s);function a(r,i,...c){let l=-1,u;if(r==null){u={type:"root",children:[]};const d=i;c.unshift(d)}else if(u=Xa(r,t),u.tagName=u.tagName.toLowerCase(),n&&Ce.call(n,u.tagName)&&(u.tagName=n[u.tagName]),Ja(i,u.tagName)){let d;for(d in i)Ce.call(i,d)&&Qa(e,u.properties,d,i[d])}else c.unshift(i);for(;++l<c.length;)Se(u.children,c[l]);return u.type==="element"&&u.tagName==="template"&&(u.content={type:"root",children:u.children},u.children=[]),u}return a}function Ja(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Ka.has(e.type.toLowerCase()):!("value"in e)}function Qa(e,t,s,n){const a=ls(e,s);let r=-1,i;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;i=n}else typeof n=="boolean"?i=n:typeof n=="string"?a.spaceSeparated?i=st(n):a.commaSeparated?i=rt(n):a.commaOrSpaceSeparated?i=st(rt(n).join(" ")):i=bt(a,a.property,n):Array.isArray(n)?i=n.concat():i=a.property==="style"?er(n):String(n);if(Array.isArray(i)){const c=[];for(;++r<i.length;){const l=bt(a,a.property,i[r]);c[r]=l}i=c}if(a.property==="className"&&Array.isArray(t.className)){const c=i;i=t.className.concat(c)}t[a.property]=i}}function Se(e,t){let s=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++s<t.length;)Se(e,t[s]);else if(typeof t=="object"&&"type"in t)t.type==="root"?Se(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function bt(e,t,s){if(typeof s=="string"){if(e.number&&s&&!Number.isNaN(Number(s)))return Number(s);if((e.boolean||e.overloadedBoolean)&&(s===""||it(s)===it(t)))return!0}return s}function er(e){const t=[];let s;for(s in e)Ce.call(e,s)&&t.push([s,e[s]].join(": "));return t.join("; ")}function tr(e){const t={};let s=-1;for(;++s<e.length;)t[e[s].toLowerCase()]=e[s];return t}const sr=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],nr=vs(ds,"div"),or=vs(Ye,"g",sr),be={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ar(e,t){return $s(e,{})||{type:"root",children:[]}}function $s(e,t){const s=rr(e,t);return s&&t.afterTransform&&t.afterTransform(e,s),s}function rr(e,t){switch(e.nodeType){case 1:return dr(e,t);case 3:return cr(e);case 8:return lr(e);case 9:return wt(e,t);case 10:return ir();case 11:return wt(e,t);default:return}}function wt(e,t){return{type:"root",children:js(e,t)}}function ir(){return{type:"doctype"}}function cr(e){return{type:"text",value:e.nodeValue||""}}function lr(e){return{type:"comment",value:e.nodeValue||""}}function dr(e,t){const s=e.namespaceURI,n=s===be.svg?or:nr,a=s===be.html?e.tagName.toLowerCase():e.tagName,r=s===be.html&&a==="template"?e.content:e,i=e.getAttributeNames(),c={};let l=-1;for(;++l<i.length;)c[i[l]]=e.getAttribute(i[l])||"";return n(a,c,js(r,t))}function js(e,t){const s=e.childNodes,n=[];let a=-1;for(;++a<s.length;){const r=$s(s[a],t);r!==void 0&&n.push(r)}return n}new DOMParser;function ur(e,t){const s=hr(e);return ar(s)}function hr(e){const t=document.createElement("template");return t.innerHTML=e,t.content}const vt=function(e,t,s){const n=on(s);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(n(e.children[t],t,e))return e.children[t]},$t=/\n/g,jt=/[\t ]+/g,Me=q("br"),Nt=q(wr),mr=q("p"),_t=q("tr"),fr=q(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",br,vr]),Ns=q(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function pr(e,t){const s=t||{},n="children"in e?e.children:[],a=Ns(e),r=Cs(e,{whitespace:s.whitespace||"normal",breakBefore:!1,breakAfter:!1}),i=[];(e.type==="text"||e.type==="comment")&&i.push(...ks(e,{whitespace:r,breakBefore:!0,breakAfter:!0}));let c=-1;for(;++c<n.length;)i.push(..._s(n[c],e,{whitespace:r,breakBefore:c?void 0:a,breakAfter:c<n.length-1?Me(n[c+1]):a}));const l=[];let u;for(c=-1;++c<i.length;){const d=i[c];typeof d=="number"?u!==void 0&&d>u&&(u=d):d&&(u!==void 0&&u>-1&&l.push(`
`.repeat(u)||" "),u=-1,l.push(d))}return l.join("")}function _s(e,t,s){return e.type==="element"?gr(e,t,s):e.type==="text"?s.whitespace==="normal"?ks(e,s):xr(e):[]}function gr(e,t,s){const n=Cs(e,s),a=e.children||[];let r=-1,i=[];if(fr(e))return i;let c,l;for(Me(e)||_t(e)&&vt(t,e,_t)?l=`
`:mr(e)?(c=2,l=2):Ns(e)&&(c=1,l=1);++r<a.length;)i=i.concat(_s(a[r],e,{whitespace:n,breakBefore:r?void 0:c,breakAfter:r<a.length-1?Me(a[r+1]):l}));return Nt(e)&&vt(t,e,Nt)&&i.push("	"),c&&i.unshift(c),l&&i.push(l),i}function ks(e,t){const s=String(e.value),n=[],a=[];let r=0;for(;r<=s.length;){$t.lastIndex=r;const l=$t.exec(s),u=l&&"index"in l?l.index:s.length;n.push(yr(s.slice(r,u).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),r===0?t.breakBefore:!0,u===s.length?t.breakAfter:!0)),r=u+1}let i=-1,c;for(;++i<n.length;)n[i].charCodeAt(n[i].length-1)===8203||i<n.length-1&&n[i+1].charCodeAt(0)===8203?(a.push(n[i]),c=void 0):n[i]?(typeof c=="number"&&a.push(c),a.push(n[i]),c=0):(i===0||i===n.length-1)&&a.push(0);return a}function xr(e){return[String(e.value)]}function yr(e,t,s){const n=[];let a=0,r;for(;a<e.length;){jt.lastIndex=a;const i=jt.exec(e);r=i?i.index:e.length,!a&&!r&&i&&!t&&n.push(""),a!==r&&n.push(e.slice(a,r)),a=i?r+i[0].length:r}return a!==r&&!s&&n.push(""),n.join(" ")}function Cs(e,t){if(e.type==="element"){const s=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return s.wrap?"pre-wrap":"pre";case"td":case"th":return s.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function br(e){return!!(e.properties||{}).hidden}function wr(e){return e.tagName==="td"||e.tagName==="th"}function vr(e){return e.tagName==="dialog"&&!(e.properties||{}).open}const $r={},jr=[];function Ss(e){const t=e||$r;return function(s,n){an(s,"element",function(a,r){const i=Array.isArray(a.properties.className)?a.properties.className:jr,c=i.includes("language-math"),l=i.includes("math-display"),u=i.includes("math-inline");let d=l;if(!c&&!l&&!u)return;let h=r[r.length-1],x=a;if(a.tagName==="code"&&c&&h&&h.type==="element"&&h.tagName==="pre"&&(x=h,h=r[r.length-2],d=!0),!h)return;const m=pr(x,{whitespace:"pre"});let g;try{g=at.renderToString(m,{...t,displayMode:d,throwOnError:!0})}catch(y){const w=y,j=w.name.toLowerCase();n.message("Could not render math with KaTeX",{ancestors:[...r,a],cause:w,place:a.position,ruleId:j,source:"rehype-katex"}),j==="parseerror"?g=at.renderToString(m,{...t,displayMode:d,strict:"ignore",throwOnError:!1}):g=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(t.errorColor||"#cc0000"),title:String(y)},children:[{type:"text",value:m}]}]}typeof g=="string"&&(g=ur(g).children);const p=h.children.indexOf(x);return h.children.splice(p,1,...g),rn})}}const re="sandbox:";function Nr({messageId:e,clientThreadId:t,href:s,...n}){const a=Re(),r=Vs(),[i,c]=f.useState(!1),l=s.substring(re.length),u=An(t),d=P(),h=En(),x=f.useCallback(y=>{const w=document.createElement("a");w.href=y,w.click(),c(!1)},[]),m=f.useCallback(y=>{c(!1),h.danger(y)},[h]),g=kr(i&&!a,e,u,l,m,x).data,p=f.useCallback(async y=>{t!==void 0&&(y.preventDefault(),(g===void 0||g?.status!=="success")&&r.invalidateQueries({queryKey:Ms(e,l)}),g?.status==="success"&&g?.download_url?x(g.download_url):c(!0))},[t,g,r,e,l,x]);return o.jsx(me,{closeOnOutsideClick:!1,delayDuration:0,label:o.jsxs("span",{className:"flex items-center gap-1",children:[i?d.formatMessage(Pe.startingDownload):d.formatMessage(Pe.downloadFile),i&&o.jsx(Ln,{})]}),side:"top",sideOffset:4,children:o.jsx("a",{...n,className:"cursor-pointer",onClick:y=>!i&&p(y)})})}function _r(e){return o.jsx(me,{closeOnOutsideClick:!1,delayDuration:0,label:o.jsx("span",{className:"flex items-center gap-1",children:o.jsx(N,{...Pe.downloadUnavailable})}),side:"top",sideOffset:4,children:o.jsx("span",{...e,className:"font-semibold text-token-text-secondary underline"})})}function kr(e,t,s,n,a,r){const i=cn();return Vt({queryKey:Ms(t,n),queryFn:()=>In.downloadFromInterpreter(t,s,n).then(c=>(c?.status==="success"&&r(c.download_url),c)).catch(c=>{let l=i("default_download_link_error",{fileName:n});throw c instanceof Fn&&c.code!=null&&(l=i(c.code)),a?.(l),c}),enabled:!!(e&&t&&s&&n)})}function Ms(e,t){return["downloadSandboxLink",e,t]}const Pe=ue({downloadFile:{id:"SandboxDownload.downloadFile",defaultMessage:"Download file"},startingDownload:{id:"SandboxDownload.startingDownload",defaultMessage:"Starting download"},downloadUnavailable:{id:"SandboxDownload.downloadUnavailable",defaultMessage:"File download not supported in a shared chat"}}),Ps=e=>e.startsWith(re)||e===ps?e:xo(e);function Cr(){return e=>{He(e,"list",t=>{for(const s of t.children)s.spread=!0})}}const Ze=[Zn,Cr,[Xn,{singleDollarTextMath:!1}],Kn,Jn,Qn,Sr];function Sr(){return e=>{He(e,"textDirective",t=>{t.name!==es&&(t.type="text",t.value=`:${t.name}`)})}}function Mr(){return e=>{const t=e.position?.end.offset;He(e,"element",(s,n)=>{const{position:a}=s;if(!a)return;const{start:r,end:i}=a,c=r.offset,l=i.offset;s.properties??={},c!=null&&(s.properties["data-start"]=c),l!=null&&(s.properties["data-end"]=l,t===l&&(s.properties["data-is-last-node"]=""),n===e.children.length-1&&(s.properties["data-is-only-node"]=""))})}}const Ds=[Ss,Mr,[ln,{target:"_new",rel:"noopener noreferrer"}],is],Pr=[[Ss,{output:"mathml"}],is];function Dr({attribution:e}){const t=f.useContext(J),s=dn(t?.message.id,e.attributable_index),n=nn();return o.jsx(Ar,{isHighlighted:s,isDebugMode:n&&!1,content:e.alt??"",attributableIndex:e.attributable_index,attributions:void 0,attributionsDebug:void 0})}function Tr({content:e,isHighlighted:t,isDebugMode:s,attributableIndex:n,attributions:a,attributionsDebug:r}){const i=o.jsx(qe,{rehypePlugins:Ds,remarkPlugins:Ze,urlTransform:Ps,components:{p:({children:c})=>o.jsx(o.Fragment,{children:c})},children:e});return o.jsx(Er,{isHighlighted:t,children:i})}const Ar=Fe.memo(Tr);function Er({isHighlighted:e,className:t,children:s}){return o.jsx("span",{className:_("relative","-mx-px my-[-0.2rem] rounded px-px py-[0.2rem]",e&&"bg-[#FCECC1] dark:bg-[#64572A]",t),children:s})}function kt(e,t){try{return BigInt(e).toLocaleString(t)}catch{const s=Number(e);return e.includes("e")||e.includes("E")?s.toExponential():s.toLocaleString(t,{maximumFractionDigits:6})}}function Lr({data:e,trackContentReferenceEvent:t}){f.useEffect(()=>{t(v.searchContentReferenceShown,"search_content_reference_shown",e.type)},[t,e.type]);const s=Rn().locale;return e.expression&&e.result!=null?o.jsxs("div",{className:"no-scrollbar overflow-auto sm:overflow-hidden",children:[o.jsxs("div",{className:"pb-1 text-lg font-semibold",children:[e.prefix&&o.jsx("span",{children:e.prefix}),o.jsx("span",{children:kt(e.result,s)}),e.suffix&&o.jsx("span",{children:e.suffix})]}),o.jsx("div",{className:"tracking-wide text-token-text-primary",children:`${e.expression}=${kt(e.result,s)}`})]}):null}function Ir(e){return o.jsxs(On,{width:"19",height:"15",viewBox:"0 0 19 15",fill:"none",...e,children:[o.jsx("path",{d:"M4.42 0.75H2.8625H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V11.65C0.75 12.7546 1.64543 13.65 2.75 13.65H2.8625C2.8625 13.65 2.8625 13.65 2.8625 13.65C2.8625 13.65 4.00751 13.65 4.42 13.65M13.98 13.65H15.5375H15.65C16.7546 13.65 17.65 12.7546 17.65 11.65V2.75C17.65 1.64543 16.7546 0.75 15.65 0.75H15.5375H13.98",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M5.55283 4.21963C5.25993 3.92674 4.78506 3.92674 4.49217 4.21963C4.19927 4.51252 4.19927 4.9874 4.49217 5.28029L6.36184 7.14996L4.49217 9.01963C4.19927 9.31252 4.19927 9.7874 4.49217 10.0803C4.78506 10.3732 5.25993 10.3732 5.55283 10.0803L7.95283 7.68029C8.24572 7.3874 8.24572 6.91252 7.95283 6.61963L5.55283 4.21963Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M9.77753 8.75003C9.3357 8.75003 8.97753 9.10821 8.97753 9.55003C8.97753 9.99186 9.3357 10.35 9.77753 10.35H13.2775C13.7194 10.35 14.0775 9.99186 14.0775 9.55003C14.0775 9.10821 13.7194 8.75003 13.2775 8.75003H9.77753Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.1"})]})}function Fr({codeMessage:e,codeExecutionOutputMessage:t,onDismiss:s,FormattedText:n}){const a=P();return o.jsx(z.Root,{isOpen:!0,onClose:s,children:o.jsx(z.Overlay,{children:o.jsxs(z.Content,{className:"flex max-h-[75vh] max-w-lg flex-col overflow-hidden",children:[o.jsx(z.Header,{title:a.formatMessage(Rr.title),type:"success",closeButton:o.jsx(Hn,{onClick:s})}),o.jsxs("div",{className:"flex flex-1 flex-col overflow-auto",children:[o.jsx("div",{children:o.jsx(lo,{FormattedText:n,message:e,codeRendererClassName:"border-none rounded-none",removeTopBorderRadius:!0})}),o.jsx("div",{children:o.jsx(uo,{message:t})})]})]})})})}const Rr=ue({title:{id:"CodeExecutionOutputModal.title",defaultMessage:"Analysis"}});function Or({displayInfo:e,FormattedText:t,trackContentReferenceEvent:s}){const[n,a]=f.useState(!1),r=P();return f.useEffect(()=>{s(v.searchContentReferenceShown,"search_content_reference_shown",e.type)},[s,e.type]),o.jsxs(o.Fragment,{children:[o.jsx(me,{label:r.formatMessage(Hr.viewAnalysis),side:"top",sideOffset:4,withArrow:!1,delayDuration:150,children:o.jsx("button",{onClick:()=>a(!0),children:o.jsx(Ir,{className:"-mt-0.5 ml-0.5 inline-block text-token-link hover:text-token-link-hover"})})}),n&&o.jsx(Fr,{FormattedText:t,codeMessage:e.codeMessage,codeExecutionOutputMessage:e.codeExecutionOutputMessage,onDismiss:()=>a(!1)})]})}const Hr=ue({viewAnalysis:{id:"viewAnalysis",defaultMessage:"View analysis"}}),X=4,Ur=3,zr=({metadata:e,trackContentReferenceEvent:t})=>{const[s,n]=f.useState(!1),a=f.useRef(!1);f.useEffect(()=>{t(v.searchContentReferenceShown,"search_content_reference_shown","cot_sources")},[t]);const r=f.useMemo(()=>{const g=new Set;return e.consecutive_items.filter(p=>g.has(p.attribution)?!1:(g.add(p.attribution),!0))},[e.consecutive_items]),i=r.length>X+1,c=s?r.length:i?X:X+1,l=r.slice(0,c),u=r.slice(c,c+Ur);un(()=>{a.current=!0});const d=a.current?-X:0,x={hidden:{opacity:0,x:a.current?-5:0},visible:{opacity:1,x:0}},m=g=>({delay:(g+d)*(a.current?.03:.1),duration:.2});return o.jsxs("div",{children:[o.jsx("div",{children:e.text}),o.jsxs("div",{className:"flex flex-wrap items-center gap-1 pt-1",children:[l.map((g,p)=>o.jsx(oe.div,{variants:x,initial:"hidden",animate:"visible",transition:m(p+1),className:"flex items-center",children:o.jsx(Br,{item:g,trackContentReferenceEvent:t})},g.url)),i&&o.jsx(oe.div,{variants:x,initial:"hidden",animate:"visible",transition:m(l.length+1),className:"flex items-center",children:s?o.jsx(Yr,{onClick:()=>n(!1)}):o.jsx(Wr,{moreSources:u,total:e.consecutive_items.length,onClick:()=>n(!0)})},`more-${s}`)]})]})},Ts=({url:e,style:t,withBorder:s=!1})=>o.jsx("div",{style:t,className:_("box-content h-[16px] w-[16px] shrink-0 overflow-hidden rounded-full bg-token-main-surface-primary",s&&"border border-token-main-surface-secondary group-hover:border-token-text-primary dark:group-hover:border-token-text-primary"),children:o.jsx(se,{url:e,size:32,minSize:16,className:"m-0"})}),Br=({item:e,trackContentReferenceEvent:t})=>{const s=f.useMemo(()=>({url:e.url,title:e.title}),[e.url,e.title]);f.useEffect(()=>{t(v.linkAction,"link_action","webpage",{...s,action:"show"})},[t,s]);const n=()=>{t(v.linkAction,"link_action","webpage",{...s,action:"click"})};return o.jsxs(Xe,{componentType:F,href:e.url,className:"pl-1",onClick:n,children:[o.jsx(Ts,{url:e.url}),o.jsx("span",{className:"uppercase",children:e.attribution??Oe(e.url)})]})},Wr=({moreSources:e,total:t,onClick:s})=>o.jsxs(Xe,{className:"pl-1",onClick:s,children:[e.map((n,a)=>o.jsx(Ts,{url:n.url,withBorder:!0,style:{marginLeft:a>0?"-8px":0}},a)),o.jsx(N,{id:"5ob5C8",defaultMessage:"{count} more",values:{count:t-X}})]}),Yr=({onClick:e})=>o.jsx(Xe,{onClick:e,children:o.jsx(N,{id:"19fGXl",defaultMessage:"Show less"})}),Xe=({className:e,componentType:t="button",children:s,...n})=>o.jsx(t,{className:_(rs,"!ml-0 gap-1 !text-token-text-secondary font-normal group hover:bg-token-text-primary hover:!text-token-main-surface-secondary dark:hover:bg-token-text-primary",e),...n,children:s}),Ct=24;function qr(e){const t=e.split(".");let s=e;return t.length>1&&t.slice(0,-1).some(n=>n.length>0)&&(s=t.slice(0,-1).join(".")),s.length>Ct&&(s=s.slice(0,Ct-1)+"…"),s}function Gr({fileRef:e,index:t,trackContentReferenceEvent:s}){const n=hn(),a=f.useContext(J),r=f.useMemo(()=>({source:e.source,index:t}),[e.source,t]);f.useEffect(()=>{s(v.fileCitationShown,"file_citation_shown","file",r)},[]);const i=f.useCallback(d=>{d?s(v.fileCitationHovered,"file_citation_hovered","file",r):s(v.fileCitationUnhovered,"file_citation_unhovered","file",r)},[r,s]),c=f.useCallback(()=>{s(v.fileCitationClicked,"file_citation_clicked","file",r)},[r,s]),l=f.useCallback(()=>n(e.id,e.name),[n,e.id,e.name]),u=Un(a?.analyticsMetadata.clientThreadId??zn,d=>d?.mode);return mn(u)?u.gizmo_id&&fn(u.gizmo_id)?o.jsx("span",{className:_(rs,"select-none"),title:e.name,children:qr(e.name)}):null:o.jsx(Vr,{fileItem:e,onClickDownloadFile:l,trackTooltipOpenChange:i,trackCloudLinkClick:c})}function Vr({fileItem:e,className:t,trackTooltipOpenChange:s,trackCloudLinkClick:n,onClickDownloadFile:a}){const r=Jt(e.cloud_doc_url??""),i=r?.type??o.jsx(N,{id:"bqY3sN",defaultMessage:"File"}),c=r?.Icon??Qt,l=o.jsx(c,{alt:i,className:"h-[16px] w-[16px] object-contain"}),u=_("ms-1 flex h-[22px] items-center rounded-xl px-2 relative bottom-[-2px]","bg-[#f4f4f4] !text-token-text-secondary hover:bg-token-text-primary hover:!text-token-main-surface-secondary dark:bg-token-main-surface-secondary dark:hover:bg-token-text-primary",t),d=o.jsx("span",{className:"relative inline-flex items-center",children:e.cloud_doc_url?o.jsx(F,{href:e.cloud_doc_url,className:u,onClick:n,children:l}):o.jsx("button",{onClick:a,className:u,children:l})});return o.jsx(Zr,{fileItem:e,icon:o.jsx(c,{alt:i,className:"mr-2 h-[16px] w-[16px] object-contain"}),contentType:i,trackTooltipOpenChange:s,children:d})}function Zr({fileItem:e,children:t,className:s,icon:n,contentType:a,trackTooltipOpenChange:r}){const i=he();return o.jsx(me,{label:o.jsxs(F,{href:e.cloud_doc_url,className:_("flex max-w-80 flex-col gap-1 text-left text-xs font-normal text-token-text-primary !no-underline",s),children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"h-4 w-4 shrink-0 overflow-hidden rounded-full",children:n}),o.jsx("div",{className:"truncate text-token-text-primary",children:a})]}),o.jsx("div",{className:"line-clamp-2 text-sm font-medium",children:e.name}),e.text&&o.jsx("div",{className:"line-clamp-2 text-sm text-token-text-secondary",children:e.text})]}),onOpenChange:r,side:"bottom",sideOffset:10,withArrow:!1,delayDuration:150,theme:i?"default":"white",align:"start",customPaddingClassName:"p-3",cornerRadius:"xl",customBorderClassName:"border-token-border-light border",wide:!0,children:t})}function Xr(e,t){return new Date(e).toLocaleDateString(t,{month:"long",day:"numeric",year:"numeric"})}function Kr({metadata:e,trackContentReferenceEvent:t}){return e.items.length===0?null:o.jsx("div",{className:"mt-6 flex flex-col gap-3",children:e.items.map((s,n)=>o.jsx(Jr,{item:s,index:n,trackContentReferenceEvent:t},n))})}function Jr({item:e,index:t,trackContentReferenceEvent:s}){const n=P(),a={title:e.name,description:e.description,index:t};f.useEffect(()=>{s(v.contextualAnswersContentReferenceShown,"contextual_answers_content_reference_shown","file_navlist",a)},[]);const r=Jt(e.cloud_doc_url??""),i=r?.Icon??Qt,c=r?.type??o.jsx(N,{id:"bqY3sN",defaultMessage:"File"});return o.jsxs(F,{className:"group/nav-list relative flex items-center gap-6 py-1.5",href:e.cloud_doc_url??"/",onClick:()=>{s(v.contextualAnswersContentReferenceClicked,"contextual_answers_content_reference_clicked","file_navlist",a)},children:[o.jsx("div",{className:"absolute bottom-0 left-0 top-0 w-[3px] rounded-b-lg rounded-t-lg bg-black/10"}),o.jsxs("div",{className:"ml-4 flex grow flex-col gap-1 overflow-hidden text-ellipsis",children:[o.jsxs("div",{className:"not-prose flex items-center gap-1.5 text-sm text-token-text-primary",children:[o.jsx(i,{className:"icon-md object-contain"}),o.jsx("div",{className:"line-clamp-2 text-sm text-token-text-primary",children:c})]}),o.jsx("div",{className:"line-clamp-2 font-semibold text-token-link decoration-token-link group-hover/nav-list:underline",children:e.name}),o.jsx("div",{className:"line-clamp-2 text-sm font-normal leading-snug text-token-text-primary",children:e.description}),e.last_modified_time&&o.jsx("div",{className:"text-sm text-token-text-secondary",children:Xr(e.last_modified_time,n.locale)})]})]})}var De={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;function s(n){if(n===null||n===!0||n===!1)return NaN;var a=Number(n);return isNaN(a)?a:a<0?Math.ceil(a):Math.floor(a)}e.exports=t.default})(De,De.exports);var Qr=De.exports;const ei=Ie(Qr);var Te={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;function s(n){var a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return a.setUTCFullYear(n.getFullYear()),n.getTime()-a.getTime()}e.exports=t.default})(Te,Te.exports);var ti=Te.exports;const St=Ie(ti);function si(e,t){var s=ri(t);return s.formatToParts?oi(s,e):ai(s,e)}var ni={year:0,month:1,day:2,hour:3,minute:4,second:5};function oi(e,t){try{for(var s=e.formatToParts(t),n=[],a=0;a<s.length;a++){var r=ni[s[a].type];r>=0&&(n[r]=parseInt(s[a].value,10))}return n}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function ai(e,t){var s=e.format(t),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(s);return[n[3],n[1],n[2],n[4],n[5],n[6]]}var we={};function ri(e){if(!we[e]){var t=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),s=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";we[e]=s?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return we[e]}function As(e,t,s,n,a,r,i){var c=new Date(0);return c.setUTCFullYear(e,t,s),c.setUTCHours(n,a,r,i),c}var Mt=36e5,ii=6e4,ve={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Es(e,t,s){var n,a;if(!e||(n=ve.timezoneZ.exec(e),n))return 0;var r;if(n=ve.timezoneHH.exec(e),n)return r=parseInt(n[1],10),Pt(r)?-(r*Mt):NaN;if(n=ve.timezoneHHMM.exec(e),n){r=parseInt(n[2],10);var i=parseInt(n[3],10);return Pt(r,i)?(a=Math.abs(r)*Mt+i*ii,n[1]==="+"?-a:a):NaN}if(di(e)){t=new Date(t||Date.now());var c=s?t:ci(t),l=Ae(c,e),u=s?l:li(t,l,e);return-u}return NaN}function ci(e){return As(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Ae(e,t){var s=si(e,t),n=As(s[0],s[1]-1,s[2],s[3]%24,s[4],s[5],0).getTime(),a=e.getTime(),r=a%1e3;return a-=r>=0?r:1e3+r,n-a}function li(e,t,s){var n=e.getTime(),a=n-t,r=Ae(new Date(a),s);if(t===r)return t;a-=r-t;var i=Ae(new Date(a),s);return r===i?r:Math.max(r,i)}function Pt(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var Dt={};function di(e){if(Dt[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Dt[e]=!0,!0}catch{return!1}}var ui=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,$e=36e5,Tt=6e4,hi=2,D={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:ui};function Ee(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var s={},n=s.additionalDigits==null?hi:ei(s.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=mi(e),r=fi(a.date,n),i=r.year,c=r.restDateString,l=pi(c,i);if(isNaN(l))return new Date(NaN);if(l){var u=l.getTime(),d=0,h;if(a.time&&(d=gi(a.time),isNaN(d)))return new Date(NaN);if(a.timeZone||s.timeZone){if(h=Es(a.timeZone||s.timeZone,new Date(u+d)),isNaN(h))return new Date(NaN)}else h=St(new Date(u+d)),h=St(new Date(u+d+h));return new Date(u+d+h)}else return new Date(NaN)}function mi(e){var t={},s=D.dateTimePattern.exec(e),n;if(s?(t.date=s[1],n=s[3]):(s=D.datePattern.exec(e),s?(t.date=s[1],n=s[2]):(t.date=null,n=e)),n){var a=D.timeZone.exec(n);a?(t.time=n.replace(a[1],""),t.timeZone=a[1].trim()):t.time=n}return t}function fi(e,t){var s=D.YYY[t],n=D.YYYYY[t],a;if(a=D.YYYY.exec(e)||n.exec(e),a){var r=a[1];return{year:parseInt(r,10),restDateString:e.slice(r.length)}}if(a=D.YY.exec(e)||s.exec(e),a){var i=a[1];return{year:parseInt(i,10)*100,restDateString:e.slice(i.length)}}return{year:null}}function pi(e,t){if(t===null)return null;var s,n,a,r;if(e.length===0)return n=new Date(0),n.setUTCFullYear(t),n;if(s=D.MM.exec(e),s)return n=new Date(0),a=parseInt(s[1],10)-1,Et(t,a)?(n.setUTCFullYear(t,a),n):new Date(NaN);if(s=D.DDD.exec(e),s){n=new Date(0);var i=parseInt(s[1],10);return bi(t,i)?(n.setUTCFullYear(t,0,i),n):new Date(NaN)}if(s=D.MMDD.exec(e),s){n=new Date(0),a=parseInt(s[1],10)-1;var c=parseInt(s[2],10);return Et(t,a,c)?(n.setUTCFullYear(t,a,c),n):new Date(NaN)}if(s=D.Www.exec(e),s)return r=parseInt(s[1],10)-1,Lt(t,r)?At(t,r):new Date(NaN);if(s=D.WwwD.exec(e),s){r=parseInt(s[1],10)-1;var l=parseInt(s[2],10)-1;return Lt(t,r,l)?At(t,r,l):new Date(NaN)}return null}function gi(e){var t,s,n;if(t=D.HH.exec(e),t)return s=parseFloat(t[1].replace(",",".")),je(s)?s%24*$e:NaN;if(t=D.HHMM.exec(e),t)return s=parseInt(t[1],10),n=parseFloat(t[2].replace(",",".")),je(s,n)?s%24*$e+n*Tt:NaN;if(t=D.HHMMSS.exec(e),t){s=parseInt(t[1],10),n=parseInt(t[2],10);var a=parseFloat(t[3].replace(",","."));return je(s,n,a)?s%24*$e+n*Tt+a*1e3:NaN}return null}function At(e,t,s){t=t||0,s=s||0;var n=new Date(0);n.setUTCFullYear(e,0,4);var a=n.getUTCDay()||7,r=t*7+s+1-a;return n.setUTCDate(n.getUTCDate()+r),n}var xi=[31,28,31,30,31,30,31,31,30,31,30,31],yi=[31,29,31,30,31,30,31,31,30,31,30,31];function Ls(e){return e%400===0||e%4===0&&e%100!==0}function Et(e,t,s){if(t<0||t>11)return!1;if(s!=null){if(s<1)return!1;var n=Ls(e);if(n&&s>yi[t]||!n&&s>xi[t])return!1}return!0}function bi(e,t){if(t<1)return!1;var s=Ls(e);return!(s&&t>366||!s&&t>365)}function Lt(e,t,s){return!(t<0||t>52||s!=null&&(s<0||s>6))}function je(e,t,s){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||s!=null&&(s<0||s>=60))}function Y(e,t,s){var n=Ee(e,s),a=Es(t,n,!0),r=new Date(n.getTime()-a),i=new Date(0);return i.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),i.setHours(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),i}var Ne={line:{color:"#F66",width:1,dashPattern:[]},sync:{enabled:!0,group:1,suppressTooltips:!1},zoom:{enabled:!0,zoomboxBackgroundColor:"rgba(66,133,244,0.2)",zoomboxBorderColor:"#48F",zoomButtonText:"Reset Zoom",zoomButtonClass:"reset-zoom"},snap:{enabled:!1},callbacks:{beforeZoom:function(e,t){return!0},afterZoom:function(e,t){}}},wi={id:"crosshair",afterInit:function(e){if(e.config.options.scales.x){var t=e.config.options.scales.x.type;if(!(t!=="linear"&&t!=="time"&&t!=="category"&&t!=="logarithmic")){e.options.plugins.crosshair===void 0&&(e.options.plugins.crosshair=Ne),e.crosshair={enabled:!1,suppressUpdate:!1,x:null,originalData:[],originalXRange:{},dragStarted:!1,dragStartX:null,dragEndX:null,suppressTooltips:!1,ignoreNextEvents:0,reset:(function(){this.resetZoom(e,!1,!1)}).bind(this)};var s=this.getOption(e,"sync","enabled");s&&(e.crosshair.syncEventHandler=(function(n){this.handleSyncEvent(e,n)}).bind(this),e.crosshair.resetZoomEventHandler=(function(n){var a=this.getOption(e,"sync","group");n.chartId!==e.id&&n.syncGroup===a&&this.resetZoom(e,!0)}).bind(this),window.addEventListener("sync-event",e.crosshair.syncEventHandler),window.addEventListener("reset-zoom-event",e.crosshair.resetZoomEventHandler)),e.panZoom=this.panZoom.bind(this,e)}}},afterDestroy:function(e){var t=this.getOption(e,"sync","enabled");t&&(window.removeEventListener("sync-event",e.crosshair.syncEventHandler),window.removeEventListener("reset-zoom-event",e.crosshair.resetZoomEventHandler))},panZoom:function(e,t){if(e.crosshair.originalData.length!==0){var s=e.crosshair.end-e.crosshair.start,n=e.crosshair.min,a=e.crosshair.max;t<0?(e.crosshair.start=Math.max(e.crosshair.start+t,n),e.crosshair.end=e.crosshair.start===n?n+s:e.crosshair.end+t):(e.crosshair.end=Math.min(e.crosshair.end+t,e.crosshair.max),e.crosshair.start=e.crosshair.end===a?a-s:e.crosshair.start+t),this.doZoom(e,e.crosshair.start,e.crosshair.end)}},getOption:function(e,t,s){return ct(e.options.plugins.crosshair[t]?e.options.plugins.crosshair[t][s]:void 0,Ne[t][s])},getXScale:function(e){return e.data.datasets.length?e.scales[e.getDatasetMeta(0).xAxisID]:null},getYScale:function(e){return e.scales[e.getDatasetMeta(0).yAxisID]},handleSyncEvent:function(e,t){var s=this.getOption(e,"sync","group");if(t.chartId!==e.id&&t.syncGroup===s){var n=this.getXScale(e);if(n){var a=t.original.native.buttons===void 0?t.original.native.which:t.original.native.buttons;t.original.type==="mouseup"&&(a=0);var r={type:t.original.type=="click"?"mousemove":t.original.type,chart:e,x:n.getPixelForValue(t.xValue),y:t.original.y,native:{buttons:a},stop:!0};e._eventHandler(r)}}},afterEvent:function(e,t){if(e.config.options.scales.x.length==0)return;let s=t.event;var n=e.config.options.scales.x.type;if(!(n!=="linear"&&n!=="time"&&n!=="category"&&xscaleType!=="logarithmic")){var a=this.getXScale(e);if(a){if(e.crosshair.ignoreNextEvents>0){e.crosshair.ignoreNextEvents-=1;return}var r=s.native.buttons===void 0?s.native.which:s.native.buttons;s.native.type==="mouseup"&&(r=0);var i=this.getOption(e,"sync","enabled"),c=this.getOption(e,"sync","group");if(!s.stop&&i){var t=new CustomEvent("sync-event");t.chartId=e.id,t.syncGroup=c,t.original=s,t.xValue=a.getValueForPixel(s.x),window.dispatchEvent(t)}var l=this.getOption(e,"sync","suppressTooltips");if(e.crosshair.suppressTooltips=s.stop&&l,e.crosshair.enabled=s.type!=="mouseout"&&s.x>a.getPixelForValue(a.min)&&s.x<a.getPixelForValue(a.max),!e.crosshair.enabled&&!e.crosshair.suppressUpdate)return s.x>a.getPixelForValue(a.max)&&(e.crosshair.suppressUpdate=!0,e.update("none")),e.crosshair.dragStarted=!1,!1;e.crosshair.suppressUpdate=!1;var u=this.getOption(e,"zoom","enabled");if(r===1&&!e.crosshair.dragStarted&&u&&(e.crosshair.dragStartX=s.x,e.crosshair.dragStarted=!0),e.crosshair.dragStarted&&r===0){e.crosshair.dragStarted=!1;var d=a.getValueForPixel(e.crosshair.dragStartX),h=a.getValueForPixel(e.crosshair.x);Math.abs(e.crosshair.dragStartX-e.crosshair.x)>1&&this.doZoom(e,d,h),e.update("none")}e.crosshair.x=s.x,e.draw()}}},afterDraw:function(e){if(e.crosshair.enabled)return e.crosshair.dragStarted?this.drawZoombox(e):(this.drawTraceLine(e),this.interpolateValues(e),this.drawTracePoints(e)),!0},beforeTooltipDraw:function(e){return!e.crosshair.dragStarted&&!e.crosshair.suppressTooltips},resetZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(s){if(e.crosshair.originalData.length>0)for(var n=0;n<e.data.datasets.length;n++){var a=e.data.datasets[n];a.data=e.crosshair.originalData.shift(0)}e.crosshair.originalXRange.min?(e.options.scales.x.min=e.crosshair.originalXRange.min,e.crosshair.originalXRange.min=null):delete e.options.scales.x.min,e.crosshair.originalXRange.max?(e.options.scales.x.max=e.crosshair.originalXRange.max,e.crosshair.originalXRange.max=null):delete e.options.scales.x.max}e.crosshair.button&&e.crosshair.button.parentNode&&(e.crosshair.button.parentNode.removeChild(e.crosshair.button),e.crosshair.button=!1);var r=this.getOption(e,"sync","enabled");if(!t&&s&&r){var i=this.getOption(e,"sync","group"),c=new CustomEvent("reset-zoom-event");c.chartId=e.id,c.syncGroup=i,window.dispatchEvent(c)}s&&e.update("none")},doZoom:function(e,t,s){if(t>s){var n=t;t=s,s=n}var a=ct(e.options.plugins.crosshair.callbacks?e.options.plugins.crosshair.callbacks.beforeZoom:void 0,Ne.callbacks.beforeZoom);if(!a(t,s))return!1;if(e.crosshair.dragStarted=!1,e.options.scales.x.min&&e.crosshair.originalData.length===0&&(e.crosshair.originalXRange.min=e.options.scales.x.min),e.options.scales.x.max&&e.crosshair.originalData.length===0&&(e.crosshair.originalXRange.max=e.options.scales.x.max),!e.crosshair.button){var r=document.createElement("button"),i=this.getOption(e,"zoom","zoomButtonText"),c=this.getOption(e,"zoom","zoomButtonClass"),l=document.createTextNode(i);r.appendChild(l),r.className=c,r.addEventListener("click",(function(){this.resetZoom(e)}).bind(this)),e.canvas.parentNode.appendChild(r),e.crosshair.button=r}e.options.scales.x.min=t,e.options.scales.x.max=s;var u=e.crosshair.originalData.length===0,d=e.config.options.scales.x.type!=="category";if(d)for(var h=0;h<e.data.datasets.length;h++){var x=[],m=0,g=!1,p=!1;u&&(e.crosshair.originalData[h]=e.data.datasets[h].data);for(var y=e.crosshair.originalData[h],w=0;w<y.length;w++){var j=y[w],C=j.x!==void 0?j.x:NaN;C>=t&&!g&&m>0&&(x.push(y[m-1]),g=!0),C>=t&&C<=s&&x.push(j),C>s&&!p&&m<y.length&&(x.push(j),p=!0),m+=1}e.data.datasets[h].data=x}if(e.crosshair.start=t,e.crosshair.end=s,u){var b=this.getXScale(e);e.crosshair.min=b.min,e.crosshair.max=b.max}e.crosshair.ignoreNextEvents=2,e.update("none");var $=this.getOption(e,"callbacks","afterZoom");$(t,s)},drawZoombox:function(e){var t=this.getYScale(e),s=this.getOption(e,"zoom","zoomboxBorderColor"),n=this.getOption(e,"zoom","zoomboxBackgroundColor");e.ctx.beginPath(),e.ctx.rect(e.crosshair.dragStartX,t.getPixelForValue(t.max),e.crosshair.x-e.crosshair.dragStartX,t.getPixelForValue(t.min)-t.getPixelForValue(t.max)),e.ctx.lineWidth=1,e.ctx.strokeStyle=s,e.ctx.fillStyle=n,e.ctx.fill(),e.ctx.fillStyle="",e.ctx.stroke(),e.ctx.closePath()},drawTraceLine:function(e){var t=this.getYScale(e),s=this.getOption(e,"line","width"),n=this.getOption(e,"line","color"),a=this.getOption(e,"line","dashPattern"),r=this.getOption(e,"snap","enabled"),i=e.crosshair.x;r&&e._active.length&&(i=e._active[0].element.x),e.ctx.beginPath(),e.ctx.setLineDash(a),e.ctx.moveTo(i,t.getPixelForValue(t.max)),e.ctx.lineWidth=s,e.ctx.strokeStyle=n,e.ctx.lineTo(i,t.getPixelForValue(t.min)),e.ctx.stroke(),e.ctx.setLineDash([])},drawTracePoints:function(e){for(var t=0;t<e.data.datasets.length;t++){var s=e.data.datasets[t],n=e.getDatasetMeta(t),a=e.scales[n.yAxisID];n.hidden||!s.interpolate||(e.ctx.beginPath(),e.ctx.arc(e.crosshair.x,a.getPixelForValue(s.interpolatedValue),3,0,2*Math.PI,!1),e.ctx.fillStyle="white",e.ctx.lineWidth=2,e.ctx.strokeStyle=s.borderColor,e.ctx.fill(),e.ctx.stroke())}},interpolateValues:function(e){for(var t=0;t<e.data.datasets.length;t++){var s=e.data.datasets[t],n=e.getDatasetMeta(t),a=e.scales[n.xAxisID],r=a.getValueForPixel(e.crosshair.x);if(!(n.hidden||!s.interpolate)){var i=s.data,c=i.findIndex(function(h){return h.x>=r}),l=i[c-1],u=i[c];if(e.data.datasets[t].steppedLine&&l)s.interpolatedValue=l.y;else if(l&&u){var d=(u.y-l.y)/(u.x-l.x);s.interpolatedValue=l.y+(r-l.x)*d}else s.interpolatedValue=NaN}}}};const ie=(e=1)=>`rgba(48, 166, 51, ${e})`,ce=(e=1)=>`rgba(241, 77, 66, ${e})`,It="text-[#30a633]",Ft="text-[#f14d42]",vi=["1d","5d","1m","6m","ytd","1y","5y","max"];function $i({histories:e,selectedInterval:t,onSelectHistoryInterval:s}){const n=Object.keys(e?.quotes??{});return o.jsx("div",{className:"inline-flex items-start justify-between rounded-[10px] bg-[#f4f4f4] p-[3px] text-xs font-semibold text-token-text-tertiary dark:bg-[#393939] sm:justify-start sm:gap-1",children:n.map(a=>o.jsx("button",{onClick:()=>{s?.(a)},className:_("border border-transparent px-3 py-1.5 text-xs font-semibold uppercase",t===a?"rounded-lg !border-token-border-light bg-token-main-surface-primary text-token-text-primary shadow-xxs dark:!border-token-border-medium":"hover:text-token-text-secondary"),children:Is[a].label},a))})}const Is={"1d":{label:"1D",formatTimestampLabel:Rt,formatTimestampTooltip:Rt,maxTicksLimit:6,lineTension:.1},"5d":{label:"5D",formatTimestampLabel:Ot,formatTimestampTooltip:Ni,maxTicksLimit:6,lineTension:.1},"1m":{label:"1M",formatTimestampLabel:Ot,formatTimestampTooltip:_i,maxTicksLimit:6,lineTension:.1,useUtc:!0},"6m":{label:"6M",formatTimestampLabel:_e,formatTimestampTooltip:V,maxTicksLimit:5,lineTension:.1,useUtc:!0},ytd:{label:"YTD",formatTimestampLabel:_e,formatTimestampTooltip:V,maxTicksLimit:5,lineTension:.1,useUtc:!0},"1y":{label:"1Y",formatTimestampLabel:_e,formatTimestampTooltip:V,maxTicksLimit:5,lineTension:.2,useUtc:!0},"5y":{label:"5Y",formatTimestampLabel:Ht,formatTimestampTooltip:V,maxTicksLimit:5,lineTension:.2,useUtc:!0},max:{label:"max",formatTimestampLabel:Ht,formatTimestampTooltip:V,maxTicksLimit:5,lineTension:.2,useUtc:!0}};function ji(e){return e?vi.filter(s=>s in e.quotes).find(s=>e.quotes[s].length>0):void 0}function H(e,t){return Y(new Date(e*1e3),t??"America/New_York")}function Rt(e,t,s){const n=H(t,s);return e.formatTime(n,{hour:"numeric",minute:"numeric"})}function Ni(e,t,s){const n=H(t,s);return e.formatDate(n,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}function V(e,t,s){const n=H(t,s);return e.formatDate(n,{month:"short",day:"numeric",year:"numeric"})}function _e(e,t,s){const n=H(t,s);return e.formatDate(n,{month:"short",year:"numeric"})}function Ot(e,t,s){const n=H(t,s);return e.formatDate(n,{month:"short",day:"numeric"})}function _i(e,t,s){const n=H(t,s);return e.formatDate(n,{weekday:"short",month:"short",day:"numeric"})}function Ht(e,t,s){const n=H(t,s);return e.formatDate(n,{year:"numeric"})}bo.register(wo,vo,$o,jo,No,_o,ko,Co,So,wi,Mo);const ki=100,Ut={color:"#b4b4b4",font:{size:10,weight:"600",family:"Menlo"}};function Ci({isUp:e,histories:t,selectedInterval:s,setHighlightedPrice:n,latestTradingPeriod:a,timezone:r}){return o.jsx(o.Fragment,{children:t&&s&&a?o.jsx(Si,{isUp:e,histories:t,selectedInterval:s,latestTradingPeriod:a,timezone:r,setHighlightedPrice:n}):o.jsx(Z,{className:"h-full",index:1,width:100})})}function Si({isUp:e,histories:t,selectedInterval:s,latestTradingPeriod:n,timezone:a,setHighlightedPrice:r}){const[i,c]=f.useState(null),[l,u]=f.useState(!1),d=s==="1d",h=f.useMemo(()=>{let b=t.quotes[s].filter($=>$.close>=0);if(d&&n){const $=n.regular.start_timestamp,k=n.regular.end_timestamp;if(b=b.filter(S=>S.timestamp>=$&&S.timestamp<=k),b.length===0||b[b.length-1].timestamp<k){let A=b.length>0?b[b.length-1].timestamp:$-600;for(;A<k;)A+=600,b.push({timestamp:A,close:null})}}return b},[t,s,d,n]),x=Is[s],{formatTimestampTooltip:m,maxTicksLimit:g,useUtc:p=!1}=x,y=P(),w=Ue(),j=he(),C=f.useMemo(()=>{const{formatTimestampLabel:b,lineTension:$}=x;return{labels:h.map(k=>b(y,k.timestamp,p?"UTC":a)),datasets:[{data:h.map(k=>k.close),borderColor:e?ie():ce(),pointRadius:0,pointHoverRadius:4,pointStyle:"circle",pointBackgroundColor:e?ie():ce(),pointHoverBorderWidth:2,pointHoverBorderColor:"rgba(255, 255, 255, 1)",backgroundColor:function(k){const{ctx:S,chartArea:A}=k.chart;if(A)return Pi(S,A,e)},fill:!0,borderWidth:2,lineTension:$??.4}]}},[x,h,e,p,a,y]);return o.jsx("div",{className:"flex h-full flex-col gap-6",children:o.jsxs("div",{className:"relative h-full",onMouseEnter:()=>u(!0),onMouseLeave:()=>{u(!1),r(null)},children:[o.jsx(Po,{options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},hover:{mode:l?"index":"point"},animation:!1,scales:{x:{afterBuildTicks:b=>{if(b.ticks.length>g)if(d)b.ticks=b.ticks.filter(($,k)=>h[k].timestamp%(w?3600:7200)===0);else{const $=Math.ceil(b.ticks.length/(g-1));b.ticks=b.ticks.filter((k,S)=>S>0&&(S%$===0||S===b.ticks.length-1))}},grid:{display:!1},ticks:{...Ut,align:"end"}},y:{ticks:{...Ut,maxTicksLimit:7},border:{display:!1},grid:{color:j?"rgba(255, 255, 255, 0.1)":"rgba(229, 229, 229, 0.5)"}}},plugins:{datalabels:{display:!1},legend:{display:!1},tooltip:{enabled:!1,animation:!1,displayColors:!1,callbacks:{title:function(b){const $=b[0];if(!$)return"";const k=h[$.dataIndex]?.timestamp;return k?m(y,k,p?"UTC":a):""}},external:({tooltip:b})=>{l&&b.opacity>0&&r(K(b.dataPoints?.[0]?.parsed?.y??0)),c($=>{const k=b.chart.width,S=b.caretX>k-ki;return!$||$.x!==b.caretX||$.y!==b.caretY||$.opacity!==b.opacity||$.flip!==S?{...$,x:b.caretX,y:b.caretY,dateLabel:b.title?.[0],value:K(b.dataPoints?.[0]?.parsed?.y??0),opacity:b.opacity,flip:S}:$})}},dropShadow:!1,crosshair:{line:{color:j?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)",width:.5},zoom:{enabled:!1}}}},data:C}),o.jsx(Mi,{tooltipData:i})]})})}function Mi({tooltipData:e}){return!e||!e.opacity?null:o.jsx("div",{style:{left:e.x-5,top:10,transform:"translate(-50%, -50%)"},className:_("pointer-events-none absolute translate-y-[-100%] whitespace-nowrap rounded-lg bg-black px-2 py-1 font-mono font-semibold text-token-main-surface-primary dark:bg-token-main-surface-secondary dark:text-white"),children:o.jsx("div",{className:"text-xs",children:e.dateLabel})})}function Pi(e,t,s){const n=e.createLinearGradient(0,t.top,0,t.bottom);return n.addColorStop(0,s?ie(.4):ce(.4)),n.addColorStop(1,s?ie(0):ce(0)),n}function K(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function te({label:e,value:t}){return o.jsxs("div",{className:"flex w-max flex-1 flex-col gap-1 text-sm",children:[o.jsx("span",{className:"whitespace-nowrap font-normal text-token-text-secondary",children:e}),o.jsx("span",{className:"whitespace-nowrap font-semibold text-token-text-primary",children:t})]})}function Di({data:e}){const t=P();return o.jsxs("div",{className:"flex flex-col gap-1 rounded-xl pt-2",children:[o.jsx("div",{className:"py-2 text-sm font-semibold text-token-text-primary",children:t.formatMessage({id:"6MpNPe",defaultMessage:"Key Metrics"})}),o.jsx("hr",{className:"m-0 border-token-border-xlight"}),o.jsxs("div",{className:"flex w-full flex-row flex-wrap gap-8 py-3",children:[o.jsxs("div",{className:"min-w-1/2 flex flex-1 gap-8",children:[o.jsx(te,{label:t.formatMessage({id:"MDHEj7",defaultMessage:"Open"}),value:t.formatNumber(e.openPrice,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),o.jsx(te,{label:t.formatMessage({id:"uBKgbo",defaultMessage:"Day Range"}),value:t.formatMessage({id:"8LyBkV",defaultMessage:"{low} - {high}"},{low:t.formatNumber(e.intradayLow,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),high:t.formatNumber(e.intradayHigh,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})})]}),o.jsxs("div",{className:"min-w-1/2 flex flex-1 gap-8",children:[o.jsx(te,{label:t.formatMessage({id:"/h0itm",defaultMessage:"52 Week Range"}),value:t.formatMessage({id:"VkpWnl",defaultMessage:"{low} - {high}"},{low:t.formatNumber(e.fiftyTwoWeekLow,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),high:t.formatNumber(e.fiftyTwoWeekHigh,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})}),o.jsx(te,{label:t.formatMessage({id:"PboNMC",defaultMessage:"Volume"}),value:t.formatNumber(e.intradayVolume,{notation:"compact",maximumFractionDigits:1})})]})]})]})}function Ti({data:e,priceChange:t,highlightedPrice:s,extendedPriceChange:n,url:a}){function r(i,c="intraday",l=null){const{isUp:u,changePercentage:d,changeLabel:h,changeAmount:x}=i,m=Math.abs(d).toFixed(2),g=K(x);return o.jsxs("span",{className:"flex min-w-0 items-center gap-1",children:[c==="extended_hours"&&l!=null&&o.jsx("span",{className:"font-semibold",children:o.jsx(N,{id:"HWwWpW",defaultMessage:"{price}",values:{price:l}})}),o.jsx("span",{className:_("font-semibold",u?It:Ft),children:o.jsx(N,{id:"3x4Lkl",defaultMessage:"{sign}{changeAmount}",values:{changeAmount:g,sign:u?"+":""}})}),o.jsx("span",{className:_("font-semibold",u?It:Ft),children:o.jsx(N,{id:"MbfF1T",defaultMessage:"({sign}{changePercentage}%)",values:{changePercentage:m,sign:u?"+":"-"}})}),c==="extended_hours"?o.jsx("span",{className:"min-w-0 truncate text-token-text-primary",children:h}):o.jsx("span",{className:"min-w-0 truncate text-token-text-primary",children:h})]})}return o.jsxs("div",{children:[o.jsx("div",{className:"mt-2 text-sm",children:e?o.jsx(N,{id:"+2WHuv",defaultMessage:"{name} ({ticker})",values:{name:e.asset.name,ticker:e.asset.ticker}}):o.jsx("div",{className:"w-32 font-medium",children:o.jsx(Z,{index:9,width:100})})}),o.jsx("div",{className:"text-sm text-token-text-tertiary",children:e?o.jsx(o.Fragment,{children:a!=null&&o.jsxs(o.Fragment,{children:[" · ",o.jsx(F,{href:a,className:"text-token-link hover:underline",children:Oe(a,"hostname")})]})}):o.jsx("div",{className:"mt-2 w-36",children:o.jsx(Z,{index:6,width:100})})}),o.jsx("div",{className:"mt-2 flex text-4xl font-semibold",children:e?o.jsx(N,{id:"s+1uly",defaultMessage:"{price}",values:{price:s??K(e.price.price)}}):o.jsx("div",{className:"w-32",children:o.jsx(Z,{index:0,width:100})})}),o.jsx("div",{className:"mt-2 flex items-center justify-start gap-1 text-sm",children:t?r(t):o.jsx("div",{className:"mt-2 w-40",children:o.jsx(Z,{index:3,width:100})})}),o.jsx("div",{className:"mt-0.5 flex items-center justify-start gap-1 text-sm",children:e?.price?.extended_price!=null&&n!=null&&r(n,"extended_hours",K(e.price.extended_price))})]})}function Ai({contentReference:e,trackContentReferenceEvent:t}){const s=P();f.useEffect(()=>{t(v.searchContentReferenceShown,"search_content_reference_shown","stock")},[t]);const n=ji(e?.stock?.histories),a=e?.stock,[r,i]=f.useState(n),[c,l]=f.useState(null),u=r==="1d",d=a?.histories?.quotes?.[r??""]?.[0],h=r&&r in ne?r:void 0,x=a&&(d&&!u?{changePercentage:(a.price.price-d.close)/d.close*100,changeAmount:a.price.price-d.close,changeLabel:h?s.formatMessage(ne[h]):"",isUp:a.price.price>d.close}:a.price.change_percent&&a.price.change?{changePercentage:a.price.change_percent*100,changeAmount:a.price.change,changeLabel:Li(a.price.latest_trade_timestamp,a.asset.timezone,s),isUp:a.price.change?a.price.change>0:!1}:null),m=a&&a.price.extended_price!=null&&a.price.extended_change_percent!=null&&a.price.extended_change!=null?{changePercentage:a.price.extended_change_percent*100,changeAmount:a.price.extended_change,changeLabel:s.formatMessage(Ei(a.price.market_status)??ne.extended),isUp:a.price.extended_change>0}:null,{fiftyTwoWeekHigh:g,fiftyTwoWeekLow:p}=f.useMemo(()=>{const j=a?.histories?.quotes["1y"];if(!j)return{fiftyTwoWeekHigh:null,fiftyTwoWeekLow:null};const C=j.map($=>$.high).filter($=>$!=null),b=j.map($=>$.low).filter($=>$!=null);return{fiftyTwoWeekHigh:C.length>0?Math.max(...C):null,fiftyTwoWeekLow:b.length>0?Math.min(...b):null}},[a?.histories?.quotes]),y=a?.price.open_price&&a.price.intraday_high&&a.price.intraday_low&&a.price.intraday_volume&&g&&p?{openPrice:a.price.open_price,intradayHigh:a.price.intraday_high,intradayLow:a.price.intraday_low,intradayVolume:a.price.intraday_volume,fiftyTwoWeekHigh:g,fiftyTwoWeekLow:p}:null,w=y!=null;return o.jsxs("div",{className:_("flex flex-col gap-8",w?"min-h-[620px]":"h-[480px]"),children:[o.jsxs("div",{className:"flex flex-wrap items-end justify-between",children:[o.jsx(Ti,{data:a??null,highlightedPrice:c,priceChange:x??null,extendedPriceChange:m??null,url:e?.url??null}),o.jsx("div",{className:"mt-4",children:o.jsx($i,{selectedInterval:r,onSelectHistoryInterval:i,histories:a?.histories})})]}),o.jsx("div",{className:w?"h-[340px]":"h-full",children:o.jsx(Ci,{isUp:x?.isUp??!1,selectedInterval:r,histories:a?.histories,setHighlightedPrice:l,onSelectHistoryInterval:j=>i(j),latestTradingPeriod:a?.asset.latest_trading_period,timezone:a?.asset.timezone??null})}),w&&o.jsx("div",{className:"-mt-4 mb-2",children:o.jsx(Di,{data:y})})]})}function Ei(e){if(e==null)return null;const t=e.toLowerCase();return t==="premarket"||t==="open"?pe({id:"By+pvF",defaultMessage:"Pre-Market"}):t==="afterhours"||t==="closed"?pe({id:"aLCg3c",defaultMessage:"After Hours"}):pe({id:"2p526c",defaultMessage:"Extended Hours"})}function Li(e,t,s){function n(a,r){const c=Y(new Date,r),l=s.formatDate(c,{year:"numeric",month:"2-digit",day:"2-digit"}),u=Ee(a*1e3),d=Y(u,r),h=s.formatDate(d,{year:"numeric",month:"2-digit",day:"2-digit"});return l===h}if(!e||!t||n(e,t))return s.formatMessage(ne["1d"]);{const a=Ee(e*1e3),r=Y(a,t);return s.formatDate(r,{month:"long",day:"numeric"})}}const ne=ue({"1d":{id:"SMdcuo",defaultMessage:"Today"},extended:{id:"2p526c",defaultMessage:"Extended Hours"},"5d":{id:"HCA6lr",defaultMessage:"Past 5 days"},"1m":{id:"DJpPMq",defaultMessage:"Past month"},"6m":{id:"1mUJ2L",defaultMessage:"Past 6 months"},ytd:{id:"b9KkhV",defaultMessage:"Year to date"},"1y":{id:"XnvD9A",defaultMessage:"Past year"},"5y":{id:"DfI1RB",defaultMessage:"Past 5 years"},max:{id:"WzOhuU",defaultMessage:"Max"}}),Ii={google_maps:{title:"Google Maps"}};function Fi({metadata:e,trackContentReferenceEvent:t}){f.useEffect(()=>{t(v.searchContentReferenceShown,"search_content_reference_shown",e.type)},[t,e.type]);const s=Ii[e.provider]?.title??"Maps";return o.jsx("span",{children:o.jsx(N,{id:"ZSUz1k",defaultMessage:" ({link}) ",values:{link:o.jsx(F,{href:e.url,children:s})}})})}function Ri({metadata:e,trackContentReferenceEvent:t}){f.useEffect(()=>{e.items.length>0&&t(v.searchContentReferenceShown,"search_content_reference_shown","nav_list")},[]);const s=!Ue(),n=Kt();if(e.items.length===0)return null;const a=s||n?2:e.items.length;return o.jsxs("div",{className:"mt-6",children:[e.title&&o.jsx("div",{className:"-mb-1 pb-3 font-semibold text-token-text-primary",children:e.title}),o.jsx("div",{className:"flex flex-row justify-between gap-4",children:e.items.slice(0,a).map((r,i)=>o.jsx(Oi,{item:r,index:i,trackContentReferenceEvent:t,className:"flex-1"},i))})]})}function Oi({item:e,index:t,trackContentReferenceEvent:s,className:n}){const{isSuccess:a}=cs(e.thumbnail_url??void 0),r={url:e.url,title:e.title,section_index:t,link_type:"text",section:"nav_list",section_location:"response"};f.useEffect(()=>{s(v.linkAction,"link_action","nav_list",{...r,action:"show"})},[]);const c=P().locale,l=e.pub_date!=null?new Date(e.pub_date*1e3):null,u=new Intl.RelativeTimeFormat(c,{numeric:"auto"}),d=l?Math.max(Math.floor((Date.now()-l.getTime())/(1e3*60*60*24)),0):null;let h=d!=null?u.format(-d,"day"):null;return c.startsWith("en")&&h&&(h=h.charAt(0).toUpperCase()+h.slice(1)),o.jsxs(F,{className:`group/nav-list pt relative flex flex-col items-center gap-4 overflow-hidden rounded-xl border border-token-border-light bg-token-main-surface-primary pb-6 hover:shadow dark:bg-token-main-surface-secondary ${n}`,href:e.url,onClick:()=>{s(v.linkAction,"link_action","nav_list",{...r,action:"click"})},children:[a&&e.thumbnail_url?o.jsx("div",{className:"relative h-36 w-full overflow-hidden",children:o.jsx("img",{src:e.thumbnail_url,className:"m-0 h-full w-full",style:{objectFit:"cover"},alt:e.title})}):o.jsxs("div",{className:"icon-bg relative flex h-36 w-full shrink-0 items-center justify-center overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cover bg-center bg-no-repeat blur-3xl",children:o.jsx(se,{url:e.url,size:256,minSize:128,className:"mix-soft-light opacity-30 dark:opacity-20"})}),o.jsx("div",{className:"absolute flex h-10 w-10 items-center justify-center",children:o.jsx(se,{url:e.url,size:128,minSize:80,className:"icon-xl rounded-full"})})]}),o.jsxs("div",{className:"flex flex-col gap-2 overflow-hidden text-ellipsis px-4",children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-token-text-primary",children:[o.jsx(se,{url:e.url,size:32,minSize:16,className:"icon-xs my-0 rounded-full"}),e.attribution??Oe(e.url)]}),o.jsx("div",{className:"line-clamp-5 text-sm font-medium text-token-text-primary decoration-token-link",children:e.title}),h&&o.jsx("div",{className:"text-xs text-token-text-secondary",children:h})]})]})}function L(e,t){const s=pn(e),n=t<0?"-":"+",a=Math.abs(t),r=Math.floor(a/3600).toString().padStart(2,"0"),i=Math.floor(a%3600/60).toString().padStart(2,"0"),c=`${n}${r}:${i}`;return Y(s,c)}function Le(e,t){if(nt(t))return o.jsx(N,{id:"wxni9H",defaultMessage:"Today"});const s=new Date;return s.setTime(s.getTime()+7*24*60*60*1e3),t<s&&t>new Date||nt(t)?e.formatDate(t,{weekday:"long"}):e.formatDate(t,{weekday:"short",month:"short",day:"numeric"})}const Hi="webp",Ui=250,zi=187,Bi="srgb",Wi=4,Yi="uchar",qi=72,Gi=!1,Vi=!1,Zi=!0,Xi="/assets/missing-logo-h96s4tk9.webp",zt={format:Hi,width:Ui,height:zi,space:Bi,channels:Wi,depth:Yi,density:qi,isProgressive:Gi,hasProfile:Vi,hasAlpha:Zi,src:Xi};function Fs({team:e,className:t}){const[s,n]=f.useState(e.logo??zt.src),a=()=>{ze.addError("Unable to load sports widget logo",{name:e.name,logo:e.logo}),n(zt.src)};return o.jsx("img",{src:s,alt:e.name,className:t,onError:a})}const Bt=6;function Ki({scheduleRef:e,trackContentReferenceEvent:t}){const[s,n]=f.useState(!0),a=P(),r=e.games.length>0;if(f.useEffect(()=>{r&&t(v.searchContentReferenceShown,"search_content_reference_shown","sports",{hasSchedule:!0})},[r]),!r)return null;const c=(a.formatDateToParts(new Date,{timeZoneName:"long"}).find(h=>h.type==="timeZoneName")?.value??Intl.DateTimeFormat().resolvedOptions().timeZone).replace(/Daylight|Standard/g,"");let l=e.games;const u=h=>Math.abs(new Date().getTime()-new Date(h.date).getTime());u(l[0])>u(l[l.length-1])&&(l=l.slice().reverse());const d=s?l.slice(0,Bt):l;return o.jsxs("div",{className:"not-prose mb-3",children:[o.jsx("div",{className:"font-semibold",children:o.jsx(N,{id:"LA6z9q",defaultMessage:"{league} Schedule",values:{league:e.league.display_name}})}),o.jsx("div",{className:"text-sm text-token-text-secondary",children:c}),d.length===1?o.jsx("div",{children:o.jsx(tt,{children:o.jsx(oe.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.2},children:o.jsx("div",{className:"mt-3 rounded-xl border border-token-border-medium py-3",children:o.jsx(Qi,{game:d[0]})})})})}):o.jsx("div",{className:"grid grid-cols-1 pt-3 lg:grid-cols-2",children:o.jsx(tt,{children:d.map((h,x)=>o.jsx(oe.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0,transition:{delay:x*.04}},exit:{opacity:0,y:-15},transition:{duration:.2},children:o.jsx("div",{className:_("border-b border-token-border-medium py-3",x%2===0&&"lg:border-r lg:pr-4",x%2===1&&"lg:pl-4",Math.floor(x/2)===Math.ceil(l.length/2)-1&&"lg:border-b-0",x===l.length-1&&"border-b-0"),children:o.jsx(Ji,{game:h})})},x))})}),l.length>Bt&&o.jsx("div",{className:"mt-2 flex items-center justify-between",children:o.jsx("button",{className:"flex items-center text-sm font-semibold",onClick:()=>n(!s),children:s?o.jsx(N,{id:"BH/Ee5",defaultMessage:"Show more {icon}",values:{icon:o.jsx(gn,{className:"mb-[-2px]"})}}):o.jsx(N,{id:"Z9BlEu",defaultMessage:"Show less {icon}",values:{icon:o.jsx(xn,{className:"mb-[-2px]"})}})})})]})}function Ji({game:e}){const t=Os(e),s=[e.first_team_info,e.second_team_info],n=s.find(c=>c.location==="home")??e.first_team_info,a=s.find(c=>c.location==="away")??e.second_team_info,r=t?.team.name===n?.team.name,i=t?.team.name===a?.team.name;return o.jsxs("div",{className:"flex w-full gap-1.5 py-3 text-base",children:[o.jsxs("div",{className:"flex flex-auto flex-col items-start gap-1 pr-3",children:[o.jsx(le,{team:a.team,isWinner:i,logoSize:"small"}),o.jsx(le,{team:n.team,isWinner:r,logoSize:"small"})]}),o.jsxs("div",{className:"flex flex-none flex-col items-start gap-1",children:[o.jsx(de,{score:a.score,isWinner:i}),o.jsx(de,{score:n.score,isWinner:r})]}),o.jsx("div",{className:"flex min-w-24 flex-none flex-col items-end justify-center gap-1 text-sm",children:o.jsx(Hs,{game:e})})]})}function Qi({game:e}){const t=Os(e),s=[e.first_team_info,e.second_team_info],n=s.find(c=>c.location==="home")??e.first_team_info,a=s.find(c=>c.location==="away")??e.second_team_info,r=t?.team.name===n?.team.name,i=t?.team.name===a?.team.name;return o.jsxs("div",{className:"flex w-full py-3 text-base",children:[o.jsx("div",{className:"flex flex-1 items-center justify-center px-2",children:o.jsx(le,{team:a.team,isWinner:i})}),o.jsx("div",{className:"ml-8 flex items-center justify-start",children:o.jsx(de,{score:a.score,isWinner:i,className:"text-lg font-semibold"})}),o.jsx("div",{className:"flex w-24 shrink flex-col items-center justify-center gap-1 align-middle text-sm",children:o.jsx(Hs,{game:e})}),o.jsx("div",{className:"mr-8 flex items-center justify-end",children:o.jsx(de,{score:n.score,isWinner:r,className:"text-lg font-semibold"})}),o.jsx("div",{className:"flex flex-1 items-center justify-center px-2",children:o.jsx(le,{team:n.team,isWinner:r})})]})}function Rs(e){return e.live?"live":new Date(e.date)<new Date?"complete":"scheduled"}function Os(e){return Rs(e)!=="complete"||e.first_team_info.score==null||e.second_team_info.score==null?null:e.first_team_info.score>e.second_team_info.score?e.first_team_info:e.second_team_info}function le({team:e,isWinner:t,logoSize:s}){return o.jsxs("span",{className:_("flex items-center gap-1",t&&"font-semibold","max-w-64 lg:max-w-52 xl:max-w-64"),children:[e.logo&&o.jsx(Fs,{team:{name:e.name,logo:e.logo},className:_(s==="small"?"w-6":"w-8")}),o.jsx("span",{className:"truncate",children:e.name})]})}function de({score:e,isWinner:t,className:s}){return e==null?null:o.jsx("span",{className:_(t&&"font-semibold",s),children:e})}function Hs({game:e}){const t=P();switch(Rs(e)){case"live":return o.jsxs(o.Fragment,{children:[o.jsx(ec,{}),o.jsx("div",{children:e.details})]});case"complete":return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"font-semibold",children:o.jsx(N,{id:"q/iMZL",defaultMessage:"Final"})}),o.jsx("div",{className:"text-token-text-secondary",children:Le(t,new Date(e.date))})]});case"scheduled":{const s=new Date(e.date);return isNaN(s.getTime())?null:o.jsxs(o.Fragment,{children:[o.jsx("div",{children:Le(t,s)}),o.jsx("div",{className:"text-token-text-secondary",children:t.formatDate(s,{timeStyle:"short"})})]})}}}function ec(){return o.jsx("div",{className:"rounded-[4px] bg-token-surface-error px-1.5 py-1 text-xs font-semibold text-white",children:o.jsx(N,{id:"vObALn",defaultMessage:"Live"})})}function tc({standingsRef:e,trackContentReferenceEvent:t}){const[s,n]=f.useState(0),a=e.conferences.length>0;f.useEffect(()=>{a&&t(v.searchContentReferenceShown,"search_content_reference_shown","sports",{hasStandings:!0})},[a]);const r=e.conferences[s],i=e.conferences.length>1?e.conferences.map((c,l)=>o.jsx("button",{className:_(s===l?"text-token-text-primary":"text-token-text-tertiary","text-sm font-semibold"),onClick:()=>n(l),children:c.name},c.name)):null;return o.jsxs(o.Fragment,{children:[i&&o.jsx("div",{className:"flex gap-4",children:i}),o.jsx("div",{className:"mt-3",children:r.divisions.map(c=>c.name?o.jsx("div",{className:"mt-3",children:o.jsx(Wt,{division:c,teamsColumnHeader:c.name})},c.name):o.jsx(Wt,{division:c}))})]})}function Wt({division:e,teamsColumnHeader:t}){const s=e.headers.map(n=>n.key);return o.jsxs(T.Root,{size:"compact",className:"not-prose",children:[o.jsxs(T.Header,{children:[o.jsx(sc,{children:t??o.jsx(N,{id:"kKSGje",defaultMessage:"Team"})}),e.headers.map(n=>o.jsx(Us,{textAlign:"center",className:"min-w-11 !px-0",children:o.jsx(Yt,{data:n})},n.key))]}),o.jsx(T.Body,{children:e.teams.map(({team:n,data:a},r)=>{const i=a.reduce((c,l)=>(c[l.key]=l,c),{});return o.jsxs(T.Row,{children:[o.jsx(T.Cell,{className:"w-full !border-0 !py-0 !pl-0",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"mr-2 w-4 whitespace-nowrap tabular-nums text-token-text-tertiary",children:r+1}),o.jsxs("div",{className:"flex items-center justify-start gap-2",children:[o.jsx(Fs,{team:n,className:"w-6"}),o.jsx("span",{className:"whitespace-nowrap text-base",children:n.name})]})]})}),s.map(c=>o.jsx(T.Cell,{className:"min-w-11 whitespace-nowrap !border-0 !px-0 !py-0 text-left tabular-nums",textAlign:"center",children:o.jsx(Yt,{data:i[c]})},c))]},n.name)})})]})}function Yt({data:e}){switch(e.type){case"text":return o.jsx(o.Fragment,{children:e.text});default:return o.jsx(o.Fragment,{children:e.alt})}}const Us=ts(T.HeaderCell)`text-token-text-secondary !font-normal text-sm !static !bg-transparent !border-token-border-light !border-t-0 !border-l-0 !border-r-0`,sc=ts(Us)`text-token-text-primary !pl-0`;function nc({metadata:e,trackContentReferenceEvent:t}){f.useEffect(()=>{t(v.searchContentReferenceShown,"search_content_reference_shown",e.type)},[t,e.type]);const s=P(),n=Y(e.utc_time,e.utc_offset),a=s.formatDate(n,{hour:"numeric",minute:"numeric"});return o.jsx("span",{children:a})}function oc({metadata:e,trackContentReferenceEvent:t}){return f.useEffect(()=>{t(v.searchContentReferenceShown,"search_content_reference_shown",e.type)},[t,e.type]),o.jsx("div",{children:e.url?o.jsx(eo,{webpageItem:{url:e.url,title:e.description,pub_date:null,snippet:"",attributions:null},className:"inline-flex flex-col",children:o.jsx(F,{href:e.url,className:"!font-semibold",children:e.description})}):o.jsx("div",{className:"!font-semibold",children:e.description})})}function ac({url:e,className:t}){let s;const n="aspect-video w-full rounded-lg",a=rc(e);a&&(s=o.jsx(ic,{videoId:a,className:n}));const r=cc(e);return r&&(s=o.jsx(lc,{videoId:r,className:n})),s?o.jsx("div",{className:t,children:s}):null}function rc(e){const t=/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,s=e.match(t);return s?s[1]:null}function ic({videoId:e,className:t}){return o.jsx("iframe",{className:t,src:`https://www.youtube.com/embed/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}function cc(e){const t=/vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/[^/]+\/videos\/|video\/|)(\d+)/,s=e.match(t);return s?s[1]:null}function lc({videoId:e,className:t}){return o.jsx(o.Fragment,{children:o.jsx("iframe",{className:t,src:`https://player.vimeo.com/video/${e}`,frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})})}function dc({video:e,trackContentReferenceEvent:t}){const s={url:e.url,title:e.title};return f.useEffect(()=>{t(v.searchContentReferenceShown,"search_content_reference_shown",e.type,s)},[]),e.url==null||e.url===""?null:o.jsx("div",{className:"not-prose mb-3 flex flex-col gap-4 text-base",children:o.jsx(ac,{url:e.url})})}const uc=e=>f.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.34354 4.92894C6.7341 5.31946 6.7341 5.95263 6.34354 6.34315C3.21906 9.46735 3.21906 14.5327 6.34354 17.6569C6.7341 18.0474 6.7341 18.6806 6.34354 19.0711C5.95298 19.4616 5.31976 19.4616 4.9292 19.0711C1.0236 15.1658 1.0236 8.83418 4.9292 4.92894C5.31976 4.53842 5.95298 4.53842 6.34354 4.92894ZM17.6583 4.92894C18.0488 4.53842 18.682 4.53842 19.0726 4.92894C22.9782 8.83418 22.9782 15.1658 19.0726 19.0711C18.682 19.4616 18.0488 19.4616 17.6583 19.0711C17.2677 18.6806 17.2677 18.0474 17.6583 17.6569C20.7827 14.5327 20.7827 9.46735 17.6583 6.34315C17.2677 5.95263 17.2677 5.31946 17.6583 4.92894Z",fill:"currentColor"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.17222 7.75737C9.56278 8.14789 9.56278 8.78106 9.17222 9.17158C7.60998 10.7337 7.60998 13.2663 9.17222 14.8284C9.56278 15.219 9.56278 15.8521 9.17222 16.2426C8.78166 16.6332 8.14844 16.6332 7.75788 16.2426C5.41452 13.8995 5.41452 10.1005 7.75788 7.75737C8.14844 7.36684 8.78166 7.36684 9.17222 7.75737ZM14.8296 7.75737C15.2201 7.36684 15.8534 7.36684 16.2439 7.75737C18.5873 10.1005 18.5873 13.8995 16.2439 16.2426C15.8534 16.6332 15.2201 16.6332 14.8296 16.2426C14.439 15.8521 14.439 15.219 14.8296 14.8284C16.3918 13.2663 16.3918 10.7337 14.8296 9.17158C14.439 8.78106 14.439 8.14789 14.8296 7.75737Z",fill:"currentColor"}),f.createElement("path",{d:"M14.0011 12C14.0011 13.1046 13.1056 14 12.0009 14C10.8962 14 10.0007 13.1046 10.0007 12C10.0007 10.8954 10.8962 10 12.0009 10C13.1056 10 14.0011 10.8954 14.0011 12Z",fill:"currentColor"})),hc="webp",mc=96,fc=96,pc="srgb",gc=4,xc="uchar",yc=288,bc=!1,wc=!1,vc=!0,$c="/assets/cloud-foggy-o4a3hmky.webp",jc={format:hc,width:mc,height:fc,space:pc,channels:gc,depth:xc,density:yc,isProgressive:bc,hasProfile:wc,hasAlpha:vc,src:$c},Nc="webp",_c=96,kc=96,Cc="srgb",Sc=4,Mc="uchar",Pc=288,Dc=!1,Tc=!1,Ac=!0,Ec="/assets/cloudy-co8vwrk7.webp",Lc={format:Nc,width:_c,height:kc,space:Cc,channels:Sc,depth:Mc,density:Pc,isProgressive:Dc,hasProfile:Tc,hasAlpha:Ac,src:Ec},Ic="webp",Fc=96,Rc=96,Oc="srgb",Hc=4,Uc="uchar",zc=288,Bc=!1,Wc=!1,Yc=!0,qc="/assets/heavy-snow-mke52kag.webp",Gc={format:Ic,width:Fc,height:Rc,space:Oc,channels:Hc,depth:Uc,density:zc,isProgressive:Bc,hasProfile:Wc,hasAlpha:Yc,src:qc},Vc="webp",Zc=96,Xc=96,Kc="srgb",Jc=4,Qc="uchar",el=288,tl=!1,sl=!1,nl=!0,ol="/assets/light-snow-mcy1l7t9.webp",al={format:Vc,width:Zc,height:Xc,space:Kc,channels:Jc,depth:Qc,density:el,isProgressive:tl,hasProfile:sl,hasAlpha:nl,src:ol},rl="webp",il=96,cl=96,ll="srgb",dl=4,ul="uchar",hl=288,ml=!1,fl=!1,pl=!0,gl="/assets/moon-drizzle-cplxr2ub.webp",xl={format:rl,width:il,height:cl,space:ll,channels:dl,depth:ul,density:hl,isProgressive:ml,hasProfile:fl,hasAlpha:pl,src:gl},yl="webp",bl=96,wl=96,vl="srgb",$l=4,jl="uchar",Nl=288,_l=!1,kl=!1,Cl=!0,Sl="/assets/moon-hazy-jvgt25bp.webp",Ml={format:yl,width:bl,height:wl,space:vl,channels:$l,depth:jl,density:Nl,isProgressive:_l,hasProfile:kl,hasAlpha:Cl,src:Sl},Pl="webp",Dl=96,Tl=96,Al="srgb",El=4,Ll="uchar",Il=288,Fl=!1,Rl=!1,Ol=!0,Hl="/assets/moon-mostly-cloudy-cia3do0v.webp",Ul={format:Pl,width:Dl,height:Tl,space:Al,channels:El,depth:Ll,density:Il,isProgressive:Fl,hasProfile:Rl,hasAlpha:Ol,src:Hl},zl="webp",Bl=96,Wl=96,Yl="srgb",ql=4,Gl="uchar",Vl=288,Zl=!1,Xl=!1,Kl=!0,Jl="/assets/moon-mostly-sunny-n3mh1b6a.webp",Ql={format:zl,width:Bl,height:Wl,space:Yl,channels:ql,depth:Gl,density:Vl,isProgressive:Zl,hasProfile:Xl,hasAlpha:Kl,src:Jl},ed="webp",td=96,sd=96,nd="srgb",od=4,ad="uchar",rd=288,id=!1,cd=!1,ld=!0,dd="/assets/moon-shower-ntzhti9o.webp",ud={format:ed,width:td,height:sd,space:nd,channels:od,depth:ad,density:rd,isProgressive:id,hasProfile:cd,hasAlpha:ld,src:dd},hd="webp",md=96,fd=96,pd="srgb",gd=4,xd="uchar",yd=288,bd=!1,wd=!1,vd=!0,$d="/assets/moon-sunny-eg2emh4d.webp",jd={format:hd,width:md,height:fd,space:pd,channels:gd,depth:xd,density:yd,isProgressive:bd,hasProfile:wd,hasAlpha:vd,src:$d},Nd="webp",_d=96,kd=96,Cd="srgb",Sd=4,Md="uchar",Pd=288,Dd=!1,Td=!1,Ad=!0,Ed="/assets/rain-thunder-bx7a0l5g.webp",Ld={format:Nd,width:_d,height:kd,space:Cd,channels:Sd,depth:Md,density:Pd,isProgressive:Dd,hasProfile:Td,hasAlpha:Ad,src:Ed},Id="webp",Fd=96,Rd=96,Od="srgb",Hd=4,Ud="uchar",zd=288,Bd=!1,Wd=!1,Yd=!0,qd="/assets/rain-cxs76xuj.webp",Gd={format:Id,width:Fd,height:Rd,space:Od,channels:Hd,depth:Ud,density:zd,isProgressive:Bd,hasProfile:Wd,hasAlpha:Yd,src:qd},Vd="webp",Zd=96,Xd=96,Kd="srgb",Jd=4,Qd="uchar",eu=288,tu=!1,su=!1,nu=!0,ou="/assets/sleet-gc63vwmo.webp",au={format:Vd,width:Zd,height:Xd,space:Kd,channels:Jd,depth:Qd,density:eu,isProgressive:tu,hasProfile:su,hasAlpha:nu,src:ou},ru="webp",iu=96,cu=96,lu="srgb",du=4,uu="uchar",hu=288,mu=!1,fu=!1,pu=!0,gu="/assets/snow-d0k6tmmc.webp",xu={format:ru,width:iu,height:cu,space:lu,channels:du,depth:uu,density:hu,isProgressive:mu,hasProfile:fu,hasAlpha:pu,src:gu},yu="webp",bu=96,wu=96,vu="srgb",$u=4,ju="uchar",Nu=288,_u=!1,ku=!1,Cu=!0,Su="/assets/sun-drizzle-g94obr5e.webp",Mu={format:yu,width:bu,height:wu,space:vu,channels:$u,depth:ju,density:Nu,isProgressive:_u,hasProfile:ku,hasAlpha:Cu,src:Su},Pu="webp",Du=96,Tu=96,Au="srgb",Eu=4,Lu="uchar",Iu=288,Fu=!1,Ru=!1,Ou=!0,Hu="/assets/sun-hazy-c3z1j0hy.webp",Uu={format:Pu,width:Du,height:Tu,space:Au,channels:Eu,depth:Lu,density:Iu,isProgressive:Fu,hasProfile:Ru,hasAlpha:Ou,src:Hu},zu="webp",Bu=96,Wu=96,Yu="srgb",qu=4,Gu="uchar",Vu=288,Zu=!1,Xu=!1,Ku=!0,Ju="/assets/sun-mostly-cloudy-d4o4zkga.webp",Qu={format:zu,width:Bu,height:Wu,space:Yu,channels:qu,depth:Gu,density:Vu,isProgressive:Zu,hasProfile:Xu,hasAlpha:Ku,src:Ju},eh="webp",th=96,sh=96,nh="srgb",oh=4,ah="uchar",rh=288,ih=!1,ch=!1,lh=!0,dh="/assets/sun-mostly-sunny-livrdkgu.webp",uh={format:eh,width:th,height:sh,space:nh,channels:oh,depth:ah,density:rh,isProgressive:ih,hasProfile:ch,hasAlpha:lh,src:dh},hh="webp",mh=96,fh=96,ph="srgb",gh=4,xh="uchar",yh=288,bh=!1,wh=!1,vh=!0,$h="/assets/sun-shower-lvtjthah.webp",jh={format:hh,width:mh,height:fh,space:ph,channels:gh,depth:xh,density:yh,isProgressive:bh,hasProfile:wh,hasAlpha:vh,src:$h},Nh="webp",_h=96,kh=96,Ch="srgb",Sh=4,Mh="uchar",Ph=288,Dh=!1,Th=!1,Ah=!0,Eh="/assets/sun-sunny-kqjpjzd8.webp",Lh={format:Nh,width:_h,height:kh,space:Ch,channels:Sh,depth:Mh,density:Ph,isProgressive:Dh,hasProfile:Th,hasAlpha:Ah,src:Eh},Ih="webp",Fh=96,Rh=96,Oh="srgb",Hh=4,Uh="uchar",zh=288,Bh=!1,Wh=!1,Yh=!0,qh="/assets/thunder-jgjqg9ai.webp",Gh={format:Ih,width:Fh,height:Rh,space:Oh,channels:Hh,depth:Uh,density:zh,isProgressive:Bh,hasProfile:Wh,hasAlpha:Yh,src:qh},Vh="webp",Zh=96,Xh=96,Kh="srgb",Jh=4,Qh="uchar",em=288,tm=!1,sm=!1,nm=!0,om="/assets/tornado-opa24tq3.webp",am={format:Vh,width:Zh,height:Xh,space:Kh,channels:Jh,depth:Qh,density:em,isProgressive:tm,hasProfile:sm,hasAlpha:nm,src:om},rm="webp",im=96,cm=96,lm="srgb",dm=4,um="uchar",hm=288,mm=!1,fm=!1,pm=!0,gm="/assets/windy-mw0a3u21.webp",xm={format:rm,width:im,height:cm,space:lm,channels:dm,depth:um,density:hm,isProgressive:mm,hasProfile:fm,hasAlpha:pm,src:gm},ym="webp",bm=96,wm=96,vm="srgb",$m=4,jm="uchar",Nm=288,_m=!1,km=!1,Cm=!0,Sm="/assets/cloud-foggy-fhg0jn0w.webp",Mm={format:ym,width:bm,height:wm,space:vm,channels:$m,depth:jm,density:Nm,isProgressive:_m,hasProfile:km,hasAlpha:Cm,src:Sm},Pm="webp",Dm=96,Tm=96,Am="srgb",Em=4,Lm="uchar",Im=288,Fm=!1,Rm=!1,Om=!0,Hm="/assets/cloudy-disd26f3.webp",Um={format:Pm,width:Dm,height:Tm,space:Am,channels:Em,depth:Lm,density:Im,isProgressive:Fm,hasProfile:Rm,hasAlpha:Om,src:Hm},zm="webp",Bm=96,Wm=96,Ym="srgb",qm=4,Gm="uchar",Vm=288,Zm=!1,Xm=!1,Km=!0,Jm="/assets/heavy-snow-g6jjwo2d.webp",Qm={format:zm,width:Bm,height:Wm,space:Ym,channels:qm,depth:Gm,density:Vm,isProgressive:Zm,hasProfile:Xm,hasAlpha:Km,src:Jm},ef="webp",tf=96,sf=96,nf="srgb",of=4,af="uchar",rf=288,cf=!1,lf=!1,df=!0,uf="/assets/light-snow-iz0efpkh.webp",hf={format:ef,width:tf,height:sf,space:nf,channels:of,depth:af,density:rf,isProgressive:cf,hasProfile:lf,hasAlpha:df,src:uf},mf="webp",ff=96,pf=96,gf="srgb",xf=4,yf="uchar",bf=288,wf=!1,vf=!1,$f=!0,jf="/assets/moon-drizzle-b1nfv39c.webp",Nf={format:mf,width:ff,height:pf,space:gf,channels:xf,depth:yf,density:bf,isProgressive:wf,hasProfile:vf,hasAlpha:$f,src:jf},_f="webp",kf=96,Cf=96,Sf="srgb",Mf=4,Pf="uchar",Df=288,Tf=!1,Af=!1,Ef=!0,Lf="/assets/moon-hazy-nfnzea7a.webp",If={format:_f,width:kf,height:Cf,space:Sf,channels:Mf,depth:Pf,density:Df,isProgressive:Tf,hasProfile:Af,hasAlpha:Ef,src:Lf},Ff="webp",Rf=96,Of=96,Hf="srgb",Uf=4,zf="uchar",Bf=288,Wf=!1,Yf=!1,qf=!0,Gf="/assets/moon-mostly-cloudy-e56e3z55.webp",Vf={format:Ff,width:Rf,height:Of,space:Hf,channels:Uf,depth:zf,density:Bf,isProgressive:Wf,hasProfile:Yf,hasAlpha:qf,src:Gf},Zf="webp",Xf=96,Kf=96,Jf="srgb",Qf=4,ep="uchar",tp=288,sp=!1,np=!1,op=!0,ap="/assets/moon-mostly-sunny-ffu4gzf4.webp",rp={format:Zf,width:Xf,height:Kf,space:Jf,channels:Qf,depth:ep,density:tp,isProgressive:sp,hasProfile:np,hasAlpha:op,src:ap},ip="webp",cp=96,lp=96,dp="srgb",up=4,hp="uchar",mp=288,fp=!1,pp=!1,gp=!0,xp="/assets/moon-shower-e5dy9u48.webp",yp={format:ip,width:cp,height:lp,space:dp,channels:up,depth:hp,density:mp,isProgressive:fp,hasProfile:pp,hasAlpha:gp,src:xp},bp="webp",wp=96,vp=96,$p="srgb",jp=4,Np="uchar",_p=288,kp=!1,Cp=!1,Sp=!0,Mp="/assets/moon-sunny-d9o08xiw.webp",Pp={format:bp,width:wp,height:vp,space:$p,channels:jp,depth:Np,density:_p,isProgressive:kp,hasProfile:Cp,hasAlpha:Sp,src:Mp},Dp="webp",Tp=96,Ap=96,Ep="srgb",Lp=4,Ip="uchar",Fp=288,Rp=!1,Op=!1,Hp=!0,Up="/assets/rain-thunder-eplemvu1.webp",zp={format:Dp,width:Tp,height:Ap,space:Ep,channels:Lp,depth:Ip,density:Fp,isProgressive:Rp,hasProfile:Op,hasAlpha:Hp,src:Up},Bp="webp",Wp=96,Yp=96,qp="srgb",Gp=4,Vp="uchar",Zp=288,Xp=!1,Kp=!1,Jp=!0,Qp="/assets/rain-ogayr6kt.webp",eg={format:Bp,width:Wp,height:Yp,space:qp,channels:Gp,depth:Vp,density:Zp,isProgressive:Xp,hasProfile:Kp,hasAlpha:Jp,src:Qp},tg="webp",sg=96,ng=96,og="srgb",ag=4,rg="uchar",ig=288,cg=!1,lg=!1,dg=!0,ug="/assets/sleet-o8noil7l.webp",hg={format:tg,width:sg,height:ng,space:og,channels:ag,depth:rg,density:ig,isProgressive:cg,hasProfile:lg,hasAlpha:dg,src:ug},mg="webp",fg=96,pg=96,gg="srgb",xg=4,yg="uchar",bg=288,wg=!1,vg=!1,$g=!0,jg="/assets/snow-lq4cl3uc.webp",Ng={format:mg,width:fg,height:pg,space:gg,channels:xg,depth:yg,density:bg,isProgressive:wg,hasProfile:vg,hasAlpha:$g,src:jg},_g="webp",kg=96,Cg=96,Sg="srgb",Mg=4,Pg="uchar",Dg=288,Tg=!1,Ag=!1,Eg=!0,Lg="/assets/sun-drizzle-htsohv65.webp",Ig={format:_g,width:kg,height:Cg,space:Sg,channels:Mg,depth:Pg,density:Dg,isProgressive:Tg,hasProfile:Ag,hasAlpha:Eg,src:Lg},Fg="webp",Rg=96,Og=96,Hg="srgb",Ug=4,zg="uchar",Bg=288,Wg=!1,Yg=!1,qg=!0,Gg="/assets/sun-hazy-nfj7clcd.webp",Vg={format:Fg,width:Rg,height:Og,space:Hg,channels:Ug,depth:zg,density:Bg,isProgressive:Wg,hasProfile:Yg,hasAlpha:qg,src:Gg},Zg="webp",Xg=96,Kg=96,Jg="srgb",Qg=4,ex="uchar",tx=288,sx=!1,nx=!1,ox=!0,ax="/assets/sun-mostly-cloudy-e3pqqgs7.webp",rx={format:Zg,width:Xg,height:Kg,space:Jg,channels:Qg,depth:ex,density:tx,isProgressive:sx,hasProfile:nx,hasAlpha:ox,src:ax},ix="webp",cx=96,lx=96,dx="srgb",ux=4,hx="uchar",mx=288,fx=!1,px=!1,gx=!0,xx="/assets/sun-mostly-sunny-o99k1c7a.webp",yx={format:ix,width:cx,height:lx,space:dx,channels:ux,depth:hx,density:mx,isProgressive:fx,hasProfile:px,hasAlpha:gx,src:xx},bx="webp",wx=96,vx=96,$x="srgb",jx=4,Nx="uchar",_x=288,kx=!1,Cx=!1,Sx=!0,Mx="/assets/sun-shower-ldwl4jbp.webp",Px={format:bx,width:wx,height:vx,space:$x,channels:jx,depth:Nx,density:_x,isProgressive:kx,hasProfile:Cx,hasAlpha:Sx,src:Mx},Dx="webp",Tx=96,Ax=96,Ex="srgb",Lx=4,Ix="uchar",Fx=!1,Rx=!1,Ox=!0,Hx="/assets/sun-sunny-kqjpjzd8.webp",Ux={format:Dx,width:Tx,height:Ax,space:Ex,channels:Lx,depth:Ix,isProgressive:Fx,hasProfile:Rx,hasAlpha:Ox,src:Hx},zx="webp",Bx=96,Wx=96,Yx="srgb",qx=4,Gx="uchar",Vx=288,Zx=!1,Xx=!1,Kx=!0,Jx="/assets/thunder-xzn1cku3.webp",Qx={format:zx,width:Bx,height:Wx,space:Yx,channels:qx,depth:Gx,density:Vx,isProgressive:Zx,hasProfile:Xx,hasAlpha:Kx,src:Jx},ey="webp",ty=96,sy=96,ny="srgb",oy=4,ay="uchar",ry=288,iy=!1,cy=!1,ly=!0,dy="/assets/tornado-diqu61wg.webp",uy={format:ey,width:ty,height:sy,space:ny,channels:oy,depth:ay,density:ry,isProgressive:iy,hasProfile:cy,hasAlpha:ly,src:dy},hy="webp",my=96,fy=96,py="srgb",gy=4,xy="uchar",yy=288,by=!1,wy=!1,vy=!0,$y="/assets/windy-n2v8wtyp.webp",jy={format:hy,width:my,height:fy,space:py,channels:gy,depth:xy,density:yy,isProgressive:by,hasProfile:wy,hasAlpha:vy,src:$y},Ny={foggy:{default:jc},cloudy:{default:Lc},"heavy-snow":{default:Gc},"light-snow":{default:al},sleet:{default:au},drizzle:{default:Mu,night:xl},hazy:{default:Uu,night:Ml},"mostly-cloudy":{default:Qu,night:Ul},"mostly-sunny":{default:uh,night:Ql},shower:{default:jh,night:ud},sunny:{default:Lh,night:jd},"rain-thunder":{default:Ld},rain:{default:Gd},snow:{default:xu},thunder:{default:Gh},tornado:{default:am},windy:{default:xm}},_y={foggy:{default:Mm},cloudy:{default:Um},"heavy-snow":{default:Qm},"light-snow":{default:hf},sleet:{default:hg},drizzle:{default:Ig,night:Nf},hazy:{default:Vg,night:If},"mostly-cloudy":{default:rx,night:Vf},"mostly-sunny":{default:yx,night:rp},shower:{default:Px,night:yp},sunny:{default:Ux,night:Pp},"rain-thunder":{default:zp},rain:{default:eg},snow:{default:Ng},thunder:{default:Qx},tornado:{default:uy},windy:{default:jy}};function ky({weatherCode:e,isDarkMode:t,isNight:s}){const n=t?_y:Ny,a=Cy(e),r=n[a];return r.night&&s?r.night:r.default}function Cy(e){switch(e){case 1:case 33:return"sunny";case 2:case 3:case 34:case 35:case 36:return"mostly-sunny";case 4:case 6:case 13:case 14:case 38:return"mostly-cloudy";case 5:case 37:return"hazy";case 7:case 8:return"cloudy";case 11:return"foggy";case 12:case 39:case 40:return"shower";case 15:case 16:case 17:case 41:case 42:return"thunder";case 18:return"rain";case 19:case 20:case 21:case 43:return"light-snow";case 22:case 23:case 44:return"snow";case 24:case 25:case 26:case 29:return"sleet";case 32:return"windy";default:return"cloudy"}}const Sy="C";function My(e,t){return Math.round(e==="F"?t*9/5+32:(t-32)*5/9)}function qt(e,t,s=Sy){return e===s?`${Math.round(t)}°`:`${My(e,t)}°`}const Py=7,Gt=8,Dy=f.memo(function({weatherResults:t,dateRange:s,turnIndex:n,trackContentReferenceEvent:a}){const[r,i]=zy(),c=Ey(t);f.useEffect(()=>{a(v.searchContentReferenceShown,"search_content_reference_shown","forecast")},[a]);const{daily:l,hourly:u,historical:d}=t;let h="daily";if(s||u&&l.length<2)h="hourly";else if(l.length>0)h="daily";else if(d&&d?.length>0)h="historical";else return null;return o.jsxs("div",{className:"relative",children:[c?o.jsxs(o.Fragment,{children:[o.jsx(Ay,{weatherResults:t}),o.jsx(Ly,{weatherResults:t,temperatureUnit:r,setTemperatureUnit:i})]}):o.jsx("div",{className:"absolute right-0 top-3 z-10 rounded bg-token-main-surface-primary",children:o.jsx(zs,{onTemperatureUnitChange:i,temperatureUnit:r})}),o.jsx(Oy,{turnIndex:n}),h==="hourly"&&o.jsx(Iy,{weatherResults:t,temperatureUnit:r,dateRange:s}),h==="daily"&&o.jsx(Fy,{dailyForecast:l.slice(0,Py),temperatureUnit:r}),h==="historical"&&o.jsx(Ry,{historical:d,temperatureUnit:r})]})});function Ty({weatherAlert:e}){const[t,s]=f.useState(!1),n=P(),a=Ue(),r=L(e.start_timestamp,e.utc_offset_sec),i=e.end_timestamp?L(e.end_timestamp,e.utc_offset_sec):null,c=o.jsxs(o.Fragment,{children:[o.jsx("div",{children:o.jsx(N,{id:"JnuGPS",defaultMessage:"{start}{separator}{end}",values:{start:n.formatDate(r,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}),separator:i?" - ":"",end:i?n.formatDate(i,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):""}})}),o.jsx("div",{children:e.summary})]});return o.jsxs("button",{className:"my-2 flex w-full flex-col gap-2 rounded-xl border border-red-200 bg-red-100 px-4 py-3 text-left text-sm text-red-800",onClick:()=>s(!t),children:[o.jsxs("div",{className:"flex w-full items-center gap-4",children:[o.jsx(wn,{className:"h-9 w-9 shrink-0"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"font-bold",children:o.jsx(N,{id:"y+fy/l",defaultMessage:"Severe Weather: {name}",values:{name:e.name}})}),a&&c]}),o.jsx("div",{className:"flex-grow"}),o.jsx("div",{className:"opacity-30",children:t?o.jsx(Eo,{className:"icon-lg"}):o.jsx(Ao,{className:"icon-lg"})})]}),t&&e.details&&o.jsxs(o.Fragment,{children:[!a&&c,o.jsx("div",{className:"mt-1 whitespace-pre-wrap",children:e.details.trim()})]})]})}function Ay({weatherResults:e}){const{severe:t}=e;return t?o.jsx("div",{className:"my-2",children:t.map((s,n)=>o.jsx(Ty,{weatherAlert:s},n))}):null}function Ey(e){const{historical:t,daily:s,hourly:n,current:a}=e;if(!a)return!1;let r=!1;const i=L(a.timestamp,a.utc_offset_sec);for(const c of[t,s,n])c&&(r=r||c?.some(l=>yn(i,L(l.timestamp,l.utc_offset_sec))));return r}function Ly({weatherResults:e,temperatureUnit:t,setTemperatureUnit:s}){const n=P(),{current:a}=e;if(!a)return null;const r=a.temperature.current,i=a.description,c=r!=null&&i&&" · ";return o.jsxs("div",{className:"not-prose flex items-center gap-4",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsxs("div",{className:"text-lg font-semibold",children:[r!=null&&o.jsx(N,{id:"FiwByI",defaultMessage:"Currently {temperature}",values:{temperature:O(n,r,t)}}),c,i.description]}),o.jsx("div",{className:"text-token-text-secondary",children:Uy(e.location)})]}),o.jsxs("div",{className:"flex",children:[o.jsx(zs,{onTemperatureUnitChange:s,temperatureUnit:t}),o.jsx(Je,{weatherDescriptionData:i,isNight:a.night})]})]})}function Ke({children:e}){return o.jsx("div",{className:"no-scrollbar not-prose mt-1 overflow-auto sm:overflow-hidden",children:o.jsx(T.Root,{className:"min-w-0",children:o.jsx(T.Body,{className:"border-b-[0.5px] border-token-border-medium [&_tr:last-child]:border-b-0",children:e})})})}function Iy({weatherResults:e,temperatureUnit:t,dateRange:s}){const n=P(),{hourly:a,current:r}=e;let i=a??[];s&&(i=i.filter(d=>d.timestamp>=s.start_timestamp&&d.timestamp<s.end_timestamp));const[c,l]=f.useState(!1),u=i.length>Gt;if(!c&&u){const d=i[0],h=L(d.timestamp,d.utc_offset_sec);let x=!1;if(r){const m=L(r.timestamp,r.utc_offset_sec);h.getTime()-m.getTime()>8*60*60*1e3&&i.length>18&&(i=i.slice(7,18),x=!0)}x||(i=i.slice(0,Gt))}return o.jsxs(Ke,{children:[i.map((d,h)=>o.jsxs(T.Row,{children:[o.jsxs(E,{className:"w-44",children:[o.jsx(Je,{weatherDescriptionData:d.description,isNight:d.night,size:"small"}),o.jsx("div",{className:"ml-3 whitespace-nowrap",children:o.jsx("span",{className:"lowercase",children:Hy(n,d)})})]}),o.jsx(E,{className:"w-[60px] tabular-nums",children:o.jsx("div",{children:O(n,d.temperature.current,t)})}),o.jsx(E,{children:d.description.description})]},h)),u&&o.jsx(T.Row,{children:o.jsx(E,{className:"w-44",children:o.jsx(ss,{color:"secondary",onClick:()=>l(!c),size:"small",children:c?o.jsx(N,{id:"KoC8Ym",defaultMessage:"Show less"}):o.jsx(N,{id:"X8F8Y/",defaultMessage:"Show more"})})})})]})}function Fy({dailyForecast:e,temperatureUnit:t}){const s=P();return o.jsx(Ke,{children:e.map((n,a)=>o.jsxs(T.Row,{children:[o.jsxs(E,{className:"w-[7.5rem] min-w-[7.5rem]",children:[o.jsx(Je,{weatherDescriptionData:n.description,isNight:n.night,size:"small"}),o.jsx("div",{className:"ml-3 whitespace-nowrap",children:Le(s,L(n.timestamp,n.utc_offset_sec))})]}),o.jsxs(E,{className:"tabular-nums",children:[o.jsx("div",{children:O(s,n.temperature.max,t)}),o.jsx("div",{className:"ml-1 text-token-text-secondary",children:O(s,n.temperature.min,t)})]}),o.jsx(E,{className:"min-w-80",children:n.description.description})]},a))})}function Ry({historical:e,temperatureUnit:t}){const s=P();return e?o.jsx(Ke,{children:e.map((n,a)=>{const r=L(n.timestamp,n.utc_offset_sec);return o.jsxs(T.Row,{children:[o.jsx(E,{className:"w-[250px]",children:o.jsx("div",{className:"ml-3 whitespace-nowrap",children:s.formatDate(r,{weekday:"long",month:"short",day:"numeric"})})}),o.jsx(E,{className:"tabular-nums",children:n.temperature.max&&n.temperature.min?o.jsxs(o.Fragment,{children:[o.jsx("div",{children:O(s,n.temperature.max,t)}),o.jsx("div",{className:"ml-1 text-token-text-secondary",children:O(s,n.temperature.min,t)})]}):o.jsx("div",{children:O(s,n.temperature.current,t)})}),o.jsx(E,{})]},a)})}):null}function E({className:e,children:t}){return o.jsx(T.Cell,{className:_("!border-l-0 !border-r-0 !border-token-border-xlight !py-2 !pl-4 !pr-3 first:!pl-0 last:!pr-0",e),divClassName:"items-start leading-relaxed",children:t})}function Oy({turnIndex:e}){const t=co(n=>n.thread?.turns[e]?.use_location),[s]=ao();return!s.useLocation&&t?o.jsx("div",{className:"mt-3",children:o.jsx(ss,{color:"secondary",icon:uc,onClick:()=>{ro.setSettingsModalOpen(!0)},children:o.jsx(N,{id:"f47VEc",defaultMessage:"Share precise location"})})}):null}function zs({temperatureUnit:e,onTemperatureUnitChange:t}){const s=n=>e===n?"font-bold":"font-light";return o.jsx(Bn,{size:"small",triggerButton:o.jsx("button",{className:"flex items-center justify-center p-1.5 text-token-text-tertiary hover:text-token-text-primary",children:o.jsx(bn,{className:"icon-sm-heavy"})}),children:o.jsxs(Wn.Item,{onClick:()=>{t(e==="C"?"F":"C")},className:"text-token-text-primary",children:[o.jsx(N,{id:"bQIoe/",defaultMessage:"Temperature"}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:s("F"),children:o.jsx(N,{id:"bvDeBB",defaultMessage:"°F"})}),o.jsx("div",{className:"mx-1 h-4 border-l border-gray-300"}),o.jsx("div",{className:s("C"),children:o.jsx(N,{id:"iNiz6O",defaultMessage:"°C"})})]})]})})}function Je({weatherDescriptionData:e,isNight:t=!1,size:s="normal"}){const n=he(),a=s==="small"?30:50;return o.jsx("img",{draggable:!1,alt:e.description,src:ky({weatherCode:e.id,isDarkMode:n,isNight:t}).src,width:a,height:a})}function Hy(e,t){const s=L(t.timestamp,t.utc_offset_sec);return e.formatDate(s,{hour:"numeric"})}function O(e,t,s){return t==null?"-":qt(s?s??"F":Bs(e),t)}function Bs(e){const t=["en-US","en-BZ","en-BS","en-KY","en-PW"],s=e.locale||"en-US";return t.includes(s)?"F":"C"}function Uy(e){const t=e.name.split(",").map(s=>s.trim());return e.country&&!t.includes(e.country)&&t.push(e.country),t.join(", ")}const zy=()=>{const e=P(),[t,s]=io("USER_TEMPERATURE_UNIT",Bs(e),n=>["F","C"].includes(n));return[t,s]},By=Yn(()=>qn(()=>import("./c3j4246zja1wwlho.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])).then(e=>e.BusinessesMap));function Wy({index:e,FormattedText:t,node:s}){const n=parseInt(e,10),a=f.useContext(J),{value:r}=ns("756982148"),i=vn(a?.analyticsMetadata),c=f.useRef(!1);if(a==null)return null;const{contentReferences:l,onShowSearchResults:u,numImageResults:d,analyticsMetadata:h,message:x}=a,m=l?.[n],g=h?.clientThreadId==null;if(!m||h.turnIndex===void 0||m.type===void 0)return null;let p=null;switch(m.type){case"title_citation":p=o.jsx(oc,{metadata:m,trackContentReferenceEvent:i});break;case"location_search":p=o.jsx(Fi,{metadata:m,trackContentReferenceEvent:i});break;case"time":p=o.jsx(nc,{metadata:m,trackContentReferenceEvent:i});break;case"image_v2":p=o.jsx(ws,{metadata:m,numImageResults:d??0,analyticsMetadata:h,trackContentReferenceEvent:i});break;case"cot_sources":p=o.jsx(zr,{metadata:m,trackContentReferenceEvent:i});break;case"nav_list":p=o.jsx(Ri,{metadata:m,trackContentReferenceEvent:i});break;case"file_navlist":p=o.jsx(Kr,{metadata:m,trackContentReferenceEvent:i});break;case"file":p=o.jsx(Gr,{fileRef:m,index:n,trackContentReferenceEvent:i});break;case"grouped_webpages_model_predicted_fallback":p=o.jsx(so,{webpageRef:m,node:s,trackContentReferenceEvent:i,messageId:a.message.id,index:n});break;case"grouped_webpages":p=o.jsx(to,{webpageRef:m,node:s,trackContentReferenceEvent:i,messageId:a.message.id,index:n});break;case"tldr":p=r?o.jsx(lt,{navigation:{...m,type:"navigation",domains:[{title:m.page_title,subtitle:m.display_title,domain:m.breadcrumbs[0],url:m.url,sub_domains:[]}]},onShowSearchResults:u,trackContentReferenceEvent:i}):o.jsx($n,{tldr:m,trackContentReferenceEvent:i});break;case"navigation":p=o.jsx(lt,{navigation:m,onShowSearchResults:u,trackContentReferenceEvent:i});break;case"stock":p=o.jsx(Ai,{contentReference:m,trackContentReferenceEvent:i});break;case"calculator":p=o.jsx(Lr,{data:m,trackContentReferenceEvent:i});break;case"code_execution":p=o.jsx(Or,{FormattedText:t,displayInfo:m,trackContentReferenceEvent:i});break;case"forecast":p=m?.forecast&&o.jsx(Dy,{weatherResults:m.forecast,dateRange:m.date_range,turnIndex:h.turnIndex,trackContentReferenceEvent:i});break;case"businesses_map":p=o.jsx(By,{contentReference:m,trackContentReferenceEvent:i});break;case"video":p=o.jsx(dc,{video:m,trackContentReferenceEvent:i});break;case"sources_footnote":p=o.jsx(jn,{sourcesFootnote:m,onShowSearchResults:u,trackContentReferenceEvent:i,isSearchGptApp:g});break;case"sports_standings":p=o.jsx(tc,{standingsRef:m,trackContentReferenceEvent:i});break;case"sports_schedule":p=o.jsx(Ki,{scheduleRef:m,trackContentReferenceEvent:i});break;case"attribution":p=o.jsx(Dr,{attribution:m});break;case"debug":p=o.jsx(o.Fragment,{children:Object.entries(m).map(([y,w])=>o.jsx("sub",{className:"ml-1 w-fit rounded-md border-2 border-solid border-orange-500 px-1 leading-none",children:w},y))});break;case"image_inline":p=o.jsx(Za,{reference:m,clientThreadId:a.clientThreadId,trackContentReferenceEvent:i,message:x});break;case"product_reviews":p=!1;break;case"product":p=!1;break;case"products":p=!1;break}return o.jsx(os,{name:"content-reference-renderer",fallback:y=>(c.current||(i(v.searchContentReferenceFailed,"search_content_reference_failed",m.type),ze.addError(`Error rendering content reference: ${m.type}`,{...y,contentReference:m}),c.current=!0),m?.alt?o.jsx(qe,{components:{img:({src:w,alt:j})=>o.jsx("img",{src:w,alt:j,className:"max-h-28"})},children:m.alt}):o.jsx("span",{className:`errored-object-${m.type}`})),children:p})}function Yy(e){const{src:t,clientThreadId:s,...n}=e,a=Be(s),r=f.useContext(J),i=as(a,t,r?.useSafeUrls);return i==null?o.jsx("div",{}):o.jsx("img",{...n,src:i})}function qy(e){return o.jsx(Wy,{...e,FormattedText:Ws})}function Ws({size:e="medium",children:t,className:s,clientThreadId:n,messageId:a,isActivelyStreaming:r=!1,componentOverrides:i,isDeepResearchResultMessage:c}){const l=he(),u=Re(),d=f.useMemo(()=>({pre:({children:m,"data-start":g,"data-end":p,"data-is-last-node":y})=>o.jsx("pre",{className:"!overflow-visible","data-start":g,"data-end":p,"data-is-last-node":y,children:m}),code:m=>o.jsx(ho,{...m,clientThreadId:n}),[es]:qy,[no]:oo,a:m=>{const{node:g,children:p,...y}=m,w=g?.properties?.href;if(typeof w=="string"&&w.startsWith(re))return u?o.jsx(_r,{...y}):n!=null&&a!=null?o.jsx(Nr,{...y,clientThreadId:n,messageId:a,href:w,children:p}):null;if(typeof w=="string"&&w===ps){const j=g?.children?.map(C=>typeof C.value=="string"?C.value:"").join("").trim();return o.jsx(Xo,{...m,text:j,clientThreadId:n,messageId:a,className:"cursor-pointer"})}return w&&typeof w=="string"&&za(w)?p:o.jsx(Ge,{...m,clientThreadId:n,messageId:a})},table:({children:m,...g})=>o.jsx("div",{className:"overflow-x-auto contain-inline-size",children:o.jsx("table",{...g,children:m})}),td:({children:m})=>o.jsx("td",{children:f.Children.map(m,(g,p)=>g==="<br>"?o.jsx("br",{},p):g)}),img:({node:m,...g})=>{const p=m?.properties?.src;return typeof p=="string"&&(p.startsWith(re)||p.startsWith("attachment:"))?null:o.jsx(Yy,{...g,clientThreadId:n})},...Yo,...i}),[i,n,a,u]),h=f.useMemo(()=>r?Ko(t):t,[t,r]),{value:x}=ns("1839283687");return x?!1:o.jsx(os,{name:"formatted_text_error",fallback:()=>o.jsx(o.Fragment,{children:h}),children:o.jsx(Vy,{rehypePlugins:Ds,remarkPlugins:Ze,className:_(s,"markdown prose w-full break-words dark:prose-invert",l?"dark":"light",e==="small"&&"prose-xs",c&&"deep-research-result"),urlTransform:Ps,components:d,children:h})})}async function Gy(e){const s=await Do().use(To).use(Ze).use(yo).use(Pr).use(Ua).process(e);return String(s)}const Vy=f.memo(qe),xb=Object.freeze(Object.defineProperty({__proto__:null,FormattedText:Ws,markdownToHtml:Gy},Symbol.toStringTag,{value:"Module"}));export{Ws as F,xb as a,Oo as s};
//# sourceMappingURL=kwmvqoiudcqyu1fy.js.map
