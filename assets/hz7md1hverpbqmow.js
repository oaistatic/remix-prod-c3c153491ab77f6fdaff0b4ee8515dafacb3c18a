const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/i0irgsjpymqey7ed.js","assets/fs6h2trisr1juto6.js","assets/d7a6rc8fexfzu7dt.js","assets/njq6ygky3ttysgdk.js","assets/root-cl538jor.css","assets/conversation-small-m9kq0y4e.css","assets/f426ftnka0mj72hs.js","assets/hrv8rdfcz5e1nz3e.js","assets/gvhvfcdqhc5unmaw.js","assets/ora9zmv2zdoi2bvo.js","assets/f25rpzpqicaw21n1.js","assets/d8bsurfrp22riggk.js","assets/nm04jgpfyxi6pn12.js","assets/emjevy1zmzft3tmm.js","assets/djlvx5j7aze6pw58.js"])))=>i.map(i=>d[i]);
import{r as u,j as I,a7 as da,a5 as Ci,M as It,e as $s,g as fa,R as xt,m as ha}from"./fs6h2trisr1juto6.js";import{u7 as uu,d as ga,u8 as du,nU as fu,bq as gn,u9 as xl,cB as hu,iV as gu,iU as mu,dt as pu,ua as wu,ub as vu,bB as yu,e4 as ma,ch as Ho,dj as $r,je as bu,it as xu,G as Cu,bI as ku,er as Su,is as pa,cg as Cl}from"./d7a6rc8fexfzu7dt.js";import{S as wa}from"./f426ftnka0mj72hs.js";import{D as bo,d as Nt,hO as Ru,gr as Mu,bR as va,P as Kn,a as qn,eD as Eu,c3 as Gn,cG as Tu,d6 as Iu,Z as Pu,ch as Du,cD as ya,bH as _u,I as Au,aq as Lu,bT as xo}from"./njq6ygky3ttysgdk.js";import{c as ba}from"./hrv8rdfcz5e1nz3e.js";import{d as Hu,e as zu,m as _o,t as Fu,r as bt,f as Ou,g as $u,v as Nu,h as xa,i as Co,A as Ca,P as ka,B as Sa,j as Wu,k as Bu,l as ju,S as Vu,C as Xu,a as Uu,L as Yu,p as Ku,b as qu,c as Gu,n as Zu,o as Qu}from"./f25rpzpqicaw21n1.js";import{r as hr}from"./d8bsurfrp22riggk.js";import{r as Ju}from"./nm04jgpfyxi6pn12.js";import{b as ed,c as td,d as nd,u as rd,e as od}from"./emjevy1zmzft3tmm.js";const Ns=e=>u.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},u.createElement("path",{d:"M11.9998 2C12.5521 2 12.9998 2.44772 12.9998 3V7C12.9998 7.55228 12.5521 8 11.9998 8C11.4475 8 10.9998 7.55228 10.9998 7V3C10.9998 2.44772 11.4475 2 11.9998 2ZM19.0709 4.92893C19.4614 5.31946 19.4614 5.95262 19.0709 6.34315L16.2424 9.17157C15.8519 9.5621 15.2188 9.5621 14.8282 9.17157C14.4377 8.78105 14.4377 8.14788 14.8282 7.75736L17.6567 4.92893C18.0472 4.53841 18.6804 4.53841 19.0709 4.92893ZM4.92874 4.92893C5.31926 4.53841 5.95243 4.53841 6.34295 4.92893L9.17138 7.75736C9.56191 8.14788 9.56191 8.78105 9.17138 9.17157C8.78086 9.5621 8.14769 9.5621 7.75717 9.17157L4.92874 6.34315C4.53822 5.95262 4.53822 5.31946 4.92874 4.92893ZM11.2927 11.2929C11.5605 11.0251 11.9567 10.9315 12.316 11.0513L21.316 14.0513C21.6997 14.1792 21.9686 14.5257 21.9973 14.9291C22.026 15.3326 21.8088 15.7135 21.447 15.8944L17.7452 17.7454L15.8942 21.4472C15.7134 21.809 15.3324 22.0262 14.9289 21.9975C14.5255 21.9688 14.179 21.6999 14.0511 21.3162L11.0511 12.3162C10.9313 11.9569 11.0249 11.5607 11.2927 11.2929ZM1.99658 12C1.99658 11.4477 2.4443 11 2.99658 11H6.99658C7.54887 11 7.99658 11.4477 7.99658 12C7.99658 12.5523 7.54887 13 6.99658 13H2.99658C2.4443 13 1.99658 12.5523 1.99658 12ZM13.5809 13.5811L15.1851 18.3934L16.1054 16.5528C16.2021 16.3593 16.3591 16.2023 16.5526 16.1056L18.3933 15.1852L13.5809 13.5811ZM9.17138 14.8284C9.56191 15.219 9.56191 15.8521 9.17138 16.2426L6.34295 19.0711C5.95243 19.4616 5.31926 19.4616 4.92874 19.0711C4.53822 18.6805 4.53822 18.0474 4.92874 17.6569L7.75717 14.8284C8.14769 14.4379 8.78086 14.4379 9.17138 14.8284Z",fill:"currentColor"})),id=({isHovered:e=!1})=>I.jsx(da,{children:e&&I.jsxs(Ci.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.2},className:"absolute bottom-2 right-2 flex items-center justify-center rounded-md border border-token-border-light bg-token-main-surface-primary px-3 py-2 text-xs text-token-text-secondary",children:[I.jsx(Ns,{className:"icon-md mr-2"}),I.jsx(It,{id:"ILz2tL",defaultMessage:"Interactive charts of this type not yet supported"})]})}),sd=e=>u.createElement("svg",{width:24,height:27,viewBox:"0 0 24 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},u.createElement("path",{d:"M2 11.8125C2 10.8805 2.67157 10.125 3.5 10.125H5.83C6.65843 10.125 7.33 10.8805 7.33 11.8125V20.8125C7.33 21.7445 6.65843 22.5 5.83 22.5H3.5C2.67157 22.5 2 21.7445 2 20.8125V11.8125Z",fill:"currentColor"}),u.createElement("path",{d:"M16.67 9.5625C16.67 8.63052 17.3416 7.875 18.17 7.875H20.5C21.3284 7.875 22 8.63052 22 9.5625V20.8125C22 21.7445 21.3284 22.5 20.5 22.5H18.17C17.3416 22.5 16.67 21.7445 16.67 20.8125V9.5625Z",fill:"currentColor"}),u.createElement("path",{d:"M9.33 5.0625C9.33 4.13052 10.0016 3.375 10.83 3.375H13.17C13.9984 3.375 14.67 4.13052 14.67 5.0625V21.375C14.67 21.9963 14.2223 22.5 13.67 22.5H10.33C9.77772 22.5 9.33 21.9963 9.33 21.375V5.0625Z",fill:"currentColor"})),Ra=e=>u.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 4C13 3.44772 13.4477 3 14 3C14.5523 3 15 3.44772 15 4V7.58579L19.2929 3.29289C19.6834 2.90237 20.3166 2.90237 20.7071 3.29289C21.0976 3.68342 21.0976 4.31658 20.7071 4.70711L16.4142 9H20C20.5523 9 21 9.44772 21 10C21 10.5523 20.5523 11 20 11H14C13.4477 11 13 10.5523 13 10V4ZM3 14C3 13.4477 3.44772 13 4 13H10C10.5523 13 11 13.4477 11 14V20C11 20.5523 10.5523 21 10 21C9.44772 21 9 20.5523 9 20V16.4142L4.70711 20.7071C4.31658 21.0976 3.68342 21.0976 3.29289 20.7071C2.90237 20.3166 2.90237 19.6834 3.29289 19.2929L7.58579 15H4C3.44772 15 3 14.5523 3 14Z",fill:"currentColor"})),ld=e=>u.createElement("svg",{width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},u.createElement("path",{d:"M10.5 6.80055L5.70329 3.16166C5.20939 2.78698 4.5 3.13925 4.5 3.75918V9.74882M12.75 8.50744L14.4869 9.82506C14.7731 10.0422 14.6196 10.4988 14.2602 10.4988H11.1068C10.828 10.4988 10.6467 10.7922 10.7714 11.0415L11.8719 13.2426C12.1497 13.7983 11.9245 14.4741 11.3688 14.7519L10.3812 15.2457C9.82551 15.5236 9.14975 15.2983 8.87188 14.7426L7.73268 12.4642C7.61821 12.2352 7.31309 12.1857 7.1321 12.3667L5.14017 14.3587C4.90393 14.5949 4.5 14.4276 4.5 14.0935V12.7488",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),u.createElement("path",{d:"M2.25 11.25L13.5 5.25",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),ad=e=>u.createElement("svg",{width:24,height:27,viewBox:"0 0 24 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},u.createElement("path",{d:"M2 12.375H11V22.5H5C3.34315 22.5 2 20.989 2 19.125V12.375Z",fill:"currentColor"}),u.createElement("path",{d:"M13 12.375H22V19.125C22 20.989 20.6569 22.5 19 22.5H13V12.375Z",fill:"currentColor"}),u.createElement("path",{d:"M5 4.5C3.34315 4.5 2 6.01104 2 7.875V10.125H22V7.875C22 6.01104 20.6569 4.5 19 4.5H5Z",fill:"currentColor"})),cd=e=>u.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},u.createElement("g",null,u.createElement("path",{id:"Subtract",fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 1.75C2.5335 1.75 1.75 2.5335 1.75 3.5V10.5C1.75 11.4665 2.5335 12.25 3.5 12.25H10.5C11.4665 12.25 12.25 11.4665 12.25 10.5V3.5C12.25 2.5335 11.4665 1.75 10.5 1.75H3.5ZM5.718 4.31567C5.52415 4.0572 5.15747 4.00482 4.899 4.19867C4.64053 4.39252 4.58815 4.7592 4.782 5.01767L6.26875 7L4.782 8.98233C4.58815 9.2408 4.64053 9.60748 4.899 9.80133C5.15747 9.99519 5.52415 9.9428 5.718 9.68433L7 7.975L8.282 9.68433C8.47585 9.9428 8.84253 9.99519 9.101 9.80133C9.35947 9.60748 9.41185 9.2408 9.218 8.98233L7.73125 7L9.218 5.01767C9.41185 4.7592 9.35947 4.39252 9.101 4.19867C8.84253 4.00482 8.47585 4.0572 8.282 4.31567L7 6.025L5.718 4.31567Z",fill:"currentColor"}))),ud=e=>u.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},u.createElement("g",null,u.createElement("path",{id:"Subtract",fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 1.75C2.5335 1.75 1.75 2.5335 1.75 3.5V10.5C1.75 11.4665 2.5335 12.25 3.5 12.25H10.5C11.4665 12.25 12.25 11.4665 12.25 10.5V3.5C12.25 2.5335 11.4665 1.75 10.5 1.75H3.5ZM5.718 4.31567C5.52415 4.0572 5.15747 4.00482 4.899 4.19867C4.64053 4.39252 4.58815 4.7592 4.782 5.01767L6.415 7.195V9.33333C6.415 9.65642 6.67691 9.91833 7 9.91833C7.32309 9.91833 7.585 9.65642 7.585 9.33333V7.195L9.218 5.01767C9.41185 4.7592 9.35947 4.39252 9.101 4.19867C8.84253 4.00482 8.47585 4.0572 8.282 4.31567L7 6.025L5.718 4.31567Z",fill:"currentColor"}))),Ma=u.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=u.useMemo(()=>n.map(o=>{const{data:i,label:s,colors:l}=o;return{label:s,data:i,backgroundColor:l,borderColor:l,borderRadius:4}}),[n]);return I.jsx(Hu,{ref:t,options:{responsive:!0,maintainAspectRatio:!1,plugins:{crosshair:!1,legend:{display:!1},title:{display:!1,text:e.title},tooltip:{enabled:!0,animation:{duration:0},mode:"point",position:"nearest",backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:6,left:16,right:16},yAlign:"bottom",callbacks:{title:function(o){return o[0].formattedValue},label:()=>""}}},scales:{x:{title:{display:!1},grid:{display:!1}},y:{title:{display:!1},grid:{lineWidth:o=>o.tick.value===0?0:1},border:{dash:[3,3]}}}},data:{labels:e.labels,datasets:r}})});Ma.displayName="BarChart";const Ea=e=>{if(typeof e=="string"){const t=parseFloat(e);return isNaN(t)?e:t.toFixed(2)}else if(typeof e=="number")return e.toFixed(2);return e},Ta=u.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=u.useMemo(()=>{const o=n.length;return n.map(i=>{const{data:s,label:l,colors:a}=i,c=s.length;return{label:l,data:s,backgroundColor:a,borderColor:a,pointRadius:0,pointHoverRadius:5,pointHitRadius:10,tension:.2,borderWidth:dd(o,c),pointBackgroundColor:["rgba(255, 255, 255, 1)"],pointBorderWidth:3,pointHoverBorderWidth:3}})},[n]);return I.jsx(zu,{ref:t,options:{maintainAspectRatio:!1,scales:{x:{title:{display:!1,text:e.x_label},grid:{display:!1},ticks:{callback:Ea}},y:{title:{display:!1,text:e.y_label},grid:{lineWidth:o=>o.tick.value===0?0:1},border:{dash:[3,3]}}},plugins:{legend:{display:!1},crosshair:!1,title:{display:!1,text:e.title},tooltip:{enabled:!0,mode:"point",animation:{duration:0},position:"nearest",backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:12,left:16,right:16},callbacks:{title:function(o){return o[0].label},label:function(o){const{dataset:{label:i},parsed:{y:s}}=o;return`${i?`${i}: `:""}${s.toFixed(2)}`}}}}},data:{labels:e.labels,datasets:r}})}),dd=(e,t)=>t>15?1:e>10?e>50?.5:1:3;Ta.displayName="LineChart";/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var kl=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),ko={toTextLines:function(e){var t=[],n;for(e=[].concat(e);e.length;)n=e.pop(),typeof n=="string"?t.unshift.apply(t,n.split(`
`)):Array.isArray(n)?e.push.apply(e,n):Co(e)||t.unshift(""+n);return t},textSize:function(e,t,n){var r=[].concat(t),o=r.length,i=e.font,s=0,l;for(e.font=n.string,l=0;l<o;++l)s=Math.max(e.measureText(r[l]).width,s);return e.font=i,{height:o*n.lineHeight,width:s}},bound:function(e,t,n){return Math.max(e,Math.min(t,n))},arrayDiff:function(e,t){var n=e.slice(),r=[],o,i,s,l;for(o=0,s=t.length;o<s;++o)l=t[o],i=n.indexOf(l),i===-1?r.push([l,1]):n.splice(i,1);for(o=0,s=n.length;o<s;++o)r.push([n[o],-1]);return r},rasterize:function(e){return Math.round(e*kl)/kl}};function hs(e,t){var n=t.x,r=t.y;if(n===null)return{x:0,y:-1};if(r===null)return{x:1,y:0};var o=e.x-n,i=e.y-r,s=Math.sqrt(o*o+i*i);return{x:s?o/s:0,y:s?i/s:-1}}function fd(e,t,n,r,o){switch(o){case"center":n=r=0;break;case"bottom":n=0,r=1;break;case"right":n=1,r=0;break;case"left":n=-1,r=0;break;case"top":n=0,r=-1;break;case"start":n=-n,r=-r;break;case"end":break;default:o*=Math.PI/180,n=Math.cos(o),r=Math.sin(o);break}return{x:e,y:t,vx:n,vy:r}}var hd=0,Ia=1,Pa=2,Da=4,_a=8;function li(e,t,n){var r=hd;return e<n.left?r|=Ia:e>n.right&&(r|=Pa),t<n.top?r|=_a:t>n.bottom&&(r|=Da),r}function gd(e,t){for(var n=e.x0,r=e.y0,o=e.x1,i=e.y1,s=li(n,r,t),l=li(o,i,t),a,c,d;!(!(s|l)||s&l);)a=s||l,a&_a?(c=n+(o-n)*(t.top-r)/(i-r),d=t.top):a&Da?(c=n+(o-n)*(t.bottom-r)/(i-r),d=t.bottom):a&Pa?(d=r+(i-r)*(t.right-n)/(o-n),c=t.right):a&Ia&&(d=r+(i-r)*(t.left-n)/(o-n),c=t.left),a===s?(n=c,r=d,s=li(n,r,t)):(o=c,i=d,l=li(o,i,t));return{x0:n,x1:o,y0:r,y1:i}}function ai(e,t){var n=t.anchor,r=e,o,i;return t.clamp&&(r=gd(r,t.area)),n==="start"?(o=r.x0,i=r.y0):n==="end"?(o=r.x1,i=r.y1):(o=(r.x0+r.x1)/2,i=(r.y0+r.y1)/2),fd(o,i,e.vx,e.vy,t.align)}var ci={arc:function(e,t){var n=(e.startAngle+e.endAngle)/2,r=Math.cos(n),o=Math.sin(n),i=e.innerRadius,s=e.outerRadius;return ai({x0:e.x+r*i,y0:e.y+o*i,x1:e.x+r*s,y1:e.y+o*s,vx:r,vy:o},t)},point:function(e,t){var n=hs(e,t.origin),r=n.x*e.options.radius,o=n.y*e.options.radius;return ai({x0:e.x-r,y0:e.y-o,x1:e.x+r,y1:e.y+o,vx:n.x,vy:n.y},t)},bar:function(e,t){var n=hs(e,t.origin),r=e.x,o=e.y,i=0,s=0;return e.horizontal?(r=Math.min(e.x,e.base),i=Math.abs(e.base-e.x)):(o=Math.min(e.y,e.base),s=Math.abs(e.base-e.y)),ai({x0:r,y0:o+s,x1:r+i,y1:o,vx:n.x,vy:n.y},t)},fallback:function(e,t){var n=hs(e,t.origin);return ai({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:n.x,vy:n.y},t)}},Ln=ko.rasterize;function md(e){var t=e.borderWidth||0,n=e.padding,r=e.size.height,o=e.size.width,i=-o/2,s=-r/2;return{frame:{x:i-n.left-t,y:s-n.top-t,w:o+n.width+t*2,h:r+n.height+t*2},text:{x:i,y:s,w:o,h:r}}}function pd(e,t){var n=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var r=n.getBasePixel();return e.horizontal?{x:r,y:null}:{x:null,y:r}}function wd(e){return e instanceof Ca?ci.arc:e instanceof ka?ci.point:e instanceof Sa?ci.bar:ci.fallback}function vd(e,t,n,r,o,i){var s=Math.PI/2;if(i){var l=Math.min(i,o/2,r/2),a=t+l,c=n+l,d=t+r-l,f=n+o-l;e.moveTo(t,c),a<d&&c<f?(e.arc(a,c,l,-Math.PI,-s),e.arc(d,c,l,-s,0),e.arc(d,f,l,0,s),e.arc(a,f,l,s,Math.PI)):a<d?(e.moveTo(a,n),e.arc(d,c,l,-s,s),e.arc(a,c,l,s,Math.PI+s)):c<f?(e.arc(a,c,l,-Math.PI,0),e.arc(a,f,l,0,Math.PI)):e.arc(a,c,l,-Math.PI,Math.PI),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,r,o)}function yd(e,t,n){var r=n.backgroundColor,o=n.borderColor,i=n.borderWidth;!r&&(!o||!i)||(e.beginPath(),vd(e,Ln(t.x)+i/2,Ln(t.y)+i/2,Ln(t.w)-i,Ln(t.h)-i,n.borderRadius),e.closePath(),r&&(e.fillStyle=r,e.fill()),o&&i&&(e.strokeStyle=o,e.lineWidth=i,e.lineJoin="miter",e.stroke()))}function bd(e,t,n){var r=n.lineHeight,o=e.w,i=e.x,s=e.y+r/2;return t==="center"?i+=o/2:(t==="end"||t==="right")&&(i+=o),{h:r,w:o,x:i,y:s}}function xd(e,t,n){var r=e.shadowBlur,o=n.stroked,i=Ln(n.x),s=Ln(n.y),l=Ln(n.w);o&&e.strokeText(t,i,s,l),n.filled&&(r&&o&&(e.shadowBlur=0),e.fillText(t,i,s,l),r&&o&&(e.shadowBlur=r))}function Cd(e,t,n,r){var o=r.textAlign,i=r.color,s=!!i,l=r.font,a=t.length,c=r.textStrokeColor,d=r.textStrokeWidth,f=c&&d,m;if(!(!a||!s&&!f))for(n=bd(n,o,l),e.font=l.string,e.textAlign=o,e.textBaseline="middle",e.shadowBlur=r.textShadowBlur,e.shadowColor=r.textShadowColor,s&&(e.fillStyle=i),f&&(e.lineJoin="round",e.lineWidth=d,e.strokeStyle=c),m=0,a=t.length;m<a;++m)xd(e,t[m],{stroked:f,filled:s,w:n.w,x:n.x,y:n.y+n.h*m})}var Aa=function(e,t,n,r){var o=this;o._config=e,o._index=r,o._model=null,o._rects=null,o._ctx=t,o._el=n};_o(Aa.prototype,{_modelize:function(e,t,n,r){var o=this,i=o._index,s=Fu(bt([n.font,{}],r,i)),l=bt([n.color,Ou.color],r,i);return{align:bt([n.align,"center"],r,i),anchor:bt([n.anchor,"center"],r,i),area:r.chart.chartArea,backgroundColor:bt([n.backgroundColor,null],r,i),borderColor:bt([n.borderColor,null],r,i),borderRadius:bt([n.borderRadius,0],r,i),borderWidth:bt([n.borderWidth,0],r,i),clamp:bt([n.clamp,!1],r,i),clip:bt([n.clip,!1],r,i),color:l,display:e,font:s,lines:t,offset:bt([n.offset,4],r,i),opacity:bt([n.opacity,1],r,i),origin:pd(o._el,r),padding:$u(bt([n.padding,4],r,i)),positioner:wd(o._el),rotation:bt([n.rotation,0],r,i)*(Math.PI/180),size:ko.textSize(o._ctx,t,s),textAlign:bt([n.textAlign,"start"],r,i),textShadowBlur:bt([n.textShadowBlur,0],r,i),textShadowColor:bt([n.textShadowColor,l],r,i),textStrokeColor:bt([n.textStrokeColor,l],r,i),textStrokeWidth:bt([n.textStrokeWidth,0],r,i)}},update:function(e){var t=this,n=null,r=null,o=t._index,i=t._config,s,l,a,c=bt([i.display,!0],e,o);c&&(s=e.dataset.data[o],l=Nu(xa(i.formatter,[s,e]),s),a=Co(l)?[]:ko.toTextLines(l),a.length&&(n=t._modelize(c,a,i,e),r=md(n))),t._model=n,t._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var n=this,r=e.ctx,o=n._model,i=n._rects,s;this.visible()&&(r.save(),o.clip&&(s=o.area,r.beginPath(),r.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),r.clip()),r.globalAlpha=ko.bound(0,o.opacity,1),r.translate(Ln(t.x),Ln(t.y)),r.rotate(o.rotation),yd(r,i.frame,o),Cd(r,o.lines,i.text,o),r.restore())}});var kd=Number.MIN_SAFE_INTEGER||-9007199254740991,Sd=Number.MAX_SAFE_INTEGER||9007199254740991;function ho(e,t,n){var r=Math.cos(n),o=Math.sin(n),i=t.x,s=t.y;return{x:i+r*(e.x-i)-o*(e.y-s),y:s+o*(e.x-i)+r*(e.y-s)}}function Sl(e,t){var n=Sd,r=kd,o=t.origin,i,s,l,a,c;for(i=0;i<e.length;++i)s=e[i],l=s.x-o.x,a=s.y-o.y,c=t.vx*l+t.vy*a,n=Math.min(n,c),r=Math.max(r,c);return{min:n,max:r}}function ui(e,t){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r);return{vx:(t.x-e.x)/o,vy:(t.y-e.y)/o,origin:e,ln:o}}var La=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};_o(La.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,n){this._rotation=n,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this,n=1,r=t._rect;return e=ho(e,t.center(),-t._rotation),!(e.x<r.x-n||e.y<r.y-n||e.x>r.x+r.w+n*2||e.y>r.y+r.h+n*2)},intersects:function(e){var t=this._points(),n=e._points(),r=[ui(t[0],t[1]),ui(t[0],t[3])],o,i,s;for(this._rotation!==e._rotation&&r.push(ui(n[0],n[1]),ui(n[0],n[3])),o=0;o<r.length;++o)if(i=Sl(t,r[o]),s=Sl(n,r[o]),i.max<s.min||s.max<i.min)return!1;return!0},_points:function(){var e=this,t=e._rect,n=e._rotation,r=e.center();return[ho({x:t.x,y:t.y},r,n),ho({x:t.x+t.w,y:t.y},r,n),ho({x:t.x+t.w,y:t.y+t.h},r,n),ho({x:t.x,y:t.y+t.h},r,n)]}});function Ha(e,t,n){var r=t.positioner(e,t),o=r.vx,i=r.vy;if(!o&&!i)return{x:r.x,y:r.y};var s=n.w,l=n.h,a=t.rotation,c=Math.abs(s/2*Math.cos(a))+Math.abs(l/2*Math.sin(a)),d=Math.abs(s/2*Math.sin(a))+Math.abs(l/2*Math.cos(a)),f=1/Math.max(Math.abs(o),Math.abs(i));return c*=o*f,d*=i*f,c+=t.offset*o,d+=t.offset*i,{x:r.x+c,y:r.y+d}}function Rd(e,t){var n,r,o,i;for(n=e.length-1;n>=0;--n)for(o=e[n].$layout,r=n-1;r>=0&&o._visible;--r)i=e[r].$layout,i._visible&&o._box.intersects(i._box)&&t(o,i);return e}function Md(e){var t,n,r,o,i,s,l;for(t=0,n=e.length;t<n;++t)r=e[t],o=r.$layout,o._visible&&(l=new Proxy(r._el,{get:(a,c)=>a.getProps([c],!0)[c]}),i=r.geometry(),s=Ha(l,r.model(),i),o._box.update(s,i,r.rotation()));return Rd(e,function(a,c){var d=a._hidable,f=c._hidable;d&&f||f?c._visible=!1:d&&(a._visible=!1)})}var So={prepare:function(e){var t=[],n,r,o,i,s;for(n=0,o=e.length;n<o;++n)for(r=0,i=e[n].length;r<i;++r)s=e[n][r],t.push(s),s.$layout={_box:new La,_hidable:!1,_visible:!0,_set:n,_idx:s._index};return t.sort(function(l,a){var c=l.$layout,d=a.$layout;return c._idx===d._idx?d._set-c._set:d._idx-c._idx}),this.update(t),t},update:function(e){var t=!1,n,r,o,i,s;for(n=0,r=e.length;n<r;++n)o=e[n],i=o.model(),s=o.$layout,s._hidable=i&&i.display==="auto",s._visible=o.visible(),t|=s._hidable;t&&Md(e)},lookup:function(e,t){var n,r;for(n=e.length-1;n>=0;--n)if(r=e[n].$layout,r&&r._visible&&r._box.contains(t))return e[n];return null},draw:function(e,t){var n,r,o,i,s,l;for(n=0,r=t.length;n<r;++n)o=t[n],i=o.$layout,i._visible&&(s=o.geometry(),l=Ha(o._el,o.model(),s),i._box.update(l,s,o.rotation()),o.draw(e,l))}},Ed=function(e){if(Co(e))return null;var t=e,n,r,o;if(Bu(e))if(!Co(e.label))t=e.label;else if(!Co(e.r))t=e.r;else for(t="",n=Object.keys(e),o=0,r=n.length;o<r;++o)t+=(o!==0?", ":"")+n[o]+": "+e[n[o]];return""+t},Td={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Ed,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},jt="$datalabels",za="$default";function Id(e,t){var n=e.datalabels,r={},o=[],i,s;return n===!1?null:(n===!0&&(n={}),t=_o({},[t,n]),i=t.labels||{},s=Object.keys(i),delete t.labels,s.length?s.forEach(function(l){i[l]&&o.push(_o({},[t,i[l],{_key:l}]))}):o.push(t),r=o.reduce(function(l,a){return Wu(a.listeners||{},function(c,d){l[d]=l[d]||{},l[d][a._key||za]=c}),delete a.listeners,l},{}),{labels:o,listeners:r})}function Rs(e,t,n,r){if(t){var o=n.$context,i=n.$groups,s;t[i._set]&&(s=t[i._set][i._key],s&&xa(s,[o,r])===!0&&(e[jt]._dirty=!0,n.update(o)))}}function Pd(e,t,n,r,o){var i,s;!n&&!r||(n?r?n!==r&&(s=i=!0):s=!0:i=!0,s&&Rs(e,t.leave,n,o),i&&Rs(e,t.enter,r,o))}function Dd(e,t){var n=e[jt],r=n._listeners,o,i;if(!(!r.enter&&!r.leave)){if(t.type==="mousemove")i=So.lookup(n._labels,t);else if(t.type!=="mouseout")return;o=n._hovered,n._hovered=i,Pd(e,r,o,i,t)}}function _d(e,t){var n=e[jt],r=n._listeners.click,o=r&&So.lookup(n._labels,t);o&&Rs(e,r,o,t)}var Ad={id:"datalabels",defaults:Td,beforeInit:function(e){e[jt]={_actives:[]}},beforeUpdate:function(e){var t=e[jt];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,n){var r=t.index,o=e[jt],i=o._datasets[r]=[],s=e.isDatasetVisible(r),l=e.data.datasets[r],a=Id(l,n),c=t.meta.data||[],d=e.ctx,f,m,p,g,v,k,b,y;for(d.save(),f=0,p=c.length;f<p;++f)if(b=c[f],b[jt]=[],s&&b&&e.getDataVisibility(f)&&!b.skip)for(m=0,g=a.labels.length;m<g;++m)v=a.labels[m],k=v._key,y=new Aa(v,d,b,f),y.$groups={_set:r,_key:k||za},y.$context={active:!1,chart:e,dataIndex:f,dataset:l,datasetIndex:r},y.update(y.$context),b[jt].push(y),i.push(y);d.restore(),_o(o._listeners,a.listeners,{merger:function(C,x,w){x[C]=x[C]||{},x[C][t.index]=w[C],o._listened=!0}})},afterUpdate:function(e){e[jt]._labels=So.prepare(e[jt]._datasets)},afterDatasetsDraw:function(e){So.draw(e,e[jt]._labels)},beforeEvent:function(e,t){if(e[jt]._listened){var n=t.event;switch(n.type){case"mousemove":case"mouseout":Dd(e,n);break;case"click":_d(e,n);break}}},afterEvent:function(e){var t=e[jt],n=t._actives,r=t._actives=e.getActiveElements(),o=ko.arrayDiff(n,r),i,s,l,a,c,d,f;for(i=0,s=o.length;i<s;++i)if(c=o[i],c[1])for(f=c[0].element[jt]||[],l=0,a=f.length;l<a;++l)d=f[l],d.$context.active=c[1]===1,d.update(d.$context);(t._dirty||o.length)&&(So.update(t._labels),e.render()),delete t._dirty}};const Fa=u.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=u.useMemo(()=>{const o=getComputedStyle(document.documentElement);return n.map(i=>{const{data:s,colors:l,label:a}=i;return{label:a,data:s,backgroundColor:l,borderWidth:2,borderColor:[o.getPropertyValue("--main-surface-primary").trim()]}})},[n]);return I.jsx("div",{className:"h-full w-full py-2",children:I.jsx(ju,{ref:t,options:{responsive:!0,maintainAspectRatio:!1,plugins:{crosshair:!1,legend:{display:!1},title:{display:!1},tooltip:{enabled:!0,animation:{duration:0},mode:"index",position:"average",backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:12,left:16,right:16},callbacks:{title:o=>o[0].formattedValue,label:function(o){const i=e.labels[o.dataIndex],s=n[0],l=s.data[o.dataIndex],a=s.data.reduce((d,f)=>Number(d)+Number(f),0),c=parseFloat((l/Number(a)*100).toFixed(2));return`${i} · ${c}%`}}},datalabels:{color:"white",textAlign:"center",font:{weight:"bold",size:16},backgroundColor:function(o){const i=o.dataset.data[o.dataIndex],s=o.dataset.data.reduce((a,c)=>Number(a)+Number(c),0);return i/Number(s)*100>=15?"rgba(0, 0, 0, 0.1)":"transparent"},borderRadius:15,padding:{top:6,bottom:6,left:8,right:8},formatter:(o,i)=>{const s=i.dataset.data.reduce((a,c)=>Number(a)+Number(c),0);return o/Number(s)*100>=15?o.toFixed(2):""}}}},plugins:[Ad],data:{labels:e.labels,datasets:r}})})});Fa.displayName="PieChart";const Oa=u.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=u.useMemo(()=>{const o=n.reduce((i,s)=>i+s.data.length,0);return n.map(i=>{const{data:s,label:l,colors:a}=i;return{label:l,data:s,backgroundColor:a,borderColor:a,pointRadius:o>50?o>200?2:4:8,pointHoverRadius:o>50?4:8}})},[n]);return I.jsx(Vu,{ref:t,options:{maintainAspectRatio:!1,scales:{x:{title:{display:!1},grid:{display:!1},ticks:{callback:Ea}},y:{title:{display:!1},grid:{lineWidth:o=>o.tick.value===0?0:1},border:{dash:[3,3]}}},elements:{point:{radius:0}},plugins:{legend:{display:!1},title:{display:!1,text:e.title},crosshair:!1,tooltip:{enabled:!0,mode:"point",position:"nearest",animation:{duration:0},backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:12,left:16,right:16},callbacks:{title:function(){return""},label:function(o){return`${o.dataset.label?`${o.dataset.label}: `:""} X=${o.parsed.x.toFixed(2)}, Y=${o.parsed.y.toFixed(2)} 
`}}}}},data:{labels:e.labels,datasets:r}})});Oa.displayName="ScatterChart";Xu.register(Ca,Uu,Yu,Sa,Ku,qu,Gu,Zu,ka,Qu);const $a=16,Rl={bar:Ma,pie:Fa,line:Ta,scatter:Oa};function Ml({item:e,formattedName:t}){return I.jsxs("div",{className:"inline-flex items-center gap-1",children:[I.jsx("div",{className:"h-3 w-3 rounded-sm",style:{backgroundColor:e.color}}),t]})}function Ld({items:e,hideAxisLabels:t=!1,xLabel:n="",yLabel:r=""}){const o=$s();function i(s,l){const a=l.indexOf(s);return a<l.length-2?`${s.name}, `:a===l.length-2?`${s.name}${l.length>2?", ":" "} ${o.formatMessage({id:"Gt7UQw",defaultMessage:"and"})}`:s.name}return I.jsxs("div",{className:"flex w-full flex-wrap items-center gap-1 px-4 text-xs text-token-text-primary",children:[!t&&I.jsx(It,{id:"Wn04Wd",defaultMessage:"{yLabel} by {xLabel}",values:{xLabel:I.jsxs("div",{className:"inline-flex items-center gap-0.5",children:[I.jsx(cd,{className:"icon-sm text-token-text-secondary"}),n]}),yLabel:I.jsxs("div",{className:"inline-flex items-center gap-0.5",children:[I.jsx(ud,{className:"icon-sm text-token-text-secondary"}),r]})}}),e.length>1&&e.length<$a&&(t?I.jsx(It,{id:"WKJKdH",defaultMessage:"For {legendItems}",values:{legendItems:e.map((s,l)=>I.jsx(Ml,{item:s,formattedName:i(s,e)},l))}}):I.jsx(It,{id:"Isulib",defaultMessage:"for {legendItems}",values:{legendItems:e.map((s,l)=>I.jsx(Ml,{item:s,formattedName:i(s,e)},l))}}))]})}const Na=u.forwardRef(({chart:e},t)=>{const n=u.useRef(null);u.useImperativeHandle(t,()=>({getBase64Image:()=>{if(!n.current){bo.addError("Chart instance is not yet available.");return}return n.current.toBase64Image()}}));const r=u.useCallback(()=>{if(e.chart_type==="pie"){const i=e.datasets[0].colors;if(i&&Array.isArray(i))return e.labels.map((s,l)=>({name:s,color:i[l]??""}))}else return e.datasets.map(i=>({name:i.label,color:Array.isArray(i.colors)?i.colors[0]:i.colors}));return[]},[e]);if(!(e.chart_type in Rl))return I.jsx(It,{id:"Chart.invalidChartType",defaultMessage:"Invalid chart type"});const o=Rl[e.chart_type];return I.jsxs("div",{className:"flex h-full w-full flex-col items-center",children:[I.jsx("div",{className:"w-full flex-initial",style:{flexBasis:"28px"},children:I.jsx(Ld,{xLabel:e.x_label,yLabel:e.y_label,items:r(),hideAxisLabels:e.chart_type==="pie"})}),I.jsx("div",{className:Nt("flex w-full flex-grow items-center justify-center px-4 pb-3"),style:{minHeight:"0"},children:I.jsx(o,{chart:e,ref:n})})]})});Na.displayName="Chart";function Wa(e="This should not happen"){throw new Error(e)}function Gt(e,t="Assertion failed"){if(!e)return Wa(t)}function Ao(e,t){return Wa(t??"Hell froze over")}function Hd(e,t){try{return e()}catch{return t}}const El=Object.prototype.hasOwnProperty;function Yr(e,t){let n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Yr(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(El.call(e,n)&&++r&&!El.call(t,n)||!(n in t)||!Yr(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}var zd=Object.prototype,Fd=zd.hasOwnProperty;function Od(e,t){return e!=null&&Fd.call(e,t)}var $d=Od,Nd=$d,Wd=Ru;function Bd(e,t){return e!=null&&Wd(e,t,Nd)}var jd=Bd;const Vd=fa(jd),ki=null,Ws=void 0;var J;(function(e){e.Uri="uri",e.Text="text",e.Image="image",e.RowID="row-id",e.Number="number",e.Bubble="bubble",e.Boolean="boolean",e.Loading="loading",e.Markdown="markdown",e.Drilldown="drilldown",e.Protected="protected",e.Custom="custom"})(J||(J={}));var Tl;(function(e){e.HeaderRowID="headerRowID",e.HeaderCode="headerCode",e.HeaderNumber="headerNumber",e.HeaderString="headerString",e.HeaderBoolean="headerBoolean",e.HeaderAudioUri="headerAudioUri",e.HeaderVideoUri="headerVideoUri",e.HeaderEmoji="headerEmoji",e.HeaderImage="headerImage",e.HeaderUri="headerUri",e.HeaderPhone="headerPhone",e.HeaderMarkdown="headerMarkdown",e.HeaderDate="headerDate",e.HeaderTime="headerTime",e.HeaderEmail="headerEmail",e.HeaderReference="headerReference",e.HeaderIfThenElse="headerIfThenElse",e.HeaderSingleValue="headerSingleValue",e.HeaderLookup="headerLookup",e.HeaderTextTemplate="headerTextTemplate",e.HeaderMath="headerMath",e.HeaderRollup="headerRollup",e.HeaderJoinStrings="headerJoinStrings",e.HeaderSplitString="headerSplitString",e.HeaderGeoDistance="headerGeoDistance",e.HeaderArray="headerArray",e.RowOwnerOverlay="rowOwnerOverlay",e.ProtectedColumnOverlay="protectedColumnOverlay"})(Tl||(Tl={}));var Si;(function(e){e.Triangle="triangle",e.Dots="dots"})(Si||(Si={}));const Hi="___gdg_header_cell_",Ba=Hi+"checked",ja=Hi+"unchecked",Xd=Hi+"indeterminate";function di(e){return"width"in e&&typeof e.width=="number"}async function Il(e){return typeof e=="object"?e:await e()}function Br(e){return!(e.kind===J.Loading||e.kind===J.Bubble||e.kind===J.RowID||e.kind===J.Protected||e.kind===J.Drilldown)}function Vr(e){return e.kind===rn.Marker||e.kind===rn.NewRow}function vo(e){if(!Br(e)||e.kind===J.Image)return!1;if(e.kind===J.Text||e.kind===J.Number||e.kind===J.Markdown||e.kind===J.Uri||e.kind===J.Custom||e.kind===J.Boolean)return e.readonly!==!0;Ao(e,"A cell was passed with an invalid kind")}function Ud(e){return Vd(e,"editor")}function Ms(e){return!(e.readonly??!1)}var rn;(function(e){e.NewRow="new-row",e.Marker="marker"})(rn||(rn={}));function Yd(e){if(e.length===0)return[];const t=[...e],n=[];t.sort(function(r,o){return r[0]-o[0]}),n.push([...t[0]]);for(const r of t.slice(1)){const o=n[n.length-1];o[1]<r[0]?n.push([...r]):o[1]<r[1]&&(o[1]=r[1])}return n}let Pl;class ze{items;constructor(t){this.items=t}static empty=()=>Pl??(Pl=new ze([]));static fromSingleSelection=t=>ze.empty().add(t);offset(t){if(t===0)return this;const n=this.items.map(r=>[r[0]+t,r[1]+t]);return new ze(n)}add(t){const n=typeof t=="number"?[t,t+1]:t,r=Yd([...this.items,n]);return new ze(r)}remove(t){const n=[...this.items],r=typeof t=="number"?t:t[0],o=typeof t=="number"?t+1:t[1];for(const[i,s]of n.entries()){const[l,a]=s;if(l<=o&&r<=a){const c=[];l<r&&c.push([l,r]),o<a&&c.push([o,a]),n.splice(i,1,...c)}}return new ze(n)}first(){if(this.items.length!==0)return this.items[0][0]}last(){if(this.items.length!==0)return this.items.slice(-1)[0][1]-1}hasIndex(t){for(let n=0;n<this.items.length;n++){const[r,o]=this.items[n];if(t>=r&&t<o)return!0}return!1}hasAll(t){for(let n=t[0];n<t[1];n++)if(!this.hasIndex(n))return!1;return!0}some(t){for(const n of this)if(t(n))return!0;return!1}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(let n=0;n<this.items.length;n++){const r=t.items[n],o=this.items[n];if(r[0]!==o[0]||r[1]!==o[1])return!1}return!0}toArray(){const t=[];for(const[n,r]of this.items)for(let o=n;o<r;o++)t.push(o);return t}get length(){let t=0;for(const[n,r]of this.items)t+=r-n;return t}*[Symbol.iterator](){for(const[t,n]of this.items)for(let r=t;r<n;r++)yield r}}var Kd=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,gs=uu(function(e){return Kd.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),qd=function(){const t=Array.prototype.slice.call(arguments).filter(Boolean),n={},r=[];t.forEach(i=>{(i?i.split(" "):[]).forEach(l=>{if(l.startsWith("atm_")){const[,a]=l.split("_");n[a]=l}else r.push(l)})});const o=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&o.push(n[i]);return o.push(...r),o.join(" ")},Dl=qd,Gd=e=>e.toUpperCase()===e,Zd=e=>t=>e.indexOf(t)===-1,Va=(e,t)=>{const n={};return Object.keys(e).filter(Zd(t)).forEach(r=>{n[r]=e[r]}),n};function Qd(e,t,n){const r=Va(t,n);if(!e){const o=typeof gs=="function"?{default:gs}:gs;Object.keys(r).forEach(i=>{o.default(i)||delete r[i]})}return r}var Jd=(e,t)=>{};function ef(e){let t="";return n=>{const r=(i,s)=>{const{as:l=e,class:a=t}=i,c=n.propsAsIs===void 0?!(typeof l=="string"&&l.indexOf("-")===-1&&!Gd(l[0])):n.propsAsIs,d=Qd(c,i,["as","class"]);d.ref=s,d.className=n.atomic?Dl(n.class,d.className||a):Dl(d.className||a,n.class);const{vars:f}=n;if(f){const m={};for(const v in f){const k=f[v],b=k[0],y=k[1]||"",C=typeof b=="function"?b(i):b;Jd(C,n.name),m[`--${v}`]=`${C}${y}`}const p=d.style||{},g=Object.keys(p);g.length>0&&g.forEach(v=>{m[v]=p[v]}),d.style=m}return e.__linaria&&e!==l?(d.as=l,xt.createElement(e,d)):xt.createElement(l,d)},o=xt.forwardRef?xt.forwardRef(r):i=>{const s=Va(i,["innerRef"]);return r(s,i.innerRef)};return o.displayName=n.name,o.__linaria={className:n.class||t,extends:e},o}}var Jt=ef;const tf=Jt("div")({name:"ImageOverlayEditorStyle",class:"gdg-i2iowwq",propsAsIs:!1});var Xa={},zi={},Bs={},ms={},_l;function nf(){return _l||(_l=1,function(e){(function(t,n){n(e,u,Mu())})(ha,function(t,n,r){Object.defineProperty(t,"__esModule",{value:!0}),t.setHasSupportToCaptureOption=g;var o=s(n),i=s(r);function s(y){return y&&y.__esModule?y:{default:y}}var l=Object.assign||function(y){for(var C=1;C<arguments.length;C++){var x=arguments[C];for(var w in x)Object.prototype.hasOwnProperty.call(x,w)&&(y[w]=x[w])}return y};function a(y,C){var x={};for(var w in y)C.indexOf(w)>=0||Object.prototype.hasOwnProperty.call(y,w)&&(x[w]=y[w]);return x}function c(y,C){if(!(y instanceof C))throw new TypeError("Cannot call a class as a function")}var d=function(){function y(C,x){for(var w=0;w<x.length;w++){var T=x[w];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(C,T.key,T)}}return function(C,x,w){return x&&y(C.prototype,x),w&&y(C,w),C}}();function f(y,C){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:y}function m(y,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);y.prototype=Object.create(C&&C.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(y,C):y.__proto__=C)}var p=!1;function g(y){p=y}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){g(!0)}}))}catch{}function v(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{capture:!0};return p?y:y.capture}function k(y){if("touches"in y){var C=y.touches[0],x=C.pageX,w=C.pageY;return{x,y:w}}var T=y.screenX,D=y.screenY;return{x:T,y:D}}var b=function(y){m(C,y);function C(){var x;c(this,C);for(var w=arguments.length,T=Array(w),D=0;D<w;D++)T[D]=arguments[D];var _=f(this,(x=C.__proto__||Object.getPrototypeOf(C)).call.apply(x,[this].concat(T)));return _._handleSwipeStart=_._handleSwipeStart.bind(_),_._handleSwipeMove=_._handleSwipeMove.bind(_),_._handleSwipeEnd=_._handleSwipeEnd.bind(_),_._onMouseDown=_._onMouseDown.bind(_),_._onMouseMove=_._onMouseMove.bind(_),_._onMouseUp=_._onMouseUp.bind(_),_._setSwiperRef=_._setSwiperRef.bind(_),_}return d(C,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,v({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,v({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(w){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(w))}},{key:"_onMouseMove",value:function(w){this.mouseDown&&this._handleSwipeMove(w)}},{key:"_onMouseUp",value:function(w){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(w)}},{key:"_handleSwipeStart",value:function(w){var T=k(w),D=T.x,_=T.y;this.moveStart={x:D,y:_},this.props.onSwipeStart(w)}},{key:"_handleSwipeMove",value:function(w){if(this.moveStart){var T=k(w),D=T.x,_=T.y,P=D-this.moveStart.x,W=_-this.moveStart.y;this.moving=!0;var j=this.props.onSwipeMove({x:P,y:W},w);j&&w.cancelable&&w.preventDefault(),this.movePosition={deltaX:P,deltaY:W}}}},{key:"_handleSwipeEnd",value:function(w){this.props.onSwipeEnd(w);var T=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-T?this.props.onSwipeLeft(1,w):this.movePosition.deltaX>T&&this.props.onSwipeRight(1,w),this.movePosition.deltaY<-T?this.props.onSwipeUp(1,w):this.movePosition.deltaY>T&&this.props.onSwipeDown(1,w)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(w){this.swiper=w,this.props.innerRef(w)}},{key:"render",value:function(){var w=this.props;w.tagName;var T=w.className,D=w.style,_=w.children;w.allowMouseEvents,w.onSwipeUp,w.onSwipeDown,w.onSwipeLeft,w.onSwipeRight,w.onSwipeStart,w.onSwipeMove,w.onSwipeEnd,w.innerRef,w.tolerance;var P=a(w,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return o.default.createElement(this.props.tagName,l({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:T,style:D},P),_)}}]),C}(n.Component);b.displayName="ReactSwipe",b.propTypes={tagName:i.default.string,className:i.default.string,style:i.default.object,children:i.default.node,allowMouseEvents:i.default.bool,onSwipeUp:i.default.func,onSwipeDown:i.default.func,onSwipeLeft:i.default.func,onSwipeRight:i.default.func,onSwipeStart:i.default.func,onSwipeMove:i.default.func,onSwipeEnd:i.default.func,innerRef:i.default.func,tolerance:i.default.number.isRequired},b.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},t.default=b})}(ms)),ms}(function(e){(function(t,n){n(e,nf())})(ha,function(t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=o(n);function o(i){return i&&i.__esModule?i:{default:i}}t.default=r.default})})(Bs);var zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.default=void 0;var Vn=rf(Ju());function rf(e){return e&&e.__esModule?e:{default:e}}function of(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sf={ROOT:function(t){return(0,Vn.default)(of({"carousel-root":!0},t||"",!!t))},CAROUSEL:function(t){return(0,Vn.default)({carousel:!0,"carousel-slider":t})},WRAPPER:function(t,n){return(0,Vn.default)({"thumbs-wrapper":!t,"slider-wrapper":t,"axis-horizontal":n==="horizontal","axis-vertical":n!=="horizontal"})},SLIDER:function(t,n){return(0,Vn.default)({thumbs:!t,slider:t,animated:!n})},ITEM:function(t,n,r){return(0,Vn.default)({thumb:!t,slide:t,selected:n,previous:r})},ARROW_PREV:function(t){return(0,Vn.default)({"control-arrow control-prev":!0,"control-disabled":t})},ARROW_NEXT:function(t){return(0,Vn.default)({"control-arrow control-next":!0,"control-disabled":t})},DOT:function(t){return(0,Vn.default)({dot:!0,selected:t})}};zo.default=sf;var Fo={},Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.outerWidth=void 0;var lf=function(t){var n=t.offsetWidth,r=getComputedStyle(t);return n+=parseInt(r.marginLeft)+parseInt(r.marginRight),n};Fi.outerWidth=lf;var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.default=void 0;var af=function(t,n,r){var o=t===0?t:t+n,i=r==="horizontal"?[o,0,0]:[0,o,0],s="translate3d",l="("+i.join(",")+")";return s+l};Gr.default=af;var Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.default=void 0;var cf=function(){return window};Oo.default=cf;Object.defineProperty(Fo,"__esModule",{value:!0});Fo.default=void 0;var fn=ff(u),dr=Oi(zo),uf=Fi,Al=Oi(Gr),df=Oi(Bs),fi=Oi(Oo);function Oi(e){return e&&e.__esModule?e:{default:e}}function Ua(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return Ua=function(){return e},e}function ff(e){if(e&&e.__esModule)return e;if(e===null||Ro(e)!=="object"&&typeof e!="function")return{default:e};var t=Ua();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function Ro(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ro=function(n){return typeof n}:Ro=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ro(e)}function Es(){return Es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Es.apply(this,arguments)}function hf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mf(e,t,n){return t&&gf(e.prototype,t),e}function pf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ts(e,t)}function Ts(e,t){return Ts=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},Ts(e,t)}function wf(e){var t=yf();return function(){var r=Ri(e),o;if(t){var i=Ri(this).constructor;o=Reflect.construct(r,arguments,i)}else o=r.apply(this,arguments);return vf(this,o)}}function vf(e,t){return t&&(Ro(t)==="object"||typeof t=="function")?t:$t(e)}function $t(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ri(e){return Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ri(e)}function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bf=function(t){return t.hasOwnProperty("key")},js=function(e){pf(n,e);var t=wf(n);function n(r){var o;return hf(this,n),o=t.call(this,r),zt($t(o),"itemsWrapperRef",void 0),zt($t(o),"itemsListRef",void 0),zt($t(o),"thumbsRef",void 0),zt($t(o),"setItemsWrapperRef",function(i){o.itemsWrapperRef=i}),zt($t(o),"setItemsListRef",function(i){o.itemsListRef=i}),zt($t(o),"setThumbsRef",function(i,s){o.thumbsRef||(o.thumbsRef=[]),o.thumbsRef[s]=i}),zt($t(o),"updateSizes",function(){if(!(!o.props.children||!o.itemsWrapperRef||!o.thumbsRef)){var i=fn.Children.count(o.props.children),s=o.itemsWrapperRef.clientWidth,l=o.props.thumbWidth?o.props.thumbWidth:(0,uf.outerWidth)(o.thumbsRef[0]),a=Math.floor(s/l),c=a<i,d=c?i-a:0;o.setState(function(f,m){return{itemSize:l,visibleItems:a,firstItem:c?o.getFirstItem(m.selectedItem):0,lastPosition:d,showArrows:c}})}}),zt($t(o),"handleClickItem",function(i,s,l){if(!bf(l)||l.key==="Enter"){var a=o.props.onSelectItem;typeof a=="function"&&a(i,s)}}),zt($t(o),"onSwipeStart",function(){o.setState({swiping:!0})}),zt($t(o),"onSwipeEnd",function(){o.setState({swiping:!1})}),zt($t(o),"onSwipeMove",function(i){var s=i.x;if(!o.state.itemSize||!o.itemsWrapperRef||!o.state.visibleItems)return!1;var l=0,a=fn.Children.count(o.props.children),c=-(o.state.firstItem*100)/o.state.visibleItems,d=Math.max(a-o.state.visibleItems,0),f=-d*100/o.state.visibleItems;c===l&&s>0&&(s=0),c===f&&s<0&&(s=0);var m=o.itemsWrapperRef.clientWidth,p=c+100/(m/s);return o.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(g){o.itemsListRef.style[g]=(0,Al.default)(p,"%",o.props.axis)}),!0}),zt($t(o),"slideRight",function(i){o.moveTo(o.state.firstItem-(typeof i=="number"?i:1))}),zt($t(o),"slideLeft",function(i){o.moveTo(o.state.firstItem+(typeof i=="number"?i:1))}),zt($t(o),"moveTo",function(i){i=i<0?0:i,i=i>=o.state.lastPosition?o.state.lastPosition:i,o.setState({firstItem:i})}),o.state={selectedItem:r.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},o}return mf(n,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(o){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==o.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,fi.default)().addEventListener("resize",this.updateSizes),(0,fi.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,fi.default)().removeEventListener("resize",this.updateSizes),(0,fi.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(o){var i=o;return o>=this.state.lastPosition&&(i=this.state.lastPosition),o<this.state.firstItem+this.state.visibleItems&&(i=this.state.firstItem),o<this.state.firstItem&&(i=o),i}},{key:"renderItems",value:function(){var o=this;return this.props.children.map(function(i,s){var l=dr.default.ITEM(!1,s===o.state.selectedItem),a={key:s,ref:function(d){return o.setThumbsRef(d,s)},className:l,onClick:o.handleClickItem.bind(o,s,o.props.children[s]),onKeyDown:o.handleClickItem.bind(o,s,o.props.children[s]),"aria-label":"".concat(o.props.labels.item," ").concat(s+1),style:{width:o.props.thumbWidth}};return fn.default.createElement("li",Es({},a,{role:"button",tabIndex:0}),i)})}},{key:"render",value:function(){var o=this;if(!this.props.children)return null;var i=fn.Children.count(this.props.children)>1,s=this.state.showArrows&&this.state.firstItem>0,l=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,a={},c=-this.state.firstItem*(this.state.itemSize||0),d=(0,Al.default)(c,"px",this.props.axis),f=this.props.transitionTime+"ms";return a={WebkitTransform:d,MozTransform:d,MsTransform:d,OTransform:d,transform:d,msTransform:d,WebkitTransitionDuration:f,MozTransitionDuration:f,MsTransitionDuration:f,OTransitionDuration:f,transitionDuration:f,msTransitionDuration:f},fn.default.createElement("div",{className:dr.default.CAROUSEL(!1)},fn.default.createElement("div",{className:dr.default.WRAPPER(!1),ref:this.setItemsWrapperRef},fn.default.createElement("button",{type:"button",className:dr.default.ARROW_PREV(!s),onClick:function(){return o.slideRight()},"aria-label":this.props.labels.leftArrow}),i?fn.default.createElement(df.default,{tagName:"ul",className:dr.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:a,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):fn.default.createElement("ul",{className:dr.default.SLIDER(!1,this.state.swiping),ref:function(p){return o.setItemsListRef(p)},style:a},this.renderItems()),fn.default.createElement("button",{type:"button",className:dr.default.ARROW_NEXT(!l),onClick:function(){return o.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),n}(fn.Component);Fo.default=js;zt(js,"displayName","Thumbs");zt(js,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350});var $i={};Object.defineProperty($i,"__esModule",{value:!0});$i.default=void 0;var xf=function(){return document};$i.default=xf;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.setPosition=Qt.getPosition=Qt.isKeyboardEvent=Qt.defaultStatusFormatter=Qt.noop=void 0;var Cf=u,kf=Sf(Gr);function Sf(e){return e&&e.__esModule?e:{default:e}}var Rf=function(){};Qt.noop=Rf;var Mf=function(t,n){return"".concat(t," of ").concat(n)};Qt.defaultStatusFormatter=Mf;var Ef=function(t){return t?t.hasOwnProperty("key"):!1};Qt.isKeyboardEvent=Ef;var Tf=function(t,n){if(n.infiniteLoop&&++t,t===0)return 0;var r=Cf.Children.count(n.children);if(n.centerMode&&n.axis==="horizontal"){var o=-t*n.centerSlidePercentage,i=r-1;return t&&(t!==i||n.infiniteLoop)?o+=(100-n.centerSlidePercentage)/2:t===i&&(o+=100-n.centerSlidePercentage),o}return-t*100};Qt.getPosition=Tf;var If=function(t,n){var r={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(o){r[o]=(0,kf.default)(t,"%",n)}),r};Qt.setPosition=If;var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.fadeAnimationHandler=Sn.slideStopSwipingHandler=Sn.slideSwipeAnimationHandler=Sn.slideAnimationHandler=void 0;var Ya=u,Pf=Df(Gr),Rn=Qt;function Df(e){return e&&e.__esModule?e:{default:e}}function Ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ll(Object(n),!0).forEach(function(r){_f(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Af=function(t,n){var r={},o=n.selectedItem,i=o,s=Ya.Children.count(t.children)-1,l=t.infiniteLoop&&(o<0||o>s);if(l)return i<0?t.centerMode&&t.centerSlidePercentage&&t.axis==="horizontal"?r.itemListStyle=(0,Rn.setPosition)(-(s+2)*t.centerSlidePercentage-(100-t.centerSlidePercentage)/2,t.axis):r.itemListStyle=(0,Rn.setPosition)(-(s+2)*100,t.axis):i>s&&(r.itemListStyle=(0,Rn.setPosition)(0,t.axis)),r;var a=(0,Rn.getPosition)(o,t),c=(0,Pf.default)(a,"%",t.axis),d=t.transitionTime+"ms";return r.itemListStyle={WebkitTransform:c,msTransform:c,OTransform:c,transform:c},n.swiping||(r.itemListStyle=gr(gr({},r.itemListStyle),{},{WebkitTransitionDuration:d,MozTransitionDuration:d,OTransitionDuration:d,transitionDuration:d,msTransitionDuration:d})),r};Sn.slideAnimationHandler=Af;var Lf=function(t,n,r,o){var i={},s=n.axis==="horizontal",l=Ya.Children.count(n.children),a=0,c=(0,Rn.getPosition)(r.selectedItem,n),d=n.infiniteLoop?(0,Rn.getPosition)(l-1,n)-100:(0,Rn.getPosition)(l-1,n),f=s?t.x:t.y,m=f;c===a&&f>0&&(m=0),c===d&&f<0&&(m=0);var p=c+100/(r.itemSize/m),g=Math.abs(f)>n.swipeScrollTolerance;return n.infiniteLoop&&g&&(r.selectedItem===0&&p>-100?p-=l*100:r.selectedItem===l-1&&p<-l*100&&(p+=l*100)),(!n.preventMovementUntilSwipeScrollTolerance||g||r.swipeMovementStarted)&&(r.swipeMovementStarted||o({swipeMovementStarted:!0}),i.itemListStyle=(0,Rn.setPosition)(p,n.axis)),g&&!r.cancelClick&&o({cancelClick:!0}),i};Sn.slideSwipeAnimationHandler=Lf;var Hf=function(t,n){var r=(0,Rn.getPosition)(n.selectedItem,t),o=(0,Rn.setPosition)(r,t.axis);return{itemListStyle:o}};Sn.slideStopSwipingHandler=Hf;var zf=function(t,n){var r=t.transitionTime+"ms",o="ease-in-out",i={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:o,msTransitionTimingFunction:o,MozTransitionTimingFunction:o,WebkitTransitionTimingFunction:o,OTransitionTimingFunction:o};return n.swiping||(i=gr(gr({},i),{},{WebkitTransitionDuration:r,MozTransitionDuration:r,OTransitionDuration:r,transitionDuration:r,msTransitionDuration:r})),{slideStyle:i,selectedStyle:gr(gr({},i),{},{opacity:1,position:"relative"}),prevStyle:gr({},i)}};Sn.fadeAnimationHandler=zf;Object.defineProperty(zi,"__esModule",{value:!0});zi.default=void 0;var Ze=$f(u),Ff=$o(Bs),_n=$o(zo),Of=$o(Fo),hi=$o($i),gi=$o(Oo),yo=Qt,Mi=Sn;function $o(e){return e&&e.__esModule?e:{default:e}}function Ka(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return Ka=function(){return e},e}function $f(e){if(e&&e.__esModule)return e;if(e===null||Mo(e)!=="object"&&typeof e!="function")return{default:e};var t=Ka();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function Mo(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mo=function(n){return typeof n}:Mo=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Mo(e)}function Is(){return Is=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Is.apply(this,arguments)}function Hl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hl(Object(n),!0).forEach(function(r){De(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hl(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bf(e,t,n){return t&&Wf(e.prototype,t),e}function jf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ps(e,t)}function Ps(e,t){return Ps=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},Ps(e,t)}function Vf(e){var t=Uf();return function(){var r=Ei(e),o;if(t){var i=Ei(this).constructor;o=Reflect.construct(r,arguments,i)}else o=r.apply(this,arguments);return Xf(this,o)}}function Xf(e,t){return t&&(Mo(t)==="object"||typeof t=="function")?t:He(e)}function He(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ei(e){return Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ei(e)}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vs=function(e){jf(n,e);var t=Vf(n);function n(r){var o;Nf(this,n),o=t.call(this,r),De(He(o),"thumbsRef",void 0),De(He(o),"carouselWrapperRef",void 0),De(He(o),"listRef",void 0),De(He(o),"itemsRef",void 0),De(He(o),"timer",void 0),De(He(o),"animationHandler",void 0),De(He(o),"setThumbsRef",function(s){o.thumbsRef=s}),De(He(o),"setCarouselWrapperRef",function(s){o.carouselWrapperRef=s}),De(He(o),"setListRef",function(s){o.listRef=s}),De(He(o),"setItemsRef",function(s,l){o.itemsRef||(o.itemsRef=[]),o.itemsRef[l]=s}),De(He(o),"autoPlay",function(){Ze.Children.count(o.props.children)<=1||(o.clearAutoPlay(),o.props.autoPlay&&(o.timer=setTimeout(function(){o.increment()},o.props.interval)))}),De(He(o),"clearAutoPlay",function(){o.timer&&clearTimeout(o.timer)}),De(He(o),"resetAutoPlay",function(){o.clearAutoPlay(),o.autoPlay()}),De(He(o),"stopOnHover",function(){o.setState({isMouseEntered:!0},o.clearAutoPlay)}),De(He(o),"startOnLeave",function(){o.setState({isMouseEntered:!1},o.autoPlay)}),De(He(o),"isFocusWithinTheCarousel",function(){return o.carouselWrapperRef?!!((0,hi.default)().activeElement===o.carouselWrapperRef||o.carouselWrapperRef.contains((0,hi.default)().activeElement)):!1}),De(He(o),"navigateWithKeyboard",function(s){if(o.isFocusWithinTheCarousel()){var l=o.props.axis,a=l==="horizontal",c={ArrowUp:38,ArrowRight:39,ArrowDown:40,ArrowLeft:37},d=a?c.ArrowRight:c.ArrowDown,f=a?c.ArrowLeft:c.ArrowUp;d===s.keyCode?o.increment():f===s.keyCode&&o.decrement()}}),De(He(o),"updateSizes",function(){if(!(!o.state.initialized||!o.itemsRef||o.itemsRef.length===0)){var s=o.props.axis==="horizontal",l=o.itemsRef[0];if(l){var a=s?l.clientWidth:l.clientHeight;o.setState({itemSize:a}),o.thumbsRef&&o.thumbsRef.updateSizes()}}}),De(He(o),"setMountState",function(){o.setState({hasMount:!0}),o.updateSizes()}),De(He(o),"handleClickItem",function(s,l){if(Ze.Children.count(o.props.children)!==0){if(o.state.cancelClick){o.setState({cancelClick:!1});return}o.props.onClickItem(s,l),s!==o.state.selectedItem&&o.setState({selectedItem:s})}}),De(He(o),"handleOnChange",function(s,l){Ze.Children.count(o.props.children)<=1||o.props.onChange(s,l)}),De(He(o),"handleClickThumb",function(s,l){o.props.onClickThumb(s,l),o.moveTo(s)}),De(He(o),"onSwipeStart",function(s){o.setState({swiping:!0}),o.props.onSwipeStart(s)}),De(He(o),"onSwipeEnd",function(s){o.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),o.props.onSwipeEnd(s),o.clearAutoPlay(),o.state.autoPlay&&o.autoPlay()}),De(He(o),"onSwipeMove",function(s,l){o.props.onSwipeMove(l);var a=o.props.swipeAnimationHandler(s,o.props,o.state,o.setState.bind(He(o)));return o.setState(hn({},a)),!!Object.keys(a).length}),De(He(o),"decrement",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;o.moveTo(o.state.selectedItem-(typeof s=="number"?s:1))}),De(He(o),"increment",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;o.moveTo(o.state.selectedItem+(typeof s=="number"?s:1))}),De(He(o),"moveTo",function(s){if(typeof s=="number"){var l=Ze.Children.count(o.props.children)-1;s<0&&(s=o.props.infiniteLoop?l:0),s>l&&(s=o.props.infiniteLoop?0:l),o.selectItem({selectedItem:s}),o.state.autoPlay&&o.state.isMouseEntered===!1&&o.resetAutoPlay()}}),De(He(o),"onClickNext",function(){o.increment(1)}),De(He(o),"onClickPrev",function(){o.decrement(1)}),De(He(o),"onSwipeForward",function(){o.increment(1),o.props.emulateTouch&&o.setState({cancelClick:!0})}),De(He(o),"onSwipeBackwards",function(){o.decrement(1),o.props.emulateTouch&&o.setState({cancelClick:!0})}),De(He(o),"changeItem",function(s){return function(l){(!(0,yo.isKeyboardEvent)(l)||l.key==="Enter")&&o.moveTo(s)}}),De(He(o),"selectItem",function(s){o.setState(hn({previousItem:o.state.selectedItem},s),function(){o.setState(o.animationHandler(o.props,o.state))}),o.handleOnChange(s.selectedItem,Ze.Children.toArray(o.props.children)[s.selectedItem])}),De(He(o),"getInitialImage",function(){var s=o.props.selectedItem,l=o.itemsRef&&o.itemsRef[s],a=l&&l.getElementsByTagName("img")||[];return a[0]}),De(He(o),"getVariableItemHeight",function(s){var l=o.itemsRef&&o.itemsRef[s];if(o.state.hasMount&&l&&l.children.length){var a=l.children[0].getElementsByTagName("img")||[];if(a.length>0){var c=a[0];if(!c.complete){var d=function p(){o.forceUpdate(),c.removeEventListener("load",p)};c.addEventListener("load",d)}}var f=a[0]||l.children[0],m=f.clientHeight;return m>0?m:null}return null});var i={initialized:!1,previousItem:r.selectedItem,selectedItem:r.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:r.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return o.animationHandler=typeof r.animationHandler=="function"&&r.animationHandler||r.animationHandler==="fade"&&Mi.fadeAnimationHandler||Mi.slideAnimationHandler,o.state=hn(hn({},i),o.animationHandler(r,i)),o}return Bf(n,[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(o,i){!o.children&&this.props.children&&!this.state.initialized&&this.setupCarousel(),!o.autoFocus&&this.props.autoFocus&&this.forceFocus(),i.swiping&&!this.state.swiping&&this.setState(hn({},this.props.stopSwipingHandler(this.props,this.state))),(o.selectedItem!==this.props.selectedItem||o.centerMode!==this.props.centerMode)&&(this.updateSizes(),this.moveTo(this.props.selectedItem)),o.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var o=this;this.bindEvents(),this.state.autoPlay&&Ze.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},function(){var i=o.getInitialImage();i&&!i.complete?i.addEventListener("load",o.setMountState):o.setMountState()})}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var o=this.carouselWrapperRef;this.props.stopOnHover&&o&&(o.addEventListener("mouseenter",this.stopOnHover),o.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var o=this.carouselWrapperRef;this.props.stopOnHover&&o&&(o.removeEventListener("mouseenter",this.stopOnHover),o.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,gi.default)().addEventListener("resize",this.updateSizes),(0,gi.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,hi.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,gi.default)().removeEventListener("resize",this.updateSizes),(0,gi.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var o=this.getInitialImage();o&&o.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,hi.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var o;(o=this.carouselWrapperRef)===null||o===void 0||o.focus()}},{key:"renderItems",value:function(o){var i=this;return this.props.children?Ze.Children.map(this.props.children,function(s,l){var a=l===i.state.selectedItem,c=l===i.state.previousItem,d=a&&i.state.selectedStyle||c&&i.state.prevStyle||i.state.slideStyle||{};i.props.centerMode&&i.props.axis==="horizontal"&&(d=hn(hn({},d),{},{minWidth:i.props.centerSlidePercentage+"%"})),i.state.swiping&&i.state.swipeMovementStarted&&(d=hn(hn({},d),{},{pointerEvents:"none"}));var f={ref:function(p){return i.setItemsRef(p,l)},key:"itemKey"+l+(o?"clone":""),className:_n.default.ITEM(!0,l===i.state.selectedItem,l===i.state.previousItem),onClick:i.handleClickItem.bind(i,l,s),style:d};return Ze.default.createElement("li",f,i.props.renderItem(s,{isSelected:l===i.state.selectedItem,isPrevious:l===i.state.previousItem}))}):[]}},{key:"renderControls",value:function(){var o=this,i=this.props,s=i.showIndicators,l=i.labels,a=i.renderIndicator,c=i.children;return s?Ze.default.createElement("ul",{className:"control-dots"},Ze.Children.map(c,function(d,f){return a&&a(o.changeItem(f),f===o.state.selectedItem,f,l.item)})):null}},{key:"renderStatus",value:function(){return this.props.showStatus?Ze.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,Ze.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return!this.props.showThumbs||!this.props.children||Ze.Children.count(this.props.children)===0?null:Ze.default.createElement(Of.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children))}},{key:"render",value:function(){var o=this;if(!this.props.children||Ze.Children.count(this.props.children)===0)return null;var i=this.props.swipeable&&Ze.Children.count(this.props.children)>1,s=this.props.axis==="horizontal",l=this.props.showArrows&&Ze.Children.count(this.props.children)>1,a=l&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,c=l&&(this.state.selectedItem<Ze.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,d=this.renderItems(!0),f=d.shift(),m=d.pop(),p={className:_n.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},g={};if(s){if(p.onSwipeLeft=this.onSwipeForward,p.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var v=this.getVariableItemHeight(this.state.selectedItem);g.height=v||"auto"}}else p.onSwipeUp=this.props.verticalSwipe==="natural"?this.onSwipeBackwards:this.onSwipeForward,p.onSwipeDown=this.props.verticalSwipe==="natural"?this.onSwipeForward:this.onSwipeBackwards,p.style=hn(hn({},p.style),{},{height:this.state.itemSize}),g.height=this.state.itemSize;return Ze.default.createElement("div",{"aria-label":this.props.ariaLabel,className:_n.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},Ze.default.createElement("div",{className:_n.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,a,this.props.labels.leftArrow),Ze.default.createElement("div",{className:_n.default.WRAPPER(!0,this.props.axis),style:g},i?Ze.default.createElement(Ff.default,Is({tagName:"ul",innerRef:this.setListRef},p,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&m,this.renderItems(),this.props.infiniteLoop&&f):Ze.default.createElement("ul",{className:_n.default.SLIDER(!0,this.state.swiping),ref:function(b){return o.setListRef(b)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&m,this.renderItems(),this.props.infiniteLoop&&f)),this.props.renderArrowNext(this.onClickNext,c,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),n}(Ze.default.Component);zi.default=Vs;De(Vs,"displayName","Carousel");De(Vs,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:yo.noop,onClickThumb:yo.noop,onChange:yo.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(t,n,r){return Ze.default.createElement("button",{type:"button","aria-label":r,className:_n.default.ARROW_PREV(!n),onClick:t})},renderArrowNext:function(t,n,r){return Ze.default.createElement("button",{type:"button","aria-label":r,className:_n.default.ARROW_NEXT(!n),onClick:t})},renderIndicator:function(t,n,r,o){return Ze.default.createElement("li",{className:_n.default.DOT(n),onClick:t,onKeyDown:t,value:r,key:r,role:"button",tabIndex:0,"aria-label":"".concat(o," ").concat(r+1)})},renderItem:function(t){return t},renderThumbs:function(t){var n=Ze.Children.map(t,function(r){var o=r;if(r.type!=="img"&&(o=Ze.Children.toArray(r.props.children).find(function(i){return i.type==="img"})),!!o)return o});return n.filter(function(r){return r}).length===0?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):n},statusFormatter:yo.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:Mi.slideSwipeAnimationHandler,stopSwipingHandler:Mi.slideStopSwipingHandler});var Yf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Carousel",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"CarouselProps",{enumerable:!0,get:function(){return n.CarouselProps}}),Object.defineProperty(e,"Thumbs",{enumerable:!0,get:function(){return r.default}});var t=o(zi),n=Yf,r=o(Fo);function o(i){return i&&i.__esModule?i:{default:i}}})(Xa);function Pt(e,t,n,r,o=!1){const i=u.useRef();i.current=t,u.useEffect(()=>{if(n===null||n.addEventListener===void 0)return;const s=n,l=a=>{i.current?.call(s,a)};return s.addEventListener(e,l,{passive:r,capture:o}),()=>{s.removeEventListener(e,l,{capture:o})}},[e,n,r,o])}function Nr(e,t){return e===void 0?void 0:t}const Kf=Math.PI;function zl(e){return e*Kf/180}const qa=(e,t,n)=>({x1:e-n/2,y1:t-n/2,x2:e+n/2,y2:t+n/2}),Ga=(e,t,n,r,o)=>{switch(e){case"left":return Math.floor(t)+r+o/2;case"center":return Math.floor(t+n/2);case"right":return Math.floor(t+n)-r-o/2}},Za=(e,t,n)=>Math.min(e,t-n*2),Qa=(e,t,n)=>n.x1<=e&&e<=n.x2&&n.y1<=t&&t<=n.y2,Xs=e=>{const t=e.fgColor??"currentColor";return u.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M12.7073 7.05029C7.87391 11.8837 10.4544 9.30322 6.03024 13.7273C5.77392 13.9836 5.58981 14.3071 5.50189 14.6587L4.52521 18.5655C4.38789 19.1148 4.88543 19.6123 5.43472 19.475L9.34146 18.4983C9.69313 18.4104 10.0143 18.2286 10.2706 17.9722L16.9499 11.2929",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}),u.createElement("path",{d:"M20.4854 4.92901L19.0712 3.5148C18.2901 2.73375 17.0238 2.73375 16.2428 3.5148L14.475 5.28257C15.5326 7.71912 16.4736 8.6278 18.7176 9.52521L20.4854 7.75744C21.2665 6.97639 21.2665 5.71006 20.4854 4.92901Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}))},qf=e=>{const t=e.fgColor??"currentColor";return u.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M19 6L10.3802 17L5.34071 11.8758",vectorEffect:"non-scaling-stroke",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function Gf(e,t,n){const[r,o]=u.useState(e),i=u.useRef(!0);u.useEffect(()=>()=>{i.current=!1},[]);const s=u.useRef(ga(l=>{i.current&&o(l)},n));return u.useLayoutEffect(()=>{i.current&&s.current(()=>e())},t),r}const Zf="֑-߿יִ-﷽ﹰ-ﻼ",Qf="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",Jf=new RegExp("^[^"+Qf+"]*["+Zf+"]");function Us(e){return Jf.test(e)?"rtl":"not-rtl"}let mi;function Ds(){if(typeof document>"u")return 0;if(mi!==void 0)return mi;const e=document.createElement("p");e.style.width="100%",e.style.height="200px";const t=document.createElement("div");t.id="testScrollbar",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.append(e),document.body.append(t);const n=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=t.clientWidth),t.remove(),mi=n-r,mi}const fr=Symbol();function eh(e){const t=u.useRef([fr,e]);t.current[1]!==e&&(t.current[0]=e),t.current[1]=e;const[n,r]=u.useState(e),[,o]=u.useState(),i=u.useCallback(l=>{const a=t.current[0];a!==fr&&(l=typeof l=="function"?l(a):l,l===a)||(a!==fr&&o({}),r(c=>typeof l=="function"?l(a===fr?c:a):l),t.current[0]=fr)},[]),s=u.useCallback(()=>{t.current[0]=fr,o({})},[]);return[t.current[0]===fr?n:t.current[0],i,s]}function Ja(e){if(e.length===0)return"";let t=0,n=0;for(const r of e){if(n+=r.length,n>1e4)break;t++}return e.slice(0,t).join(", ")}function th(e){const t=u.useRef(e);return Yr(e,t.current)||(t.current=e),u.useMemo(()=>t.current,[t.current])}const nh=e=>{const{urls:t,canWrite:n,onEditClick:r,renderImage:o}=e,i=t.filter(l=>l!=="");if(i.length===0)return null;const s=i.length>1;return u.createElement(tf,{"data-testid":"GDG-default-image-overlay-editor"},u.createElement(Xa.Carousel,{showArrows:s,showThumbs:!1,swipeable:s,emulateTouch:s,infiniteLoop:s},i.map(l=>{const a=o?.(l)??u.createElement("img",{draggable:!1,src:l});return u.createElement("div",{className:"gdg-centering-container",key:l},a)})),n&&r&&u.createElement("button",{className:"gdg-edit-icon",onClick:r},u.createElement(Xs,null)))};function Ys(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let wr=Ys();function ec(e){wr=e}const tc=/[&<>"']/,rh=new RegExp(tc.source,"g"),nc=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,oh=new RegExp(nc.source,"g"),ih={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fl=e=>ih[e];function Kt(e,t){if(t){if(tc.test(e))return e.replace(rh,Fl)}else if(nc.test(e))return e.replace(oh,Fl);return e}const sh=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function lh(e){return e.replace(sh,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const ah=/(^|[^\[])\^/g;function rt(e,t){let n=typeof e=="string"?e:e.source;t=t||"";const r={replace:(o,i)=>{let s=typeof i=="string"?i:i.source;return s=s.replace(ah,"$1"),n=n.replace(o,s),r},getRegex:()=>new RegExp(n,t)};return r}function Ol(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const Eo={exec:()=>null};function $l(e,t){const n=e.replace(/\|/g,(i,s,l)=>{let a=!1,c=s;for(;--c>=0&&l[c]==="\\";)a=!a;return a?"|":" |"}),r=n.split(/ \|/);let o=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(/\\\|/g,"|");return r}function pi(e,t,n){const r=e.length;if(r===0)return"";let o=0;for(;o<r;){const i=e.charAt(r-o-1);if(i===t&&!n)o++;else if(i!==t&&n)o++;else break}return e.slice(0,r-o)}function ch(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}function Nl(e,t,n,r){const o=t.href,i=t.title?Kt(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:n,href:o,title:i,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,l}return{type:"image",raw:n,href:o,title:i,text:Kt(s)}}function uh(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const r=n[1];return t.split(`
`).map(o=>{const i=o.match(/^\s+/);if(i===null)return o;const[s]=i;return s.length>=r.length?o.slice(r.length):o}).join(`
`)}class Ti{options;rules;lexer;constructor(t){this.options=t||wr}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:pi(r,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const r=n[0],o=uh(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:o}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(/#$/.test(r)){const o=pi(r,"#");(this.options.pedantic||!o||/ $/.test(o))&&(r=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){const r=pi(n[0].replace(/^ *>[ \t]?/gm,""),`
`),o=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(r);return this.lexer.state.top=o,{type:"blockquote",raw:n[0],tokens:i,text:r}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r=n[1].trim();const o=r.length>1,i={type:"list",raw:"",ordered:o,start:o?+r.slice(0,-1):"",loose:!1,items:[]};r=o?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=o?r:"[*+-]");const s=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let l="",a="",c=!1;for(;t;){let d=!1;if(!(n=s.exec(t))||this.rules.block.hr.test(t))break;l=n[0],t=t.substring(l.length);let f=n[2].split(`
`,1)[0].replace(/^\t+/,b=>" ".repeat(3*b.length)),m=t.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,a=f.trimStart()):(p=n[2].search(/[^ ]/),p=p>4?1:p,a=f.slice(p),p+=n[1].length);let g=!1;if(!f&&/^ *$/.test(m)&&(l+=m+`
`,t=t.substring(m.length+1),d=!0),!d){const b=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),y=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),C=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),x=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;t;){const w=t.split(`
`,1)[0];if(m=w,this.options.pedantic&&(m=m.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),C.test(m)||x.test(m)||b.test(m)||y.test(t))break;if(m.search(/[^ ]/)>=p||!m.trim())a+=`
`+m.slice(p);else{if(g||f.search(/[^ ]/)>=4||C.test(f)||x.test(f)||y.test(f))break;a+=`
`+m}!g&&!m.trim()&&(g=!0),l+=w+`
`,t=t.substring(w.length+1),f=m.slice(p)}}i.loose||(c?i.loose=!0:/\n *\n *$/.test(l)&&(c=!0));let v=null,k;this.options.gfm&&(v=/^\[[ xX]\] /.exec(a),v&&(k=v[0]!=="[ ] ",a=a.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:l,task:!!v,checked:k,loose:!1,text:a,tokens:[]}),i.raw+=l}i.items[i.items.length-1].raw=l.trimEnd(),i.items[i.items.length-1].text=a.trimEnd(),i.raw=i.raw.trimEnd();for(let d=0;d<i.items.length;d++)if(this.lexer.state.top=!1,i.items[d].tokens=this.lexer.blockTokens(i.items[d].text,[]),!i.loose){const f=i.items[d].tokens.filter(p=>p.type==="space"),m=f.length>0&&f.some(p=>/\n.*\n/.test(p.raw));i.loose=m}if(i.loose)for(let d=0;d<i.items.length;d++)i.items[d].loose=!0;return i}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),o=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:o,title:i}}}table(t){const n=this.rules.block.table.exec(t);if(!n||!/[:|]/.test(n[2]))return;const r=$l(n[1]),o=n[2].replace(/^\||\| *$/g,"").split("|"),i=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],s={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===o.length){for(const l of o)/^ *-+: *$/.test(l)?s.align.push("right"):/^ *:-+: *$/.test(l)?s.align.push("center"):/^ *:-+ *$/.test(l)?s.align.push("left"):s.align.push(null);for(const l of r)s.header.push({text:l,tokens:this.lexer.inline(l)});for(const l of i)s.rows.push($l(l,s.header.length).map(a=>({text:a,tokens:this.lexer.inline(a)})));return s}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:Kt(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const s=pi(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=ch(n[2],"()");if(s>-1){const a=(n[0].indexOf("!")===0?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let o=n[2],i="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);s&&(o=s[1],i=s[3])}else i=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(r)?o=o.slice(1):o=o.slice(1,-1)),Nl(n,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){const o=(r[2]||r[1]).replace(/\s+/g," "),i=n[o.toLowerCase()];if(!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Nl(r,i,r[0],this.lexer)}}emStrong(t,n,r=""){let o=this.rules.inline.emStrongLDelim.exec(t);if(!o||o[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(o[1]||o[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=[...o[0]].length-1;let l,a,c=s,d=0;const f=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,n=n.slice(-1*t.length+s);(o=f.exec(n))!=null;){if(l=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!l)continue;if(a=[...l].length,o[3]||o[4]){c+=a;continue}else if((o[5]||o[6])&&s%3&&!((s+a)%3)){d+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+d);const m=[...o[0]][0].length,p=t.slice(0,s+o.index+m+a);if(Math.min(s,a)%2){const v=p.slice(1,-1);return{type:"em",raw:p,text:v,tokens:this.lexer.inlineTokens(v)}}const g=p.slice(2,-2);return{type:"strong",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(/\n/g," ");const o=/[^ ]/.test(r),i=/^ /.test(r)&&/ $/.test(r);return o&&i&&(r=r.substring(1,r.length-1)),r=Kt(r,!0),{type:"codespan",raw:n[0],text:r}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let r,o;return n[2]==="@"?(r=Kt(n[1]),o="mailto:"+r):(r=Kt(n[1]),o=r),{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(t){let n;if(n=this.rules.inline.url.exec(t)){let r,o;if(n[2]==="@")r=Kt(n[0]),o="mailto:"+r;else{let i;do i=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(i!==n[0]);r=Kt(n[0]),n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){let r;return this.lexer.state.inRawBlock?r=n[0]:r=Kt(n[0]),{type:"text",raw:n[0],text:r}}}}const dh=/^(?: *(?:\n|$))+/,fh=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,hh=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,No=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,gh=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,rc=/(?:[*+-]|\d{1,9}[.)])/,oc=rt(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,rc).getRegex(),Ks=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,mh=/^[^\n]+/,qs=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ph=rt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",qs).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),wh=rt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,rc).getRegex(),Ni="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Gs=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,vh=rt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Gs).replace("tag",Ni).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ic=rt(Ks).replace("hr",No).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ni).getRegex(),yh=rt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ic).getRegex(),Zs={blockquote:yh,code:fh,def:ph,fences:hh,heading:gh,hr:No,html:vh,lheading:oc,list:wh,newline:dh,paragraph:ic,table:Eo,text:mh},Wl=rt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",No).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ni).getRegex(),bh={...Zs,table:Wl,paragraph:rt(Ks).replace("hr",No).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Wl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ni).getRegex()},xh={...Zs,html:rt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Gs).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Eo,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:rt(Ks).replace("hr",No).replace("heading",` *#{1,6} *[^
]`).replace("lheading",oc).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},sc=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ch=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,lc=/^( {2,}|\\)\n(?!\s*$)/,kh=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Wo="\\p{P}$+<=>`^|~",Sh=rt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Wo).getRegex(),Rh=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Mh=rt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Wo).getRegex(),Eh=rt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Wo).getRegex(),Th=rt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Wo).getRegex(),Ih=rt(/\\([punct])/,"gu").replace(/punct/g,Wo).getRegex(),Ph=rt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Dh=rt(Gs).replace("(?:-->|$)","-->").getRegex(),_h=rt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Dh).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ii=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ah=rt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ii).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ac=rt(/^!?\[(label)\]\[(ref)\]/).replace("label",Ii).replace("ref",qs).getRegex(),cc=rt(/^!?\[(ref)\](?:\[\])?/).replace("ref",qs).getRegex(),Lh=rt("reflink|nolink(?!\\()","g").replace("reflink",ac).replace("nolink",cc).getRegex(),Qs={_backpedal:Eo,anyPunctuation:Ih,autolink:Ph,blockSkip:Rh,br:lc,code:Ch,del:Eo,emStrongLDelim:Mh,emStrongRDelimAst:Eh,emStrongRDelimUnd:Th,escape:sc,link:Ah,nolink:cc,punctuation:Sh,reflink:ac,reflinkSearch:Lh,tag:_h,text:kh,url:Eo},Hh={...Qs,link:rt(/^!?\[(label)\]\((.*?)\)/).replace("label",Ii).getRegex(),reflink:rt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ii).getRegex()},_s={...Qs,escape:rt(sc).replace("])","~|])").getRegex(),url:rt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},zh={..._s,br:rt(lc).replace("{2,}","*").getRegex(),text:rt(_s.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},wi={normal:Zs,gfm:bh,pedantic:xh},go={normal:Qs,gfm:_s,breaks:zh,pedantic:Hh};class Mn{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||wr,this.options.tokenizer=this.options.tokenizer||new Ti,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:wi.normal,inline:go.normal};this.options.pedantic?(n.block=wi.pedantic,n.inline=go.pedantic):this.options.gfm&&(n.block=wi.gfm,this.options.breaks?n.inline=go.breaks:n.inline=go.gfm),this.tokenizer.rules=n}static get rules(){return{block:wi,inline:go}}static lex(t,n){return new Mn(n).lex(t)}static lexInline(t,n){return new Mn(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(l,a,c)=>a+"    ".repeat(c.length));let r,o,i,s;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(r=l.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+r.raw,o.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(i=t,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const a=t.slice(1);let c;this.options.extensions.startBlock.forEach(d=>{c=d.call({lexer:this},a),typeof c=="number"&&c>=0&&(l=Math.min(l,c))}),l<1/0&&l>=0&&(i=t.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){o=n[n.length-1],s&&o.type==="paragraph"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r),s=i.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&o.type==="text"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r);continue}if(t){const l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r,o,i,s=t,l,a,c;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)d.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,l.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(a||(c=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(r=d.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&r.type==="text"&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),o=n[n.length-1],o&&r.type==="text"&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(t,s,c)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),n.push(r);continue}if(i=t,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const f=t.slice(1);let m;this.options.extensions.startInline.forEach(p=>{m=p.call({lexer:this},f),typeof m=="number"&&m>=0&&(d=Math.min(d,m))}),d<1/0&&d>=0&&(i=t.substring(0,d+1))}if(r=this.tokenizer.inlineText(i)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),a=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(t){const d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}}class Pi{options;constructor(t){this.options=t||wr}code(t,n,r){const o=(n||"").match(/^\S*/)?.[0];return t=t.replace(/\n$/,"")+`
`,o?'<pre><code class="language-'+Kt(o)+'">'+(r?t:Kt(t,!0))+`</code></pre>
`:"<pre><code>"+(r?t:Kt(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,n){return t}heading(t,n,r){return`<h${n}>${t}</h${n}>
`}hr(){return`<hr>
`}list(t,n,r){const o=n?"ol":"ul",i=n&&r!==1?' start="'+r+'"':"";return"<"+o+i+`>
`+t+"</"+o+`>
`}listitem(t,n,r){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+t+`</${r}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,n,r){const o=Ol(t);if(o===null)return r;t=o;let i='<a href="'+t+'"';return n&&(i+=' title="'+n+'"'),i+=">"+r+"</a>",i}image(t,n,r){const o=Ol(t);if(o===null)return r;t=o;let i=`<img src="${t}" alt="${r}"`;return n&&(i+=` title="${n}"`),i+=">",i}text(t){return t}}class Js{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,r){return""+r}image(t,n,r){return""+r}br(){return""}}class En{options;renderer;textRenderer;constructor(t){this.options=t||wr,this.options.renderer=this.options.renderer||new Pi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Js}static parse(t,n){return new En(n).parse(t)}static parseInline(t,n){return new En(n).parseInline(t)}parse(t,n=!0){let r="";for(let o=0;o<t.length;o++){const i=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const s=i,l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){r+=l||"";continue}}switch(i.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const s=i;r+=this.renderer.heading(this.parseInline(s.tokens),s.depth,lh(this.parseInline(s.tokens,this.textRenderer)));continue}case"code":{const s=i;r+=this.renderer.code(s.text,s.lang,!!s.escaped);continue}case"table":{const s=i;let l="",a="";for(let d=0;d<s.header.length;d++)a+=this.renderer.tablecell(this.parseInline(s.header[d].tokens),{header:!0,align:s.align[d]});l+=this.renderer.tablerow(a);let c="";for(let d=0;d<s.rows.length;d++){const f=s.rows[d];a="";for(let m=0;m<f.length;m++)a+=this.renderer.tablecell(this.parseInline(f[m].tokens),{header:!1,align:s.align[m]});c+=this.renderer.tablerow(a)}r+=this.renderer.table(l,c);continue}case"blockquote":{const s=i,l=this.parse(s.tokens);r+=this.renderer.blockquote(l);continue}case"list":{const s=i,l=s.ordered,a=s.start,c=s.loose;let d="";for(let f=0;f<s.items.length;f++){const m=s.items[f],p=m.checked,g=m.task;let v="";if(m.task){const k=this.renderer.checkbox(!!p);c?m.tokens.length>0&&m.tokens[0].type==="paragraph"?(m.tokens[0].text=k+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&m.tokens[0].tokens[0].type==="text"&&(m.tokens[0].tokens[0].text=k+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:k+" "}):v+=k+" "}v+=this.parse(m.tokens,c),d+=this.renderer.listitem(v,g,!!p)}r+=this.renderer.list(d,l,a);continue}case"html":{const s=i;r+=this.renderer.html(s.text,s.block);continue}case"paragraph":{const s=i;r+=this.renderer.paragraph(this.parseInline(s.tokens));continue}case"text":{let s=i,l=s.tokens?this.parseInline(s.tokens):s.text;for(;o+1<t.length&&t[o+1].type==="text";)s=t[++o],l+=`
`+(s.tokens?this.parseInline(s.tokens):s.text);r+=n?this.renderer.paragraph(l):l;continue}default:{const s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return r}parseInline(t,n){n=n||this.renderer;let r="";for(let o=0;o<t.length;o++){const i=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const s=this.options.extensions.renderers[i.type].call({parser:this},i);if(s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=s||"";continue}}switch(i.type){case"escape":{const s=i;r+=n.text(s.text);break}case"html":{const s=i;r+=n.html(s.text);break}case"link":{const s=i;r+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break}case"image":{const s=i;r+=n.image(s.href,s.title,s.text);break}case"strong":{const s=i;r+=n.strong(this.parseInline(s.tokens,n));break}case"em":{const s=i;r+=n.em(this.parseInline(s.tokens,n));break}case"codespan":{const s=i;r+=n.codespan(s.text);break}case"br":{r+=n.br();break}case"del":{const s=i;r+=n.del(this.parseInline(s.tokens,n));break}case"text":{const s=i;r+=n.text(s.text);break}default:{const s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return r}}class bi{options;constructor(t){this.options=t||wr}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}class Fh{defaults=Ys();options=this.setOptions;parse=this.#e(Mn.lex,En.parse);parseInline=this.#e(Mn.lexInline,En.parseInline);Parser=En;Renderer=Pi;TextRenderer=Js;Lexer=Mn;Tokenizer=Ti;Hooks=bi;constructor(...t){this.use(...t)}walkTokens(t,n){let r=[];for(const o of t)switch(r=r.concat(n.call(this,o)),o.type){case"table":{const i=o;for(const s of i.header)r=r.concat(this.walkTokens(s.tokens,n));for(const s of i.rows)for(const l of s)r=r.concat(this.walkTokens(l.tokens,n));break}case"list":{const i=o;r=r.concat(this.walkTokens(i.items,n));break}default:{const i=o;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(s=>{r=r.concat(this.walkTokens(i[s],n))}):i.tokens&&(r=r.concat(this.walkTokens(i.tokens,n)))}}return r}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{const o={...r};if(o.async=this.defaults.async||o.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const s=n.renderers[i.name];s?n.renderers[i.name]=function(...l){let a=i.renderer.apply(this,l);return a===!1&&(a=s.apply(this,l)),a}:n.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=n[i.level];s?s.unshift(i.tokenizer):n[i.level]=[i.tokenizer],i.start&&(i.level==="block"?n.startBlock?n.startBlock.push(i.start):n.startBlock=[i.start]:i.level==="inline"&&(n.startInline?n.startInline.push(i.start):n.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(n.childTokens[i.name]=i.childTokens)}),o.extensions=n),r.renderer){const i=this.defaults.renderer||new Pi(this.defaults);for(const s in r.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(s==="options")continue;const l=s,a=r.renderer[l],c=i[l];i[l]=(...d)=>{let f=a.apply(i,d);return f===!1&&(f=c.apply(i,d)),f||""}}o.renderer=i}if(r.tokenizer){const i=this.defaults.tokenizer||new Ti(this.defaults);for(const s in r.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const l=s,a=r.tokenizer[l],c=i[l];i[l]=(...d)=>{let f=a.apply(i,d);return f===!1&&(f=c.apply(i,d)),f}}o.tokenizer=i}if(r.hooks){const i=this.defaults.hooks||new bi;for(const s in r.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(s==="options")continue;const l=s,a=r.hooks[l],c=i[l];bi.passThroughHooks.has(s)?i[l]=d=>{if(this.defaults.async)return Promise.resolve(a.call(i,d)).then(m=>c.call(i,m));const f=a.call(i,d);return c.call(i,f)}:i[l]=(...d)=>{let f=a.apply(i,d);return f===!1&&(f=c.apply(i,d)),f}}o.hooks=i}if(r.walkTokens){const i=this.defaults.walkTokens,s=r.walkTokens;o.walkTokens=function(l){let a=[];return a.push(s.call(this,l)),i&&(a=a.concat(i.call(this,l))),a}}this.defaults={...this.defaults,...o}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return Mn.lex(t,n??this.defaults)}parser(t,n){return En.parse(t,n??this.defaults)}#e(t,n){return(r,o)=>{const i={...o},s={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);const l=this.#t(!!s.silent,!!s.async);if(typeof r>"u"||r===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(a=>t(a,s)).then(a=>s.hooks?s.hooks.processAllTokens(a):a).then(a=>s.walkTokens?Promise.all(this.walkTokens(a,s.walkTokens)).then(()=>a):a).then(a=>n(a,s)).then(a=>s.hooks?s.hooks.postprocess(a):a).catch(l);try{s.hooks&&(r=s.hooks.preprocess(r));let a=t(r,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let c=n(a,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(a){return l(a)}}}#t(t,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const o="<p>An error occurred:</p><pre>"+Kt(r.message+"",!0)+"</pre>";return n?Promise.resolve(o):o}if(n)return Promise.reject(r);throw r}}}const pr=new Fh;function Qe(e,t){return pr.parse(e,t)}Qe.options=Qe.setOptions=function(e){return pr.setOptions(e),Qe.defaults=pr.defaults,ec(Qe.defaults),Qe};Qe.getDefaults=Ys;Qe.defaults=wr;Qe.use=function(...e){return pr.use(...e),Qe.defaults=pr.defaults,ec(Qe.defaults),Qe};Qe.walkTokens=function(e,t){return pr.walkTokens(e,t)};Qe.parseInline=pr.parseInline;Qe.Parser=En;Qe.parser=En.parse;Qe.Renderer=Pi;Qe.TextRenderer=Js;Qe.Lexer=Mn;Qe.lexer=Mn.lex;Qe.Tokenizer=Ti;Qe.Hooks=bi;Qe.parse=Qe;Qe.options;Qe.setOptions;Qe.use;Qe.walkTokens;Qe.parseInline;En.parse;Mn.lex;const Oh=Jt("div")({name:"MarkdownContainer",class:"gdg-mnuv029",propsAsIs:!1});class $h extends xt.PureComponent{targetElement=null;renderMarkdownIntoDiv(){const{targetElement:t,props:n}=this;if(t===null)return;const{contents:r,createNode:o}=n,i=Qe(r),s=document.createRange();s.selectNodeContents(t),s.deleteContents();let l=o?.(i);if(l===void 0){const c=document.createElement("template");c.innerHTML=i,l=c.content}t.append(l);const a=t.getElementsByTagName("a");for(const c of a)c.target="_blank",c.rel="noreferrer noopener"}containerRefHook=t=>{this.targetElement=t,this.renderMarkdownIntoDiv()};render(){return this.renderMarkdownIntoDiv(),xt.createElement(Oh,{ref:this.containerRefHook})}}const Nh=Jt("textarea")({name:"InputBox",class:"gdg-izpuzkl",propsAsIs:!1}),Wh=Jt("div")({name:"ShadowBox",class:"gdg-s69h75o",propsAsIs:!1}),Bh=Jt("div")({name:"GrowingEntryStyle",class:"gdg-g1y0xocz",propsAsIs:!1});let Bl=0;const Wi=e=>{const{placeholder:t,value:n,onKeyDown:r,highlight:o,altNewline:i,validatedSelection:s,...l}=e,{onChange:a,className:c}=l,d=u.useRef(null),f=n??"";Gt(a!==void 0,"GrowingEntry must be a controlled input area");const[m]=u.useState(()=>"input-box-"+(Bl=(Bl+1)%1e7));u.useEffect(()=>{const g=d.current;if(g===null||g.disabled)return;const v=f.toString().length;g.focus(),g.setSelectionRange(o?0:v,v)},[]),u.useLayoutEffect(()=>{if(s!==void 0){const g=typeof s=="number"?[s,null]:s;d.current?.setSelectionRange(g[0],g[1])}},[s]);const p=u.useCallback(g=>{g.key==="Enter"&&g.shiftKey&&i===!0||r?.(g)},[i,r]);return u.createElement(Bh,{className:"gdg-growing-entry"},u.createElement(Wh,{className:c},f+`
`),u.createElement(Nh,{...l,className:(c??"")+" gdg-input",id:m,ref:d,onKeyDown:p,value:f,placeholder:t,dir:"auto"}))},ps={};let Xn=null;function jh(){const e=document.createElement("div");return e.style.opacity="0",e.style.pointerEvents="none",e.style.position="fixed",document.body.append(e),e}function As(e){const t=e.toLowerCase().trim();if(ps[t]!==void 0)return ps[t];Xn=Xn||jh(),Xn.style.color="#000",Xn.style.color=t;const n=getComputedStyle(Xn).color;Xn.style.color="#fff",Xn.style.color=t;const r=getComputedStyle(Xn).color;if(r!==n)return[0,0,0,1];let o=r.replace(/[^\d.,]/g,"").split(",").map(Number.parseFloat);return o.length<4&&o.push(1),o=o.map(i=>Number.isNaN(i)?0:i),ps[t]=o,o}function Kr(e,t){const[n,r,o]=As(e);return`rgba(${n}, ${r}, ${o}, ${t})`}function Zt(e,t){if(t===void 0)return e;const[n,r,o,i]=As(e);if(i===1)return e;const[s,l,a,c]=As(t),d=i+c*(1-i),f=(i*n+c*s*(1-i))/d,m=(i*r+c*l*(1-i))/d,p=(i*o+c*a*(1-i))/d;return`rgba(${f}, ${m}, ${p}, ${d})`}var jr=new Map,Xr=new Map,Ls=new Map;function Vh(){jr.clear(),Ls.clear(),Xr.clear()}function Xh(e,t,n,r,o){var i,s,l;let a=0,c={};for(let f of e)a+=(i=n.get(f))!=null?i:o,c[f]=((s=c[f])!=null?s:0)+1;let d=t-a;for(let f of Object.keys(c)){let m=c[f],p=(l=n.get(f))!=null?l:o,g=p*m/a,v=d*g*r/m,k=p+v;n.set(f,k)}}function Uh(e,t){var n;let r=new Map,o=0;for(let c of"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890,.-+=?"){let d=e.measureText(c).width;r.set(c,d),o+=d}let i=o/r.size,s=3,l=(t/i+s)/(s+1),a=r.keys();for(let c of a)r.set(c,((n=r.get(c))!=null?n:i)*l);return r}function To(e,t,n,r){var o,i;let s=Xr.get(n);if(r&&s!==void 0&&s.count>2e4){let c=Ls.get(n);if(c===void 0&&(c=Uh(e,s.size),Ls.set(n,c)),s.count>5e5){let f=0;for(let m of t)f+=(o=c.get(m))!=null?o:s.size;return f*1.01}let d=e.measureText(t);return Xh(t,d.width,c,Math.max(.05,1-s.count/2e5),s.size),Xr.set(n,{count:s.count+t.length,size:s.size}),d.width}let l=e.measureText(t),a=l.width/t.length;if(((i=s?.count)!=null?i:0)>2e4)return l.width;if(s===void 0)Xr.set(n,{count:t.length,size:a});else{let c=a-s.size,d=t.length/(s.count+t.length),f=s.size+c*d;Xr.set(n,{count:s.count+t.length,size:f})}return l.width}function Yh(e,t,n,r,o,i,s,l){if(t.length<=1)return t.length;if(o<n)return-1;let a=Math.floor(n/o*i),c=To(e,t.slice(0,Math.max(0,a)),r,s);if(c!==n)if(c<n){for(;c<n;)a++,c=To(e,t.slice(0,Math.max(0,a)),r,s);a--}else for(;c>n;){let d=t.lastIndexOf(" ",a-1);d>0?a=d:a--,c=To(e,t.slice(0,Math.max(0,a)),r,s)}if(t[a]!==" "){let d=0;d=t.lastIndexOf(" ",a),d>0&&(a=d)}return a}function Kh(e,t,n,r,o,i){let s=`${t}_${n}_${r}px`,l=jr.get(s);if(l!==void 0)return l;if(r<=0)return[];let a=[],c=t.split(`
`),d=Xr.get(n),f=d===void 0?t.length:r/d.size*1.5,m=o&&d!==void 0&&d.count>2e4;for(let p of c){let g=To(e,p.slice(0,Math.max(0,f)),n,m),v=Math.min(p.length,f);if(g<=r)a.push(p);else{for(;g>r;){let k=Yh(e,p,r,n,g,v,m),b=p.slice(0,Math.max(0,k));p=p.slice(b.length),a.push(b),g=To(e,p.slice(0,Math.max(0,f)),n,m),v=Math.min(p.length,f)}g>0&&a.push(p)}}return a=a.map((p,g)=>g===0?p.trimEnd():p.trim()),jr.set(s,a),jr.size>500&&jr.delete(jr.keys().next().value),a}function qh(e,t){return xt.useMemo(()=>e.map((n,r)=>({...n,sourceIndex:r,sticky:r<t})),[e,t])}function Gh(e,t){const[n,r]=t;if(e.columns.hasIndex(n)||e.rows.hasIndex(r))return!0;if(e.current!==void 0){if(Io(e.current.cell,t))return!0;const o=[e.current.range,...e.current.rangeStack];for(const i of o)if(n>=i.x&&n<i.x+i.width&&r>=i.y&&r<i.y+i.height)return!0}return!1}function Lo(e,t){return(e??"")===(t??"")}function Zh(e,t,n){return n.current===void 0||e[1]!==n.current.cell[1]?!1:t.span===void 0?n.current.cell[0]===e[0]:n.current.cell[0]>=t.span[0]&&n.current.cell[0]<=t.span[1]}function uc(e,t){const[n,r]=e;return n>=t.x&&n<t.x+t.width&&r>=t.y&&r<t.y+t.height}function Io(e,t){return e?.[0]===t?.[0]&&e?.[1]===t?.[1]}function dc(e){return[e.x+e.width-1,e.y+e.height-1]}function jl(e,t,n){const r=n.x,o=n.x+n.width-1,i=n.y,s=n.y+n.height-1,[l,a]=e;if(a<i||a>s)return!1;if(t.span===void 0)return l>=r&&l<=o;const[c,d]=t.span;return c>=r&&c<=o||d>=r&&c<=o||c<r&&d>o}function Qh(e,t,n){let r=0;if(n.current===void 0)return r;jl(e,t,n.current.range)&&r++;for(const o of n.current.rangeStack)jl(e,t,o)&&r++;return r}function fc(e,t){let n=e;if(t!==void 0){let r=[...e];const o=n[t.src];t.src>t.dest?(r.splice(t.src,1),r.splice(t.dest,0,o)):(r.splice(t.dest+1,0,o),r.splice(t.src,1)),r=r.map((i,s)=>({...i,sticky:e[s].sticky})),n=r}return n}function qr(e,t){let n=0;const r=fc(e,t);for(let o=0;o<r.length;o++){const i=r[o];if(i.sticky)n+=i.width;else break}return n}function Zr(e,t,n){if(typeof n=="number")return t*n;{let r=0;for(let o=e-t;o<e;o++)r+=n(o);return r}}function Hs(e,t,n,r,o){const i=fc(e,r),s=[];for(const c of i)if(c.sticky)s.push(c);else break;if(s.length>0)for(const c of s)n-=c.width;let l=t,a=o??0;for(;a<=n&&l<i.length;)a+=i[l].width,l++;for(let c=t;c<l;c++){const d=i[c];d.sticky||s.push(d)}return s}function Jh(e,t,n){let r=0;for(const o of t){const i=o.sticky?r:r+(n??0);if(e<=i+o.width)return o.sourceIndex;r+=o.width}return-1}function eg(e,t,n,r,o,i,s,l,a,c){const d=r+o;if(n&&e<=o)return-2;if(e<=d)return-1;let f=t;for(let g=0;g<c;g++){const v=i-1-g,k=typeof s=="number"?s:s(v);if(f-=k,e>=f)return v}const m=i-c,p=e-(a??0);if(typeof s=="number"){const g=Math.floor((p-d)/s)+l;return g>=m?void 0:g}else{let g=d;for(let v=l;v<m;v++){const k=s(v);if(p<=g+k)return v;g+=k}return}}let xi=0,Po={};const tg=typeof window>"u";async function ng(){tg||document?.fonts?.ready===void 0||(await document.fonts.ready,xi=0,Po={},Vh())}ng();function hc(e,t,n,r){return`${e}_${r??t?.font}_${n}`}function Bi(e,t,n){const r=hc(e,t,"middle",n);let o=Po[r];return o===void 0&&(o=t.measureText(e),Po[r]=o,xi++),xi>1e4&&(Po={},xi=0),o}function rg(e,t){const n=hc(e,void 0,"middle",t);return Po[n]}function Qn(e,t){return typeof t!="string"&&(t=t.baseFontFull),og(e,t)}function Vl(e,t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ";e.save(),e.textBaseline=t;const r=e.measureText(n);return e.restore(),r}const Xl=[];function og(e,t){for(const i of Xl)if(i.key===t)return i.val;const n=Vl(e,"alphabetic"),o=-(Vl(e,"middle").actualBoundingBoxDescent-n.actualBoundingBoxDescent)+n.actualBoundingBoxAscent/2;return Xl.push({key:t,val:o}),o}function ig(e,t,n,r,o,i){const{ctx:s,rect:l,theme:a}=e;let c=Number.MAX_SAFE_INTEGER;const d=500;if(t!==void 0&&(c=n-t,c<d)){const f=1-c/d;s.globalAlpha=f,s.fillStyle=a.bgSearchResult,s.fillRect(l.x+1,l.y+1,l.width-(o?2:1),l.height-(i?2:1)),s.globalAlpha=1,r!==void 0&&(r.fillStyle=a.bgSearchResult)}return c<d}function Bo(e,t,n){const{ctx:r,theme:o}=e,i=t??{},s=n??o.textDark;return s!==i.fillStyle&&(r.fillStyle=s,i.fillStyle=s),i}function gc(e,t,n,r,o,i,s,l,a){a==="right"?e.fillText(t,n+o-(l.cellHorizontalPadding+.5),r+i/2+s):a==="center"?e.fillText(t,n+o/2,r+i/2+s):e.fillText(t,n+l.cellHorizontalPadding+.5,r+i/2+s)}function mc(e,t){const n=Bi("ABCi09jgqpy",e,t);return n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}function sg(e,t){e.includes(`
`)&&(e=e.split(/\r?\n/,1)[0]);const n=t/4;return e.length>n&&(e=e.slice(0,n)),e}function lg(e,t,n,r,o,i,s,l,a,c){const d=l.baseFontFull,f=Kh(e,t,d,o-l.cellHorizontalPadding*2,c??!1),m=mc(e,d),p=l.lineHeight*m,g=m+p*(f.length-1),v=g+l.cellVerticalPadding>i;v&&(e.save(),e.rect(n,r,o,i),e.clip());const k=r+i/2-g/2;let b=Math.max(r+l.cellVerticalPadding,k);for(const y of f)if(gc(e,y,n,b,o,m,s,l,a),b+=p,b>r+i)break;v&&e.restore()}function An(e,t,n,r,o){const{ctx:i,rect:s,theme:l}=e,{x:a,y:c,width:d,height:f}=s;r=r??!1,r||(t=sg(t,d));const m=Qn(i,l),p=Us(t)==="rtl";if(n===void 0&&p&&(n="right"),p&&(i.direction="rtl"),t.length>0){let g=!1;n==="right"?(i.textAlign="right",g=!0):n!==void 0&&n!=="left"&&(i.textAlign=n,g=!0),r?lg(i,t,a,c,d,f,m,l,n,o):gc(i,t,a,c,d,f,m,l,n),g&&(i.textAlign="start"),p&&(i.direction="inherit")}}function Hn(e,t,n,r,o,i){typeof i=="number"&&(i={tl:i,tr:i,br:i,bl:i}),i={tl:Math.max(0,Math.min(i.tl,o/2,r/2)),tr:Math.max(0,Math.min(i.tr,o/2,r/2)),bl:Math.max(0,Math.min(i.bl,o/2,r/2)),br:Math.max(0,Math.min(i.br,o/2,r/2))},e.moveTo(t+i.tl,n),e.arcTo(t+r,n,t+r,n+i.tr,i.tr),e.arcTo(t+r,n+o,t+r-i.br,n+o,i.br),e.arcTo(t,n+o,t,n+o-i.bl,i.bl),e.arcTo(t,n,t+i.tl,n,i.tl)}function ag(e,t,n){e.arc(t,n-1.25*3.5,1.25,0,2*Math.PI,!1),e.arc(t,n,1.25,0,2*Math.PI,!1),e.arc(t,n+1.25*3.5,1.25,0,2*Math.PI,!1)}function cg(e,t,n){const r=function(l,a){const c=a.x-l.x,d=a.y-l.y,f=Math.sqrt(c*c+d*d),m=c/f,p=d/f;return{x:c,y:a.y-l.y,len:f,nx:m,ny:p,ang:Math.atan2(p,m)}};let o;const i=t.length;let s=t[i-1];for(let l=0;l<i;l++){let a=t[l%i];const c=t[(l+1)%i],d=r(a,s),f=r(a,c),m=d.nx*f.ny-d.ny*f.nx,p=d.nx*f.nx-d.ny*-f.ny;let g=Math.asin(m<-1?-1:m>1?1:m),v=1,k=!1;p<0?g<0?g=Math.PI+g:(g=Math.PI-g,v=-1,k=!0):g>0&&(v=-1,k=!0),o=a.radius!==void 0?a.radius:n;const b=g/2;let y=Math.abs(Math.cos(b)*o/Math.sin(b)),C;y>Math.min(d.len/2,f.len/2)?(y=Math.min(d.len/2,f.len/2),C=Math.abs(y*Math.sin(b)/Math.cos(b))):C=o;let x=a.x+f.nx*y,w=a.y+f.ny*y;x+=-f.ny*C*v,w+=f.nx*C*v,e.arc(x,w,C,d.ang+Math.PI/2*v,f.ang-Math.PI/2*v,k),s=a,a=c}e.closePath()}function zs(e,t,n,r,o,i,s,l,a,c,d,f,m,p,g){const v={x:0,y:i+c,width:0,height:0};if(e>=p.length||t>=d||t<-2||e<0)return v;const k=i-o;if(e>=f){const b=s>e?-1:1,y=qr(p);v.x+=y+a;for(let C=s;C!==e;C+=b)v.x+=p[b===1?C:C-1].width*b}else for(let b=0;b<e;b++)v.x+=p[b].width;if(v.width=p[e].width+1,t===-1)v.y=o,v.height=k;else if(t===-2){v.y=0,v.height=o;let b=e;const y=p[e].group,C=p[e].sticky;for(;b>0&&Lo(p[b-1].group,y)&&p[b-1].sticky===C;){const w=p[b-1];v.x-=w.width,v.width+=w.width,b--}let x=e;for(;x+1<p.length&&Lo(p[x+1].group,y)&&p[x+1].sticky===C;){const w=p[x+1];v.width+=w.width,x++}if(!C){const w=qr(p),T=v.x-w;T<0&&(v.x-=T,v.width+=T),v.x+v.width>n&&(v.width=n-v.x)}}else if(t>=d-m){let b=d-t;for(v.y=r;b>0;){const y=t+b-1;v.height=typeof g=="number"?g:g(y),v.y-=v.height,b--}v.height+=1}else{const b=l>t?-1:1;if(typeof g=="number"){const y=t-l;v.y+=y*g}else for(let y=l;y!==t;y+=b)v.y+=g(y)*b;v.height=(typeof g=="number"?g:g(t))+1}return v}const el=1<<21;function mn(e,t){return(t+2)*el+e}function pc(e){return e%el}function tl(e){return Math.floor(e/el)-2}function nl(e){const t=pc(e),n=tl(e);return[t,n]}class wc{visibleWindow={x:0,y:0,width:0,height:0};freezeCols=0;freezeRows=[];isInWindow=t=>{const n=pc(t),r=tl(t),o=this.visibleWindow,i=n>=o.x&&n<=o.x+o.width||n<this.freezeCols,s=r>=o.y&&r<=o.y+o.height||this.freezeRows.includes(r);return i&&s};setWindow(t,n,r){this.visibleWindow.x===t.x&&this.visibleWindow.y===t.y&&this.visibleWindow.width===t.width&&this.visibleWindow.height===t.height&&this.freezeCols===n&&Yr(this.freezeRows,r)||(this.visibleWindow=t,this.freezeCols=n,this.freezeRows=r,this.clearOutOfWindow())}}class ug extends wc{cache=new Map;setValue=(t,n)=>{this.cache.set(mn(t[0],t[1]),n)};getValue=t=>this.cache.get(mn(t[0],t[1]));clearOutOfWindow=()=>{for(const[t]of this.cache.entries())this.isInWindow(t)||this.cache.delete(t)}}class Do{cells;constructor(t=[]){this.cells=new Set(t.map(n=>mn(n[0],n[1])))}add(t){this.cells.add(mn(t[0],t[1]))}has(t){return t===void 0?!1:this.cells.has(mn(t[0],t[1]))}remove(t){this.cells.delete(mn(t[0],t[1]))}clear(){this.cells.clear()}get size(){return this.cells.size}hasHeader(){for(const t of this.cells)if(tl(t)<0)return!0;return!1}hasItemInRectangle(t){for(let n=t.y;n<t.y+t.height;n++)for(let r=t.x;r<t.x+t.width;r++)if(this.cells.has(mn(r,n)))return!0;return!1}hasItemInRegion(t){for(const n of t)if(this.hasItemInRectangle(n))return!0;return!1}*values(){for(const t of this.cells)yield nl(t)}}function dg(e){return{"--gdg-accent-color":e.accentColor,"--gdg-accent-fg":e.accentFg,"--gdg-accent-light":e.accentLight,"--gdg-text-dark":e.textDark,"--gdg-text-medium":e.textMedium,"--gdg-text-light":e.textLight,"--gdg-text-bubble":e.textBubble,"--gdg-bg-icon-header":e.bgIconHeader,"--gdg-fg-icon-header":e.fgIconHeader,"--gdg-text-header":e.textHeader,"--gdg-text-group-header":e.textGroupHeader??e.textHeader,"--gdg-text-header-selected":e.textHeaderSelected,"--gdg-bg-cell":e.bgCell,"--gdg-bg-cell-medium":e.bgCellMedium,"--gdg-bg-header":e.bgHeader,"--gdg-bg-header-has-focus":e.bgHeaderHasFocus,"--gdg-bg-header-hovered":e.bgHeaderHovered,"--gdg-bg-bubble":e.bgBubble,"--gdg-bg-bubble-selected":e.bgBubbleSelected,"--gdg-bg-search-result":e.bgSearchResult,"--gdg-border-color":e.borderColor,"--gdg-horizontal-border-color":e.horizontalBorderColor??e.borderColor,"--gdg-drilldown-border":e.drilldownBorder,"--gdg-link-color":e.linkColor,"--gdg-cell-horizontal-padding":`${e.cellHorizontalPadding}px`,"--gdg-cell-vertical-padding":`${e.cellVerticalPadding}px`,"--gdg-header-font-style":e.headerFontStyle,"--gdg-base-font-style":e.baseFontStyle,"--gdg-marker-font-style":e.markerFontStyle,"--gdg-font-family":e.fontFamily,"--gdg-editor-font-size":e.editorFontSize,...e.roundingRadius===void 0?{}:{"--gdg-rounding-radius":`${e.roundingRadius}px`}}}const vc={accentColor:"#4F5DFF",accentFg:"#FFFFFF",accentLight:"rgba(62, 116, 253, 0.1)",textDark:"#313139",textMedium:"#737383",textLight:"#B2B2C0",textBubble:"#313139",bgIconHeader:"#737383",fgIconHeader:"#FFFFFF",textHeader:"#313139",textGroupHeader:"#313139BB",textHeaderSelected:"#FFFFFF",bgCell:"#FFFFFF",bgCellMedium:"#FAFAFB",bgHeader:"#F7F7F8",bgHeaderHasFocus:"#E9E9EB",bgHeaderHovered:"#EFEFF1",bgBubble:"#EDEDF3",bgBubbleSelected:"#FFFFFF",bgSearchResult:"#fff9e3",borderColor:"rgba(115, 116, 131, 0.16)",drilldownBorder:"rgba(0, 0, 0, 0)",linkColor:"#4F5DFF",cellHorizontalPadding:8,cellVerticalPadding:3,headerIconSize:18,headerFontStyle:"600 13px",baseFontStyle:"13px",markerFontStyle:"9px",fontFamily:"Inter, Roboto, -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Ubuntu, noto, arial, sans-serif",editorFontSize:"13px",lineHeight:1.4};function yc(){return vc}const fg=xt.createContext(vc);function Zn(e,...t){const n={...e};for(const r of t)if(r!==void 0)for(const o in r)r.hasOwnProperty(o)&&(n[o]=r[o]);return(n.headerFontFull===void 0||e.fontFamily!==n.fontFamily||e.headerFontStyle!==n.headerFontStyle)&&(n.headerFontFull=`${n.headerFontStyle} ${n.fontFamily}`),(n.baseFontFull===void 0||e.fontFamily!==n.fontFamily||e.baseFontStyle!==n.baseFontStyle)&&(n.baseFontFull=`${n.baseFontStyle} ${n.fontFamily}`),(n.markerFontFull===void 0||e.fontFamily!==n.fontFamily||e.markerFontStyle!==n.markerFontStyle)&&(n.markerFontFull=`${n.markerFontStyle} ${n.fontFamily}`),n}const Fs=150;function hg(e,t,n,r){return r(t)?.measure?.(e,t,n)??Fs}function bc(e,t,n,r,o,i,s,l,a){let c=0;const d=o===void 0?[]:o.map(m=>{const p=hg(e,m[r],t,a);return c=Math.max(c,p),p});if(d.length>5&&l){c=0;let m=0;for(const g of d)m+=g;const p=m/d.length;for(let g=0;g<d.length;g++)d[g]>=p*2?d[g]=0:c=Math.max(c,d[g])}c=Math.max(c,e.measureText(n.title).width+16+(n.icon===void 0?0:28));const f=Math.max(Math.ceil(i),Math.min(Math.floor(s),Math.ceil(c)));return{...n,width:f}}function gg(e,t,n,r,o,i,s,l,a){const c=u.useRef(t),d=u.useRef(n),f=u.useRef(s);c.current=t,d.current=n,f.current=s;const[m,p]=u.useMemo(()=>{if(typeof window>"u")return[null,null];const y=document.createElement("canvas");return y.style.display="none",y.style.opacity="0",y.style.position="fixed",[y,y.getContext("2d",{alpha:!1})]},[]);u.useLayoutEffect(()=>(m&&document.documentElement.append(m),()=>{m?.remove()}),[m]);const g=u.useRef({}),v=u.useRef(),[k,b]=u.useState();return u.useLayoutEffect(()=>{const y=d.current;if(y===void 0||e.every(di))return;let C=Math.max(1,10-Math.floor(e.length/1e4)),x=0;C<c.current&&C>1&&(C--,x=1);const w={x:0,y:0,width:e.length,height:Math.min(c.current,C)},T={x:0,y:c.current-1,width:e.length,height:1};(async()=>{const _=y(w,a.signal),P=x>0?y(T,a.signal):void 0;let W;typeof _=="object"?W=_:W=await Il(_),P!==void 0&&(typeof P=="object"?W=[...W,...P]:W=[...W,...await Il(P)]),v.current=e,b(W)})()},[a.signal,e]),u.useMemo(()=>{let C=e.every(di)?e:p===null?e.map(D=>di(D)?D:{...D,width:Fs}):(p.font=f.current.baseFontFull,e.map((D,_)=>{if(di(D))return D;if(g.current[D.id]!==void 0)return{...D,width:g.current[D.id]};if(k===void 0||v.current!==e||D.id===void 0)return{...D,width:Fs};const P=bc(p,s,D,_,k,o,i,!0,l);return g.current[D.id]=P.width,P})),x=0,w=0;const T=[];for(const[D,_]of C.entries())x+=_.width,_.grow!==void 0&&_.grow>0&&(w+=_.grow,T.push(D));if(x<r&&T.length>0){const D=[...C],_=r-x;let P=_;for(let W=0;W<T.length;W++){const j=T[W],A=(C[j].grow??0)/w,L=W===T.length-1?P:Math.min(P,Math.floor(_*A));D[j]={...C[j],growOffset:L,width:C[j].width+L},P-=L}C=D}return{sizedColumns:C,nonGrowWidth:x}},[r,e,p,k,s,o,i,l])}var mg=du;function pg(e){return e&&e.length?mg(e):[]}var wg=pg;const vg=fa(wg),st='<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">',yg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${st}<rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/><path d="M15.75 4h-1.5a.25.25 0 0 0-.177.074L9.308 8.838a3.75 3.75 0 1 0 1.854 1.854l1.155-1.157.967.322a.5.5 0 0 0 .65-.55l-.18-1.208.363-.363.727.331a.5.5 0 0 0 .69-.59l-.254-.904.647-.647A.25.25 0 0 0 16 5.75v-1.5a.25.25 0 0 0-.25-.25zM7.5 13.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0z" fill="${t}"/></svg>`},bg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${st}<rect x="2" y="2" width="16" height="16" rx="4" fill="${n}"/><path d="m12.223 13.314 3.052-2.826a.65.65 0 0 0 0-.984l-3.052-2.822c-.27-.25-.634-.242-.865.022-.232.263-.206.636.056.882l2.601 2.41-2.601 2.41c-.262.245-.288.619-.056.882.231.263.595.277.865.026Zm-4.444.005c.266.25.634.241.866-.027.231-.263.206-.636-.06-.882L5.983 10l2.602-2.405c.266-.25.291-.62.06-.887-.232-.263-.596-.272-.866-.022L4.723 9.51a.653.653 0 0 0 0 .983l3.056 2.827Z" fill="${t}"/></svg>`},xg=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M6.52 12.78H5.51V8.74l-1.33.47v-.87l2.29-.83h.05v5.27zm5.2 0H8.15v-.69l1.7-1.83a6.38 6.38 0 0 0 .34-.4c.09-.11.16-.22.22-.32s.1-.19.12-.27a.9.9 0 0 0 0-.56.63.63 0 0 0-.15-.23.58.58 0 0 0-.22-.15.75.75 0 0 0-.29-.05c-.27 0-.48.08-.62.23a.95.95 0 0 0-.2.65H8.03c0-.24.04-.46.13-.67a1.67 1.67 0 0 1 .97-.91c.23-.1.49-.14.77-.14.26 0 .5.04.7.11.21.08.38.18.52.32.14.13.25.3.32.48a1.74 1.74 0 0 1 .03 1.13 2.05 2.05 0 0 1-.24.47 4.16 4.16 0 0 1-.35.47l-.47.5-1 1.05h2.32v.8zm1.8-3.08h.55c.28 0 .48-.06.61-.2a.76.76 0 0 0 .2-.55.8.8 0 0 0-.05-.28.56.56 0 0 0-.13-.22.6.6 0 0 0-.23-.15.93.93 0 0 0-.32-.05.92.92 0 0 0-.29.05.72.72 0 0 0-.23.12.57.57 0 0 0-.21.46H12.4a1.3 1.3 0 0 1 .5-1.04c.15-.13.33-.23.54-.3a2.48 2.48 0 0 1 1.4 0c.2.06.4.15.55.28.15.13.27.28.36.47.08.19.13.4.13.65a1.15 1.15 0 0 1-.2.65 1.36 1.36 0 0 1-.58.49c.15.05.28.12.38.2a1.14 1.14 0 0 1 .43.62c.03.13.05.26.05.4 0 .25-.05.47-.14.66a1.42 1.42 0 0 1-.4.49c-.16.13-.35.23-.58.3a2.51 2.51 0 0 1-.73.1c-.22 0-.44-.03-.65-.09a1.8 1.8 0 0 1-.57-.28 1.43 1.43 0 0 1-.4-.47 1.41 1.41 0 0 1-.15-.66h1a.66.66 0 0 0 .22.5.87.87 0 0 0 .58.2c.25 0 .45-.07.6-.2a.71.71 0 0 0 .21-.56.97.97 0 0 0-.06-.36.61.61 0 0 0-.18-.25.74.74 0 0 0-.28-.15 1.33 1.33 0 0 0-.37-.04h-.55V9.7z" fill="${t}"/>
  </svg>`},Cg=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M8.182 12.4h3.636l.655 1.6H14l-3.454-8H9.455L6 14h1.527l.655-1.6zM10 7.44l1.36 3.651H8.64L10 7.441z" fill="${t}"/>
</svg>`},kg=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
    <path
        d="M16.2222 2H3.77778C2.8 2 2 2.8 2 3.77778V16.2222C2 17.2 2.8 18 3.77778 18H16.2222C17.2 18 17.9911 17.2 17.9911 16.2222L18 3.77778C18 2.8 17.2 2 16.2222 2Z"
        fill="${n}"
    />
    <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M7.66667 6.66669C5.73368 6.66669 4.16667 8.15907 4.16667 10C4.16667 11.841 5.73368 13.3334 7.66667 13.3334H12.3333C14.2663 13.3334 15.8333 11.841 15.8333 10C15.8333 8.15907 14.2663 6.66669 12.3333 6.66669H7.66667ZM12.5 12.5C13.8807 12.5 15 11.3807 15 10C15 8.61931 13.8807 7.50002 12.5 7.50002C11.1193 7.50002 10 8.61931 10 10C10 11.3807 11.1193 12.5 12.5 12.5Z"
        fill="${t}"
    />
</svg>`},xc=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
<path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.29 4.947a3.368 3.368 0 014.723.04 3.375 3.375 0 01.041 4.729l-.009.009-1.596 1.597a3.367 3.367 0 01-5.081-.364.71.71 0 011.136-.85 1.95 1.95 0 002.942.21l1.591-1.593a1.954 1.954 0 00-.027-2.733 1.95 1.95 0 00-2.732-.027l-.91.907a.709.709 0 11-1.001-1.007l.915-.911.007-.007z" fill="${t}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.55 8.678a3.368 3.368 0 015.082.364.71.71 0 01-1.136.85 1.95 1.95 0 00-2.942-.21l-1.591 1.593a1.954 1.954 0 00.027 2.733 1.95 1.95 0 002.73.028l.906-.906a.709.709 0 111.003 1.004l-.91.91-.008.01a3.368 3.368 0 01-4.724-.042 3.375 3.375 0 01-.041-4.728l.009-.009L6.55 8.678z" fill="${t}"/>
</svg>
  `},Sg=e=>{const t=e.bgColor;return`${st}
    <path stroke="${t}" stroke-width="2" d="M12 3v14"/>
    <path stroke="${t}" stroke-width="2" stroke-linecap="round" d="M10 4h4m-4 12h4"/>
    <path d="M11 14h4a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3h-4v2h4a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-4v2ZM9.5 8H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4.5v2H5a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h4.5v2Z" fill="${t}"/>
  </svg>
`},Rg=xc,Mg=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7 13.138a.5.5 0 00.748.434l5.492-3.138a.5.5 0 000-.868L7.748 6.427A.5.5 0 007 6.862v6.276z" fill="${t}"/>
</svg>`},Eg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${st}
    <path d="M10 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 9.17A4.17 4.17 0 0 1 5.83 10 4.17 4.17 0 0 1 10 5.83 4.17 4.17 0 0 1 14.17 10 4.17 4.17 0 0 1 10 14.17z" fill="${t}"/>
    <path d="M8.33 8.21a.83.83 0 1 0-.03 1.67.83.83 0 0 0 .03-1.67zm3.34 0a.83.83 0 1 0-.04 1.67.83.83 0 0 0 .04-1.67z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.53 13.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 4a6 6 0 1 0 0 12 6 6 0 0 0 0-12zm0 11a5 5 0 1 1 .01-10.01A5 5 0 0 1 10 15z" fill="${t}"/>
    <path d="M8 7.86a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2zm4 0a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.53 11.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
  </svg>`},Tg=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M12.499 10.801a.5.5 0 01.835 0l2.698 4.098a.5.5 0 01-.418.775H10.22a.5.5 0 01-.417-.775l2.697-4.098z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.07 8.934a.5.5 0 01.824 0l4.08 5.958a.5.5 0 01-.412.782h-8.16a.5.5 0 01-.413-.782l4.08-5.958zM13.75 8.333a2.083 2.083 0 100-4.166 2.083 2.083 0 000 4.166z" fill="${t}"/>
</svg>`},Ig=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${st}
    <path fill="${t}" d="M3 3h14v14H3z"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2zm-7.24 9.78h1.23c.15 0 .27.06.36.18l.98 1.28a.43.43 0 0 1-.05.58l-1.2 1.21a.45.45 0 0 1-.6.04A6.72 6.72 0 0 1 7.33 10c0-.61.1-1.2.25-1.78a6.68 6.68 0 0 1 2.12-3.3.44.44 0 0 1 .6.04l1.2 1.2c.16.17.18.42.05.59l-.98 1.29a.43.43 0 0 1-.36.17H8.98A5.38 5.38 0 0 0 8.67 10c0 .62.11 1.23.3 1.79z" fill="${n}"/>
  </svg>`},Pg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${st}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="m13.49 13.15-2.32-3.27h1.4V7h1.86v2.88h1.4l-2.34 3.27zM11 13H9v-3l-1.5 1.92L6 10v3H4V7h2l1.5 2L9 7h2v6z" fill="${t}"/>
  </svg>`},Dg=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M14.8 4.182h-.6V3H13v1.182H7V3H5.8v1.182h-.6c-.66 0-1.2.532-1.2 1.182v9.454C4 15.468 4.54 16 5.2 16h9.6c.66 0 1.2-.532 1.2-1.182V5.364c0-.65-.54-1.182-1.2-1.182zm0 10.636H5.2V7.136h9.6v7.682z" fill="${t}"/>
</svg>`},_g=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${st}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 4a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6zm0 10.8A4.8 4.8 0 0 1 5.2 10a4.8 4.8 0 1 1 4.8 4.8z" fill="${t}"/>
    <path d="M10 7H9v3.93L12.5 13l.5-.8-3-1.76V7z" fill="${t}"/>
  </svg>`},Ag=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 8.643a1.357 1.357 0 100 2.714 1.357 1.357 0 000-2.714zM7.357 10a2.643 2.643 0 115.286 0 2.643 2.643 0 01-5.286 0z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.589 4.898A5.643 5.643 0 0115.643 10v.5a2.143 2.143 0 01-4.286 0V8a.643.643 0 011.286 0v2.5a.857.857 0 001.714 0V10a4.357 4.357 0 10-1.708 3.46.643.643 0 01.782 1.02 5.643 5.643 0 11-5.842-9.582z" fill="${t}"/>
</svg>`},Lg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${st}
    <rect x="2" y="8" width="10" height="8" rx="2" fill="${n}"/>
    <rect x="8" y="4" width="10" height="8" rx="2" fill="${n}"/>
    <path d="M10.68 7.73V6l2.97 3.02-2.97 3.02v-1.77c-2.13 0-3.62.7-4.68 2.2.43-2.15 1.7-4.31 4.68-4.74z" fill="${t}"/>
  </svg>`},Hg=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
  <path fill="${t}" d="M4 3h12v14H4z"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.6 2A1.6 1.6 0 002 3.6v12.8A1.6 1.6 0 003.6 18h12.8a1.6 1.6 0 001.6-1.6V3.6A1.6 1.6 0 0016.4 2H3.6zm11.3 10.8a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7h-1.4a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.6-.693.117.117 0 00.1-.115V10.35a.117.117 0 00-.117-.116h-2.8a.117.117 0 00-.117.116v2.333c0 .064.053.117.117.117h.117a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7H9.3a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.117a.117.117 0 00.117-.117V10.35a.117.117 0 00-.117-.117h-2.8a.117.117 0 00-.117.117v2.342c0 .058.042.106.1.115a.7.7 0 01.6.693v1.4a.7.7 0 01-.7.7H5.1a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.35a.116.116 0 00.116-.117v-2.45c0-.515.418-.933.934-.933h2.917a.117.117 0 00.117-.117V6.85a.117.117 0 00-.117-.116h-2.45a.7.7 0 01-.7-.7V5.1a.7.7 0 01.7-.7h6.067a.7.7 0 01.7.7v.934a.7.7 0 01-.7.7h-2.45a.117.117 0 00-.118.116v2.333c0 .064.053.117.117.117H13.5c.516 0 .934.418.934.934v2.45c0 .063.052.116.116.116h.35z" fill="${n}"/>
</svg>`},zg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${st}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M9.98 13.33c.45 0 .74-.3.73-.75l-.01-.1-.16-1.67 1.45 1.05a.81.81 0 0 0 .5.18c.37 0 .72-.32.72-.76 0-.3-.17-.54-.49-.68l-1.63-.77 1.63-.77c.32-.14.49-.37.49-.67 0-.45-.34-.76-.71-.76a.81.81 0 0 0-.5.18l-1.47 1.03.16-1.74.01-.08c.01-.46-.27-.76-.72-.76-.46 0-.76.32-.75.76l.01.08.16 1.74-1.47-1.03a.77.77 0 0 0-.5-.18.74.74 0 0 0-.72.76c0 .3.17.53.49.67l1.63.77-1.62.77c-.32.14-.5.37-.5.68 0 .44.35.75.72.75a.78.78 0 0 0 .5-.17L9.4 10.8l-.16 1.68v.09c-.02.44.28.75.74.75z" fill="${t}"/>
  </svg>`},Fg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${st}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M8 5.83H5.83a.83.83 0 0 0 0 1.67h1.69A4.55 4.55 0 0 1 8 5.83zm-.33 3.34H5.83a.83.83 0 0 0 0 1.66h2.72a4.57 4.57 0 0 1-.88-1.66zM5.83 12.5a.83.83 0 0 0 0 1.67h7.5a.83.83 0 1 0 0-1.67h-7.5zm8.8-2.9a3.02 3.02 0 0 0 .46-1.6c0-1.66-1.32-3-2.94-3C10.52 5 9.2 6.34 9.2 8s1.31 3 2.93 3c.58 0 1.11-.17 1.56-.47l2.04 2.08.93-.94-2.04-2.08zm-2.48.07c-.9 0-1.63-.75-1.63-1.67s.73-1.67 1.63-1.67c.9 0 1.63.75 1.63 1.67s-.73 1.67-1.63 1.67z" fill="${t}"/>
  </svg>`},Og=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path d="M7.676 4.726V3l2.976 3.021-2.976 3.022v-1.77c-2.125 0-3.613.69-4.676 2.201.425-2.158 1.7-4.316 4.676-4.748zM10.182 14.4h3.636l.655 1.6H16l-3.454-8h-1.091L8 16h1.527l.655-1.6zM12 9.44l1.36 3.65h-2.72L12 9.44z" fill="${t}"/>
</svg>`},$g=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.167 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666H4.167z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.083 4.167a.833.833 0 10-1.666 0v4.166a.833.833 0 101.666 0V4.167zM11.667 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666h-4.166zM5.367 11.688a.833.833 0 00-1.179 1.179l2.947 2.946a.833.833 0 001.178-1.178l-2.946-2.947z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.313 12.867a.833.833 0 10-1.178-1.179l-2.947 2.947a.833.833 0 101.179 1.178l2.946-2.946z" fill="${t}"/>
  <path d="M10.833 12.5c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833zM10.833 15c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833z" fill="${t}"/>
</svg>`},Ng=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${st}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 8.84a1.16 1.16 0 1 0 0 2.32 1.16 1.16 0 0 0 0-2.32zm3.02 3.61a3.92 3.92 0 0 0 .78-3.28.49.49 0 1 0-.95.2c.19.87-.02 1.78-.58 2.47a2.92 2.92 0 1 1-4.13-4.08 2.94 2.94 0 0 1 2.43-.62.49.49 0 1 0 .17-.96 3.89 3.89 0 1 0 2.28 6.27zM10 4.17a5.84 5.84 0 0 0-5.44 7.93.49.49 0 1 0 .9-.35 4.86 4.86 0 1 1 2.5 2.67.49.49 0 1 0-.4.88c.76.35 1.6.54 2.44.53a5.83 5.83 0 0 0 0-11.66zm3.02 3.5a.7.7 0 1 0-1.4 0 .7.7 0 0 0 1.4 0zm-6.97 5.35a.7.7 0 1 1 0 1.4.7.7 0 0 1 0-1.4z" fill="${t}"/>
  </svg>`},Wg=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path d="M12.4 13.565c1.865-.545 3.645-2.083 3.645-4.396 0-1.514-.787-2.604-2.071-2.604C12.69 6.565 12 7.63 12 8.939c1.114.072 1.865.726 1.865 1.683 0 .933-.8 1.647-1.84 2.023l.375.92zM4 5h6v2H4zM4 9h5v2H4zM4 13h4v2H4z" fill="${t}"/>
</svg>`},Bg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${st}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M12.4 13.56c1.86-.54 3.65-2.08 3.65-4.4 0-1.5-.8-2.6-2.08-2.6S12 7.64 12 8.95c1.11.07 1.86.73 1.86 1.68 0 .94-.8 1.65-1.83 2.03l.37.91zM4 5h6v2H4zm0 4h5v2H4zm0 4h4v2H4z" fill="${t}"/>
  </svg>`},jg=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M10 7a1 1 0 100-2v2zm0 6a1 1 0 100 2v-2zm0-8H7v2h3V5zm-3 6h5V9H7v2zm5 2h-2v2h2v-2zm1-1a1 1 0 01-1 1v2a3 3 0 003-3h-2zm-1-1a1 1 0 011 1h2a3 3 0 00-3-3v2zM4 8a3 3 0 003 3V9a1 1 0 01-1-1H4zm3-3a3 3 0 00-3 3h2a1 1 0 011-1V5z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.856 12.014a.5.5 0 00-.712.702L5.409 14l-1.265 1.284a.5.5 0 00.712.702l1.255-1.274 1.255 1.274a.5.5 0 00.712-.702L6.813 14l1.265-1.284a.5.5 0 00-.712-.702L6.11 13.288l-1.255-1.274zM12.856 4.014a.5.5 0 00-.712.702L13.409 6l-1.265 1.284a.5.5 0 10.712.702l1.255-1.274 1.255 1.274a.5.5 0 10.712-.702L14.813 6l1.265-1.284a.5.5 0 00-.712-.702L14.11 5.288l-1.255-1.274z" fill="${t}"/>
</svg>`},Vg=e=>{const t=e.fgColor,n=e.bgColor;return`${st}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.25 7.25a.75.75 0 000-1.5h-6.5a.75.75 0 100 1.5h6.5zM15 10a.75.75 0 01-.75.75h-6.5a.75.75 0 010-1.5h6.5A.75.75 0 0115 10zm-.75 4.25a.75.75 0 000-1.5h-6.5a.75.75 0 000 1.5h6.5zm-8.987-7a.75.75 0 100-1.5.75.75 0 000 1.5zm.75 2.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm-.75 4.25a.75.75 0 100-1.5.75.75 0 000 1.5z" fill="${t}"/>
</svg>`},Xg=e=>{const t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2 15v1h14v-2.5c0-.87-.44-1.55-.98-2.04a6.19 6.19 0 0 0-1.9-1.14 12.1 12.1 0 0 0-2.48-.67A4 4 0 1 0 5 6a4 4 0 0 0 2.36 3.65c-.82.13-1.7.36-2.48.67-.69.28-1.37.65-1.9 1.13A2.8 2.8 0 0 0 2 13.5V15z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>`},Ug=e=>{const t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12.43 6.04v-.18a3.86 3.86 0 0 0-7.72 0v.18A2.15 2.15 0 0 0 3 8.14v5.72C3 15.04 3.96 16 5.14 16H12c1.18 0 2.14-.96 2.14-2.14V8.14c0-1.03-.73-1.9-1.71-2.1zM7.86 6v-.14a.71.71 0 1 1 1.43 0V6H7.86z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>
`},Yg={headerRowID:yg,headerNumber:xg,headerCode:bg,headerString:Cg,headerBoolean:kg,headerAudioUri:Rg,headerVideoUri:Mg,headerEmoji:Eg,headerImage:Tg,headerUri:xc,headerPhone:Ig,headerMarkdown:Pg,headerDate:Dg,headerTime:_g,headerEmail:Ag,headerReference:Lg,headerIfThenElse:Hg,headerSingleValue:zg,headerLookup:Fg,headerTextTemplate:Og,headerMath:$g,headerRollup:Ng,headerJoinStrings:Wg,headerSplitString:Bg,headerGeoDistance:jg,headerArray:Vg,rowOwnerOverlay:Xg,protectedColumnOverlay:Ug,renameIcon:Sg};function Kg(e,t){return e==="normal"?[t.bgIconHeader,t.fgIconHeader]:e==="selected"?["white",t.accentColor]:[t.accentColor,t.bgHeader]}class qg{onSettled;spriteMap=new Map;headerIcons;inFlight=0;constructor(t,n){this.onSettled=n,this.headerIcons=t??{}}drawSprite(t,n,r,o,i,s,l,a=1){const[c,d]=Kg(n,l),f=s*Math.ceil(window.devicePixelRatio),m=`${c}_${d}_${f}_${t}`;let p=this.spriteMap.get(m);if(p===void 0){const g=this.headerIcons[t];if(g===void 0)return;p=document.createElement("canvas");const v=p.getContext("2d");if(v===null)return;const k=new Image;k.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(g({fgColor:d,bgColor:c}))}`,this.spriteMap.set(m,p);const b=k.decode();if(b===void 0)return;this.inFlight++,b.then(()=>{v.drawImage(k,0,0,f,f)}).finally(()=>{this.inFlight--,this.inFlight===0&&this.onSettled()})}else a<1&&(r.globalAlpha=a),r.drawImage(p,0,0,f,f,o,i,s,s),a<1&&(r.globalAlpha=1)}}function rl(e,t,n,r,o,i,s,l,a=-20,c=-20,d=32,f="center"){const m=Math.floor(o+s/2),p=t.roundingRadius??4,g=Za(d,s,t.cellVerticalPadding),v=g/2,k=Ga(f,r,i,t.cellHorizontalPadding,g),b=qa(k,m,g),y=Qa(r+a,o+c,b);switch(n){case!0:{e.beginPath(),Hn(e,k-g/2,m-g/2,g,g,p),e.fillStyle=l?t.accentColor:t.textMedium,e.fill(),e.beginPath(),e.moveTo(k-v+g/4.23,m-v+g/1.97),e.lineTo(k-v+g/2.42,m-v+g/1.44),e.lineTo(k-v+g/1.29,m-v+g/3.25),e.strokeStyle=t.bgCell,e.lineJoin="round",e.lineCap="round",e.lineWidth=1.9,e.stroke();break}case ki:case!1:{e.beginPath(),Hn(e,k-g/2+.5,m-g/2+.5,g-1,g-1,p),e.lineWidth=1,e.strokeStyle=y?t.textDark:t.textMedium,e.stroke();break}case Ws:{e.beginPath(),Hn(e,k-g/2,m-g/2,g,g,p),e.fillStyle=y?t.textMedium:t.textLight,e.fill(),e.beginPath(),e.moveTo(k-g/3,m),e.lineTo(k+g/3,m),e.strokeStyle=t.bgCell,e.lineCap="round",e.lineWidth=1.9,e.stroke();break}default:Ao()}}function Gg(e,t,n,r){if(r==="any")return Cc(e,{x:t,y:n,width:1,height:1});if(r==="vertical"&&(t=e.x),r==="horizontal"&&(n=e.y),uc([t,n],e))return;const o=t-e.x,i=e.x+e.width-t,s=n-e.y+1,l=e.y+e.height-n,a=Math.min(r==="vertical"?Number.MAX_SAFE_INTEGER:o,r==="vertical"?Number.MAX_SAFE_INTEGER:i,r==="horizontal"?Number.MAX_SAFE_INTEGER:s,r==="horizontal"?Number.MAX_SAFE_INTEGER:l);return a===l?{x:e.x,y:e.y+e.height,width:e.width,height:n-e.y-e.height+1}:a===s?{x:e.x,y:n,width:e.width,height:e.y-n}:a===i?{x:e.x+e.width,y:e.y,width:t-e.x-e.width+1,height:e.height}:{x:t,y:e.y,width:e.x-t,height:e.height}}function Cc(e,t){const n=Math.min(e.x,t.x),r=Math.min(e.y,t.y),o=Math.max(e.x+e.width,t.x+t.width)-n,i=Math.max(e.y+e.height,t.y+t.height)-r;return{x:n,y:r,width:o,height:i}}function Zg(e,t){return e.x<=t.x&&e.y<=t.y&&e.x+e.width>=t.x+t.width&&e.y+e.height>=t.y+t.height}function Qg(e,t,n,r){if(e.x>t||e.y>n||e.x<0&&e.y<0&&e.x+e.width>t&&e.y+e.height>n)return;if(e.x>=0&&e.y>=0&&e.x+e.width<=t&&e.y+e.height<=n)return e;const o=-4,i=-4,s=t+4,l=n+4,a=o-e.x,c=e.x+e.width-s,d=i-e.y,f=e.y+e.height-l,m=a>0?e.x+Math.floor(a/r)*r:e.x,p=c>0?e.x+e.width-Math.floor(c/r)*r:e.x+e.width,g=d>0?e.y+Math.floor(d/r)*r:e.y,v=f>0?e.y+e.height-Math.floor(f/r)*r:e.y+e.height;return{x:m,y:g,width:p-m,height:v-g}}function Jg(e,t,n,r,o){const[i,s,l,a]=t,[c,d,f,m]=o,{x:p,y:g,width:v,height:k}=e,b=[];if(v<=0||k<=0)return b;const y=p+v,C=g+k,x=p<i,w=g<s,T=p+v>l,D=g+k>a,_=p>i&&p<l||y>i&&y<l||p<i&&y>l,P=g>s&&g<a||C>s&&C<a||g<s&&C>a;if(_&&P){const j=Math.max(p,i),A=Math.max(g,s),L=Math.min(y,l),$=Math.min(C,a);b.push({rect:{x:j,y:A,width:L-j,height:$-A},clip:{x:c,y:d,width:f-c+1,height:m-d+1}})}if(x&&w){const j=p,A=g,L=Math.min(y,i),$=Math.min(C,s);b.push({rect:{x:j,y:A,width:L-j,height:$-A},clip:{x:0,y:0,width:c+1,height:d+1}})}if(w&&_){const j=Math.max(p,i),A=g,L=Math.min(y,l),$=Math.min(C,s);b.push({rect:{x:j,y:A,width:L-j,height:$-A},clip:{x:c,y:0,width:f-c+1,height:d+1}})}if(w&&T){const j=Math.max(p,l),A=g,L=y,$=Math.min(C,s);b.push({rect:{x:j,y:A,width:L-j,height:$-A},clip:{x:f,y:0,width:n-f+1,height:d+1}})}if(x&&P){const j=p,A=Math.max(g,s),L=Math.min(y,i),$=Math.min(C,a);b.push({rect:{x:j,y:A,width:L-j,height:$-A},clip:{x:0,y:d,width:c+1,height:m-d+1}})}if(T&&P){const j=Math.max(p,l),A=Math.max(g,s),L=y,$=Math.min(C,a);b.push({rect:{x:j,y:A,width:L-j,height:$-A},clip:{x:f,y:d,width:n-f+1,height:m-d+1}})}if(x&&D){const j=p,A=Math.max(g,a),L=Math.min(y,i),$=C;b.push({rect:{x:j,y:A,width:L-j,height:$-A},clip:{x:0,y:m,width:c+1,height:r-m+1}})}if(D&&_){const j=Math.max(p,i),A=Math.max(g,a),L=Math.min(y,l),$=C;b.push({rect:{x:j,y:A,width:L-j,height:$-A},clip:{x:c,y:m,width:f-c+1,height:r-m+1}})}if(T&&D){const j=Math.max(p,l),A=Math.max(g,a),L=y,$=C;b.push({rect:{x:j,y:A,width:L-j,height:$-A},clip:{x:f,y:m,width:n-f+1,height:r-m+1}})}return b}const e0={kind:J.Loading,allowOverlay:!1},mo=[0,0],po={x:0,y:0,width:0,height:0},ws=[void 0,()=>{}];let Os=!1;function t0(){Os=!0}function kc(e,t,n,r,o,i,s,l,a,c,d,f,m,p,g,v,k,b,y,C,x,w,T,D,_){let P,W;k!==void 0&&k[0][0]===n&&k[0][1]===r&&(P=k[1][0],W=k[1][1]);let j;mo[0]=n,mo[1]=r,po.x=s,po.y=l,po.width=a,po.height=c,ws[0]=T.getValue(mo),ws[1]=q=>T.setValue(mo,q),Os=!1;const A={ctx:e,theme:f,col:n,row:r,cell:t,rect:po,highlighted:d,cellFillColor:m,hoverAmount:v,frameTime:y,hoverX:P,drawState:ws,hoverY:W,imageLoader:p,spriteManager:g,hyperWrapping:b,overrideCursor:P!==void 0?_:void 0,requestAnimationFrame:t0},L=ig(A,t.lastUpdated,y,x,o,i),$=D(t);if($!==void 0){x?.renderer!==$&&(x?.deprep?.(A),x=void 0);const q=$.drawPrep?.(A,x);C!==void 0&&!Vr(A.cell)?C(A,()=>$.draw(A,t)):$.draw(A,t),j=q===void 0?void 0:{deprep:q?.deprep,fillStyle:q?.fillStyle,font:q?.font,renderer:$}}return(L||Os)&&w?.(mo),j}function n0(e,t,n,r,o,i,s,l,a,c,d,f,m,p,g,v,k,b,y){const C=[];e.imageSmoothingEnabled=!1;const x=Math.min(o.cellYOffset,s),w=Math.max(o.cellYOffset,s);let T=0;if(typeof b=="number")T+=(w-x)*b;else for(let $=x;$<w;$++)T+=b($);s>o.cellYOffset&&(T=-T),T+=a-o.translateY;const D=Math.min(o.cellXOffset,i),_=Math.max(o.cellXOffset,i);let P=0;for(let $=D;$<_;$++)P+=v[$].width;i>o.cellXOffset&&(P=-P),P+=l-o.translateX;let W=qr(k);if(W>0&&W++,P!==0&&T!==0)return{regions:[]};const j=c>0?Zr(m,c,b):0,A=d-W-Math.abs(P),L=f-p-j-Math.abs(T)-1;if(A>150&&L>150){const $={sx:0,sy:0,sw:d*g,sh:f*g,dx:0,dy:0,dw:d*g,dh:f*g};if(T>0?($.sy=(p+1)*g,$.sh=L*g,$.dy=(T+p+1)*g,$.dh=L*g,C.push({x:0,y:p,width:d,height:T+1})):T<0&&($.sy=(-T+p+1)*g,$.sh=L*g,$.dy=(p+1)*g,$.dh=L*g,C.push({x:0,y:f+T-j,width:d,height:-T+j})),P>0?($.sx=W*g,$.sw=A*g,$.dx=(P+W)*g,$.dw=A*g,C.push({x:W-1,y:0,width:P+2,height:f})):P<0&&($.sx=(W-P)*g,$.sw=A*g,$.dx=W*g,$.dw=A*g,C.push({x:d+P,y:0,width:-P,height:f})),e.setTransform(1,0,0,1,0,0),y){if(W>0&&P!==0&&T===0&&(r===void 0||n?.[1]!==!1)){const q=W*g,he=f*g;e.drawImage(t,0,0,q,he,0,0,q,he)}if(j>0&&P===0&&T!==0&&(r===void 0||n?.[0]!==!1)){const q=(f-j)*g,he=d*g,xe=j*g;e.drawImage(t,0,q,he,xe,0,q,he,xe)}}e.drawImage(t,$.sx,$.sy,$.sw,$.sh,$.dx,$.dy,$.dw,$.dh),e.scale(g,g)}return e.imageSmoothingEnabled=!0,{regions:C}}function r0(e,t,n,r,o,i,s,l,a,c){const d=[];return t!==e.cellXOffset||n!==e.cellYOffset||r!==e.translateX||o!==e.translateY||Jn(a,n,r,o,l,(f,m,p,g)=>{if(f.sourceIndex===c){const v=Math.max(m,g)+1;return d.push({x:v,y:0,width:i-v,height:s}),!0}}),d}function Ul(e,t,n,r,o,i,s,l,a,c,d,f,m,p,g,v,k,b=!1){if(a!==void 0){e.beginPath(),e.save(),e.rect(0,0,i,s);for(const A of a)e.rect(A.x+1,A.y+1,A.width-1,A.height-1);e.clip("evenodd")}const y=k.horizontalBorderColor??k.borderColor,C=k.borderColor;let x=0,w=i,T=0,D=s;if(l!==void 0&&l.length>0){x=Number.MAX_SAFE_INTEGER,T=Number.MAX_SAFE_INTEGER,w=Number.MIN_SAFE_INTEGER,D=Number.MIN_SAFE_INTEGER;for(const A of l)x=Math.min(x,A.x-1),w=Math.max(w,A.x+A.width+1),T=Math.min(T,A.y-1),D=Math.max(D,A.y+A.height+1)}const _=[];e.beginPath();let P=.5;for(let A=0;A<t.length;A++){const L=t[A];if(L.width===0)continue;P+=L.width;const $=L.sticky?P:P+r;$>=x&&$<=w&&p(A+1)&&_.push({x1:$,y1:Math.max(c,T),x2:$,y2:Math.min(s,D),color:C})}let W=s+.5;for(let A=v-g;A<v;A++){const L=f(A);W-=L,_.push({x1:x,y1:W,x2:w,y2:W,color:y})}if(b!==!0){let A=d+.5,L=n;const $=W;for(;A+o<$;){const q=A+o;if(q>=T&&q<=D-1){const he=m?.(L);_.push({x1:x,y1:q,x2:w,y2:q,color:he?.horizontalBorderColor??he?.borderColor??y})}A+=f(L),L++}}const j=fu(_,A=>A.color);for(const A of Object.keys(j)){e.strokeStyle=A;for(const L of j[A])e.moveTo(L.x1,L.y1),e.lineTo(L.x2,L.y2);e.stroke(),e.beginPath()}a!==void 0&&e.restore()}function Sc(e,t){const n=[];let r=e.x+e.width-26*t.length;const o=e.y+e.height/2-13,i=26,s=26;for(let l=0;l<t.length;l++)n.push({x:r,y:o,width:s,height:i}),r+=26;return n}function ji(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function o0(e,t,n,r,o,i,s,l,a,c,d,f){const[p,g]=i?.[0]??[];let v=0;Tc(t,n,r,o,(k,b,y,C,x,w)=>{if(f!==void 0&&!f.hasItemInRectangle({x:k[0],y:-2,width:k[1]-k[0]+1,height:1}))return;e.save(),e.beginPath(),e.rect(y,C,x,w),e.clip();const T=d(b),D=T?.overrideTheme===void 0?s:Zn(s,T.overrideTheme),_=g===-2&&p!==void 0&&p>=k[0]&&p<=k[1],P=_?D.bgHeaderHovered:D.bgHeader;if(P!==s.bgHeader&&(e.fillStyle=P,e.fill()),e.fillStyle=D.textGroupHeader??D.textHeader,T!==void 0){let W=y;if(T.icon!==void 0&&(l.drawSprite(T.icon,"normal",e,W+8,(o-20)/2,20,D),W+=26),e.fillText(T.name,W+8,o/2+Qn(e,s.headerFontFull)),T.actions!==void 0&&_){const j=Sc({x:y,y:C,width:x,height:w},T.actions);e.beginPath();const A=j[0].x-10,L=y+x-A;e.rect(A,0,L,o);const $=e.createLinearGradient(A,0,A+L,0),q=Kr(P,0);$.addColorStop(0,q),$.addColorStop(10/L,P),$.addColorStop(1,P),e.fillStyle=$,e.fill(),e.globalAlpha=.6;const[he,xe]=i?.[1]??[-1,-1];for(let ue=0;ue<T.actions.length;ue++){const je=T.actions[ue],ne=j[ue],G=ji(ne,he+y,xe);G&&(e.globalAlpha=1),l.drawSprite(je.icon,"normal",e,ne.x+ne.width/2-10,ne.y+ne.height/2-10,20,D),G&&(e.globalAlpha=.6)}e.globalAlpha=1}}y!==0&&c(k[0])&&(e.beginPath(),e.moveTo(y+.5,0),e.lineTo(y+.5,o),e.strokeStyle=s.borderColor,e.lineWidth=1,e.stroke()),e.restore(),v=y+x}),e.beginPath(),e.moveTo(v+.5,0),e.lineTo(v+.5,o),e.moveTo(0,o+.5),e.lineTo(n,o+.5),e.strokeStyle=s.borderColor,e.lineWidth=1,e.stroke()}const Wr=30;function Rc(e,t,n,r,o){return o?{x:e,y:t,width:Wr,height:Math.min(Wr,r)}:{x:e+n-Wr,y:Math.max(t,t+r/2-Wr/2),width:Wr,height:Math.min(Wr,r)}}function Yl(e,t,n,r,o,i,s,l,a,c,d,f,m,p,g){if(p){let x;i.title===Ba&&(x=!0),i.title===ja&&(x=!1),x!==!0&&(e.globalAlpha=c),rl(e,l,x,t,n,r,o,!1,void 0,void 0,18),x!==!0&&(e.globalAlpha=1);return}const v=l.cellHorizontalPadding,k=s?l.textHeaderSelected:l.textHeader,b=i.hasMenu===!0&&(a||f&&s),y=m?-1:1;let C=m?t+r-v:t+v;if(i.icon!==void 0){let x=s?"selected":"normal";i.style==="highlight"&&(x=s?"selected":"special");const w=l.headerIconSize;d.drawSprite(i.icon,x,e,m?C-w:C,n+(o-w)/2,w,l),i.overlayIcon!==void 0&&d.drawSprite(i.overlayIcon,s?"selected":"special",e,m?C-w+9:C+9,n+((o-18)/2+6),18,l),C+=Math.ceil(w*1.3)*y}if(b&&i.hasMenu===!0&&r>35){const w=m?35:r-35,T=m?35*.7:r-35*.7,D=w/r,_=T/r,P=e.createLinearGradient(t,0,t+r,0),W=Kr(k,0);P.addColorStop(m?1:0,k),P.addColorStop(D,k),P.addColorStop(_,W),P.addColorStop(m?0:1,W),e.fillStyle=P}else e.fillStyle=k;if(m&&(e.textAlign="right"),e.fillText(i.title,C,n+o/2+Qn(e,l.headerFontFull)),m&&(e.textAlign="left"),b&&i.hasMenu===!0)if(i.menuIcon===void 0||i.menuIcon===Si.Triangle){e.beginPath();const x=g.x+g.width/2-5.5,w=g.y+g.height/2-3;cg(e,[{x,y:w},{x:x+11,y:w},{x:x+5.5,y:w+6}],1),e.fillStyle=k,e.fill()}else if(i.menuIcon===Si.Dots){e.beginPath();const x=g.x+g.width/2,w=g.y+g.height/2;ag(e,x,w),e.fillStyle=k,e.fill()}else{const x=g.x+(g.width-l.headerIconSize)/2,w=g.y+(g.height-l.headerIconSize)/2;d.drawSprite(i.menuIcon,"normal",e,x,w,l.headerIconSize,l)}}function Mc(e,t,n,r,o,i,s,l,a,c,d,f,m,p){const g=i.title.startsWith(Hi),v=Us(i.title)==="rtl",k=Rc(t,n,r,o,v);if(m!==void 0){let b=i;g&&(b={...i,title:""}),m({ctx:e,theme:l,rect:{x:t,y:n,width:r,height:o},column:b,columnIndex:b.sourceIndex,isSelected:s,hoverAmount:d,isHovered:a,hasSelectedCell:c,spriteManager:f,menuBounds:k},()=>Yl(e,t,n,r,o,i,s,l,a,d,f,p,v,g,k))}else Yl(e,t,n,r,o,i,s,l,a,d,f,p,v,g,k)}function i0(e,t,n,r,o,i,s,l,a,c,d,f,m,p,g,v,k,b,y){const C=s+l;if(C<=0)return;e.fillStyle=f.bgHeader,e.fillRect(0,0,o,C);const[x,w]=r?.[0]??[],T=f.headerFontFull;e.font=T,Jn(t,0,i,0,C,(D,_,P,W)=>{if(k!==void 0&&!k.has([D.sourceIndex,-1]))return;const j=Math.max(0,W-_);e.save(),e.beginPath(),e.rect(_+j,l,D.width-j,s),e.clip();const A=v(D.group??"").overrideTheme,L=D.themeOverride===void 0&&A===void 0?f:Zn(f,A,D.themeOverride);L.bgHeader!==f.bgHeader&&(e.fillStyle=L.bgHeader,e.fill()),L!==f&&(e.font=L.baseFontFull);const $=d.columns.hasIndex(D.sourceIndex),q=a!==void 0||c,he=!q&&w===-1&&x===D.sourceIndex,xe=q?0:p.find(se=>se.item[0]===D.sourceIndex&&se.item[1]===-1)?.hoverAmount??0,ue=d?.current!==void 0&&d.current.cell[0]===D.sourceIndex,je=$?L.accentColor:ue?L.bgHeaderHasFocus:L.bgHeader,ne=n?l:0,G=D.sourceIndex===0?0:1;$?(e.fillStyle=je,e.fillRect(_+G,ne,D.width-G,s)):(ue||xe>0)&&(e.beginPath(),e.rect(_+G,ne,D.width-G,s),ue&&(e.fillStyle=L.bgHeaderHasFocus,e.fill()),xe>0&&(e.globalAlpha=xe,e.fillStyle=L.bgHeaderHovered,e.fill(),e.globalAlpha=1)),Mc(e,_,ne,D.width,s,D,$,L,he,ue,xe,m,b,y),e.restore()}),n&&o0(e,t,o,i,l,r,f,m,p,g,v,k)}function Di(e,t,n,r,o,i,s,l){return e<=o+s&&o<=e+n&&t<=i+l&&i<=t+r}function s0(e,t,n,r,o,i,s,l,a){a===void 0||a.size===0||(e.beginPath(),Tc(t,n,i,r,(c,d,f,m,p,g)=>{a.hasItemInRectangle({x:c[0],y:-2,width:c[1]-c[0]+1,height:1})&&e.rect(f,m,p,g)}),Jn(t,l,i,s,o,(c,d,f,m)=>{const p=Math.max(0,m-d),g=d+p+1,v=c.width-p-1;a.has([c.sourceIndex,-1])&&e.rect(g,r,v,o-r)}),e.clip())}function Ec(e,t,n,r,o,i,s){const[l,a]=e;let c,d;const f=s.find(m=>!m.sticky)?.sourceIndex??0;if(a>f){const m=Math.max(l,f);let p=t,g=r;for(let v=i.sourceIndex-1;v>=m;v--)p-=s[v].width,g+=s[v].width;for(let v=i.sourceIndex+1;v<=a;v++)g+=s[v].width;d={x:p,y:n,width:g,height:o}}if(f>l){const m=Math.min(a,f-1);let p=t,g=r;for(let v=i.sourceIndex-1;v>=l;v--)p-=s[v].width,g+=s[v].width;for(let v=i.sourceIndex+1;v<=m;v++)g+=s[v].width;c={x:p,y:n,width:g,height:o}}return[c,d]}function Kl(e,t,n,r,o,i,s,l,a,c,d,f,m,p,g,v,k,b,y,C,x,w,T,D,_,P,W,j,A,L,$,q,he,xe,ue){let je=C?.size??Number.MAX_SAFE_INTEGER;const ne=performance.now();let G=L.baseFontFull;e.font=G;const se={ctx:e},Q=[0,0],Ce=k>0?Zr(a,k,c):0;let oe,Me;return Jn(t,l,i,s,o,(le,Ve,Xe,_e,Ae)=>{const Ue=Math.max(0,_e-Ve),me=Ve+Ue,$e=o+1,Je=le.width-Ue,wt=r-o-1;if(y.length>0){let de=!1;for(let Le=0;Le<y.length;Le++){const ke=y[Le];if(Di(me,$e,Je,wt,ke.x,ke.y,ke.width,ke.height)){de=!0;break}}if(!de)return}const ae=()=>{e.save(),e.beginPath(),e.rect(me,$e,Je,wt),e.clip()},ee=x.columns.hasIndex(le.sourceIndex),Ie=f(le.group??"").overrideTheme,ge=le.themeOverride===void 0&&Ie===void 0?L:Zn(L,Ie,le.themeOverride),we=ge.baseFontFull;we!==G&&(G=we,e.font=we),ae();let We;return Vi(Ae,Xe,r,a,c,k,b,(de,Le,ke,ut,Pe)=>{if(Le<0||(Q[0]=le.sourceIndex,Q[1]=Le,C!==void 0&&!C.has(Q)))return;if(y.length>0){let Se=!1;for(let ft=0;ft<y.length;ft++){const Ge=y[ft];if(Di(Ve,de,le.width,ke,Ge.x,Ge.y,Ge.width,Ge.height)){Se=!0;break}}if(!Se)return}const ot=x.rows.hasIndex(Le),Ke=p.hasIndex(Le),ye=Le<a?d(Q):e0;let qe=Ve,et=le.width,Dt=!1,Wt=!1;if(ye.span!==void 0){const[Se,ft]=ye.span,Ge=`${Le},${Se},${ft},${le.sticky}`;if(Me===void 0&&(Me=new Set),Me.has(Ge)){je--;return}else{const gt=Ec(ye.span,Ve,de,le.width,ke,le,n),Et=le.sticky?gt[0]:gt[1];if(!le.sticky&&gt[0]!==void 0&&(Wt=!0),Et!==void 0){qe=Et.x,et=Et.width,Me.add(Ge),e.restore(),We=void 0,e.save(),e.beginPath();const bn=Math.max(0,_e-Et.x);e.rect(Et.x+bn,de,Et.width-bn,ke),oe===void 0&&(oe=[]),oe.push({x:Et.x+bn,y:de,width:Et.width-bn,height:ke}),e.clip(),Dt=!0}}}const Vt=m?.(Le),pn=Pe&&le.trailingRowOptions?.themeOverride!==void 0?le.trailingRowOptions?.themeOverride:void 0,vt=ye.themeOverride===void 0&&Vt===void 0&&pn===void 0?ge:Zn(ge,Vt,pn,ye.themeOverride);e.beginPath();const Tn=Zh(Q,ye,x);let Ct=Qh(Q,ye,x);const en=ye.span!==void 0&&x.columns.some(Se=>ye.span!==void 0&&Se>=ye.span[0]&&Se<=ye.span[1]);Tn&&!g&&v?Ct=0:Tn&&(Ct=Math.max(Ct,1)),en&&Ct++,Tn||(ot&&Ct++,ee&&!Pe&&Ct++);const Ye=ye.kind===J.Protected?vt.bgCellMedium:vt.bgCell;let tt;if((ut||Ye!==L.bgCell)&&(tt=Zt(Ye,tt)),Ct>0||Ke){Ke&&(tt=Zt(vt.bgHeader,tt));for(let Se=0;Se<Ct;Se++)tt=Zt(vt.accentLight,tt)}else if(w!==void 0){for(const Se of w)if(Se[0]===le.sourceIndex&&Se[1]===Le){tt=Zt(vt.bgSearchResult,tt);break}}if(T!==void 0)for(let Se=0;Se<T.length;Se++){const ft=T[Se],Ge=ft.range;ft.style!=="solid-outline"&&Ge.x<=le.sourceIndex&&le.sourceIndex<Ge.x+Ge.width&&Ge.y<=Le&&Le<Ge.y+Ge.height&&(tt=Zt(ft.color,tt))}let wn=!1;if(C!==void 0){const Se=de+1,Ge=(ut?Se+ke-1:Math.min(Se+ke-1,r-Ce))-Se;(Ge!==ke-1||qe+1<=_e)&&(wn=!0,e.save(),e.beginPath(),e.rect(qe+1,Se,et-1,Ge),e.clip()),tt=tt===void 0?vt.bgCell:Zt(tt,vt.bgCell)}const vn=le.sourceIndex===n.length-1,yn=Le===a-1;tt!==void 0&&(e.fillStyle=tt,We!==void 0&&(We.fillStyle=tt),C!==void 0?e.fillRect(qe+1,de+1,et-(vn?2:1),ke-(yn?2:1)):e.fillRect(qe,de,et,ke)),ye.style==="faded"&&(e.globalAlpha=.6);let Mt;for(let Se=0;Se<P.length;Se++){const ft=P[Se];if(ft.item[0]===le.sourceIndex&&ft.item[1]===Le){Mt=ft;break}}if(et>ue&&!Wt){const Se=vt.baseFontFull;Se!==G&&(e.font=Se,G=Se),We=kc(e,ye,le.sourceIndex,Le,vn,yn,qe,de,et,ke,Ct>0,vt,tt??vt.bgCell,D,_,Mt?.hoverAmount??0,W,A,ne,j,We,$,q,he,xe)}return wn&&e.restore(),ye.style==="faded"&&(e.globalAlpha=1),je--,Dt&&(e.restore(),We?.deprep?.(se),We=void 0,ae(),G=we,e.font=we),je<=0}),e.restore(),je<=0}),oe}function l0(e,t,n,r,o,i,s,l,a,c,d,f,m,p,g,v,k,b,y){b!==void 0||t[t.length-1]!==n[t.length-1]||Jn(t,a,s,l,i,(C,x,w,T,D)=>{if(C!==t[t.length-1])return;x+=C.width;const _=Math.max(x,T);_>r||(e.save(),e.beginPath(),e.rect(_,i+1,1e4,o-i-1),e.clip(),Vi(D,w,o,c,d,g,v,(P,W,j,A)=>{if(!A&&k.length>0&&!k.some(xe=>Di(x,P,1e4,j,xe.x,xe.y,xe.width,xe.height)))return;const L=m.hasIndex(W),$=p.hasIndex(W);e.beginPath();const q=f?.(W),he=q===void 0?y:Zn(y,q);he.bgCell!==y.bgCell&&(e.fillStyle=he.bgCell,e.fillRect(x,P,1e4,j)),$&&(e.fillStyle=he.bgHeader,e.fillRect(x,P,1e4,j)),L&&(e.fillStyle=he.accentLight,e.fillRect(x,P,1e4,j))}),e.restore())})}function a0(e,t,n,r,o,i,s,l,a){let c=!1;for(const p of t)if(!p.sticky){c=s(p.sourceIndex);break}const d=a.horizontalBorderColor??a.borderColor,f=a.borderColor,m=c?qr(t):0;if(m!==0&&(e.beginPath(),e.moveTo(m+.5,0),e.lineTo(m+.5,r),e.strokeStyle=Zt(f,a.bgCell),e.stroke()),o>0){const p=Zr(i,o,l);e.beginPath(),e.moveTo(0,r-p+.5),e.lineTo(n,r-p+.5),e.strokeStyle=Zt(d,a.bgCell),e.stroke()}}function ql(e,t,n,r,o,i,s,l,a,c,d,f,m,p,g,v){const k=g?.filter(D=>D.style!=="no-outline");if(k===void 0||k.length===0)return;const b=qr(l),y=Zr(p,m,f),C=[a,0,l.length,p-m],x=[b,0,t,n-y],w=k.map(D=>{const _=D.range,P=D.style??"dashed";return Jg(_,C,t,n,x).map(W=>{const j=W.rect,A=zs(j.x,j.y,t,n,d,c+d,r,o,i,s,p,a,m,l,f),L=j.width===1&&j.height===1?A:zs(j.x+j.width-1,j.y+j.height-1,t,n,d,c+d,r,o,i,s,p,a,m,l,f);return j.x+j.width>=l.length&&(L.width-=1),j.y+j.height>=p&&(L.height-=1),{color:D.color,style:P,clip:W.clip,rect:Qg({x:A.x,y:A.y,width:L.x+L.width-A.x,height:L.y+L.height-A.y},t,n,8)}})}),T=()=>{e.lineWidth=1;let D=!1;for(const _ of w)for(const P of _)if(P?.rect!==void 0&&Di(0,0,t,n,P.rect.x,P.rect.y,P.rect.width,P.rect.height)){const W=D,j=!Zg(P.clip,P.rect);j&&(e.save(),e.rect(P.clip.x,P.clip.y,P.clip.width,P.clip.height),e.clip()),P.style==="dashed"&&!D?(e.setLineDash([5,3]),D=!0):(P.style==="solid"||P.style==="solid-outline")&&D&&(e.setLineDash([]),D=!1),e.strokeStyle=P.style==="solid-outline"?Zt(Zt(P.color,v.borderColor),v.bgCell):Kr(P.color,1),e.strokeRect(P.rect.x+.5,P.rect.y+.5,P.rect.width-1,P.rect.height-1),j&&(e.restore(),D=W)}D&&e.setLineDash([])};return T(),T}function Gl(e,t,n,r,o){e.beginPath(),e.moveTo(t,n),e.lineTo(t,r),e.lineWidth=2,e.strokeStyle=o,e.stroke(),e.globalAlpha=1}function vs(e,t,n,r,o,i,s,l,a,c,d,f,m,p,g,v,k){if(d.current===void 0)return;const b=d.current.range,y=d.current.cell,C=[b.x+b.width-1,b.y+b.height-1];if(y[1]>=k&&C[1]>=k||!s.some(q=>q.sourceIndex===y[0]||q.sourceIndex===C[0]))return;const[w,T]=d.current.cell,D=m(d.current.cell),_=D.span??[w,w],P=T>=k-p,W=p>0&&!P?Zr(k,p,f)-1:0,j=C[1];let A,L;if(Jn(s,r,o,i,c,(q,he,xe,ue,je)=>{if(q.sticky&&w>q.sourceIndex)return;const ne=q.sourceIndex<_[0],G=q.sourceIndex>_[1],se=q.sourceIndex===C[0];if(!(!se&&(ne||G)))return Vi(je,xe,n,k,f,p,g,(Q,Ce,oe)=>{if(Ce!==T&&Ce!==j)return;let Me=he,le=q.width;const Ve=q.sourceIndex===l.length-1,Xe=Ce===k-1;if(D.span!==void 0){const Ue=Ec(D.span,he,Q,q.width,oe,q,l),me=q.sticky?Ue[0]:Ue[1];me!==void 0&&(Me=me.x,le=me.width)}const _e=Ce===j&&se&&v,Ae=Ce===T&&!ne&&!G&&A===void 0;return _e&&(L=()=>{ue>Me&&!q.sticky&&!Ae&&(e.beginPath(),e.rect(ue,0,t-ue,n),e.clip()),e.beginPath(),e.rect(Me+le-4,Q+oe-4,4,4),e.fillStyle=q.themeOverride?.accentColor??a.accentColor,e.fill()}),Ae&&(A=()=>{ue>Me&&!q.sticky&&(e.beginPath(),e.rect(ue,0,t-ue,n),e.clip()),e.beginPath(),e.rect(Me+.5,Q+.5,le-(Ve?1:0),oe-(Xe?1:0)),e.strokeStyle=q.themeOverride?.accentColor??a.accentColor,e.lineWidth=1,e.stroke()}),A!==void 0&&(v?L!==void 0:!0)}),A!==void 0&&(v?L!==void 0:!0)}),A===void 0&&L===void 0)return;const $=()=>{e.save(),e.beginPath(),e.rect(0,c,t,n-c-W),e.clip(),A?.(),L?.(),e.restore()};return $(),$}function c0(e,t,n,r,o,i,s,l,a,c){let d=0;return Jn(e,i,r,o,n,(f,m,p,g,v)=>(Vi(v,p,t,s,l,a,c,(k,b,y,C)=>{C||(d=Math.max(b,d))}),!0)),d}function u0(e,t){if(t===void 0||e.width!==t.width||e.height!==t.height||e.theme!==t.theme||e.headerHeight!==t.headerHeight||e.rowHeight!==t.rowHeight||e.rows!==t.rows||e.freezeColumns!==t.freezeColumns||e.getRowThemeOverride!==t.getRowThemeOverride||e.isFocused!==t.isFocused||e.isResizing!==t.isResizing||e.verticalBorder!==t.verticalBorder||e.getCellContent!==t.getCellContent||e.highlightRegions!==t.highlightRegions||e.selection!==t.selection||e.dragAndDropState!==t.dragAndDropState||e.prelightCells!==t.prelightCells||e.touchMode!==t.touchMode||e.maxScaleFactor!==t.maxScaleFactor)return!1;if(e.mappedColumns!==t.mappedColumns){if(e.mappedColumns.length>100||e.mappedColumns.length!==t.mappedColumns.length)return!1;let n;for(let r=0;r<e.mappedColumns.length;r++){const o=e.mappedColumns[r],i=t.mappedColumns[r];if(Yr(o,i))continue;if(n!==void 0||o.width===i.width)return!1;const{width:s,...l}=o,{width:a,...c}=i;if(!Yr(l,c))return!1;n=r}return n===void 0?!0:n}return!0}function Zl(e,t){const{canvas:n,headerCanvas:r,width:o,height:i,cellXOffset:s,cellYOffset:l,translateX:a,translateY:c,mappedColumns:d,enableGroups:f,freezeColumns:m,dragAndDropState:p,theme:g,drawFocus:v,headerHeight:k,groupHeaderHeight:b,disabledRows:y,rowHeight:C,verticalBorder:x,overrideCursor:w,isResizing:T,selection:D,fillHandle:_,freezeTrailingRows:P,rows:W,getCellContent:j,getGroupDetails:A,getRowThemeOverride:L,isFocused:$,drawHeaderCallback:q,prelightCells:he,drawCellCallback:xe,highlightRegions:ue,resizeCol:je,imageLoader:ne,lastBlitData:G,hoverValues:se,hyperWrapping:Q,hoverInfo:Ce,spriteManager:oe,maxScaleFactor:Me,hasAppendRow:le,touchMode:Ve,enqueue:Xe,renderStateProvider:_e,getCellRenderer:Ae,renderStrategy:Ue,bufferA:me,bufferB:$e,damage:Je,minimumCellWidth:wt}=e;if(o===0||i===0)return;const ae=Ue==="double-buffer",ee=Math.min(Me,Math.ceil(window.devicePixelRatio??1)),Ie=Ue!=="direct"&&u0(e,t);(n.width!==o*ee||n.height!==i*ee)&&(n.width=o*ee,n.height=i*ee,n.style.width=o+"px",n.style.height=i+"px");const ge=r,we=f?b+k:k,We=we+1;(ge.width!==o*ee||ge.height!==We*ee)&&(ge.width=o*ee,ge.height=We*ee,ge.style.width=o+"px",ge.style.height=We+"px"),ae&&(me.width!==o*ee||me.height!==i*ee)&&(me.width=o*ee,me.height=i*ee,G.current!==void 0&&(G.current.aBufferScroll=void 0)),ae&&($e.width!==o*ee||$e.height!==i*ee)&&($e.width=o*ee,$e.height=i*ee,G.current!==void 0&&(G.current.bBufferScroll=void 0));const de=G.current;if(Ie===!0&&s===de?.cellXOffset&&l===de?.cellYOffset&&a===de?.translateX&&c===de?.translateY)return;let Le=null;ae&&(Le=n.getContext("2d",{alpha:!1}));const ke=ge.getContext("2d",{alpha:!1});let ut;ae?Je!==void 0?ut=de?.lastBuffer==="b"?$e:me:ut=de?.lastBuffer==="b"?me:$e:ut=n;const Pe=ut.getContext("2d",{alpha:!1}),ot=ae?ut===me?$e:me:n;if(ke===null||Pe===null)return;const Ke=typeof C=="number"?()=>C:C;ke.save(),Pe.save(),ke.beginPath(),Pe.beginPath(),ke.textBaseline="middle",Pe.textBaseline="middle",ee!==1&&(ke.scale(ee,ee),Pe.scale(ee,ee));const ye=Hs(d,s,o,p,a);let qe=[];const et=v&&D.current?.cell[1]===l&&c===0;let Dt=!1;if(ue!==void 0){for(const Ye of ue)if(Ye.style!=="no-outline"&&Ye.range.y===l&&c===0){Dt=!0;break}}const Wt=()=>{i0(ke,ye,f,Ce,o,a,k,b,p,T,D,g,oe,se,x,A,Je,q,Ve),Ul(ke,ye,l,a,c,o,i,void 0,void 0,b,we,Ke,L,x,P,W,g,!0),ke.beginPath(),ke.moveTo(0,We-.5),ke.lineTo(o,We-.5),ke.strokeStyle=Zt(g.headerBottomBorderColor??g.horizontalBorderColor??g.borderColor,g.bgHeader),ke.stroke(),Dt&&ql(ke,o,i,s,l,a,c,d,m,k,b,C,P,W,ue,g),et&&vs(ke,o,i,l,a,c,ye,d,g,we,D,Ke,j,P,le,_,W)};if(Je!==void 0){const Ye=ye[ye.length-1].sourceIndex+1,tt=Je.hasItemInRegion([{x:s,y:-2,width:Ye,height:2},{x:s,y:l,width:Ye,height:300},{x:0,y:l,width:m,height:300},{x:s,y:W-P,width:Ye,height:P,when:P>0}]),wn=vn=>{Kl(vn,ye,d,i,we,a,c,l,W,Ke,j,A,L,y,$,v,P,le,qe,Je,D,he,ue,ne,oe,se,Ce,xe,Q,g,Xe,_e,Ae,w,wt);const yn=D.current;_&&v&&yn!==void 0&&Je.has(dc(yn.range))&&vs(vn,o,i,l,a,c,ye,d,g,we,D,Ke,j,P,le,_,W)};tt&&(wn(Pe),Le!==null&&(Le.save(),Le.scale(ee,ee),Le.textBaseline="middle",wn(Le),Le.restore()),Je.hasHeader()&&(s0(ke,ye,o,b,we,a,c,l,Je),Wt())),Pe.restore(),ke.restore();return}if((Ie!==!0||s!==de?.cellXOffset||a!==de?.translateX||et!==de?.mustDrawFocusOnHeader||Dt!==de?.mustDrawHighlightRingsOnHeader)&&Wt(),Ie===!0){Gt(ot!==void 0&&de!==void 0);const{regions:Ye}=n0(Pe,ot,ot===me?de.aBufferScroll:de.bBufferScroll,ot===me?de.bBufferScroll:de.aBufferScroll,de,s,l,a,c,P,o,i,W,we,ee,d,ye,C,ae);qe=Ye}else Ie!==!1&&(Gt(de!==void 0),qe=r0(de,s,l,a,c,o,i,we,ye,Ie));a0(Pe,ye,o,i,P,W,x,Ke,g);const Vt=ql(Pe,o,i,s,l,a,c,d,m,k,b,C,P,W,ue,g),pn=v?vs(Pe,o,i,l,a,c,ye,d,g,we,D,Ke,j,P,le,_,W):void 0;if(Pe.fillStyle=g.bgCell,qe.length>0){Pe.beginPath();for(const Ye of qe)Pe.rect(Ye.x,Ye.y,Ye.width,Ye.height);Pe.clip(),Pe.fill(),Pe.beginPath()}else Pe.fillRect(0,0,o,i);const vt=Kl(Pe,ye,d,i,we,a,c,l,W,Ke,j,A,L,y,$,v,P,le,qe,Je,D,he,ue,ne,oe,se,Ce,xe,Q,g,Xe,_e,Ae,w,wt);l0(Pe,ye,d,o,i,we,a,c,l,W,Ke,L,D.rows,y,P,le,qe,Je,g),Ul(Pe,ye,l,a,c,o,i,qe,vt,b,we,Ke,L,x,P,W,g),Vt?.(),pn?.(),T&&Jn(ye,0,a,0,we,(Ye,tt)=>Ye.sourceIndex===je?(Gl(ke,tt+Ye.width,0,we+1,Zt(g.resizeIndicatorColor??g.accentLight,g.bgHeader)),Gl(Pe,tt+Ye.width,we,i,Zt(g.resizeIndicatorColor??g.accentLight,g.bgCell)),!0):!1),Le!==null&&(Le.fillStyle=g.bgCell,Le.fillRect(0,0,o,i),Le.drawImage(Pe.canvas,0,0));const Tn=c0(ye,i,we,a,c,l,W,Ke,P,le);ne?.setWindow({x:s,y:l,width:ye.length,height:Tn-l},m,Array.from({length:P},(Ye,tt)=>W-1-tt));const Ct=de!==void 0&&(s!==de.cellXOffset||a!==de.translateX),en=de!==void 0&&(l!==de.cellYOffset||c!==de.translateY);G.current={cellXOffset:s,cellYOffset:l,translateX:a,translateY:c,mustDrawFocusOnHeader:et,mustDrawHighlightRingsOnHeader:Dt,lastBuffer:ae?ut===me?"a":"b":void 0,aBufferScroll:ut===me?[Ct,en]:de?.aBufferScroll,bBufferScroll:ut===$e?[Ct,en]:de?.bBufferScroll},Pe.restore(),ke.restore()}function Vi(e,t,n,r,o,i,s,l){let a=t,c=e;const d=r-i;for(;a<n&&c<d;){const f=o(c);if(l(a,c,f,!1,s&&c===r-1)===!0)break;a+=f,c++}a=n;for(let f=0;f<i;f++){c=r-1-f;const m=o(c);a-=m,l(a,c,m,!0,s&&c===r-1)}}function Jn(e,t,n,r,o,i){let s=0,l=0;const a=o+r;for(const c of e){const d=c.sticky?l:s+n;if(i(c,d,a,l,t)===!0)break;s+=c.width,l+=c.sticky?c.width:0}}function Tc(e,t,n,r,o){let i=0,s=0;for(let l=0;l<e.length;l++){const a=e[l];let c=l+1,d=a.width;for(a.sticky&&(s+=d);c<e.length&&Lo(e[c].group,a.group)&&e[c].sticky===e[l].sticky;){const v=e[c];d+=v.width,c++,l++,v.sticky&&(s+=v.width)}const f=a.sticky?0:n,m=i+f,p=a.sticky?0:Math.max(0,s-m),g=Math.min(d-p,t-(m+p));o([a.sourceIndex,e[c-1].sourceIndex],a.group??"",m+p,0,g,r),i+=d}}const d0=80;function f0(e){const t=e-1;return t*t*t+1}class h0{callback;constructor(t){this.callback=t}currentHoveredItem=void 0;leavingItems=[];lastAnimationTime;addToLeavingItems=t=>{this.leavingItems.some(r=>Io(r.item,t.item))||this.leavingItems.push(t)};removeFromLeavingItems=t=>{const n=this.leavingItems.find(r=>Io(r.item,t));return this.leavingItems=this.leavingItems.filter(r=>r!==n),n?.hoverAmount??0};cleanUpLeavingElements=()=>{this.leavingItems=this.leavingItems.filter(t=>t.hoverAmount>0)};shouldStep=()=>{const t=this.leavingItems.length>0,n=this.currentHoveredItem!==void 0&&this.currentHoveredItem.hoverAmount<1;return t||n};getAnimatingItems=()=>this.currentHoveredItem!==void 0?[...this.leavingItems,this.currentHoveredItem]:this.leavingItems.map(t=>({...t,hoverAmount:f0(t.hoverAmount)}));step=t=>{if(this.lastAnimationTime===void 0)this.lastAnimationTime=t;else{const r=(t-this.lastAnimationTime)/d0;for(const i of this.leavingItems)i.hoverAmount=gn(i.hoverAmount-r,0,1);this.currentHoveredItem!==void 0&&(this.currentHoveredItem.hoverAmount=gn(this.currentHoveredItem.hoverAmount+r,0,1));const o=this.getAnimatingItems();this.callback(o),this.cleanUpLeavingElements()}this.shouldStep()?(this.lastAnimationTime=t,window.requestAnimationFrame(this.step)):this.lastAnimationTime=void 0};setHovered=t=>{if(!Io(this.currentHoveredItem?.item,t)){if(this.currentHoveredItem!==void 0&&this.addToLeavingItems(this.currentHoveredItem),t!==void 0){const n=this.removeFromLeavingItems(t);this.currentHoveredItem={item:t,hoverAmount:n}}else this.currentHoveredItem=void 0;this.lastAnimationTime===void 0&&window.requestAnimationFrame(this.step)}}}class g0{fn;val;constructor(t){this.fn=t}get value(){return this.val??(this.val=this.fn())}}function ol(e){return new g0(e)}const m0=ol(()=>window.navigator.userAgent.includes("Firefox")),_i=ol(()=>window.navigator.userAgent.includes("Mac OS")&&window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome")),Ai=ol(()=>window.navigator.platform.toLowerCase().startsWith("mac"));function p0(e){const t=u.useRef([]),n=u.useRef(0),r=u.useRef(e);r.current=e;const o=u.useCallback(()=>{const i=()=>window.requestAnimationFrame(s),s=()=>{const l=t.current.map(nl);t.current=[],r.current(new Do(l)),t.current.length>0?n.current++:n.current=0};window.requestAnimationFrame(n.current>600?i:s)},[]);return u.useCallback(i=>{t.current.length===0&&o();const s=mn(i[0],i[1]);t.current.includes(s)||t.current.push(s)},[o])}const Yn="header",qt="group-header",Li="out-of-bounds";var Ur;(function(e){e[e.Start=-2]="Start",e[e.StartPadding=-1]="StartPadding",e[e.Center=0]="Center",e[e.EndPadding=1]="EndPadding",e[e.End=2]="End"})(Ur||(Ur={}));function Ic(e,t){return e===t?!0:e?.kind==="out-of-bounds"?e?.kind===t?.kind&&e?.location[0]===t?.location[0]&&e?.location[1]===t?.location[1]&&e?.region[0]===t?.region[0]&&e?.region[1]===t?.region[1]:e?.kind===t?.kind&&e?.location[0]===t?.location[0]&&e?.location[1]===t?.location[1]}const Ql=6,w0=(e,t)=>e.kind===J.Custom?e.copyData:t?.(e)?.getAccessibilityString(e)??"",v0=(e,t)=>{const{width:n,height:r,accessibilityHeight:o,columns:i,cellXOffset:s,cellYOffset:l,headerHeight:a,fillHandle:c=!1,groupHeaderHeight:d,rowHeight:f,rows:m,getCellContent:p,getRowThemeOverride:g,onHeaderMenuClick:v,enableGroups:k,isFilling:b,onCanvasFocused:y,onCanvasBlur:C,isFocused:x,selection:w,freezeColumns:T,onContextMenu:D,freezeTrailingRows:_,fixedShadowX:P=!0,fixedShadowY:W=!0,drawFocusRing:j=!0,onMouseDown:A,onMouseUp:L,onMouseMoveRaw:$,onMouseMove:q,onItemHovered:he,dragAndDropState:xe,firstColAccessible:ue,onKeyDown:je,onKeyUp:ne,highlightRegions:G,canvasRef:se,onDragStart:Q,onDragEnd:Ce,eventTargetRef:oe,isResizing:Me,resizeColumn:le,isDragging:Ve,isDraggable:Xe=!1,allowResize:_e,disabledRows:Ae,hasAppendRow:Ue,getGroupDetails:me,theme:$e,prelightCells:Je,headerIcons:wt,verticalBorder:ae,drawCell:ee,drawHeader:Ie,onCellFocused:ge,onDragOverCell:we,onDrop:We,onDragLeave:de,imageWindowLoader:Le,smoothScrollX:ke=!1,smoothScrollY:ut=!1,experimental:Pe,getCellRenderer:ot}=e,Ke=e.translateX??0,ye=e.translateY??0,qe=Math.max(T,Math.min(i.length-1,s)),et=u.useRef(null),Dt=Le,Wt=u.useRef(),[Vt,pn]=u.useState(!1),vt=u.useRef([]),Tn=u.useRef(),[Ct,en]=u.useState(),[Ye,tt]=u.useState(),wn=u.useRef(null),[vn,yn]=u.useState(),[Mt,Se]=u.useState(!1),ft=u.useRef(Mt);ft.current=Mt;const Ge=u.useMemo(()=>new qg(wt,()=>{yr.current=void 0,sn.current()}),[wt]),gt=k?d+a:a,Et=u.useRef(-1),bn=(Pe?.enableFirefoxRescaling??!1)&&m0.value,Qr=(Pe?.enableSafariRescaling??!1)&&_i.value;u.useLayoutEffect(()=>{window.devicePixelRatio===1||!bn&&!Qr||(Et.current!==-1&&pn(!0),window.clearTimeout(Et.current),Et.current=window.setTimeout(()=>{pn(!1),Et.current=-1},200))},[l,qe,Ke,ye,bn,Qr]);const mt=qh(i,T),er=P?qr(mt,xe):0,ht=u.useCallback((M,X,Z)=>{const re=M.getBoundingClientRect();if(X>=mt.length||Z>=m)return;const Y=re.width/n,te=zs(X,Z,n,r,d,gt,qe,l,Ke,ye,m,T,_,mt,f);return Y!==1&&(te.x*=Y,te.y*=Y,te.width*=Y,te.height*=Y),te.x+=re.x,te.y+=re.y,te},[n,r,d,gt,qe,l,Ke,ye,m,T,_,mt,f]),kt=u.useCallback((M,X,Z,re)=>{const Y=M.getBoundingClientRect(),te=Y.width/n,pe=(X-Y.left)/te,U=(Z-Y.top)/te,ce=5,Be=Hs(mt,qe,n,void 0,Ke);let dt=0,lt=0;re instanceof MouseEvent&&(dt=re.button,lt=re.buttons);const it=Jh(pe,Be,Ke),Fe=eg(U,r,k,a,d,m,f,l,ye,_),fe=re?.shiftKey===!0,Lt=re?.ctrlKey===!0,at=re?.metaKey===!0,yt=re!==void 0&&!(re instanceof MouseEvent)||re?.pointerType==="touch",Ir=[pe<0?-1:n<pe?1:0,U<gt?-1:r<U?1:0];let an;if(it===-1||U<0||pe<0||Fe===void 0||pe>n||U>r){const Ne=pe>n?1:pe<0?-1:0,cn=U>r?1:U<0?-1:0;let Ft=Ne*2,Wn=cn*2;Ne===0&&(Ft=it===-1?Ur.EndPadding:Ur.Center),cn===0&&(Wn=Fe===void 0?Ur.EndPadding:Ur.Center);let un=!1;if(it===-1&&Fe===-1){const xn=ht(M,mt.length-1,-1);Gt(xn!==void 0),un=X<xn.x+xn.width+ce}const ro=pe>n&&pe<n+Ds()||U>r&&U<r+Ds();an={kind:Li,location:[it!==-1?it:pe<0?0:mt.length-1,Fe??m-1],region:[Ft,Wn],shiftKey:fe,ctrlKey:Lt,metaKey:at,isEdge:un,isTouch:yt,button:dt,buttons:lt,scrollEdge:Ir,isMaybeScrollbar:ro}}else if(Fe<=-1){let Ne=ht(M,it,Fe);Gt(Ne!==void 0);let cn=Ne!==void 0&&Ne.x+Ne.width-X<=ce;const Ft=it-1;X-Ne.x<=ce&&Ft>=0?(cn=!0,Ne=ht(M,Ft,Fe),Gt(Ne!==void 0),an={kind:k&&Fe===-2?qt:Yn,location:[Ft,Fe],bounds:Ne,group:mt[Ft].group??"",isEdge:cn,shiftKey:fe,ctrlKey:Lt,metaKey:at,isTouch:yt,localEventX:X-Ne.x,localEventY:Z-Ne.y,button:dt,buttons:lt,scrollEdge:Ir}):an={kind:k&&Fe===-2?qt:Yn,group:mt[it].group??"",location:[it,Fe],bounds:Ne,isEdge:cn,shiftKey:fe,ctrlKey:Lt,metaKey:at,isTouch:yt,localEventX:X-Ne.x,localEventY:Z-Ne.y,button:dt,buttons:lt,scrollEdge:Ir}}else{const Ne=ht(M,it,Fe);Gt(Ne!==void 0);const cn=Ne!==void 0&&Ne.x+Ne.width-X<ce;let Ft=!1;if(c&&w.current!==void 0){const Wn=dc(w.current.range),un=ht(M,Wn[0],Wn[1]);if(un!==void 0){const ro=un.x+un.width-2,xn=un.y+un.height-2;Ft=Math.abs(ro-X)<Ql&&Math.abs(xn-Z)<Ql}}an={kind:"cell",location:[it,Fe],bounds:Ne,isEdge:cn,shiftKey:fe,ctrlKey:Lt,isFillHandle:Ft,metaKey:at,isTouch:yt,localEventX:X-Ne.x,localEventY:Z-Ne.y,button:dt,buttons:lt,scrollEdge:Ir}}return an},[n,mt,qe,Ke,r,k,a,d,m,f,l,ye,_,ht,c,w,gt]),[In]=Ct??[],Vo=u.useRef(()=>{}),on=u.useRef(Ct);on.current=Ct;const[tr,nr]=u.useMemo(()=>{const M=document.createElement("canvas"),X=document.createElement("canvas");return M.style.display="none",M.style.opacity="0",M.style.position="fixed",X.style.display="none",X.style.opacity="0",X.style.position="fixed",[M,X]},[]);u.useLayoutEffect(()=>(document.documentElement.append(tr),document.documentElement.append(nr),()=>{tr.remove(),nr.remove()}),[tr,nr]);const vr=u.useMemo(()=>new ug,[]),Xo=bn&&Vt?1:Qr&&Vt?2:5,Uo=Pe?.disableMinimumCellWidth===!0?1:10,yr=u.useRef(),br=u.useCallback(()=>{const M=et.current,X=wn.current;if(M===null||X===null)return;let Z=!1;const re=pe=>{Z=!0,yn(pe)},Y=yr.current,te={canvas:M,bufferA:tr,bufferB:nr,headerCanvas:X,width:n,height:r,cellXOffset:qe,cellYOffset:l,translateX:Math.round(Ke),translateY:Math.round(ye),mappedColumns:mt,enableGroups:k,freezeColumns:T,dragAndDropState:xe,theme:$e,headerHeight:a,groupHeaderHeight:d,disabledRows:Ae??ze.empty(),rowHeight:f,verticalBorder:ae,isResizing:Me,resizeCol:le,isFocused:x,selection:w,fillHandle:c,drawCellCallback:ee,hasAppendRow:Ue,overrideCursor:re,maxScaleFactor:Xo,freezeTrailingRows:_,rows:m,drawFocus:j,getCellContent:p,getGroupDetails:me??(pe=>({name:pe})),getRowThemeOverride:g,drawHeaderCallback:Ie,prelightCells:Je,highlightRegions:G,imageLoader:Dt,lastBlitData:Tn,damage:Wt.current,hoverValues:vt.current,hoverInfo:on.current,spriteManager:Ge,scrolling:Vt,hyperWrapping:Pe?.hyperWrapping??!1,touchMode:Mt,enqueue:Vo.current,renderStateProvider:vr,renderStrategy:Pe?.renderStrategy??(_i.value?"double-buffer":"single-buffer"),getCellRenderer:ot,minimumCellWidth:Uo};te.damage===void 0?(yr.current=te,Zl(te,Y)):Zl(te,void 0),!Z&&(te.damage===void 0||te.damage.has(on?.current?.[0]))&&yn(void 0)},[tr,nr,n,r,qe,l,Ke,ye,mt,k,T,xe,$e,a,d,Ae,f,ae,Me,Ue,le,x,w,c,_,m,j,Xo,p,me,g,ee,Ie,Je,G,Dt,Ge,Vt,Pe?.hyperWrapping,Pe?.renderStrategy,Mt,vr,ot,Uo]),sn=u.useRef(br);u.useLayoutEffect(()=>{br(),sn.current=br},[br]),u.useLayoutEffect(()=>{(async()=>{document?.fonts?.ready!==void 0&&(await document.fonts.ready,yr.current=void 0,sn.current())})()},[]);const zn=u.useCallback(M=>{Wt.current=M,sn.current(),Wt.current=void 0},[]),Xi=p0(zn);Vo.current=Xi;const Yo=u.useCallback(M=>{zn(new Do(M.map(X=>X.cell)))},[zn]);Dt.setCallback(zn);const[Ui,Yi]=u.useState(!1),[rr,Fn]=In??[],Ki=rr!==void 0&&Fn===-1,qi=rr!==void 0&&Fn===-2;let Ko=!1,Jr=!1,xr=vn;if(xr===void 0&&rr!==void 0&&Fn!==void 0&&Fn>-1&&Fn<m){const M=p([rr,Fn],!0);Ko=M.kind===rn.NewRow||M.kind===rn.Marker&&M.markerKind!=="number",Jr=M.kind===J.Boolean&&Ms(M),xr=M.cursor}const qo=Ve?"grabbing":(Ye??!1)||Me?"col-resize":Ui||b?"crosshair":xr!==void 0?xr:Ki||Ko||Jr||qi?"pointer":"default",or=u.useMemo(()=>({contain:"strict",display:"block",cursor:qo}),[qo]),Pn=u.useRef("default"),On=oe?.current;On!=null&&Pn.current!==or.cursor&&(On.style.cursor=Pn.current=or.cursor);const $n=u.useCallback((M,X,Z,re)=>{if(me===void 0)return;const Y=me(M);if(Y.actions!==void 0){const te=Sc(X,Y.actions);for(const[pe,U]of te.entries())if(ji(U,Z+X.x,re+U.y))return Y.actions[pe]}},[me]),ir=u.useCallback((M,X,Z,re)=>{const Y=i[X];if(!Ve&&!Me&&Y.hasMenu===!0&&!(Ye??!1)){const te=ht(M,X,-1);Gt(te!==void 0);const pe=Rc(te.x,te.y,te.width,te.height,Us(Y.title)==="rtl");if(Z>pe.x&&Z<pe.x+pe.width&&re>pe.y&&re<pe.y+pe.height)return te}},[i,ht,Ye,Ve,Me]),Cr=u.useRef(0),sr=u.useRef(),_t=u.useRef(!1),kr=u.useCallback(M=>{const X=et.current,Z=oe?.current;if(X===null||M.target!==X&&M.target!==Z)return;_t.current=!0;let re,Y;if(M instanceof MouseEvent?(re=M.clientX,Y=M.clientY):(re=M.touches[0].clientX,Y=M.touches[0].clientY),M.target===Z&&Z!==null){const pe=Z.getBoundingClientRect();if(re>pe.right||Y>pe.bottom)return}const te=kt(X,re,Y,M);sr.current=te.location,te.isTouch&&(Cr.current=Date.now()),ft.current!==te.isTouch&&Se(te.isTouch),!(te.kind===Yn&&ir(X,te.location[0],re,Y)!==void 0)&&(te.kind===qt&&$n(te.group,te.bounds,te.localEventX,te.localEventY)!==void 0||(A?.(te),!te.isTouch&&Xe!==!0&&Xe!==te.kind&&te.button<3&&te.button!==1&&M.preventDefault()))},[oe,Xe,kt,$n,ir,A]);Pt("touchstart",kr,window,!1),Pt("mousedown",kr,window,!1);const eo=u.useRef(0),to=u.useCallback(M=>{const X=eo.current;eo.current=Date.now();const Z=et.current;if(_t.current=!1,L===void 0||Z===null)return;const re=oe?.current,Y=M.target!==Z&&M.target!==re;let te,pe,U=!0;if(M instanceof MouseEvent){if(te=M.clientX,pe=M.clientY,U=M.button<3,M.pointerType==="touch")return}else te=M.changedTouches[0].clientX,pe=M.changedTouches[0].clientY;let ce=kt(Z,te,pe,M);ce.isTouch&&Cr.current!==0&&Date.now()-Cr.current>500&&(ce={...ce,isLongTouch:!0}),X!==0&&Date.now()-X<(ce.isTouch?1e3:500)&&(ce={...ce,isDoubleClick:!0}),ft.current!==ce.isTouch&&Se(ce.isTouch),!Y&&M.cancelable&&U&&M.preventDefault();const[Be]=ce.location,dt=ir(Z,Be,te,pe);if(ce.kind===Yn&&dt!==void 0){(ce.button!==0||sr.current?.[0]!==Be||sr.current?.[1]!==-1)&&L(ce,!0);return}else if(ce.kind===qt){const lt=$n(ce.group,ce.bounds,ce.localEventX,ce.localEventY);if(lt!==void 0){ce.button===0&&lt.onClick(ce);return}}L(ce,Y)},[L,oe,kt,ir,$n]);Pt("mouseup",to,window,!1),Pt("touchend",to,window,!1);const Gi=u.useCallback(M=>{const X=et.current;if(X===null)return;const Z=oe?.current,re=M.target!==X&&M.target!==Z;let Y,te,pe=!0;M instanceof MouseEvent?(Y=M.clientX,te=M.clientY,pe=M.button<3):(Y=M.changedTouches[0].clientX,te=M.changedTouches[0].clientY);const U=kt(X,Y,te,M);ft.current!==U.isTouch&&Se(U.isTouch),!re&&M.cancelable&&pe&&M.preventDefault();const[ce]=U.location,Be=ir(X,ce,Y,te);if(U.kind===Yn&&Be!==void 0)U.button===0&&sr.current?.[0]===ce&&sr.current?.[1]===-1&&v?.(ce,Be);else if(U.kind===qt){const dt=$n(U.group,U.bounds,U.localEventX,U.localEventY);dt!==void 0&&U.button===0&&dt.onClick(U)}},[oe,kt,ir,v,$n]);Pt("click",Gi,window,!1);const Zi=u.useCallback(M=>{const X=et.current,Z=oe?.current;if(X===null||M.target!==X&&M.target!==Z||D===void 0)return;const re=kt(X,M.clientX,M.clientY,M);D(re,()=>{M.cancelable&&M.preventDefault()})},[oe,kt,D]);Pt("contextmenu",Zi,oe?.current??null,!1);const ln=u.useCallback(M=>{Wt.current=new Do(M.map(X=>X.item)),vt.current=M,sn.current(),Wt.current=void 0},[]),Dn=u.useMemo(()=>new h0(ln),[ln]),Xt=u.useRef(Dn);Xt.current=Dn,u.useLayoutEffect(()=>{const M=Xt.current;if(In===void 0||In[1]<0){M.setHovered(In);return}const X=p(In,!0),Z=ot(X);M.setHovered(Z===void 0&&X.kind===J.Custom||Z?.needsHover===!0?In:void 0)},[p,ot,In]);const z=u.useRef(),Tt=u.useCallback(M=>{const X=et.current;if(X===null)return;const Z=oe?.current,re=M.target!==X&&M.target!==Z,Y=kt(X,M.clientX,M.clientY,M);if(Y.kind!=="out-of-bounds"&&re&&!_t.current&&!Y.isTouch)return;const te=(U,ce)=>{en(Be=>Be===U||Be?.[0][0]===U?.[0][0]&&Be?.[0][1]===U?.[0][1]&&(Be?.[1][0]===U?.[1][0]&&Be?.[1][1]===U?.[1][1]||!ce)?Be:U)};if(!Ic(Y,z.current))he?.(Y),te(Y.kind===Li?void 0:[Y.location,[Y.localEventX,Y.localEventY]],!0),z.current=Y;else if(Y.kind==="cell"||Y.kind===Yn||Y.kind===qt){let U=!1,ce=!0;if(Y.kind==="cell"){const dt=p(Y.location);ce=ot(dt)?.needsHoverPosition??dt.kind===J.Custom,U=ce}else Y.kind===qt&&(U=!0);const Be=[Y.location,[Y.localEventX,Y.localEventY]];te(Be,ce),on.current=Be,U&&zn(new Do([Y.location]))}const pe=Y.location[0]>=(ue?0:1);tt(Y.kind===Yn&&Y.isEdge&&pe&&_e===!0),Yi(Y.kind==="cell"&&Y.isFillHandle),$?.(M),q(Y)},[oe,kt,ue,_e,$,q,he,p,ot,zn]);Pt("mousemove",Tt,window,!0);const Ut=u.useCallback(M=>{const X=et.current;if(X===null)return;let Z,re;w.current!==void 0&&(Z=ht(X,w.current.cell[0],w.current.cell[1]),re=w.current.cell),je?.({bounds:Z,stopPropagation:()=>M.stopPropagation(),preventDefault:()=>M.preventDefault(),cancel:()=>{},ctrlKey:M.ctrlKey,metaKey:M.metaKey,shiftKey:M.shiftKey,altKey:M.altKey,key:M.key,keyCode:M.keyCode,rawEvent:M,location:re})},[je,w,ht]),Qi=u.useCallback(M=>{const X=et.current;if(X===null)return;let Z,re;w.current!==void 0&&(Z=ht(X,w.current.cell[0],w.current.cell[1]),re=w.current.cell),ne?.({bounds:Z,stopPropagation:()=>M.stopPropagation(),preventDefault:()=>M.preventDefault(),cancel:()=>{},ctrlKey:M.ctrlKey,metaKey:M.metaKey,shiftKey:M.shiftKey,altKey:M.altKey,key:M.key,keyCode:M.keyCode,rawEvent:M,location:re})},[ne,w,ht]),Go=u.useCallback(M=>{et.current=M,se!==void 0&&(se.current=M)},[se]),Ji=u.useCallback(M=>{const X=et.current;if(X===null||Xe===!1||Me){M.preventDefault();return}let Z,re;const Y=kt(X,M.clientX,M.clientY);if(Xe!==!0&&Y.kind!==Xe){M.preventDefault();return}const te=(lt,it)=>{Z=lt,re=it};let pe,U,ce;const Be=(lt,it,Fe)=>{pe=lt,U=it,ce=Fe};let dt=!1;if(Q?.({...Y,setData:te,setDragImage:Be,preventDefault:()=>dt=!0,defaultPrevented:()=>dt}),!dt&&Z!==void 0&&re!==void 0&&M.dataTransfer!==null)if(M.dataTransfer.setData(Z,re),M.dataTransfer.effectAllowed="copyLink",pe!==void 0&&U!==void 0&&ce!==void 0)M.dataTransfer.setDragImage(pe,U,ce);else{const[lt,it]=Y.location;if(it!==void 0){const Fe=document.createElement("canvas"),fe=ht(X,lt,it);Gt(fe!==void 0);const Lt=Math.ceil(window.devicePixelRatio??1);Fe.width=fe.width*Lt,Fe.height=fe.height*Lt;const at=Fe.getContext("2d");at!==null&&(at.scale(Lt,Lt),at.textBaseline="middle",it===-1?(at.font=$e.headerFontFull,at.fillStyle=$e.bgHeader,at.fillRect(0,0,Fe.width,Fe.height),Mc(at,0,0,fe.width,fe.height,mt[lt],!1,$e,!1,!1,0,Ge,Ie,!1)):(at.font=$e.baseFontFull,at.fillStyle=$e.bgCell,at.fillRect(0,0,Fe.width,Fe.height),kc(at,p([lt,it]),0,it,!1,!1,0,0,fe.width,fe.height,!1,$e,$e.bgCell,Dt,Ge,1,void 0,!1,0,void 0,void 0,void 0,vr,ot,()=>{}))),Fe.style.left="-100%",Fe.style.position="absolute",Fe.style.width=`${fe.width}px`,Fe.style.height=`${fe.height}px`,document.body.append(Fe),M.dataTransfer.setDragImage(Fe,fe.width/2,fe.height/2),window.setTimeout(()=>{Fe.remove()},0)}}else M.preventDefault()},[Xe,Me,kt,Q,ht,$e,mt,Ge,Ie,p,Dt,vr,ot]);Pt("dragstart",Ji,oe?.current??null,!1,!1);const no=u.useRef(),ll=u.useCallback(M=>{const X=et.current;if(We!==void 0&&M.preventDefault(),X===null||we===void 0)return;const Z=kt(X,M.clientX,M.clientY),[re,Y]=Z.location,te=re-(ue?0:1),[pe,U]=no.current??[];(pe!==te||U!==Y)&&(no.current=[te,Y],we([te,Y],M.dataTransfer))},[ue,kt,we,We]);Pt("dragover",ll,oe?.current??null,!1,!1);const N=u.useCallback(()=>{no.current=void 0,Ce?.()},[Ce]);Pt("dragend",N,oe?.current??null,!1,!1);const tn=u.useCallback(M=>{const X=et.current;if(X===null||We===void 0)return;M.preventDefault();const Z=kt(X,M.clientX,M.clientY),[re,Y]=Z.location,te=re-(ue?0:1);We([te,Y],M.dataTransfer)},[ue,kt,We]);Pt("drop",tn,oe?.current??null,!1,!1);const St=u.useCallback(()=>{de?.()},[de]);Pt("dragleave",St,oe?.current??null,!1,!1);const Zo=u.useRef(w);Zo.current=w;const Sr=u.useRef(null),Nn=u.useCallback(M=>{et.current===null||!et.current.contains(document.activeElement)||(M===null&&Zo.current.current!==void 0?se?.current?.focus({preventScroll:!0}):M!==null&&M.focus({preventScroll:!0}),Sr.current=M)},[se]);u.useImperativeHandle(t,()=>({focus:()=>{const M=Sr.current;M===null||!document.contains(M)?se?.current?.focus({preventScroll:!0}):M.focus({preventScroll:!0})},getBounds:(M,X)=>{if(!(se===void 0||se.current===null))return ht(se.current,M??0,X??-1)},damage:Yo}),[se,Yo,ht]);const At=u.useRef(),Rr=Gf(()=>{if(n<50||Pe?.disableAccessibilityTree===!0)return null;let M=Hs(mt,qe,n,xe,Ke);const X=ue?0:-1;!ue&&M[0]?.sourceIndex===0&&(M=M.slice(1));const[Z,re]=w.current?.cell??[],Y=w.current?.range,te=M.map(U=>U.sourceIndex),pe=hr(l,Math.min(m,l+o));return Z!==void 0&&re!==void 0&&!(te.includes(Z)&&pe.includes(re))&&Nn(null),u.createElement("table",{key:"access-tree",role:"grid","aria-rowcount":m+1,"aria-multiselectable":"true","aria-colcount":mt.length+X},u.createElement("thead",{role:"rowgroup"},u.createElement("tr",{role:"row","aria-rowindex":1},M.map(U=>u.createElement("th",{role:"columnheader","aria-selected":w.columns.hasIndex(U.sourceIndex),"aria-colindex":U.sourceIndex+1+X,tabIndex:-1,onFocus:ce=>{if(ce.target!==Sr.current)return ge?.([U.sourceIndex,-1])},key:U.sourceIndex},U.title)))),u.createElement("tbody",{role:"rowgroup"},pe.map(U=>u.createElement("tr",{role:"row","aria-selected":w.rows.hasIndex(U),key:U,"aria-rowindex":U+2},M.map(ce=>{const Be=ce.sourceIndex,dt=mn(Be,U),lt=Z===Be&&re===U,it=Y!==void 0&&Be>=Y.x&&Be<Y.x+Y.width&&U>=Y.y&&U<Y.y+Y.height,Fe=`glide-cell-${Be}-${U}`,fe=[Be,U],Lt=p(fe,!0);return u.createElement("td",{key:dt,role:"gridcell","aria-colindex":Be+1+X,"aria-selected":it,"aria-readonly":Vr(Lt)||!vo(Lt),id:Fe,"data-testid":Fe,onClick:()=>{const at=se?.current;if(at!=null)return je?.({bounds:ht(at,Be,U),cancel:()=>{},preventDefault:()=>{},stopPropagation:()=>{},ctrlKey:!1,key:"Enter",keyCode:13,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:fe})},onFocusCapture:at=>{if(!(at.target===Sr.current||At.current?.[0]===Be&&At.current?.[1]===U))return At.current=fe,ge?.(fe)},ref:lt?Nn:void 0,tabIndex:-1},w0(Lt,ot))})))))},[n,mt,qe,xe,Ke,m,l,o,w,Nn,p,se,je,ht,ge],200),Mr=T===0||!P?0:qe>T?1:gn(-Ke/100,0,1),es=-l*32+ye,Er=W?gn(-es/100,0,1):0,ts=u.useMemo(()=>{if(!Mr&&!Er)return null;const M={position:"absolute",top:0,left:er,width:n-er,height:r,opacity:Mr,pointerEvents:"none",transition:ke?void 0:"opacity 0.2s",boxShadow:"inset 13px 0 10px -13px rgba(0, 0, 0, 0.2)"},X={position:"absolute",top:gt,left:0,width:n,height:r,opacity:Er,pointerEvents:"none",transition:ut?void 0:"opacity 0.2s",boxShadow:"inset 0 13px 10px -13px rgba(0, 0, 0, 0.2)"};return u.createElement(u.Fragment,null,Mr>0&&u.createElement("div",{id:"shadow-x",style:M}),Er>0&&u.createElement("div",{id:"shadow-y",style:X}))},[Mr,Er,er,n,ke,gt,r,ut]),Tr=u.useMemo(()=>({position:"absolute",top:0,left:0}),[]);return u.createElement(u.Fragment,null,u.createElement("canvas",{"data-testid":"data-grid-canvas",tabIndex:0,onKeyDown:Ut,onKeyUp:Qi,onFocus:y,onBlur:C,ref:Go,style:or},Rr),u.createElement("canvas",{ref:wn,style:Tr}),ts)},y0=u.memo(u.forwardRef(v0));function wo(e,t,n,r){return gn(Math.round(t-(e.growOffset??0)),Math.ceil(n),Math.floor(r))}const b0=e=>{const[t,n]=u.useState(),[r,o]=u.useState(),[i,s]=u.useState(),[l,a]=u.useState(),[c,d]=u.useState(!1),[f,m]=u.useState(),[p,g]=u.useState(),[v,k]=u.useState(),[b,y]=u.useState(!1),[C,x]=u.useState(),{onHeaderMenuClick:w,getCellContent:T,onColumnMoved:D,onColumnResize:_,onColumnResizeStart:P,onColumnResizeEnd:W,gridRef:j,maxColumnWidth:A,minColumnWidth:L,onRowMoved:$,lockColumns:q,onColumnProposeMove:he,onMouseDown:xe,onMouseUp:ue,onItemHovered:je,onDragStart:ne,canvasRef:G}=e,se=(_??W??P)!==void 0,{columns:Q,selection:Ce}=e,oe=Ce.columns,Me=u.useCallback(ae=>{const[ee,Ie]=ae.location;i!==void 0&&l!==ee&&ee>=q?(d(!0),a(ee)):p!==void 0&&Ie!==void 0?(y(!0),k(Math.max(0,Ie))):je?.(ae)},[i,p,l,je,q]),le=D!==void 0,Ve=u.useCallback(ae=>{if(ae.button===0){const[ee,Ie]=ae.location;if(ae.kind==="out-of-bounds"&&ae.isEdge&&se){const ge=j?.current?.getBounds(Q.length-1,-1);ge!==void 0&&(n(ge.x),o(Q.length-1))}else if(ae.kind==="header"&&ee>=q){const ge=G?.current;if(ae.isEdge&&se&&ge){n(ae.bounds.x),o(ee);const We=ge.getBoundingClientRect().width/ge.offsetWidth,de=ae.bounds.width/We;P?.(Q[ee],de,ee,de+(Q[ee].growOffset??0))}else ae.kind==="header"&&le&&(m(ae.bounds.x),s(ee))}else ae.kind==="cell"&&q>0&&ee===0&&Ie!==void 0&&$!==void 0&&(x(ae.bounds.y),g(Ie))}xe?.(ae)},[xe,se,q,$,j,Q,le,P,G]),Xe=u.useCallback((ae,ee)=>{c||b||w?.(ae,ee)},[c,b,w]),_e=u.useRef(-1),Ae=u.useCallback(()=>{_e.current=-1,g(void 0),k(void 0),x(void 0),y(!1),s(void 0),a(void 0),m(void 0),d(!1),o(void 0),n(void 0)},[]),Ue=u.useCallback((ae,ee)=>{if(ae.button===0){if(r!==void 0){if(oe?.hasIndex(r)===!0)for(const ge of oe){if(ge===r)continue;const we=Q[ge],We=wo(we,_e.current,L,A);_?.(we,We,ge,We+(we.growOffset??0))}const Ie=wo(Q[r],_e.current,L,A);if(W?.(Q[r],Ie,r,Ie+(Q[r].growOffset??0)),oe.hasIndex(r))for(const ge of oe){if(ge===r)continue;const we=Q[ge],We=wo(we,_e.current,L,A);W?.(we,We,ge,We+(we.growOffset??0))}}Ae(),i!==void 0&&l!==void 0&&D?.(i,l),p!==void 0&&v!==void 0&&$?.(p,v)}ue?.(ae,ee)},[ue,r,i,l,p,v,oe,W,Q,L,A,_,D,$,Ae]),me=u.useMemo(()=>{if(!(i===void 0||l===void 0)&&i!==l&&he?.(i,l)!==!1)return{src:i,dest:l}},[i,l,he]),$e=u.useCallback(ae=>{const ee=G?.current;if(i!==void 0&&f!==void 0)Math.abs(ae.clientX-f)>20&&d(!0);else if(p!==void 0&&C!==void 0)Math.abs(ae.clientY-C)>20&&y(!0);else if(r!==void 0&&t!==void 0&&ee){const ge=ee.getBoundingClientRect().width/ee.offsetWidth,we=(ae.clientX-t)/ge,We=Q[r],de=wo(We,we,L,A);if(_?.(We,de,r,de+(We.growOffset??0)),_e.current=we,oe?.first()===r)for(const Le of oe){if(Le===r)continue;const ke=Q[Le],ut=wo(ke,_e.current,L,A);_?.(ke,ut,Le,ut+(ke.growOffset??0))}}},[i,f,p,C,r,t,Q,L,A,_,oe,G]),Je=u.useCallback((ae,ee)=>{if(p===void 0||v===void 0)return T(ae,ee);let[Ie,ge]=ae;return ge===v?ge=p:(ge>v&&(ge-=1),ge>=p&&(ge+=1)),T([Ie,ge],ee)},[p,v,T]),wt=u.useCallback(ae=>{ne?.(ae),ae.defaultPrevented()||Ae()},[Ae,ne]);return u.createElement(y0,{accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,enableGroups:e.enableGroups,eventTargetRef:e.eventTargetRef,experimental:e.experimental,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,headerIcons:e.headerIcons,height:e.height,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,resizeColumn:r,isDraggable:e.isDraggable,isFilling:e.isFilling,isFocused:e.isFocused,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDrop:e.onDrop,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,verticalBorder:e.verticalBorder,width:e.width,getCellContent:Je,isResizing:r!==void 0,onHeaderMenuClick:Xe,isDragging:c,onItemHovered:Me,onDragStart:wt,onMouseDown:Ve,allowResize:se,onMouseUp:Ue,dragAndDropState:me,onMouseMoveRaw:$e,ref:j})};function x0(e){const t=u.useRef(null),[n,r]=u.useState({width:e?.[0],height:e?.[1]});return u.useLayoutEffect(()=>{const o=s=>{for(const l of s){const{width:a,height:c}=l&&l.contentRect||{};r(d=>d.width===a&&d.height===c?d:{width:a,height:c})}},i=new window.ResizeObserver(o);return t.current&&i.observe(t.current,void 0),()=>{i.disconnect()}},[t.current]),{ref:t,...n}}const C0=(e,t,n)=>{const r=u.useRef(null),o=u.useRef(null),i=u.useRef(null),s=u.useRef(0),l=u.useRef(t);l.current=t;const a=n.current;u.useEffect(()=>{const c=()=>{if(o.current===!1&&a!==null){const m=[a.scrollLeft,a.scrollTop];if(i.current?.[0]===m[0]&&i.current?.[1]===m[1])if(s.current>10){i.current=null,o.current=null;return}else s.current++;else s.current=0,l.current(m[0],m[1]),i.current=m;r.current=window.setTimeout(c,8.333333333333334)}},d=()=>{o.current=!0,i.current=null,r.current!==null&&(window.clearTimeout(r.current),r.current=null)},f=m=>{m.touches.length===0&&(o.current=!1,s.current=0,r.current=window.setTimeout(c,8.333333333333334))};if(e&&a!==null){const m=a;return m.addEventListener("touchstart",d),m.addEventListener("touchend",f),()=>{m.removeEventListener("touchstart",d),m.removeEventListener("touchend",f),r.current!==null&&window.clearTimeout(r.current)}}},[e,a])},k0=()=>e=>e.isSafari?"scroll":"auto",S0=Jt("div")({name:"ScrollRegionStyle",class:"gdg-s1dgczr6",propsAsIs:!1,vars:{"s1dgczr6-0":[k0()]}});function R0(e){const[t,n]=u.useState(!1),r=typeof window>"u"?null:window,o=u.useRef(0);return Pt("touchstart",u.useCallback(()=>{window.clearTimeout(o.current),n(!0)},[]),r,!0,!1),Pt("touchend",u.useCallback(i=>{i.touches.length===0&&(o.current=window.setTimeout(()=>n(!1),e))},[e]),r,!0,!1),t}const M0=e=>{const{children:t,clientHeight:n,scrollHeight:r,scrollWidth:o,update:i,draggable:s,className:l,preventDiagonalScrolling:a=!1,paddingBottom:c=0,paddingRight:d=0,rightElement:f,rightElementProps:m,kineticScrollPerfHack:p=!1,scrollRef:g,initialSize:v}=e,k=[],b=m?.sticky??!1,y=m?.fill??!1,C=u.useRef(0),x=u.useRef(0),w=u.useRef(null),T=typeof window>"u"?1:window.devicePixelRatio,D=u.useRef({scrollLeft:0,scrollTop:0,lockDirection:void 0}),_=u.useRef(null),P=R0(200),[W,j]=u.useState(!0),A=u.useRef(0);u.useLayoutEffect(()=>{if(!W||P||D.current.lockDirection===void 0)return;const Q=w.current;if(Q===null)return;const[Ce,oe]=D.current.lockDirection;Ce!==void 0?Q.scrollLeft=Ce:oe!==void 0&&(Q.scrollTop=oe),D.current.lockDirection=void 0},[P,W]);const L=u.useCallback((Q,Ce)=>{const oe=w.current;if(oe===null)return;Ce=Ce??oe.scrollTop,Q=Q??oe.scrollLeft;const Me=D.current.scrollTop,le=D.current.scrollLeft,Ve=Q-le,Xe=Ce-Me;P&&Ve!==0&&Xe!==0&&(Math.abs(Ve)>3||Math.abs(Xe)>3)&&a&&D.current.lockDirection===void 0&&(D.current.lockDirection=Math.abs(Ve)<Math.abs(Xe)?[le,void 0]:[void 0,Me]);const _e=D.current.lockDirection;Q=_e?.[0]??Q,Ce=_e?.[1]??Ce,D.current.scrollLeft=Q,D.current.scrollTop=Ce;const Ae=oe.clientWidth,Ue=oe.clientHeight,me=Ce,$e=x.current-me,Je=oe.scrollHeight-Ue;if(x.current=me,Je>0&&(Math.abs($e)>2e3||me===0||me===Je)&&r>oe.scrollHeight+5){const wt=me/Je,ae=(r-Ue)*wt;C.current=ae-me}_e!==void 0&&(window.clearTimeout(A.current),j(!1),A.current=window.setTimeout(()=>j(!0),200)),i({x:Q,y:me+C.current,width:Ae-d,height:Ue-c,paddingRight:_.current?.clientWidth??0})},[c,d,r,i,a,P]);C0(p&&_i.value,L,w);const $=u.useRef(L);$.current=L;const q=u.useRef(),he=u.useRef(!1);u.useLayoutEffect(()=>{he.current?L():he.current=!0},[L,c,d]);const xe=u.useCallback(Q=>{w.current=Q,g!==void 0&&(g.current=Q)},[g]);let ue=0,je=0;for(k.push(u.createElement("div",{key:ue++,style:{width:o,height:0}}));je<r;){const Q=Math.min(5e6,r-je);k.push(u.createElement("div",{key:ue++,style:{width:0,height:Q}})),je+=Q}const{ref:ne,width:G,height:se}=x0(v);return typeof window<"u"&&(q.current?.height!==se||q.current?.width!==G)&&(window.setTimeout(()=>$.current(),0),q.current={width:G,height:se}),(G??0)===0||(se??0)===0?u.createElement("div",{ref:ne}):u.createElement("div",{ref:ne},u.createElement(S0,{isSafari:_i.value},u.createElement("div",{className:"dvn-underlay"},t),u.createElement("div",{ref:xe,style:q.current,draggable:s,onDragStart:Q=>{s||(Q.stopPropagation(),Q.preventDefault())},className:"dvn-scroller "+(l??""),onScroll:()=>L()},u.createElement("div",{className:"dvn-scroll-inner"+(f===void 0?" dvn-hidden":"")},u.createElement("div",{className:"dvn-stack"},k),f!==void 0&&u.createElement(u.Fragment,null,!y&&u.createElement("div",{className:"dvn-spacer"}),u.createElement("div",{ref:_,style:{height:se,maxHeight:n-Math.ceil(T%1),position:"sticky",top:0,paddingLeft:1,marginBottom:-40,marginRight:d,flexGrow:y?1:void 0,right:b?d??0:void 0,pointerEvents:"auto"}},f))))))},E0=e=>{const{columns:t,rows:n,rowHeight:r,headerHeight:o,groupHeaderHeight:i,enableGroups:s,freezeColumns:l,experimental:a,nonGrowWidth:c,clientSize:d,className:f,onVisibleRegionChanged:m,scrollRef:p,preventDiagonalScrolling:g,rightElement:v,rightElementProps:k,overscrollX:b,overscrollY:y,initialSize:C,smoothScrollX:x=!1,smoothScrollY:w=!1,isDraggable:T}=e,{paddingRight:D,paddingBottom:_}=a??{},[P,W]=d,j=u.useRef(),A=u.useRef(),L=u.useRef(),$=u.useRef(),q=c+Math.max(0,b??0);let he=s?o+i:o;if(typeof r=="number")he+=n*r;else for(let ne=0;ne<n;ne++)he+=r(ne);y!==void 0&&(he+=y);const xe=u.useRef(),ue=u.useCallback(()=>{if(xe.current===void 0)return;const ne={...xe.current};let G=0,se=ne.x<0?-ne.x:0,Q=0,Ce=0;ne.x=ne.x<0?0:ne.x;let oe=0;for(let Ae=0;Ae<l;Ae++)oe+=t[Ae].width;for(const Ae of t){const Ue=G-oe;if(ne.x>=Ue+Ae.width)G+=Ae.width,Ce++,Q++;else if(ne.x>Ue)G+=Ae.width,x?se+=Ue-ne.x:Ce++,Q++;else if(ne.x+ne.width>Ue)G+=Ae.width,Q++;else break}let Me=0,le=0,Ve=0;if(typeof r=="number")w?(le=Math.floor(ne.y/r),Me=le*r-ne.y):le=Math.ceil(ne.y/r),Ve=Math.ceil(ne.height/r)+le,Me<0&&Ve++;else{let Ae=0;for(let Ue=0;Ue<n;Ue++){const me=r(Ue),$e=Ae+(w?0:me/2);if(ne.y>=Ae+me)Ae+=me,le++,Ve++;else if(ne.y>$e)Ae+=me,w?Me+=$e-ne.y:le++,Ve++;else if(ne.y+ne.height>me/2+Ae)Ae+=me,Ve++;else break}}const Xe={x:Ce,y:le,width:Q-Ce,height:Ve-le},_e=j.current;(_e===void 0||_e.y!==Xe.y||_e.x!==Xe.x||_e.height!==Xe.height||_e.width!==Xe.width||A.current!==se||L.current!==Me||ne.width!==$.current?.[0]||ne.height!==$.current?.[1])&&(m?.({x:Ce,y:le,width:Q-Ce,height:Ve-le},ne.width,ne.height,ne.paddingRight??0,se,Me),j.current=Xe,A.current=se,L.current=Me,$.current=[ne.width,ne.height])},[t,r,n,m,l,x,w]),je=u.useCallback(ne=>{xe.current=ne,ue()},[ue]);return u.useEffect(()=>{ue()},[ue]),u.createElement(M0,{scrollRef:p,className:f,kineticScrollPerfHack:a?.kineticScrollPerfHack,preventDiagonalScrolling:g,draggable:T===!0||typeof T=="string",scrollWidth:q+(D??0),scrollHeight:he+(_??0),clientHeight:W,rightElement:v,paddingBottom:_,paddingRight:D,rightElementProps:k,update:je,initialSize:C},u.createElement(b0,{eventTargetRef:p,width:P,height:W,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,onColumnProposeMove:e.onColumnProposeMove,verticalBorder:e.verticalBorder,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY}))},T0=Jt("div")({name:"SearchWrapper",class:"gdg-seveqep",propsAsIs:!1}),I0=u.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},u.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 244l144-144 144 144M256 120v292"})),P0=u.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},u.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 268l144 144 144-144M256 392V100"})),D0=u.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},u.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"})),_0=10,A0=e=>{const{canvasRef:t,cellYOffset:n,rows:r,columns:o,searchInputRef:i,searchValue:s,searchResults:l,onSearchValueChange:a,getCellsForSelection:c,onSearchResultsChanged:d,showSearch:f=!1,onSearchClose:m}=e,[p]=u.useState(()=>"search-box-"+Math.round(Math.random()*1e3)),[g,v]=u.useState(""),k=s??g,b=u.useCallback(G=>{v(G),a?.(G)},[a]),[y,C]=u.useState(),x=u.useRef(y);x.current=y,u.useEffect(()=>{l!==void 0&&(l.length>0?C(G=>({rowsSearched:r,results:l.length,selectedIndex:G?.selectedIndex??-1})):C(void 0))},[r,l]);const w=u.useRef(new AbortController),T=u.useRef(),[D,_]=u.useState([]),P=l??D,W=u.useCallback(()=>{T.current!==void 0&&(window.cancelAnimationFrame(T.current),T.current=void 0,w.current.abort())},[]),j=u.useRef(n);j.current=n;const A=u.useCallback(G=>{const se=new RegExp(G.replace(/([$()*+.?[\\\]^{|}-])/g,"\\$1"),"i");let Q=j.current,Ce=Math.min(10,r),oe=0;C(void 0),_([]);const Me=[],le=async()=>{if(c===void 0)return;const Ve=performance.now(),Xe=r-oe;let _e=c({x:0,y:Q,width:o.length,height:Math.min(Ce,Xe,r-Q)},w.current.signal);typeof _e=="function"&&(_e=await _e());let Ae=!1;for(const[ae,ee]of _e.entries())for(const[Ie,ge]of ee.entries()){let we;switch(ge.kind){case J.Text:case J.Number:we=ge.displayData;break;case J.Uri:case J.Markdown:we=ge.data;break;case J.Boolean:we=typeof ge.data=="boolean"?ge.data.toString():void 0;break;case J.Image:case J.Bubble:we=ge.data.join("🐳");break;case J.Custom:we=ge.copyData;break}we!==void 0&&se.test(we)&&(Me.push([Ie,ae+Q]),Ae=!0)}const Ue=performance.now();Ae&&_([...Me]),oe+=_e.length,Gt(oe<=r);const me=x.current?.selectedIndex??-1;C({results:Me.length,rowsSearched:oe,selectedIndex:me}),d?.(Me,me),Q+Ce>=r?Q=0:Q+=Ce;const $e=Ue-Ve,Je=Math.max($e,1),wt=_0/Je;Ce=Math.ceil(Ce*wt),oe<r&&Me.length<1e3&&(T.current=window.requestAnimationFrame(le))};W(),T.current=window.requestAnimationFrame(le)},[W,o.length,c,d,r]),L=u.useCallback(()=>{m?.(),C(void 0),_([]),d?.([],-1),W(),t?.current?.focus()},[W,t,m,d]),$=u.useCallback(G=>{b(G.target.value),l===void 0&&(G.target.value===""?(C(void 0),_([]),W()):A(G.target.value))},[A,W,b,l]);u.useEffect(()=>{f&&i.current!==null&&(b(""),i.current.focus({preventScroll:!0}))},[f,i,b]);const q=u.useCallback(G=>{if(G?.stopPropagation?.(),y===void 0)return;const se=(y.selectedIndex+1)%y.results;C({...y,selectedIndex:se}),d?.(P,se)},[y,d,P]),he=u.useCallback(G=>{if(G?.stopPropagation?.(),y===void 0)return;let se=(y.selectedIndex-1)%y.results;se<0&&(se+=y.results),C({...y,selectedIndex:se}),d?.(P,se)},[d,P,y]),xe=u.useCallback(G=>{(G.ctrlKey||G.metaKey)&&G.nativeEvent.code==="KeyF"||G.key==="Escape"?(L(),G.stopPropagation(),G.preventDefault()):G.key==="Enter"&&(G.shiftKey?he():q())},[L,q,he]);u.useEffect(()=>()=>{W()},[W]);const[ue,je]=u.useState(!1);u.useEffect(()=>{if(f)je(!0);else{const G=setTimeout(()=>je(!1),150);return()=>clearTimeout(G)}},[f]);const ne=u.useMemo(()=>{if(!f&&!ue)return null;let G;y!==void 0&&(G=y.results>=1e3?"over 1000":`${y.results} result${y.results!==1?"s":""}`,y.selectedIndex>=0&&(G=`${y.selectedIndex+1} of ${G}`));const se=oe=>{oe.stopPropagation()},Ce={width:`${Math.floor((y?.rowsSearched??0)/r*100)}%`};return u.createElement(T0,{className:f?"":"out",onMouseDown:se,onMouseMove:se,onMouseUp:se,onClick:se},u.createElement("div",{className:"gdg-search-bar-inner"},u.createElement("input",{id:p,"aria-hidden":!f,"data-testid":"search-input",ref:i,onChange:$,value:k,tabIndex:f?void 0:-1,onKeyDownCapture:xe}),u.createElement("button",{"aria-label":"Previous Result","aria-hidden":!f,tabIndex:f?void 0:-1,onClick:he,disabled:(y?.results??0)===0},I0),u.createElement("button",{"aria-label":"Next Result","aria-hidden":!f,tabIndex:f?void 0:-1,onClick:q,disabled:(y?.results??0)===0},P0),m!==void 0&&u.createElement("button",{"aria-label":"Close Search","aria-hidden":!f,"data-testid":"search-close-button",tabIndex:f?void 0:-1,onClick:L},D0)),y!==void 0?u.createElement(u.Fragment,null,u.createElement("div",{className:"gdg-search-status"},u.createElement("div",{"data-testid":"search-result-area"},G)),u.createElement("div",{className:"gdg-search-progress",style:Ce})):u.createElement("div",{className:"gdg-search-status"},u.createElement("label",{htmlFor:p},"Type to search")))},[f,ue,y,r,p,i,$,k,xe,he,q,m,L]);return u.createElement(u.Fragment,null,u.createElement(E0,{prelightCells:P,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,className:e.className,clientSize:e.clientSize,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,nonGrowWidth:e.nonGrowWidth,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,initialSize:e.initialSize,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onMouseMove:e.onMouseMove,onVisibleRegionChanged:e.onVisibleRegionChanged,overscrollX:e.overscrollX,overscrollY:e.overscrollY,preventDiagonalScrolling:e.preventDiagonalScrolling,rightElement:e.rightElement,rightElementProps:e.rightElementProps,rowHeight:e.rowHeight,rows:e.rows,scrollRef:e.scrollRef,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,verticalBorder:e.verticalBorder,onColumnProposeMove:e.onColumnProposeMove,drawFocusRing:e.drawFocusRing,drawCell:e.drawCell,drawHeader:e.drawHeader,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY}),ne)};class L0 extends u.PureComponent{wrapperRef=u.createRef();componentDidMount(){document.addEventListener("touchend",this.clickOutside,!0),document.addEventListener("mousedown",this.clickOutside,!0),document.addEventListener("contextmenu",this.clickOutside,!0)}componentWillUnmount(){document.removeEventListener("touchend",this.clickOutside,!0),document.removeEventListener("mousedown",this.clickOutside,!0),document.removeEventListener("contextmenu",this.clickOutside,!0)}clickOutside=t=>{if(!(this.props.isOutsideClick&&!this.props.isOutsideClick(t))&&this.wrapperRef.current!==null&&!this.wrapperRef.current.contains(t.target)){let n=t.target;for(;n!==null;){if(n.classList.contains("click-outside-ignore"))return;n=n.parentElement}this.props.onClickOutside()}};render(){const{onClickOutside:t,isOutsideClick:n,...r}=this.props;return u.createElement("div",{...r,ref:this.wrapperRef},this.props.children)}}const H0=()=>e=>Math.max(16,e.targetHeight-10),z0=Jt("input")({name:"RenameInput",class:"gdg-r17m35ur",propsAsIs:!1,vars:{"r17m35ur-0":[H0(),"px"]}}),F0=e=>{const{bounds:t,group:n,onClose:r,canvasBounds:o,onFinish:i}=e,[s,l]=xt.useState(n);return xt.createElement(L0,{style:{position:"absolute",left:t.x-o.left+1,top:t.y-o.top,width:t.width-2,height:t.height},className:"gdg-c1tqibwd",onClickOutside:r},xt.createElement(z0,{targetHeight:t.height,"data-testid":"group-rename-input",value:s,onBlur:r,onFocus:a=>a.target.setSelectionRange(0,s.length),onChange:a=>l(a.target.value),onKeyDown:a=>{a.key==="Enter"?i(s):a.key==="Escape"&&r()},autoFocus:!0}))};function O0(e,t){return e===void 0?!1:e.length>1&&e.startsWith("_")?Number.parseInt(e.slice(1))===t.keyCode:e.length===1&&e>="a"&&e<="z"?e.toUpperCase().codePointAt(0)===t.keyCode:e===t.key}function Ee(e,t,n){const r=Pc(e,t);return r&&(n.didMatch=!0),r}function Pc(e,t){if(e.length===0)return!1;if(e.includes("|")){const a=e.split("|");for(const c of a)if(Pc(c,t))return!0;return!1}let n=!1,r=!1,o=!1,i=!1;const s=e.split("+"),l=s.pop();if(!O0(l,t))return!1;if(s[0]==="any")return!0;for(const a of s)switch(a){case"ctrl":n=!0;break;case"shift":r=!0;break;case"alt":o=!0;break;case"meta":i=!0;break;case"primary":Ai.value?i=!0:n=!0;break}return t.altKey===o&&t.ctrlKey===n&&t.shiftKey===r&&t.metaKey===i}function $0(e,t,n,r,o,i){const s=xt.useCallback((c,d,f,m)=>{(i==="cell"||i==="multi-cell")&&c!==void 0&&(c={...c,range:{x:c.cell[0],y:c.cell[1],width:1,height:1}});const p=n==="mixed"&&(f||m==="drag"),g=r==="mixed"&&p,v=o==="mixed"&&p;let k={current:c===void 0?void 0:{...c,rangeStack:m==="drag"?e.current?.rangeStack??[]:[]},columns:g?e.columns:ze.empty(),rows:v?e.rows:ze.empty()};f&&(i==="multi-rect"||i==="multi-cell")&&k.current!==void 0&&e.current!==void 0&&(k={...k,current:{...k.current,rangeStack:[...e.current.rangeStack,e.current.range]}}),t(k,d)},[r,e,n,i,o,t]),l=xt.useCallback((c,d,f)=>{c=c??e.rows,d!==void 0&&(c=c.add(d));let m;if(o==="exclusive"&&c.length>0)m={current:void 0,columns:ze.empty(),rows:c};else{const p=f&&n==="mixed",g=f&&r==="mixed";m={current:p?e.current:void 0,columns:g?e.columns:ze.empty(),rows:c}}t(m,!1)},[r,e,n,o,t]),a=xt.useCallback((c,d,f)=>{c=c??e.columns,d!==void 0&&(c=c.add(d));let m;if(r==="exclusive"&&c.length>0)m={current:void 0,rows:ze.empty(),columns:c};else{const p=f&&n==="mixed",g=f&&o==="mixed";m={current:p?e.current:void 0,rows:g?e.rows:ze.empty(),columns:c}}t(m,!1)},[r,e,n,o,t]);return[s,l,a]}function N0(e,t,n,r,o){const i=u.useCallback(c=>{if(e===!0){const d=[];for(let f=c.y;f<c.y+c.height;f++){const m=[];for(let p=c.x;p<c.x+c.width;p++)p<0||f>=o?m.push({kind:J.Loading,allowOverlay:!1}):m.push(t([p,f]));d.push(m)}return d}return e?.(c,r.signal)??[]},[r.signal,t,e,o]),s=e!==void 0?i:void 0,l=u.useCallback(c=>{if(s===void 0)return[];const d={...c,x:c.x-n};if(d.x<0){d.x=0,d.width--;const f=s(d,r.signal);return typeof f=="function"?async()=>(await f()).map(m=>[{kind:J.Loading,allowOverlay:!1},...m]):f.map(m=>[{kind:J.Loading,allowOverlay:!1},...m])}return s(d,r.signal)},[r.signal,s,n]);return[e!==void 0?l:void 0,s]}function W0(e){if(e.copyData!==void 0)return{formatted:e.copyData,rawValue:e.copyData,format:"string"};switch(e.kind){case J.Boolean:return{formatted:e.data===!0?"TRUE":e.data===!1?"FALSE":e.data===Ws?"INDETERMINATE":"",rawValue:e.data,format:"boolean"};case J.Custom:return{formatted:e.copyData,rawValue:e.copyData,format:"string"};case J.Image:case J.Bubble:return{formatted:e.data,rawValue:e.data,format:"string-array"};case J.Drilldown:return{formatted:e.data.map(t=>t.text),rawValue:e.data.map(t=>t.text),format:"string-array"};case J.Text:return{formatted:e.displayData??e.data,rawValue:e.data,format:"string"};case J.Uri:return{formatted:e.displayData??e.data,rawValue:e.data,format:"url"};case J.Markdown:case J.RowID:return{formatted:e.data,rawValue:e.data,format:"string"};case J.Number:return{formatted:e.displayData,rawValue:e.data,format:"number"};case J.Loading:return{formatted:"#LOADING",rawValue:"",format:"string"};case J.Protected:return{formatted:"************",rawValue:"",format:"string"};default:Ao()}}function B0(e,t){return e.map((r,o)=>{const i=t[o];return r.map(s=>s.span!==void 0&&s.span[0]!==i?{formatted:"",rawValue:"",format:"string"}:W0(s))})}function Jl(e,t){return(t?/[\t\n",]/:/[\t\n"]/).test(e)&&(e=`"${e.replace(/"/g,'""')}"`),e}function j0(e){const t=[];for(const n of e){const r=[];for(const o of n)o.format==="url"?r.push(o.rawValue?.toString()??""):o.format==="string-array"?r.push(o.formatted.map(i=>Jl(i,!0)).join(",")):r.push(Jl(o.formatted,!1));t.push(r.join("	"))}return t.join(`
`)}function ys(e){return e.replace(/\t/g,"    ").replace(/ {2,}/g,t=>"<span> </span>".repeat(t.length))}function ea(e){return'"'+e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'"'}function V0(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function X0(e){const t=[];t.push('<style type="text/css"><!--br {mso-data-placement:same-cell;}--></style>',"<table><tbody>");for(const n of e){t.push("<tr>");for(const r of n){const o=`gdg-format="${r.format}"`;r.format==="url"?t.push(`<td ${o}><a href="${r.rawValue}">${ys(r.formatted)}</a></td>`):r.format==="string-array"?t.push(`<td ${o}><ol>${r.formatted.map((i,s)=>`<li gdg-raw-value=${ea(r.rawValue[s])}>`+ys(i)+"</li>").join("")}</ol></td>`):t.push(`<td gdg-raw-value=${ea(r.rawValue?.toString()??"")} ${o}>${ys(r.formatted)}</td>`)}t.push("</tr>")}return t.push("</tbody></table>"),t.join("")}function U0(e,t){const n=B0(e,t),r=j0(n),o=X0(n);return{textPlain:r,textHtml:o}}function ta(e){const t=document.createElement("html");t.innerHTML=e.replace(/&nbsp;/g," ");const n=t.querySelector("table");if(n===null)return;const r=[n],o=[];let i;for(;r.length>0;){const s=r.pop();if(s===void 0)break;if(s instanceof HTMLTableElement||s.nodeName==="TBODY")r.push(...[...s.children].reverse());else if(s instanceof HTMLTableRowElement)i!==void 0&&o.push(i),i=[],r.push(...[...s.children].reverse());else if(s instanceof HTMLTableCellElement){const l=s.cloneNode(!0),c=l.children.length===1&&l.children[0].nodeName==="P"?l.children[0]:null,d=c?.children.length===1&&c.children[0].nodeName==="FONT",f=l.querySelectorAll("br");for(const g of f)g.replaceWith(`
`);const m=l.getAttribute("gdg-raw-value"),p=l.getAttribute("gdg-format")??"string";if(l.querySelector("a")!==null)i?.push({rawValue:l.querySelector("a")?.getAttribute("href")??"",formatted:l.textContent??"",format:p});else if(l.querySelector("ol")!==null){const g=l.querySelectorAll("li");i?.push({rawValue:[...g].map(v=>v.getAttribute("gdg-raw-value")??""),formatted:[...g].map(v=>v.textContent??""),format:"string-array"})}else if(m!==null)i?.push({rawValue:V0(m),formatted:l.textContent??"",format:p});else{let g=l.textContent??"";d&&(g=g.replace(/\n(?!\n)/g,"")),i?.push({rawValue:g??"",formatted:g??"",format:p})}}}return i!==void 0&&o.push(i),o}function Y0(e,t,n,r,o){const i=e;if(r==="allowPartial"||e.current===void 0||t===void 0)return e;let s=!1;do{if(e?.current===void 0)break;const l=e.current?.range,a=[];if(l.width>2){const f=t({x:l.x,y:l.y,width:1,height:l.height},o.signal);if(typeof f=="function")return i;a.push(...f);const m=t({x:l.x+l.width-1,y:l.y,width:1,height:l.height},o.signal);if(typeof m=="function")return i;a.push(...m)}else{const f=t({x:l.x,y:l.y,width:l.width,height:l.height},o.signal);if(typeof f=="function")return i;a.push(...f)}let c=l.x-n,d=l.x+l.width-1-n;for(const f of a)for(const m of f)m.span!==void 0&&(c=Math.min(m.span[0],c),d=Math.max(m.span[1],d));c===l.x-n&&d===l.x+l.width-1-n?s=!0:e={current:{cell:e.current.cell??[0,0],range:{x:c+n,y:l.y,width:d-c+1,height:l.height},rangeStack:e.current.rangeStack},columns:e.columns,rows:e.rows}}while(!s);return e}function na(e){return e.startsWith('"')&&e.endsWith('"')&&(e=e.slice(1,-1).replace(/""/g,'"')),e}function K0(e){let t;(function(l){l[l.None=0]="None",l[l.inString=1]="inString",l[l.inStringPostQuote=2]="inStringPostQuote"})(t||(t={}));const n=[];let r=[],o=0,i=t.None;e=e.replace(/\r\n/g,`
`);let s=0;for(const l of e){switch(i){case t.None:l==="	"||l===`
`?(r.push(e.slice(o,s)),o=s+1,l===`
`&&(n.push(r),r=[])):l==='"'&&(i=t.inString);break;case t.inString:l==='"'&&(i=t.inStringPostQuote);break;case t.inStringPostQuote:l==='"'?i=t.inString:((l==="	"||l===`
`)&&(r.push(na(e.slice(o,s))),o=s+1,l===`
`&&(n.push(r),r=[])),i=t.None);break}s++}return o<e.length&&r.push(na(e.slice(o,e.length))),n.push(r),n.map(l=>l.map(a=>({rawValue:a,formatted:a,format:"string"})))}function ra(e,t,n){const r=U0(e,t),o=l=>{window.navigator.clipboard?.writeText(l)},i=(l,a)=>window.navigator.clipboard?.write===void 0?!1:(window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([l],{type:"text/plain"}),"text/html":new Blob([a],{type:"text/html"})})]),!0),s=(l,a)=>{try{if(n===void 0||n.clipboardData===null)throw new Error("No clipboard data");n?.clipboardData?.setData("text/plain",l),n?.clipboardData?.setData("text/html",a)}catch{i(l,a)||o(l)}};window.navigator.clipboard?.write!==void 0||n?.clipboardData!==void 0?s(r.textPlain,r.textHtml):o(r.textPlain),n?.preventDefault()}function Dc(e){return e!==!0}function oa(e){return typeof e=="string"?e:`${e}px`}const q0=()=>e=>e.innerWidth,G0=()=>e=>e.innerHeight,Z0=Jt("div")({name:"Wrapper",class:"gdg-wmyidgi",propsAsIs:!1,vars:{"wmyidgi-0":[q0()],"wmyidgi-1":[G0()]}}),Q0=e=>{const{inWidth:t,inHeight:n,children:r,...o}=e;return u.createElement(Z0,{innerHeight:oa(n),innerWidth:oa(t),...o},r)},J0=2,em=1300;function tm(e,t,n){const r=xt.useRef(0),[o,i]=e??[0,0];xt.useEffect(()=>{if(o===0&&i===0){r.current=0;return}let s=!1,l=0;const a=c=>{if(!s){if(l===0)l=c;else{const d=c-l;r.current=Math.min(1,r.current+d/em);const f=r.current**1.618*d*J0;t.current?.scrollBy(o*f,i*f),l=c,n?.()}window.requestAnimationFrame(a)}};return window.requestAnimationFrame(a),()=>{s=!0}},[t,o,i,n])}function nm({rowHeight:e,headerHeight:t,groupHeaderHeight:n,theme:r,overscrollX:o,overscrollY:i,scaleToRem:s,remSize:l}){const[a,c,d,f,m,p]=xt.useMemo(()=>{if(!s||l===16)return[e,t,n,r,o,i];const g=l/16,v=e,k=yc();return[typeof v=="number"?v*g:b=>Math.ceil(v(b)*g),Math.ceil(t*g),Math.ceil(n*g),{...r,headerIconSize:(r?.headerIconSize??k.headerIconSize)*g,cellHorizontalPadding:(r?.cellHorizontalPadding??k.cellHorizontalPadding)*g,cellVerticalPadding:(r?.cellVerticalPadding??k.cellVerticalPadding)*g},Math.ceil((o??0)*g),Math.ceil((i??0)*g)]},[n,t,o,i,l,e,s,r]);return{rowHeight:a,headerHeight:c,groupHeaderHeight:d,theme:f,overscrollX:m,overscrollY:p}}const Un={downFill:!1,rightFill:!1,clear:!0,closeOverlay:!0,acceptOverlayDown:!0,acceptOverlayUp:!0,acceptOverlayLeft:!0,acceptOverlayRight:!0,copy:!0,paste:!0,cut:!0,search:!1,delete:!0,activateCell:!0,scrollToSelectedCell:!0,goToFirstCell:!0,goToFirstColumn:!0,goToFirstRow:!0,goToLastCell:!0,goToLastColumn:!0,goToLastRow:!0,goToNextPage:!0,goToPreviousPage:!0,selectToFirstCell:!0,selectToFirstColumn:!0,selectToFirstRow:!0,selectToLastCell:!0,selectToLastColumn:!0,selectToLastRow:!0,selectAll:!0,selectRow:!0,selectColumn:!0,goUpCell:!0,goRightCell:!0,goDownCell:!0,goLeftCell:!0,goUpCellRetainSelection:!0,goRightCellRetainSelection:!0,goDownCellRetainSelection:!0,goLeftCellRetainSelection:!0,selectGrowUp:!0,selectGrowRight:!0,selectGrowDown:!0,selectGrowLeft:!0};function Te(e,t){return e===!0?t:e===!1?"":e}function ia(e){const t=Ai.value;return{activateCell:Te(e.activateCell," |Enter|shift+Enter"),clear:Te(e.clear,"any+Escape"),closeOverlay:Te(e.closeOverlay,"any+Escape"),acceptOverlayDown:Te(e.acceptOverlayDown,"Enter"),acceptOverlayUp:Te(e.acceptOverlayUp,"shift+Enter"),acceptOverlayLeft:Te(e.acceptOverlayLeft,"shift+Tab"),acceptOverlayRight:Te(e.acceptOverlayRight,"Tab"),copy:e.copy,cut:e.cut,delete:Te(e.delete,t?"Backspace|Delete":"Delete"),downFill:Te(e.downFill,"primary+_68"),scrollToSelectedCell:Te(e.scrollToSelectedCell,"primary+Enter"),goDownCell:Te(e.goDownCell,"ArrowDown"),goDownCellRetainSelection:Te(e.goDownCellRetainSelection,"alt+ArrowDown"),goLeftCell:Te(e.goLeftCell,"ArrowLeft|shift+Tab"),goLeftCellRetainSelection:Te(e.goLeftCellRetainSelection,"alt+ArrowLeft"),goRightCell:Te(e.goRightCell,"ArrowRight|Tab"),goRightCellRetainSelection:Te(e.goRightCellRetainSelection,"alt+ArrowRight"),goUpCell:Te(e.goUpCell,"ArrowUp"),goUpCellRetainSelection:Te(e.goUpCellRetainSelection,"alt+ArrowUp"),goToFirstCell:Te(e.goToFirstCell,"primary+Home"),goToFirstColumn:Te(e.goToFirstColumn,"Home|primary+ArrowLeft"),goToFirstRow:Te(e.goToFirstRow,"primary+ArrowUp"),goToLastCell:Te(e.goToLastCell,"primary+End"),goToLastColumn:Te(e.goToLastColumn,"End|primary+ArrowRight"),goToLastRow:Te(e.goToLastRow,"primary+ArrowDown"),goToNextPage:Te(e.goToNextPage,"PageDown"),goToPreviousPage:Te(e.goToPreviousPage,"PageUp"),paste:e.paste,rightFill:Te(e.rightFill,"primary+_82"),search:Te(e.search,"primary+f"),selectAll:Te(e.selectAll,"primary+a"),selectColumn:Te(e.selectColumn,"ctrl+ "),selectGrowDown:Te(e.selectGrowDown,"shift+ArrowDown"),selectGrowLeft:Te(e.selectGrowLeft,"shift+ArrowLeft"),selectGrowRight:Te(e.selectGrowRight,"shift+ArrowRight"),selectGrowUp:Te(e.selectGrowUp,"shift+ArrowUp"),selectRow:Te(e.selectRow,"shift+ "),selectToFirstCell:Te(e.selectToFirstCell,"primary+shift+Home"),selectToFirstColumn:Te(e.selectToFirstColumn,"primary+shift+ArrowLeft"),selectToFirstRow:Te(e.selectToFirstRow,"primary+shift+ArrowUp"),selectToLastCell:Te(e.selectToLastCell,"primary+shift+End"),selectToLastColumn:Te(e.selectToLastColumn,"primary+shift+ArrowRight"),selectToLastRow:Te(e.selectToLastRow,"primary+shift+ArrowDown")}}function rm(e){const t=th(e);return xt.useMemo(()=>{if(t===void 0)return ia(Un);const n={...t,goToNextPage:t?.goToNextPage??t?.pageDown??Un.goToNextPage,goToPreviousPage:t?.goToPreviousPage??t?.pageUp??Un.goToPreviousPage,goToFirstCell:t?.goToFirstCell??t?.first??Un.goToFirstCell,goToLastCell:t?.goToLastCell??t?.last??Un.goToLastCell,selectToFirstCell:t?.selectToFirstCell??t?.first??Un.selectToFirstCell,selectToLastCell:t?.selectToLastCell??t?.last??Un.selectToLastCell};return ia({...Un,...n})},[t])}const om=u.lazy(async()=>await va(()=>import("./i0irgsjpymqey7ed.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])));let im=0;function sm(e){return vg(xl(xl(e).filter(t=>t.span!==void 0).map(t=>hr((t.span?.[0]??0)+1,(t.span?.[1]??0)+1))))}function vi(e,t){return e===void 0||t===0||e.columns.length===0&&e.current===void 0?e:{current:e.current===void 0?void 0:{cell:[e.current.cell[0]+t,e.current.cell[1]],range:{...e.current.range,x:e.current.range.x+t},rangeStack:e.current.rangeStack.map(n=>({...n,x:n.x+t}))},rows:e.rows,columns:e.columns.offset(t)}}const bs={kind:J.Loading,allowOverlay:!1},yi={columns:ze.empty(),rows:ze.empty(),current:void 0},lm=(e,t)=>{const[n,r]=u.useState(yi),[o,i]=u.useState(),s=u.useRef(null),l=u.useRef(null),[a,c]=u.useState(),d=u.useRef(null),f=u.useRef(),m=typeof window>"u"?null:window,{rowMarkers:p="none",rowMarkerWidth:g,imageEditorOverride:v,getRowThemeOverride:k,markdownDivCreateNode:b,width:y,height:C,columns:x,rows:w,getCellContent:T,onCellClicked:D,onCellActivated:_,onFillPattern:P,onFinishedEditing:W,coercePasteValue:j,drawHeader:A,drawCell:L,onHeaderClicked:$,onColumnProposeMove:q,spanRangeBehavior:he="default",onGroupHeaderClicked:xe,onCellContextMenu:ue,className:je,onHeaderContextMenu:ne,getCellsForSelection:G,onGroupHeaderContextMenu:se,onGroupHeaderRenamed:Q,onCellEdited:Ce,onCellsEdited:oe,onSearchResultsChanged:Me,searchResults:le,onSearchValueChange:Ve,searchValue:Xe,onKeyDown:_e,onKeyUp:Ae,keybindings:Ue,onRowAppended:me,onColumnMoved:$e,validateCell:Je,highlightRegions:wt,rangeSelect:ae="rect",columnSelect:ee="multi",rowSelect:Ie="multi",rangeSelectionBlending:ge="exclusive",columnSelectionBlending:we="exclusive",rowSelectionBlending:We="exclusive",onDelete:de,onDragStart:Le,onMouseMove:ke,onPaste:ut,copyHeaders:Pe=!1,freezeColumns:ot=0,cellActivationBehavior:Ke="second-click",rowSelectionMode:ye="auto",rowMarkerStartIndex:qe=1,rowMarkerTheme:et,onHeaderMenuClick:Dt,getGroupDetails:Wt,onSearchClose:Vt,onItemHovered:pn,onSelectionCleared:vt,showSearch:Tn,onVisibleRegionChanged:Ct,gridSelection:en,onGridSelectionChange:Ye,minColumnWidth:tt=50,maxColumnWidth:wn=500,maxColumnAutoWidth:vn,provideEditor:yn,trailingRowOptions:Mt,freezeTrailingRows:Se=0,allowedFillDirections:ft="orthogonal",scrollOffsetX:Ge,scrollOffsetY:gt,verticalBorder:Et,onDragOverCell:bn,onDrop:Qr,onColumnResize:mt,onColumnResizeEnd:er,onColumnResizeStart:ht,customRenderers:kt,fillHandle:In,drawFocusRing:Vo,experimental:on,fixedShadowX:tr,fixedShadowY:nr,headerIcons:vr,imageWindowLoader:Xo,initialSize:Uo,isDraggable:yr,onDragLeave:br,onRowMoved:sn,overscrollX:zn,overscrollY:Xi,preventDiagonalScrolling:Yo,rightElement:Ui,rightElementProps:Yi,trapFocus:rr=!1,smoothScrollX:Fn,smoothScrollY:Ki,scaleToRem:qi=!1,rowHeight:Ko=34,headerHeight:Jr=36,groupHeaderHeight:xr=Jr,theme:sl,isOutsideClick:qo,renderers:or}=e,Pn=Math.max(tt,20),On=Math.max(wn,Pn),$n=Math.max(vn??On,Pn),Cr=u.useMemo(()=>typeof window>"u"?{fontSize:"16px"}:window.getComputedStyle(document.documentElement),[]).fontSize,sr=u.useMemo(()=>Number.parseFloat(Cr),[Cr]),{rowHeight:_t,headerHeight:kr,groupHeaderHeight:eo,theme:to,overscrollX:Gi,overscrollY:Zi}=nm({groupHeaderHeight:xr,headerHeight:Jr,overscrollX:zn,overscrollY:Xi,remSize:sr,rowHeight:Ko,scaleToRem:qi,theme:sl}),ln=rm(Ue),Dn=g??(w>1e4?48:w>1e3?44:w>100?36:32),Xt=p!=="none",z=Xt?1:0,Tt=me!==void 0,Ut=Mt?.sticky===!0,[Qi,Go]=u.useState(!1),Ji=Tn??Qi,no=u.useCallback(()=>{Vt!==void 0?Vt():Go(!1)},[Vt]),N=u.useMemo(()=>en===void 0?void 0:vi(en,z),[en,z])??n,tn=u.useRef(new AbortController);u.useEffect(()=>()=>{tn?.current.abort()},[]);const[St,Zo]=N0(G,T,z,tn.current,w),Sr=u.useCallback((h,R,S)=>{if(Je===void 0)return!0;const F=[h[0]-z,h[1]];return Je?.(F,R,S)},[z,Je]),Nn=u.useRef(en),At=u.useCallback((h,R)=>{R&&(h=Y0(h,St,z,he,tn.current)),Ye!==void 0?(Nn.current=vi(h,-z),Ye(Nn.current)):r(h)},[Ye,St,z,he]),Rr=Nr(mt,u.useCallback((h,R,S,F)=>{mt?.(x[S-z],R,S-z,F)},[mt,z,x])),Mr=Nr(er,u.useCallback((h,R,S,F)=>{er?.(x[S-z],R,S-z,F)},[er,z,x])),es=Nr(ht,u.useCallback((h,R,S,F)=>{ht?.(x[S-z],R,S-z,F)},[ht,z,x])),Er=Nr(A,u.useCallback((h,R)=>A?.({...h,columnIndex:h.columnIndex-z},R)??!1,[A,z])),ts=Nr(L,u.useCallback((h,R)=>L?.({...h,col:h.col-z},R)??!1,[L,z])),Tr=u.useCallback(h=>{if(de!==void 0){const R=de(vi(h,-z));return typeof R=="boolean"?R:vi(R,z)}return!0},[de,z]),[M,X,Z]=$0(N,At,ge,we,We,ae),re=u.useMemo(()=>Zn(yc(),to),[to]),[Y,te]=u.useState([0,0,0]),pe=u.useMemo(()=>{if(or===void 0)return{};const h={};for(const R of or)h[R.kind]=R;return h},[or]),U=u.useCallback(h=>h.kind!==J.Custom?pe[h.kind]:kt?.find(R=>R.isMatch(h)),[kt,pe]);let{sizedColumns:ce,nonGrowWidth:Be}=gg(x,w,Zo,Y[0]-(z===0?0:Dn)-Y[2],Pn,$n,re,U,tn.current);p!=="none"&&(Be+=Dn);const dt=u.useMemo(()=>ce.some(h=>h.group!==void 0),[ce]),lt=dt?kr+eo:kr,it=N.rows.length,Fe=p==="none"?"":it===0?ja:it===w?Ba:Xd,fe=u.useMemo(()=>p==="none"?ce:[{title:Fe,width:Dn,icon:void 0,hasMenu:!1,style:"normal",themeOverride:et},...ce],[ce,Dn,p,Fe,et]),[Lt,at]=u.useMemo(()=>[gt!==void 0&&typeof _t=="number"?Math.floor(gt/_t):0,gt!==void 0&&typeof _t=="number"?-(gt%_t):0],[gt,_t]),yt=u.useRef({height:1,width:1,x:0,y:0}),Ir=u.useMemo(()=>({x:yt.current.x,y:Lt,width:yt.current.width??1,height:yt.current.height??1,ty:at}),[at,Lt]),an=u.useRef(!1),[Ne,cn,Ft]=eh(Ir);yt.current=Ne;const Wn=(Ne.height??1)>1;u.useLayoutEffect(()=>{if(gt!==void 0&&d.current!==null&&Wn){if(d.current.scrollTop===gt)return;d.current.scrollTop=gt,d.current.scrollTop!==gt&&Ft(),an.current=!0}},[gt,Wn,Ft]);const un=(Ne.width??1)>1;u.useLayoutEffect(()=>{if(Ge!==void 0&&d.current!==null&&un){if(d.current.scrollLeft===Ge)return;d.current.scrollLeft=Ge,d.current.scrollLeft!==Ge&&Ft(),an.current=!0}},[Ge,un,Ft]);const ro=Ne.x+z,xn=Ne.y,Bt=u.useRef(null),Ot=u.useCallback(h=>{h===!0?Bt.current?.focus():window.requestAnimationFrame(()=>{Bt.current?.focus()})},[]),Ht=Tt?w+1:w,nn=u.useCallback(h=>{const R=z===0?h:h.map(F=>({...F,location:[F.location[0]-z,F.location[1]]})),S=oe?.(R);if(S!==!0)for(const F of R)Ce?.(F.location,F.value);return S},[Ce,oe,z]),[lr,ns]=u.useState(),Qo=N.current!==void 0&&N.current.range.width*N.current.range.height>1?N.current.range:void 0,Fc=u.useMemo(()=>{if((wt===void 0||wt.length===0)&&Qo===void 0&&lr===void 0)return;const h=[];if(wt!==void 0)for(const R of wt){const S=fe.length-R.range.x-z;S>0&&h.push({color:R.color,range:{...R.range,x:R.range.x+z,width:Math.min(S,R.range.width)},style:R.style})}return lr!==void 0&&h.push({color:Kr(re.accentColor,0),range:lr,style:"dashed"}),Qo!==void 0&&h.push({color:Kr(re.accentColor,.5),range:Qo,style:"solid-outline"}),h.length>0?h:void 0},[lr,Qo,wt,fe.length,re.accentColor,z]),al=u.useRef(fe);al.current=fe;const Yt=u.useCallback(([h,R],S=!1)=>{const F=Tt&&R===Ht-1;if(h===0&&Xt)return F?bs:{kind:rn.Marker,allowOverlay:!1,checked:N?.rows.hasIndex(R)===!0,markerKind:p==="clickable-number"?"number":p,row:qe+R,drawHandle:sn!==void 0,cursor:p==="clickable-number"?"pointer":void 0};if(F){const E=h===z?Mt?.hint??"":"",H=al.current[h];if(H?.trailingRowOptions?.disabled===!0)return bs;{const V=H?.trailingRowOptions?.hint??E,K=H?.trailingRowOptions?.addIcon??Mt?.addIcon;return{kind:rn.NewRow,hint:V,allowOverlay:!1,icon:K}}}else{const B=h-z;if(S||on?.strict===!0){const H=yt.current,V=H.x>B||B>H.x+H.width||H.y>R||R>H.y+H.height||R>=os.current,K=B===H.extras?.selected?.[0]&&R===H.extras?.selected[1];let ie=!1;if(H.extras?.freezeRegions!==void 0){for(const Re of H.extras.freezeRegions)if(ji(Re,B,R)){ie=!0;break}}if(V&&!K&&!ie)return bs}let E=T([B,R]);return z!==0&&E.span!==void 0&&(E={...E,span:[E.span[0]+z,E.span[1]+z]}),E}},[Tt,Ht,Xt,N?.rows,sn,p,z,Mt?.hint,Mt?.addIcon,on?.strict,T,qe]),rs=u.useCallback(h=>{let R=Wt?.(h)??{name:h};return Q!==void 0&&h!==""&&(R={icon:R.icon,name:R.name,overrideTheme:R.overrideTheme,actions:[...R.actions??[],{title:"Rename",icon:"renameIcon",onClick:S=>ss({group:R.name,bounds:S.bounds})}]}),R},[Wt,Q]),Jo=u.useCallback(h=>{const[R,S]=h.cell,F=fe[R],O=F?.group!==void 0?rs(F.group)?.overrideTheme:void 0,B=F?.themeOverride,E=k?.(S);i({...h,theme:Zn(re,O,B,E,h.content.themeOverride)})},[k,fe,rs,re]),Pr=u.useCallback((h,R,S)=>{if(N.current===void 0)return;const[F,O]=N.current.cell,B=Yt([F,O]);if(B.kind!==J.Boolean&&B.allowOverlay){let E=B;if(S!==void 0)switch(E.kind){case J.Number:{const H=Hd(()=>S==="-"?-0:Number.parseFloat(S),0);E={...E,data:Number.isNaN(H)?0:H};break}case J.Text:case J.Markdown:case J.Uri:E={...E,data:S};break}Jo({target:h,content:E,initialValue:S,cell:[F,O],highlight:S===void 0,forceEditMode:S!==void 0})}else B.kind===J.Boolean&&R&&B.readonly!==!0&&(nn([{location:N.current.cell,value:{...B,data:Dc(B.data)}}]),Bt.current?.damage([{cell:N.current.cell}]))},[Yt,N,nn,Jo]),cl=u.useCallback((h,R)=>{const S=Bt.current?.getBounds(h,R);if(S===void 0||d.current===null)return;const F=Yt([h,R]);F.allowOverlay&&Jo({target:S,content:F,initialValue:void 0,highlight:!0,cell:[h,R],forceEditMode:!0})},[Yt,Jo]),pt=u.useCallback((h,R,S="both",F=0,O=0,B=void 0)=>{if(d.current!==null){const E=Bt.current,H=l.current,V=typeof h!="number"?h.unit==="cell"?h.amount:void 0:h,K=typeof R!="number"?R.unit==="cell"?R.amount:void 0:R,ie=typeof h!="number"&&h.unit==="px"?h.amount:void 0,Re=typeof R!="number"&&R.unit==="px"?R.amount:void 0;if(E!==null&&H!==null){let be={x:0,y:0,width:0,height:0},ve=0,Oe=0;if((V!==void 0||K!==void 0)&&(be=E.getBounds((V??0)+z,K??0)??be,be.width===0||be.height===0))return;const nt=H.getBoundingClientRect(),Rt=nt.width/H.offsetWidth;if(ie!==void 0&&(be={...be,x:ie-nt.left-d.current.scrollLeft,width:1}),Re!==void 0&&(be={...be,y:Re+nt.top-d.current.scrollTop,height:1}),be!==void 0){const ct={x:be.x-F,y:be.y-O,width:be.width+2*F,height:be.height+2*O};let zr=0;for(let fs=0;fs<ot;fs++)zr+=ce[fs].width;let uo=0;const fo=Se+(Ut?1:0);fo>0&&(uo=Zr(Ht,fo,_t));let kn=zr*Rt+nt.left+z*Dn*Rt,Fr=nt.right,ur=nt.top+lt*Rt,Or=nt.bottom-uo*Rt;const ii=be.width+F*2;switch(B?.hAlign){case"start":Fr=kn+ii;break;case"end":kn=Fr-ii;break;case"center":kn=Math.floor((kn+Fr)/2)-ii/2,Fr=kn+ii;break}const si=be.height+O*2;switch(B?.vAlign){case"start":Or=ur+si;break;case"end":ur=Or-si;break;case"center":ur=Math.floor((ur+Or)/2)-si/2,Or=ur+si;break}kn>ct.x?ve=ct.x-kn:Fr<ct.x+ct.width&&(ve=ct.x+ct.width-Fr),ur>ct.y?Oe=ct.y-ur:Or<ct.y+ct.height&&(Oe=ct.y+ct.height-Or),S==="vertical"||typeof h=="number"&&h<ot?ve=0:(S==="horizontal"||typeof R=="number"&&R>=Ht-fo)&&(Oe=0),(ve!==0||Oe!==0)&&(Rt!==1&&(ve/=Rt,Oe/=Rt),d.current.scrollTo(ve+d.current.scrollLeft,Oe+d.current.scrollTop))}}}},[z,Se,Dn,lt,ot,ce,Ht,Ut,_t]),ul=u.useRef(cl),dl=u.useRef(T),os=u.useRef(w);ul.current=cl,dl.current=T,os.current=w;const Dr=u.useCallback(async(h,R=!0)=>{if(fe[h]?.trailingRowOptions?.disabled===!0)return;const F=me?.();let O,B=!0;F!==void 0&&(O=await F,O==="top"&&(B=!1),typeof O=="number"&&(B=!1));let E=0;const H=()=>{if(os.current<=w){E<500&&window.setTimeout(H,E),E=50+E*2;return}const V=typeof O=="number"?O:B?w:0;oi.current(h-z,V),M({cell:[h,V],range:{x:h,y:V,width:1,height:1}},!1,!1,"edit");const K=dl.current([h-z,V]);K.allowOverlay&&vo(K)&&K.readonly!==!0&&R&&window.setTimeout(()=>{ul.current(h,V)},0)};H()},[fe,me,z,w,M]),ei=u.useCallback(h=>{const R=ce[h]?.trailingRowOptions?.targetColumn??Mt?.targetColumn;if(typeof R=="number")return R+(Xt?1:0);if(typeof R=="object"){const S=x.indexOf(R);if(S>=0)return S+(Xt?1:0)}},[ce,x,Xt,Mt?.targetColumn]),Bn=u.useRef(),_r=u.useRef(),oo=u.useCallback((h,R)=>{const[S,F]=R;return Zn(re,fe[S]?.themeOverride,k?.(F),h.themeOverride)},[k,fe,re]),io=u.useCallback(h=>{const R=Ai.value?h.metaKey:h.ctrlKey,S=R&&Ie==="multi",F=R&&ee==="multi",[O,B]=h.location,E=N.columns,H=N.rows,[V,K]=N.current?.cell??[];if(h.kind==="cell"){if(_r.current=void 0,ar.current=[O,B],O===0&&Xt){if(Tt===!0&&B===w||p==="number"||Ie==="none")return;const ie=Yt(h.location);if(ie.kind!==rn.Marker)return;if(sn!==void 0){const ve=U(ie);Gt(ve?.kind===rn.Marker);const Oe=ve?.onClick?.({...h,cell:ie,posX:h.localEventX,posY:h.localEventY,bounds:h.bounds,theme:oo(ie,h.location),preventDefault:()=>{}});if(Oe===void 0||Oe.checked===ie.checked)return}i(void 0),Ot();const Re=H.hasIndex(B),be=Bn.current;if(Ie==="multi"&&(h.shiftKey||h.isLongTouch===!0)&&be!==void 0&&H.hasIndex(be)){const ve=[Math.min(be,B),Math.max(be,B)+1];S||ye==="multi"?X(void 0,ve,!0):X(ze.fromSingleSelection(ve),void 0,S)}else S||h.isTouch||ye==="multi"?Re?X(H.remove(B),void 0,!0):(X(void 0,B,!0),Bn.current=B):Re&&H.length===1?X(ze.empty(),void 0,R):(X(ze.fromSingleSelection(B),void 0,R),Bn.current=B)}else if(O>=z&&Tt&&B===w){const ie=ei(O);Dr(ie??O)}else if(V!==O||K!==B){const ie=Yt(h.location),Re=U(ie);if(Re?.onSelect!==void 0){let Oe=!1;if(Re.onSelect({...h,cell:ie,posX:h.localEventX,posY:h.localEventY,bounds:h.bounds,preventDefault:()=>Oe=!0,theme:oo(ie,h.location)}),Oe)return}const be=Ut&&B===w,ve=Ut&&N!==void 0&&N.current?.cell[1]===w;if((h.shiftKey||h.isLongTouch===!0)&&V!==void 0&&K!==void 0&&N.current!==void 0&&!ve){if(be)return;const Oe=Math.min(O,V),nt=Math.max(O,V),Rt=Math.min(B,K),ct=Math.max(B,K);M({...N.current,range:{x:Oe,y:Rt,width:nt-Oe+1,height:ct-Rt+1}},!0,R,"click"),Bn.current=void 0,Ot()}else M({cell:[O,B],range:{x:O,y:B,width:1,height:1}},!0,R,"click"),Bn.current=void 0,i(void 0),Ot()}}else if(h.kind==="header")if(ar.current=[O,B],i(void 0),Xt&&O===0)Bn.current=void 0,_r.current=void 0,Ie==="multi"&&(H.length!==w?X(ze.fromSingleSelection([0,w]),void 0,R):X(ze.empty(),void 0,R),Ot());else{const ie=_r.current;if(ee==="multi"&&(h.shiftKey||h.isLongTouch===!0)&&ie!==void 0&&E.hasIndex(ie)){const Re=[Math.min(ie,O),Math.max(ie,O)+1];F?Z(void 0,Re,R):Z(ze.fromSingleSelection(Re),void 0,R)}else F?(E.hasIndex(O)?Z(E.remove(O),void 0,R):Z(void 0,O,R),_r.current=O):ee!=="none"&&(Z(ze.fromSingleSelection(O),void 0,R),_r.current=O);Bn.current=void 0,Ot()}else h.kind===qt?ar.current=[O,B]:h.kind===Li&&!h.isMaybeScrollbar&&(At(yi,!1),i(void 0),Ot(),vt?.(),Bn.current=void 0,_r.current=void 0)},[Dr,ee,Ot,U,ei,Yt,N,Xt,Ut,vt,sn,z,p,Ie,ye,w,M,At,Z,X,Tt,oo]),so=u.useRef(!1),ar=u.useRef(),fl=u.useRef(Ne),Cn=u.useRef(),Oc=u.useCallback(h=>{if(Ar.current=!1,fl.current=yt.current,h.button!==0&&h.button!==1){Cn.current=void 0;return}const R=performance.now();Cn.current={button:h.button,time:R,location:h.location},h?.kind==="header"&&(so.current=!0);const S=h.kind==="cell"&&h.isFillHandle;!S&&h.kind!=="cell"&&h.isEdge||(c({previousSelection:N,fillHandle:S}),ar.current=void 0,!h.isTouch&&h.button===0&&!S?io(h):!h.isTouch&&h.button===1&&(ar.current=h.location))},[N,io]),[is,ss]=u.useState(),hl=u.useCallback(h=>{if(h.kind!==qt||ee!=="multi")return;const R=Ai.value?h.metaKey:h.ctrlKey,[S]=h.location,F=N.columns;if(S<z)return;const O=fe[S];let B=S,E=S;for(let H=S-1;H>=z&&Lo(O.group,fe[H].group);H--)B--;for(let H=S+1;H<fe.length&&Lo(O.group,fe[H].group);H++)E++;if(Ot(),R)if(F.hasAll([B,E+1])){let H=F;for(let V=B;V<=E;V++)H=H.remove(V);Z(H,void 0,R)}else Z(void 0,[B,E+1],R);else Z(ze.fromSingleSelection([B,E+1]),void 0,R)},[ee,Ot,N.columns,fe,z,Z]),Ar=u.useRef(!1),ti=u.useCallback(async h=>{if(St!==void 0&&Rr!==void 0){const R=yt.current.y,S=yt.current.height;let F=St({x:h,y:R,width:1,height:Math.min(S,w-R)},tn.current.signal);typeof F!="object"&&(F=await F());const O=ce[h-z],E=document.createElement("canvas").getContext("2d",{alpha:!1});if(E!==null){E.font=re.baseFontFull;const H=bc(E,re,O,0,F,Pn,On,!1,U);Rr?.(O,H.width,h,H.width)}}},[ce,St,On,re,Pn,Rr,z,w,U]),[$c,ls]=u.useState(),Lr=u.useCallback(async(h,R)=>{const S=h.current?.range;if(S===void 0||St===void 0||R.current===void 0)return;const F=R.current.range;if(P!==void 0){let H=!1;if(P({fillDestination:{...F,x:F.x-z},patternSource:{...S,x:S.x-z},preventDefault:()=>H=!0}),H)return}let O=St(S,tn.current.signal);typeof O!="object"&&(O=await O());const B=O,E=[];for(let H=0;H<F.width;H++)for(let V=0;V<F.height;V++){const K=[F.x+H,F.y+V];if(uc(K,S))continue;const ie=B[V%S.height][H%S.width];Vr(ie)||!vo(ie)||E.push({location:K,value:{...ie}})}nn(E),Bt.current?.damage(E.map(H=>({cell:H.location})))},[St,nn,P,z]),gl=u.useCallback(()=>{if(N.current===void 0||N.current.range.width<=1)return;const h={...N,current:{...N.current,range:{...N.current.range,width:1}}};Lr(h,N)},[Lr,N]),ml=u.useCallback(()=>{if(N.current===void 0||N.current.range.height<=1)return;const h={...N,current:{...N.current,range:{...N.current.range,height:1}}};Lr(h,N)},[Lr,N]),Nc=u.useCallback((h,R)=>{const S=a;if(c(void 0),ns(void 0),ls(void 0),so.current=!1,R)return;if(S?.fillHandle===!0&&N.current!==void 0&&S.previousSelection?.current!==void 0){if(lr===void 0)return;const ie={...N,current:{...N.current,range:Cc(S.previousSelection.current.range,lr)}};Lr(S.previousSelection,ie),At(ie,!0);return}const[F,O]=h.location,[B,E]=ar.current??[],H=()=>{Ar.current=!0},V=ie=>{const Re=ie.isTouch||B===F&&E===O;if(Re&&D?.([F-z,O],{...ie,preventDefault:H}),ie.button===1)return!Ar.current;if(!Ar.current){const be=Yt(h.location),ve=U(be);if(ve!==void 0&&ve.onClick!==void 0&&Re){const nt=ve.onClick({...ie,cell:be,posX:ie.localEventX,posY:ie.localEventY,bounds:ie.bounds,theme:oo(be,h.location),preventDefault:H});nt!==void 0&&!Vr(nt)&&Br(nt)&&(nn([{location:ie.location,value:nt}]),Bt.current?.damage([{cell:ie.location}]))}if(Ar.current||N.current===void 0)return!1;let Oe=!1;switch(Ke){case"double-click":case"second-click":{if(S?.previousSelection?.current?.cell===void 0)break;const[nt,Rt]=N.current.cell,[ct,zr]=S.previousSelection.current.cell;Oe=F===nt&&F===ct&&O===Rt&&O===zr&&(ie.isDoubleClick===!0||Ke==="second-click");break}case"single-click":{Oe=!0;break}}if(Oe)return _?.([F-z,O]),Pr(ie.bounds,!1),!0}return!1},K=h.location[0]-z;if(h.isTouch){const ie=yt.current,Re=fl.current;if(ie.x!==Re.x||ie.y!==Re.y)return;if(h.isLongTouch===!0){if(h.kind==="cell"&&Io(N.current?.cell,h.location)){ue?.([K,h.location[1]],{...h,preventDefault:H});return}else if(h.kind==="header"&&N.columns.hasIndex(F)){ne?.(K,{...h,preventDefault:H});return}else if(h.kind===qt){if(K<0)return;se?.(K,{...h,preventDefault:H});return}}h.kind==="cell"?V(h)||io(h):h.kind===qt?xe?.(K,{...h,preventDefault:H}):(h.kind===Yn&&$?.(K,{...h,preventDefault:H}),io(h));return}if(h.kind==="header"){if(K<0)return;h.isEdge?h.isDoubleClick===!0&&ti(F):h.button===0&&F===B&&O===E&&$?.(K,{...h,preventDefault:H})}if(h.kind===qt){if(K<0)return;h.button===0&&F===B&&O===E&&(xe?.(K,{...h,preventDefault:H}),Ar.current||hl(h))}h.kind==="cell"&&(h.button===0||h.button===1)&&V(h),ar.current=void 0},[a,N,z,lr,Lr,At,D,Yt,U,Ke,oo,nn,_,Pr,ue,ne,se,io,xe,$,ti,hl]),Wc=u.useCallback(h=>{const R={...h,location:[h.location[0]-z,h.location[1]]};ke?.(R),a!==void 0&&h.buttons===0&&(c(void 0),ns(void 0),ls(void 0),so.current=!1),ls(S=>so.current?[h.scrollEdge[0],0]:h.scrollEdge[0]===S?.[0]&&h.scrollEdge[1]===S[1]?S:a===void 0||(Cn.current?.location[0]??0)<z?void 0:h.scrollEdge)},[a,ke,z]),Bc=u.useCallback((h,R)=>{Dt?.(h-z,R)},[Dt,z]),Hr=N?.current?.cell,jc=u.useCallback((h,R,S,F,O,B)=>{an.current=!1;let E=Hr;E!==void 0&&(E=[E[0]-z,E[1]]);const H=ot===0?void 0:{x:0,y:h.y,width:ot,height:h.height},V=[];H!==void 0&&V.push(H),Se>0&&(V.push({x:h.x-z,y:w-Se,width:h.width,height:Se}),ot>0&&V.push({x:0,y:w-Se,width:ot,height:Se}));const K={x:h.x-z,y:h.y,width:h.width,height:Tt&&h.y+h.height>=w?h.height-1:h.height,tx:O,ty:B,extras:{selected:E,freezeRegion:H,freezeRegions:V}};yt.current=K,cn(K),te([R,S,F]),Ct?.(K,K.tx,K.ty,K.extras)},[Hr,z,Tt,w,ot,Se,cn,Ct]),Vc=Nr($e,u.useCallback((h,R)=>{$e?.(h-z,R-z),ee!=="none"&&Z(ze.fromSingleSelection(R),void 0,!0)},[ee,$e,z,Z])),as=u.useRef(!1),Xc=u.useCallback(h=>{if(h.location[0]===0&&z>0){h.preventDefault();return}Le?.({...h,location:[h.location[0]-z,h.location[1]]}),h.defaultPrevented()||(as.current=!0),c(void 0)},[Le,z]),Uc=u.useCallback(()=>{as.current=!1},[]),cs=u.useRef(),us=u.useCallback(h=>{if(!Ic(h,cs.current)&&(cs.current=h,!(Cn?.current?.button!==void 0&&Cn.current.button>=1))){if(h.buttons!==0&&a!==void 0&&Cn.current?.location[0]===0&&h.location[0]===0&&z===1&&Ie==="multi"&&a.previousSelection&&!a.previousSelection.rows.hasIndex(Cn.current.location[1])&&N.rows.hasIndex(Cn.current.location[1])){const R=Math.min(Cn.current.location[1],h.location[1]),S=Math.max(Cn.current.location[1],h.location[1])+1;X(ze.fromSingleSelection([R,S]),void 0,!1)}if(h.buttons!==0&&a!==void 0&&N.current!==void 0&&!as.current&&!so.current&&(ae==="rect"||ae==="multi-rect")){const[R,S]=N.current.cell;let[F,O]=h.location;if(O<0&&(O=yt.current.y),a.fillHandle===!0&&a.previousSelection?.current!==void 0){const B=a.previousSelection.current.range;O=Math.min(O,Ut?w-1:w);const E=Gg(B,F,O,ft);ns(E)}else{if(Ut&&S===w)return;if(Ut&&O===w)if(h.kind===Li)O--;else return;F=Math.max(F,z);const H=F-R,V=O-S,K={x:H>=0?R:F,y:V>=0?S:O,width:Math.abs(H)+1,height:Math.abs(V)+1};M({...N.current,range:K},!0,!1,"drag")}}pn?.({...h,location:[h.location[0]-z,h.location[1]]})}},[ft,a,z,Ie,N,ae,pn,X,Ut,w,M]),Yc=u.useCallback(()=>{const h=cs.current;if(h===void 0)return;const[R,S]=h.scrollEdge;let[F,O]=h.location;const B=yt.current;R===-1?F=B.extras?.freezeRegion?.x??B.x:R===1&&(F=B.x+B.width),S===-1?O=Math.max(0,B.y):S===1&&(O=Math.min(w-1,B.y+B.height)),F=gn(F,0,fe.length-1),O=gn(O,0,w-1),us({...h,location:[F,O]})},[fe.length,us,w]);tm($c,d,Yc);const dn=u.useCallback(h=>{if(N.current===void 0)return;const[R,S]=h,[F,O]=N.current.cell,B=N.current.range;let E=B.x,H=B.x+B.width,V=B.y,K=B.y+B.height;if(S!==0)switch(S){case 2:{K=w,V=O,pt(0,K,"vertical");break}case-2:{V=0,K=O+1,pt(0,V,"vertical");break}case 1:{V<O?(V++,pt(0,V,"vertical")):(K=Math.min(w,K+1),pt(0,K,"vertical"));break}case-1:{K>O+1?(K--,pt(0,K,"vertical")):(V=Math.max(0,V-1),pt(0,V,"vertical"));break}default:Ao()}if(R!==0)if(R===2)H=fe.length,E=F,pt(H-1-z,0,"horizontal");else if(R===-2)E=z,H=F+1,pt(E-z,0,"horizontal");else{let ie=[];if(St!==void 0){const Re=St({x:E,y:V,width:H-E-z,height:K-V},tn.current.signal);typeof Re=="object"&&(ie=sm(Re))}if(R===1){let Re=!1;if(E<F){if(ie.length>0){const be=hr(E+1,F+1).find(ve=>!ie.includes(ve-z));be!==void 0&&(E=be,Re=!0)}else E++,Re=!0;Re&&pt(E,0,"horizontal")}Re||(H=Math.min(fe.length,H+1),pt(H-1-z,0,"horizontal"))}else if(R===-1){let Re=!1;if(H>F+1){if(ie.length>0){const be=hr(H-1,F,-1).find(ve=>!ie.includes(ve-z));be!==void 0&&(H=be,Re=!0)}else H--,Re=!0;Re&&pt(H-z,0,"horizontal")}Re||(E=Math.max(z,E-1),pt(E-z,0,"horizontal"))}else Ao()}M({cell:N.current.cell,range:{x:E,y:V,width:H-E,height:K-V}},!0,!1,"keyboard-select")},[St,N,fe.length,z,w,pt,M]),jn=u.useCallback((h,R,S,F)=>{const O=Ht-(S?0:1);if(h=gn(h,z,ce.length-1+z),R=gn(R,0,O),h===Hr?.[0]&&R===Hr?.[1])return!1;if(F&&N.current!==void 0){const B=[...N.current.rangeStack];(N.current.range.width>1||N.current.range.height>1)&&B.push(N.current.range),At({...N,current:{cell:[h,R],range:{x:h,y:R,width:1,height:1},rangeStack:B}},!0)}else M({cell:[h,R],range:{x:h,y:R,width:1,height:1}},!0,!1,"keyboard-nav");return f.current!==void 0&&f.current[0]===h&&f.current[1]===R&&(f.current=void 0),pt(h-z,R),!0},[Ht,z,ce.length,Hr,N,pt,At,M]),Kc=u.useCallback((h,R)=>{o?.cell!==void 0&&h!==void 0&&Br(h)&&(nn([{location:o.cell,value:h}]),window.requestAnimationFrame(()=>{Bt.current?.damage([{cell:o.cell}])})),Ot(!0),i(void 0);const[S,F]=R;if(N.current!==void 0&&(S!==0||F!==0)){const O=N.current.cell[1]===Ht-1&&h!==void 0;jn(gn(N.current.cell[0]+S,0,fe.length-1),gn(N.current.cell[1]+F,0,Ht-1),O,!1)}W?.(h,R)},[o?.cell,Ot,N,W,nn,Ht,jn,fe.length]),qc=u.useMemo(()=>`gdg-overlay-${im++}`,[]),cr=u.useCallback(h=>{Ot();const R=[];for(let S=h.x;S<h.x+h.width;S++)for(let F=h.y;F<h.y+h.height;F++){const O=T([S-z,F]);if(!O.allowOverlay&&O.kind!==J.Boolean)continue;let B;if(O.kind===J.Custom){const E=U(O),H=E?.provideEditor?.(O);E?.onDelete!==void 0?B=E.onDelete(O):Ud(H)&&(B=H?.deletedValue?.(O))}else(Br(O)&&O.allowOverlay||O.kind===J.Boolean)&&(B=U(O)?.onDelete?.(O));B!==void 0&&!Vr(B)&&Br(B)&&R.push({location:[S,F],value:B})}nn(R),Bt.current?.damage(R.map(S=>({cell:S.location})))},[Ot,T,U,nn,z]),lo=o!==void 0,pl=u.useCallback(h=>{const R=()=>{h.stopPropagation(),h.preventDefault()},S={didMatch:!1},{bounds:F}=h,O=N.columns,B=N.rows,E=ln;if(!lo&&Ee(E.clear,h,S))At(yi,!1),vt?.();else if(!lo&&Ee(E.selectAll,h,S))At({columns:ze.empty(),rows:ze.empty(),current:{cell:N.current?.cell??[z,0],range:{x:z,y:0,width:x.length,height:w},rangeStack:[]}},!1);else if(Ee(E.search,h,S))s?.current?.focus({preventScroll:!0}),Go(!0);else if(Ee(E.delete,h,S)){const ve=Tr?.(N)??!0;if(ve!==!1){const Oe=ve===!0?N:ve;if(Oe.current!==void 0){cr(Oe.current.range);for(const nt of Oe.current.rangeStack)cr(nt)}for(const nt of Oe.rows)cr({x:z,y:nt,width:x.length,height:1});for(const nt of Oe.columns)cr({x:nt,y:0,width:1,height:w})}}if(S.didMatch)return R(),!0;if(N.current===void 0)return!1;let[H,V]=N.current.cell,K=!1,ie=!1;Ee(E.scrollToSelectedCell,h,S)?oi.current(H-z,V):ee!=="none"&&Ee(E.selectColumn,h,S)?O.hasIndex(H)?Z(O.remove(H),void 0,!0):ee==="single"?Z(ze.fromSingleSelection(H),void 0,!0):Z(void 0,H,!0):Ie!=="none"&&Ee(E.selectRow,h,S)?B.hasIndex(V)?X(B.remove(V),void 0,!0):Ie==="single"?X(ze.fromSingleSelection(V),void 0,!0):X(void 0,V,!0):!lo&&F!==void 0&&Ee(E.activateCell,h,S)?V===w&&Tt?window.setTimeout(()=>{const ve=ei(H);Dr(ve??H)},0):(_?.([H-z,V]),Pr(F,!0)):N.current.range.height>1&&Ee(E.downFill,h,S)?ml():N.current.range.width>1&&Ee(E.rightFill,h,S)?gl():Ee(E.goToNextPage,h,S)?V+=Math.max(1,yt.current.height-4):Ee(E.goToPreviousPage,h,S)?V-=Math.max(1,yt.current.height-4):Ee(E.goToFirstCell,h,S)?(i(void 0),V=0,H=0):Ee(E.goToLastCell,h,S)?(i(void 0),V=Number.MAX_SAFE_INTEGER,H=Number.MAX_SAFE_INTEGER):Ee(E.selectToFirstCell,h,S)?(i(void 0),dn([-2,-2])):Ee(E.selectToLastCell,h,S)?(i(void 0),dn([2,2])):lo?(Ee(E.closeOverlay,h,S)&&i(void 0),Ee(E.acceptOverlayDown,h,S)&&(i(void 0),V++),Ee(E.acceptOverlayUp,h,S)&&(i(void 0),V--),Ee(E.acceptOverlayLeft,h,S)&&(i(void 0),H--),Ee(E.acceptOverlayRight,h,S)&&(i(void 0),H++)):(Ee(E.goDownCell,h,S)?V+=1:Ee(E.goUpCell,h,S)?V-=1:Ee(E.goRightCell,h,S)?H+=1:Ee(E.goLeftCell,h,S)?H-=1:Ee(E.goDownCellRetainSelection,h,S)?(V+=1,K=!0):Ee(E.goUpCellRetainSelection,h,S)?(V-=1,K=!0):Ee(E.goRightCellRetainSelection,h,S)?(H+=1,K=!0):Ee(E.goLeftCellRetainSelection,h,S)?(H-=1,K=!0):Ee(E.goToLastRow,h,S)?V=w-1:Ee(E.goToFirstRow,h,S)?V=Number.MIN_SAFE_INTEGER:Ee(E.goToLastColumn,h,S)?H=Number.MAX_SAFE_INTEGER:Ee(E.goToFirstColumn,h,S)?H=Number.MIN_SAFE_INTEGER:(ae==="rect"||ae==="multi-rect")&&(Ee(E.selectGrowDown,h,S)?dn([0,1]):Ee(E.selectGrowUp,h,S)?dn([0,-1]):Ee(E.selectGrowRight,h,S)?dn([1,0]):Ee(E.selectGrowLeft,h,S)?dn([-1,0]):Ee(E.selectToLastRow,h,S)?dn([0,2]):Ee(E.selectToFirstRow,h,S)?dn([0,-2]):Ee(E.selectToLastColumn,h,S)?dn([2,0]):Ee(E.selectToFirstColumn,h,S)&&dn([-2,0])),ie=S.didMatch);const Re=jn(H,V,!1,K),be=S.didMatch;return be&&(Re||!ie||rr)&&R(),be},[lo,N,ln,ee,Ie,ae,z,w,jn,At,vt,x.length,Tr,rr,cr,Z,X,Tt,ei,Dr,_,Pr,ml,gl,dn]),ao=u.useCallback(h=>{let R=!1;if(_e!==void 0&&_e({...h,cancel:()=>{R=!0}}),R||pl(h)||N.current===void 0)return;const[S,F]=N.current.cell,O=yt.current;if(!h.metaKey&&!h.ctrlKey&&N.current!==void 0&&h.key.length===1&&/[ -~]/g.test(h.key)&&h.bounds!==void 0&&vo(T([S-z,Math.max(0,Math.min(F,w-1))]))){if((!Ut||F!==w)&&(O.y>F||F>O.y+O.height||O.x>S||S>O.x+O.width))return;Pr(h.bounds,!0,h.key),h.stopPropagation(),h.preventDefault()}},[_e,pl,N,T,z,w,Ut,Pr]),Gc=u.useCallback((h,R)=>{const S=h.location[0]-z;if(h.kind==="header"&&ne?.(S,{...h,preventDefault:R}),h.kind===qt){if(S<0)return;se?.(S,{...h,preventDefault:R})}if(h.kind==="cell"){const[F,O]=h.location;ue?.([S,O],{...h,preventDefault:R}),Gh(N,h.location)||jn(F,O,!1,!1)}},[N,ue,se,ne,z,jn]),ds=u.useCallback(async h=>{if(!ln.paste)return;function R(E,H,V,K){const ie=typeof V=="object"?V?.join(`
`)??"":V?.toString()??"";if(!Vr(E)&&vo(E)&&E.readonly!==!0){const Re=j?.(ie,E);if(Re!==void 0&&Br(Re))return{location:H,value:Re};const be=U(E);if(be===void 0)return;if(be.kind===J.Custom){Gt(E.kind===J.Custom);const ve=be.onPaste?.(ie,E.data);return ve===void 0?void 0:{location:H,value:{...E,data:ve}}}else{const ve=be.onPaste?.(ie,E,{formatted:K,formattedString:typeof K=="string"?K:K?.join(`
`),rawValue:V});return ve===void 0?void 0:(Gt(ve.kind===E.kind),{location:H,value:ve})}}}const S=N.columns,F=N.rows,O=d.current?.contains(document.activeElement)===!0||l.current?.contains(document.activeElement)===!0;let B;if(N.current!==void 0?B=[N.current.range.x,N.current.range.y]:S.length===1?B=[S.first()??0,0]:F.length===1&&(B=[z,F.first()??0]),O&&B!==void 0){let E,H;const V="text/plain",K="text/html";if(navigator.clipboard.read!==void 0){const ve=await navigator.clipboard.read();for(const Oe of ve){if(Oe.types.includes(K)){const Rt=await(await Oe.getType(K)).text(),ct=ta(Rt);if(ct!==void 0){E=ct;break}}Oe.types.includes(V)&&(H=await(await Oe.getType(V)).text())}}else if(navigator.clipboard.readText!==void 0)H=await navigator.clipboard.readText();else if(h!==void 0&&h?.clipboardData!==null){if(h.clipboardData.types.includes(K)){const ve=h.clipboardData.getData(K);E=ta(ve)}E===void 0&&h.clipboardData.types.includes(V)&&(H=h.clipboardData.getData(V))}else return;const[ie,Re]=B,be=[];do{if(ut===void 0){const ve=Yt(B),Oe=H??E?.map(Rt=>Rt.map(ct=>ct.rawValue).join("	")).join("	")??"",nt=R(ve,B,Oe,void 0);nt!==void 0&&be.push(nt);break}if(E===void 0){if(H===void 0)return;E=K0(H)}if(ut===!1||typeof ut=="function"&&ut?.([B[0]-z,B[1]],E.map(ve=>ve.map(Oe=>Oe.rawValue?.toString()??"")))!==!0)return;for(const[ve,Oe]of E.entries()){if(ve+Re>=w)break;for(const[nt,Rt]of Oe.entries()){const ct=[nt+ie,ve+Re],[zr,uo]=ct;if(zr>=fe.length||uo>=Ht)continue;const fo=Yt(ct),kn=R(fo,ct,Rt.rawValue,Rt.formatted);kn!==void 0&&be.push(kn)}}}while(!1);nn(be),Bt.current?.damage(be.map(ve=>({cell:ve.location})))}},[j,U,Yt,N,ln.paste,fe.length,nn,Ht,ut,z,w]);Pt("paste",ds,m,!1,!0);const co=u.useCallback(async(h,R)=>{if(!ln.copy)return;const S=R===!0||d.current?.contains(document.activeElement)===!0||l.current?.contains(document.activeElement)===!0,F=N.columns,O=N.rows,B=(E,H)=>{if(!Pe)ra(E,H,h);else{const V=H.map(K=>({kind:J.Text,data:x[K].title,displayData:x[K].title,allowOverlay:!1}));ra([V,...E],H,h)}};if(S&&St!==void 0){if(N.current!==void 0){let E=St(N.current.range,tn.current.signal);typeof E!="object"&&(E=await E()),B(E,hr(N.current.range.x-z,N.current.range.x+N.current.range.width-z))}else if(O!==void 0&&O.length>0){const H=[...O].map(V=>{const K=St({x:z,y:V,width:x.length,height:1},tn.current.signal);return typeof K=="object"?K[0]:K().then(ie=>ie[0])});if(H.some(V=>V instanceof Promise)){const V=await Promise.all(H);B(V,hr(x.length))}else B(H,hr(x.length))}else if(F.length>0){const E=[],H=[];for(const V of F){let K=St({x:V,y:0,width:1,height:w},tn.current.signal);typeof K!="object"&&(K=await K()),E.push(K),H.push(V-z)}if(E.length===1)B(E[0],H);else{const V=E.reduce((K,ie)=>K.map((Re,be)=>[...Re,...ie[be]]));B(V,H)}}}},[x,St,N,ln.copy,z,w,Pe]);Pt("copy",co,m,!1,!1);const Zc=u.useCallback(async h=>{if(!(!ln.cut||!(d.current?.contains(document.activeElement)===!0||l.current?.contains(document.activeElement)===!0))&&(await co(h),N.current!==void 0)){let S={current:{cell:N.current.cell,range:N.current.range,rangeStack:[]},rows:ze.empty(),columns:ze.empty()};const F=Tr?.(S);if(F===!1||(S=F===!0?S:F,S.current===void 0))return;cr(S.current.range)}},[cr,N,ln.cut,co,Tr]);Pt("cut",Zc,m,!1,!1);const Qc=u.useCallback((h,R)=>{if(Me!==void 0){z!==0&&(h=h.map(O=>[O[0]-z,O[1]])),Me(h,R);return}if(h.length===0||R===-1)return;const[S,F]=h[R];f.current!==void 0&&f.current[0]===S&&f.current[1]===F||(f.current=[S,F],jn(S,F,!1,!1))},[Me,z,jn]),[ni,ri]=en?.current?.cell??[],oi=u.useRef(pt);oi.current=pt,u.useLayoutEffect(()=>{!an.current&&ni!==void 0&&ri!==void 0&&(ni!==Nn.current?.current?.cell[0]||ri!==Nn.current?.current?.cell[1])&&oi.current(ni,ri),an.current=!1},[ni,ri]);const wl=N.current!==void 0&&(N.current.cell[0]>=fe.length||N.current.cell[1]>=Ht);u.useLayoutEffect(()=>{wl&&At(yi,!1)},[wl,At]);const Jc=u.useMemo(()=>Tt===!0&&Mt?.tint===!0?ze.fromSingleSelection(Ht-1):ze.empty(),[Ht,Tt,Mt?.tint]),eu=u.useCallback(h=>typeof Et=="boolean"?Et:Et?.(h-z)??!0,[z,Et]),tu=u.useMemo(()=>{if(is===void 0||l.current===null)return null;const{bounds:h,group:R}=is,S=l.current.getBoundingClientRect();return u.createElement(F0,{bounds:h,group:R,canvasBounds:S,onClose:()=>ss(void 0),onFinish:F=>{ss(void 0),Q?.(R,F)}})},[Q,is]),nu=Math.min(fe.length,ot+(Xt?1:0));u.useImperativeHandle(t,()=>({appendRow:(h,R)=>Dr(h+z,R),updateCells:h=>(z!==0&&(h=h.map(R=>({cell:[R.cell[0]+z,R.cell[1]]}))),Bt.current?.damage(h)),getBounds:(h,R)=>{if(!(l?.current===null||d?.current===null)){if(h===void 0&&R===void 0){const S=l.current.getBoundingClientRect(),F=S.width/d.current.clientWidth;return{x:S.x-d.current.scrollLeft*F,y:S.y-d.current.scrollTop*F,width:d.current.scrollWidth*F,height:d.current.scrollHeight*F}}return Bt.current?.getBounds((h??0)+z,R)}},focus:()=>Bt.current?.focus(),emit:async h=>{switch(h){case"delete":ao({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!1,key:"Delete",keyCode:46,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-right":ao({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"r",keyCode:82,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-down":ao({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"d",keyCode:68,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"copy":await co(void 0,!0);break;case"paste":await ds();break}},scrollTo:pt,remeasureColumns:h=>{for(const R of h)ti(R+z)}}),[Dr,ti,co,ao,ds,z,pt]);const[vl,yl]=Hr??[],ru=u.useCallback(h=>{const[R,S]=h;if(S===-1){ee!=="none"&&(Z(ze.fromSingleSelection(R),void 0,!1),Ot());return}vl===R&&yl===S||(M({cell:h,range:{x:R,y:S,width:1,height:1}},!0,!1,"keyboard-nav"),pt(R,S))},[ee,Ot,pt,vl,yl,M,Z]),[ou,iu]=u.useState(!1),bl=u.useRef(ga(h=>{iu(h)},5)),su=u.useCallback(()=>{bl.current(!0),N.current===void 0&&N.columns.length===0&&N.rows.length===0&&a===void 0&&M({cell:[z,xn],range:{x:z,y:xn,width:1,height:1}},!0,!1,"keyboard-select")},[xn,N,a,z,M]),lu=u.useCallback(()=>{bl.current(!1)},[]),[au,cu]=u.useMemo(()=>{let h;const R=on?.scrollbarWidthOverride??Ds(),S=w+(Tt?1:0);if(typeof _t=="number")h=lt+S*_t;else{let O=0;const B=Math.min(S,10);for(let E=0;E<B;E++)O+=_t(E);O=Math.floor(O/B),h=lt+S*O}h+=R;const F=fe.reduce((O,B)=>B.width+O,0)+R;return[`${Math.min(1e5,F)}px`,`${Math.min(1e5,h)}px`]},[fe,on?.scrollbarWidthOverride,_t,w,Tt,lt]);return u.createElement(fg.Provider,{value:re},u.createElement(Q0,{style:dg(re),className:je,inWidth:y??au,inHeight:C??cu},u.createElement(A0,{fillHandle:In,drawFocusRing:Vo,experimental:on,fixedShadowX:tr,fixedShadowY:nr,getRowThemeOverride:k,headerIcons:vr,imageWindowLoader:Xo,initialSize:Uo,isDraggable:yr,onDragLeave:br,onRowMoved:sn,overscrollX:Gi,overscrollY:Zi,preventDiagonalScrolling:Yo,rightElement:Ui,rightElementProps:Yi,smoothScrollX:Fn,smoothScrollY:Ki,className:je,enableGroups:dt,onCanvasFocused:su,onCanvasBlur:lu,canvasRef:l,onContextMenu:Gc,theme:re,cellXOffset:ro,cellYOffset:xn,accessibilityHeight:Ne.height,onDragEnd:Uc,columns:fe,nonGrowWidth:Be,drawHeader:Er,onColumnProposeMove:q,drawCell:ts,disabledRows:Jc,freezeColumns:nu,lockColumns:z,firstColAccessible:z===0,getCellContent:Yt,minColumnWidth:Pn,maxColumnWidth:On,searchInputRef:s,showSearch:Ji,onSearchClose:no,highlightRegions:Fc,getCellsForSelection:St,getGroupDetails:rs,headerHeight:kr,isFocused:ou,groupHeaderHeight:dt?eo:0,freezeTrailingRows:Se+(Tt&&Mt?.sticky===!0?1:0),hasAppendRow:Tt,onColumnResize:Rr,onColumnResizeEnd:Mr,onColumnResizeStart:es,onCellFocused:ru,onColumnMoved:Vc,onDragStart:Xc,onHeaderMenuClick:Bc,onItemHovered:us,isFilling:a?.fillHandle===!0,onMouseMove:Wc,onKeyDown:ao,onKeyUp:Ae,onMouseDown:Oc,onMouseUp:Nc,onDragOverCell:bn,onDrop:Qr,onSearchResultsChanged:Qc,onVisibleRegionChanged:jc,clientSize:Y,rowHeight:_t,searchResults:le,searchValue:Xe,onSearchValueChange:Ve,rows:Ht,scrollRef:d,selection:N,translateX:Ne.tx,translateY:Ne.ty,verticalBorder:eu,gridRef:Bt,getCellRenderer:U}),tu,o!==void 0&&u.createElement(u.Suspense,{fallback:null},u.createElement(om,{...o,validateCell:Sr,id:qc,getCellRenderer:U,className:on?.isSubGrid===!0?"click-outside-ignore":void 0,provideEditor:yn,imageEditorOverride:v,onFinishEditing:Kc,markdownDivCreateNode:b,isOutsideClick:qo}))))},am=u.forwardRef(lm),sa=20,cm={getAccessibilityString:e=>e.data?.toString()??"false",kind:J.Boolean,needsHover:!0,useLabel:!1,needsHoverPosition:!0,measure:()=>50,draw:e=>um(e,e.cell.data,Ms(e.cell),e.cell.maxSize??sa),onDelete:e=>({...e,data:!1}),onClick:e=>{const{cell:t,posX:n,posY:r,bounds:o,theme:i}=e,{width:s,height:l,x:a,y:c}=o,d=t.maxSize??sa,f=Math.floor(o.y+l/2),m=Za(d,l,i.cellVerticalPadding),p=Ga(t.contentAlign??"center",a,s,i.cellHorizontalPadding,m),g=qa(p,f,m),v=Qa(a+n,c+r,g);if(Ms(t)&&v)return{...t,data:Dc(t.data)}},onPaste:(e,t)=>{let n=ki;return e.toLowerCase()==="true"?n=!0:e.toLowerCase()==="false"?n=!1:e.toLowerCase()==="indeterminate"&&(n=Ws),n===t.data?void 0:{...t,data:n}}};function um(e,t,n,r){if(!n&&t===ki)return;const{ctx:o,hoverAmount:i,theme:s,rect:l,highlighted:a,hoverX:c,hoverY:d,cell:{contentAlign:f}}=e,{x:m,y:p,width:g,height:v}=l,k=.35;let b=n?1-k+k*i:.4;t===ki&&(b*=i),b!==0&&(o.globalAlpha=b,rl(o,s,t,m,p,g,v,a,c,d,r,f),o.globalAlpha=1)}const dm=Jt("div")({name:"BubblesOverlayEditorStyle",class:"gdg-b1ygi5by",propsAsIs:!1}),fm=e=>{const{bubbles:t}=e;return u.createElement(dm,null,t.map((n,r)=>u.createElement("div",{key:r,className:"boe-bubble"},n)),u.createElement("textarea",{className:"gdg-input",autoFocus:!0}))},hm={getAccessibilityString:e=>Ja(e.data),kind:J.Bubble,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,n)=>t.data.reduce((r,o)=>e.measureText(o).width+r+20,0)+2*n.cellHorizontalPadding-4,draw:e=>mm(e,e.cell.data),provideEditor:()=>e=>{const{value:t}=e;return u.createElement(fm,{bubbles:t.data})},onPaste:()=>{}},gm=4;function mm(e,t){const{rect:n,theme:r,ctx:o,highlighted:i}=e,{x:s,y:l,width:a,height:c}=n,d=20,f=8,m=gm;let p=s+r.cellHorizontalPadding;const g=[];for(const v of t){if(p>s+a)break;const k=Bi(v,o,r.baseFontFull).width;g.push({x:p,width:k}),p+=k+f*2+m}o.beginPath();for(const v of g)Hn(o,v.x,l+(c-d)/2,v.width+f*2,d,r.roundingRadius??d/2);o.fillStyle=i?r.bgBubbleSelected:r.bgBubble,o.fill();for(const[v,k]of g.entries())o.beginPath(),o.fillStyle=r.textBubble,o.fillText(t[v],k.x+f,l+c/2+Qn(o,r))}const pm=Jt("div")({name:"DrilldownOverlayEditorStyle",class:"gdg-d4zsq0x",propsAsIs:!1}),wm=e=>{const{drilldowns:t}=e;return u.createElement(pm,null,t.map((n,r)=>u.createElement("div",{key:r,className:"doe-bubble"},n.img!==void 0&&u.createElement("img",{src:n.img}),u.createElement("div",null,n.text))))},vm={getAccessibilityString:e=>Ja(e.data.map(t=>t.text)),kind:J.Drilldown,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,n)=>t.data.reduce((r,o)=>e.measureText(o.text).width+r+20+(o.img!==void 0?18:0),0)+2*n.cellHorizontalPadding-4,draw:e=>xm(e,e.cell.data),provideEditor:()=>e=>{const{value:t}=e;return u.createElement(wm,{drilldowns:t.data})},onPaste:()=>{}},ym=4,xs={};function bm(e,t,n,r){const o=Math.ceil(window.devicePixelRatio),i=5,s=n-i*2,l=4,a=n*o,c=r+i,d=r*3,f=(d+i*2)*o,m=`${e},${t},${o},${n}`;if(xs[m]!==void 0)return{el:xs[m],height:a,width:f,middleWidth:l*o,sideWidth:c*o,padding:i*o,dpr:o};const p=document.createElement("canvas"),g=p.getContext("2d");return g===null?null:(p.width=f,p.height=a,g.scale(o,o),xs[m]=p,g.beginPath(),Hn(g,i,i,d,s,r),g.shadowColor="rgba(24, 25, 34, 0.4)",g.shadowBlur=1,g.fillStyle=e,g.fill(),g.shadowColor="rgba(24, 25, 34, 0.3)",g.shadowOffsetY=1,g.shadowBlur=5,g.fillStyle=e,g.fill(),g.shadowOffsetY=0,g.shadowBlur=0,g.shadowBlur=0,g.beginPath(),Hn(g,i+.5,i+.5,d,s,r),g.strokeStyle=t,g.lineWidth=1,g.stroke(),{el:p,height:a,width:f,sideWidth:c*o,middleWidth:r*o,padding:i*o,dpr:o})}function xm(e,t){const{rect:n,theme:r,ctx:o,imageLoader:i,col:s,row:l}=e,{x:a,width:c}=n,d=r.baseFontFull,f=mc(o,d),m=Math.min(n.height,Math.max(16,Math.ceil(f*r.lineHeight)*2)),p=Math.floor(n.y+(n.height-m)/2),g=m-10,v=8,k=ym;let b=a+r.cellHorizontalPadding;const y=r.roundingRadius??6,C=bm(r.bgCell,r.drilldownBorder,m,y),x=[];for(const w of t){if(b>a+c)break;const D=Bi(w.text,o,d).width;let _=0;w.img!==void 0&&i.loadOrGetImage(w.img,s,l)!==void 0&&(_=g-8+4);const P=D+_+v*2;x.push({x:b,width:P}),b+=P+k}if(C!==null){const{el:w,height:T,middleWidth:D,sideWidth:_,width:P,dpr:W,padding:j}=C,A=_/W,L=j/W;for(const $ of x){const q=Math.floor($.x),he=Math.floor($.width),xe=he-(A-L)*2;o.imageSmoothingEnabled=!1,o.drawImage(w,0,0,_,T,q-L,p,A,m),xe>0&&o.drawImage(w,_,0,D,T,q+(A-L),p,xe,m),o.drawImage(w,P-_,0,_,T,q+he-(A-L),p,A,m),o.imageSmoothingEnabled=!0}}o.beginPath();for(const[w,T]of x.entries()){const D=t[w];let _=T.x+v;if(D.img!==void 0){const P=i.loadOrGetImage(D.img,s,l);if(P!==void 0){const W=g-8;let j=0,A=0,L=P.width,$=P.height;L>$?(j+=(L-$)/2,L=$):$>L&&(A+=($-L)/2,$=L),o.beginPath(),Hn(o,_,p+m/2-W/2,W,W,r.roundingRadius??3),o.save(),o.clip(),o.drawImage(P,j,A,L,$,_,p+m/2-W/2,W,W),o.restore(),_+=W+4}}o.beginPath(),o.fillStyle=r.textBubble,o.fillText(D.text,_,p+m/2+Qn(o,r))}}const Cm={getAccessibilityString:e=>e.data.join(", "),kind:J.Image,needsHover:!1,useLabel:!1,needsHoverPosition:!1,draw:e=>km(e,e.cell.displayData??e.cell.data,e.cell.rounding??e.theme.roundingRadius??4,e.cell.contentAlign),measure:(e,t)=>t.data.length*50,onDelete:e=>({...e,data:[]}),provideEditor:()=>e=>{const{value:t,onFinishedEditing:n,imageEditorOverride:r}=e,o=r??nh;return u.createElement(o,{urls:t.data,canWrite:t.readonly!==!1,onCancel:n,onChange:i=>{n({...t,data:[i]})}})},onPaste:(e,t)=>{e=e.trim();const r=e.split(",").map(o=>{try{return new URL(o),o}catch{return}}).filter(o=>o!==void 0);if(!(r.length===t.data.length&&r.every((o,i)=>o===t.data[i])))return{...t,data:r}}},Cs=4;function km(e,t,n,r){const{rect:o,col:i,row:s,theme:l,ctx:a,imageLoader:c}=e,{x:d,y:f,height:m,width:p}=o,g=m-l.cellVerticalPadding*2,v=[];let k=0;for(let y=0;y<t.length;y++){const C=t[y];if(C.length===0)continue;const x=c.loadOrGetImage(C,i,s);if(x!==void 0){v[y]=x;const w=x.width*(g/x.height);k+=w+Cs}}if(k===0)return;k-=Cs;let b=d+l.cellHorizontalPadding;r==="right"?b=Math.floor(d+p-l.cellHorizontalPadding-k):r==="center"&&(b=Math.floor(d+p/2-k/2));for(const y of v){if(y===void 0)continue;const C=y.width*(g/y.height);n>0&&(a.beginPath(),Hn(a,b,f+l.cellVerticalPadding,C,g,n),a.save(),a.clip()),a.drawImage(y,b,f+l.cellVerticalPadding,C,g),n>0&&a.restore(),b+=C+Cs}}function Sm(e,t){let n=e*49632+t*325176;return n^=n<<13,n^=n>>17,n^=n<<5,n/4294967295*2}const Rm={getAccessibilityString:()=>"",kind:J.Loading,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:()=>120,draw:e=>{const{cell:t,col:n,row:r,ctx:o,rect:i,theme:s}=e;if(t.skeletonWidth===void 0||t.skeletonWidth===0)return;let l=t.skeletonWidth;t.skeletonWidthVariability!==void 0&&t.skeletonWidthVariability>0&&(l+=Math.round(Sm(n,r)*t.skeletonWidthVariability));const a=s.cellHorizontalPadding,c=t.skeletonHeight??Math.min(18,i.height-2*s.cellVerticalPadding);Hn(o,i.x+a,i.y+(i.height-c)/2,l,c,s.roundingRadius??3),o.fillStyle=Kr(s.textDark,.1),o.fill()},onPaste:()=>{}},Mm=()=>e=>e.targetWidth,la=Jt("div")({name:"MarkdownOverlayEditorStyle",class:"gdg-m1pnx84e",propsAsIs:!1,vars:{"m1pnx84e-0":[Mm(),"px"]}}),Em=e=>{const{value:t,onChange:n,forceEditMode:r,createNode:o,targetRect:i,onFinish:s,validatedSelection:l}=e,a=t.data,c=t.readonly===!0,[d,f]=u.useState(a===""||r),m=u.useCallback(()=>{f(g=>!g)},[]),p=a?"gdg-ml-6":"";return d?u.createElement(la,{targetWidth:i.width-20},u.createElement(Wi,{autoFocus:!0,highlight:!1,validatedSelection:l,value:a,onKeyDown:g=>{g.key==="Enter"&&g.stopPropagation()},onChange:n}),u.createElement("div",{className:`gdg-edit-icon gdg-checkmark-hover ${p}`,onClick:()=>s(t)},u.createElement(qf,null))):u.createElement(la,{targetWidth:i.width},u.createElement($h,{contents:a,createNode:o}),!c&&u.createElement(u.Fragment,null,u.createElement("div",{className:"spacer"}),u.createElement("div",{className:`gdg-edit-icon gdg-edit-hover ${p}`,onClick:m},u.createElement(Xs,null))),u.createElement("textarea",{className:"gdg-md-edit-textarea gdg-input",autoFocus:!0}))},Tm={getAccessibilityString:e=>e.data?.toString()??"",kind:J.Markdown,needsHover:!1,needsHoverPosition:!1,drawPrep:Bo,measure:(e,t,n)=>{const r=t.data.split(`
`)[0];return e.measureText(r).width+2*n.cellHorizontalPadding},draw:e=>An(e,e.cell.data,e.cell.contentAlign),onDelete:e=>({...e,data:""}),provideEditor:()=>e=>{const{onChange:t,value:n,target:r,onFinishedEditing:o,markdownDivCreateNode:i,forceEditMode:s,validatedSelection:l}=e;return u.createElement(Em,{onFinish:o,targetRect:r,value:n,validatedSelection:l,onChange:a=>t({...n,data:a.target.value}),forceEditMode:s,createNode:i})},onPaste:(e,t)=>e===t.data?void 0:{...t,data:e}},Im={getAccessibilityString:e=>e.row.toString(),kind:rn.Marker,needsHover:!0,needsHoverPosition:!1,drawPrep:Pm,measure:()=>44,draw:e=>_m(e,e.cell.row,e.cell.checked,e.cell.markerKind,e.cell.drawHandle),onClick:e=>{const{bounds:t,cell:n,posX:r,posY:o}=e,{width:i,height:s}=t,l=n.drawHandle?7+(i-7)/2:i/2,a=s/2;if(Math.abs(r-l)<=10&&Math.abs(o-a)<=10)return{...n,checked:!n.checked}},onPaste:()=>{}};function Pm(e,t){const{ctx:n,theme:r}=e,o=r.markerFontFull,i=t??{};return i?.font!==o&&(n.font=o,i.font=o),i.deprep=Dm,n.textAlign="center",i}function Dm(e){const{ctx:t}=e;t.textAlign="start"}function _m(e,t,n,r,o){const{ctx:i,rect:s,hoverAmount:l,theme:a}=e,{x:c,y:d,width:f,height:m}=s,p=n?1:r==="checkbox-visible"?.6+.4*l:l;if(r!=="number"&&p>0){i.globalAlpha=p;const g=7*(n?l:1);if(rl(i,a,n,o?c+g:c,d,o?f-g:f,m,!0,void 0,void 0,18),o){i.globalAlpha=l,i.beginPath();for(const v of[3,6])for(const k of[-5,-1,3])i.rect(c+v,d+m/2+k,2,2);i.fillStyle=a.textLight,i.fill(),i.beginPath()}i.globalAlpha=1}if(r==="number"||r==="both"&&!n){const g=t.toString(),v=a.markerFontFull,k=c+f/2;r==="both"&&l!==0&&(i.globalAlpha=1-l),i.fillStyle=a.textLight,i.font=v,i.fillText(g,k,d+m/2+Qn(i,v)),l!==0&&(i.globalAlpha=1)}}const Am={getAccessibilityString:()=>"",kind:rn.NewRow,needsHover:!0,needsHoverPosition:!1,measure:()=>200,draw:e=>Lm(e,e.cell.hint,e.cell.icon),onPaste:()=>{}};function Lm(e,t,n){const{ctx:r,rect:o,hoverAmount:i,theme:s,spriteManager:l}=e,{x:a,y:c,width:d,height:f}=o;r.beginPath(),r.globalAlpha=i,r.rect(a+1,c+1,d,f-2),r.fillStyle=s.bgHeaderHovered,r.fill(),r.globalAlpha=1,r.beginPath();const m=t!=="";let p=0;if(n!==void 0){const v=f-8,k=a+8/2,b=c+8/2;l.drawSprite(n,"normal",r,k,b,v,s,m?1:i),p=v}else{p=24;const g=12,v=m?g:i*g,k=m?0:(1-i)*g*.5,b=s.cellHorizontalPadding+4;v>0&&(r.moveTo(a+b+k,c+f/2),r.lineTo(a+b+k+v,c+f/2),r.moveTo(a+b+k+v*.5,c+f/2-v*.5),r.lineTo(a+b+k+v*.5,c+f/2+v*.5),r.lineWidth=2,r.strokeStyle=s.bgIconHeader,r.lineCap="round",r.stroke())}r.fillStyle=s.textMedium,r.fillText(t,p+a+s.cellHorizontalPadding+.5,c+f/2+Qn(r,s)),r.beginPath()}const Hm=u.lazy(async()=>await va(()=>import("./djlvx5j7aze6pw58.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9,10,11,12,13]))),zm={getAccessibilityString:e=>e.data?.toString()??"",kind:J.Number,needsHover:!1,needsHoverPosition:!1,useLabel:!0,drawPrep:Bo,draw:e=>An(e,e.cell.displayData,e.cell.contentAlign),measure:(e,t,n)=>e.measureText(t.displayData).width+n.cellHorizontalPadding*2,onDelete:e=>({...e,data:void 0}),provideEditor:()=>e=>{const{isHighlighted:t,onChange:n,value:r,validatedSelection:o}=e;return u.createElement(u.Suspense,{fallback:null},u.createElement(Hm,{highlight:t,disabled:r.readonly===!0,value:r.data,fixedDecimals:r.fixedDecimals,allowNegative:r.allowNegative,thousandSeparator:r.thousandSeparator,decimalSeparator:r.decimalSeparator,validatedSelection:o,onChange:i=>n({...r,data:Number.isNaN(i.floatValue??0)?0:i.floatValue})}))},onPaste:(e,t,n)=>{const r=typeof n.rawValue=="number"?n.rawValue:Number.parseFloat(typeof n.rawValue=="string"?n.rawValue:e);if(!(Number.isNaN(r)||t.data===r))return{...t,data:r,displayData:n.formattedString??t.displayData}}},Fm={getAccessibilityString:()=>"",measure:()=>108,kind:J.Protected,needsHover:!1,needsHoverPosition:!1,draw:Om,onPaste:()=>{}};function Om(e){const{ctx:t,theme:n,rect:r}=e,{x:o,y:i,height:s}=r;t.beginPath();const l=2.5;let a=o+n.cellHorizontalPadding+l;const c=i+s/2,d=Math.cos(zl(30))*l,f=Math.sin(zl(30))*l;for(let m=0;m<12;m++)t.moveTo(a,c-l),t.lineTo(a,c+l),t.moveTo(a+d,c-f),t.lineTo(a-d,c+f),t.moveTo(a-d,c-f),t.lineTo(a+d,c+f),a+=8;t.lineWidth=1.1,t.lineCap="square",t.strokeStyle=n.textLight,t.stroke()}const $m={getAccessibilityString:e=>e.data?.toString()??"",kind:J.RowID,needsHover:!1,needsHoverPosition:!1,drawPrep:(e,t)=>Bo(e,t,e.theme.textLight),draw:e=>An(e,e.cell.data,e.cell.contentAlign),measure:(e,t,n)=>e.measureText(t.data).width+n.cellHorizontalPadding*2,provideEditor:()=>e=>{const{isHighlighted:t,onChange:n,value:r,validatedSelection:o}=e;return xt.createElement(Wi,{highlight:t,autoFocus:r.readonly!==!0,disabled:r.readonly!==!1,value:r.data,validatedSelection:o,onChange:i=>n({...r,data:i.target.value})})},onPaste:()=>{}},Nm={getAccessibilityString:e=>e.data?.toString()??"",kind:J.Text,needsHover:!1,needsHoverPosition:!1,drawPrep:Bo,useLabel:!0,draw:e=>(An(e,e.cell.displayData,e.cell.contentAlign,e.cell.allowWrapping,e.hyperWrapping),!0),measure:(e,t,n)=>{const r=t.displayData.split(`
`,t.allowWrapping===!0?void 0:1);return Math.max(...r.map(o=>e.measureText(o).width))+2*n.cellHorizontalPadding},onDelete:e=>({...e,data:""}),provideEditor:e=>({disablePadding:e.allowWrapping===!0,editor:t=>{const{isHighlighted:n,onChange:r,value:o,validatedSelection:i}=t;return u.createElement(Wi,{style:e.allowWrapping===!0?{padding:"3px 8.5px"}:void 0,highlight:n,autoFocus:o.readonly!==!0,disabled:o.readonly===!0,altNewline:!0,value:o.data,validatedSelection:i,onChange:s=>r({...o,data:s.target.value})})}}),onPaste:(e,t,n)=>e===t.data?void 0:{...t,data:e,displayData:n.formattedString??t.displayData}},Wm=Jt("div")({name:"UriOverlayEditorStyle",class:"gdg-u1rrojo",propsAsIs:!1}),Bm=e=>{const{uri:t,onChange:n,forceEditMode:r,readonly:o,validatedSelection:i,preview:s}=e,[l,a]=u.useState(t===""||r),c=u.useCallback(()=>{a(!0)},[]);return l?u.createElement(Wi,{validatedSelection:i,highlight:!0,autoFocus:!0,value:t,onChange:n}):u.createElement(Wm,null,u.createElement("a",{className:"gdg-link-area",href:t,target:"_blank",rel:"noopener noreferrer"},s),!o&&u.createElement("div",{className:"gdg-edit-icon",onClick:c},u.createElement(Xs,null)),u.createElement("textarea",{className:"gdg-input",autoFocus:!0}))};function aa(e,t,n,r){let o=n.cellHorizontalPadding;const i=t.height/2-e.actualBoundingBoxAscent/2,s=e.width,l=e.actualBoundingBoxAscent;return r==="right"?o=t.width-s-n.cellHorizontalPadding:r==="center"&&(o=t.width/2-s/2),{x:o,y:i,width:s,height:l}}const jm={getAccessibilityString:e=>e.data?.toString()??"",kind:J.Uri,needsHover:!0,needsHoverPosition:!0,useLabel:!0,drawPrep:Bo,draw:e=>{const{cell:t,theme:n,overrideCursor:r,hoverX:o,hoverY:i,rect:s,ctx:l}=e,a=t.displayData??t.data;if(r!==void 0&&t.hoverEffect===!0&&o!==void 0&&i!==void 0){const c=Bi(a,l,n.baseFontFull),d=aa(c,s,n,t.contentAlign),{x:f,y:m,width:p,height:g}=d;if(o>=f-4&&o<=f-4+p+8&&i>=m-4&&i<=m-4+g+8){const v=Qn(l,n.baseFontFull);r("pointer");const k=5,b=m-v;l.beginPath(),l.moveTo(s.x+f,Math.floor(s.y+b+g+k)+.5),l.lineTo(s.x+f+p,Math.floor(s.y+b+g+k)+.5),l.strokeStyle=n.textDark,l.stroke(),l.save(),l.fillStyle=e.cellFillColor,An({...e,rect:{...s,x:s.x-1}},a,t.contentAlign),An({...e,rect:{...s,x:s.x-2}},a,t.contentAlign),An({...e,rect:{...s,x:s.x+1}},a,t.contentAlign),An({...e,rect:{...s,x:s.x+2}},a,t.contentAlign),l.restore()}}An(e,a,t.contentAlign)},onClick:e=>{const{cell:t,bounds:n,posX:r,posY:o,theme:i}=e,s=t.displayData??t.data;if(t.hoverEffect!==!0||t.onClickUri===void 0)return;const l=rg(s,i.baseFontFull);if(l===void 0)return;const a=aa(l,n,i,t.contentAlign);ji({x:a.x-4,y:a.y-4,width:a.width+8,height:a.height+8},r,o)&&t.onClickUri(e)},measure:(e,t,n)=>e.measureText(t.displayData??t.data).width+n.cellHorizontalPadding*2,onDelete:e=>({...e,data:""}),provideEditor:e=>t=>{const{onChange:n,value:r,forceEditMode:o,validatedSelection:i}=t;return u.createElement(Bm,{forceEditMode:o||e.hoverEffect===!0&&e.onClickUri!==void 0,uri:r.data,preview:r.displayData??r.data,validatedSelection:i,readonly:r.readonly===!0,onChange:s=>n({...r,data:s.target.value})})},onPaste:(e,t,n)=>e===t.data?void 0:{...t,data:e,displayData:n.formattedString??t.displayData}},Vm=[Im,Am,cm,hm,vm,Cm,Rm,Tm,zm,Fm,$m,Nm,jm],ks=[];class Xm extends wc{imageLoaded=()=>{};loadedLocations=[];cache={};setCallback(t){this.imageLoaded=t}sendLoaded=hu(()=>{this.imageLoaded(new Do(this.loadedLocations)),this.loadedLocations=[]},20);clearOutOfWindow=()=>{const t=Object.keys(this.cache);for(const n of t){const r=this.cache[n];let o=!1;for(let i=0;i<r.cells.length;i++){const s=r.cells[i];if(this.isInWindow(s)){o=!0;break}}o?r.cells=r.cells.filter(this.isInWindow):(r.cancel(),delete this.cache[n])}};loadImage(t,n,r,o){let i=!1;const s=ks.pop()??new Image;let l=!1;const a={img:void 0,cells:[mn(n,r)],url:t,cancel:()=>{l||(l=!0,ks.length<12?ks.unshift(s):i||(s.src=""))}},c=new Promise(d=>s.addEventListener("load",()=>d(null)));requestAnimationFrame(async()=>{try{s.src=t,await c,await s.decode();const d=this.cache[o];if(d!==void 0&&!l){d.img=s;for(const f of d.cells)this.loadedLocations.push(nl(f));i=!0,this.sendLoaded()}}catch{a.cancel()}}),this.cache[o]=a}loadOrGetImage(t,n,r){const o=t,i=this.cache[o];if(i!==void 0){const s=mn(n,r);return i.cells.includes(s)||i.cells.push(s),i.img}else this.loadImage(t,n,r,o)}}const Um=(e,t)=>{const n=u.useMemo(()=>({...Yg,...e.headerIcons}),[e.headerIcons]),r=u.useMemo(()=>e.imageWindowLoader??new Xm,[e.imageWindowLoader]);return u.createElement(am,{...e,renderers:Vm,headerIcons:n,ref:t,imageWindowLoader:r})},Ym=u.forwardRef(Um);function Km(e){switch(e){case"number":return J.Number;case"imageUrl":return J.Image;default:return J.Text}}const ca=40,ua=500;function qm({table:e,height:t,width:n,isInFocusedView:r=!1,className:o=""}){const{targetedContent:i,setTargetedContent:s}=gu(),[l,a]=u.useState([]),c=getComputedStyle(document.documentElement),d=$s();u.useEffect(()=>{e.columnNames.length>0&&a(e.columnNames.map((b,y)=>({id:`id:${y}`,title:b,maxWidth:500})))},[e.columnNames]);const[f,m]=u.useState({columns:ze.empty(),rows:ze.empty()}),p=u.useCallback(function([y,C]){const x=e.rows[C];return{kind:Km(e.columnTypes[y]),data:x[y],allowOverlay:!0,readonly:!0,displayData:String(x[y]),allowWrapping:!0,contentAlignment:"left"}},[e.columnTypes,e.rows]),g=u.useCallback(b=>{if(b.columns.length>0){const y=b.columns.items.flatMap(x=>e.columnNames.slice(x[0],x[1]));Kn.logEvent(qn.adaColumnTargeted);const C=y.length>1?d.formatMessage({id:"B+HlXu",defaultMessage:"{totalColumns} columns"},{totalColumns:y.length}):d.formatMessage({id:"KnFSJb",defaultMessage:'"{columnName}" column'},{columnName:y[0]});s({type:"object",label:C,isFocusedViewContent:r,createNewCompletionParams:x=>Ss(x,`The user has selected the columns:  ${y.map(w=>`"${w}"`).join(", ")} in the ${e.name} table ${e.sheetName?` in the ${e.sheetName} sheet`:""}`,C)})}else if(b.rows.length>0){const y=b.rows.items.flatMap(x=>{const[w,T]=x,D=[];for(let _=w;_<T;_++)D.push(_);return D}),C=y.length>1?d.formatMessage({id:"vFstNk",defaultMessage:"{totalRows} rows"},{totalRows:y.length}):d.formatMessage({id:"43/z2q",defaultMessage:"#{rowIndex} row"},{rowIndex:y[0]+1});Kn.logEvent(qn.adaRowTargeted),s({type:"object",label:C,isFocusedViewContent:r,createNewCompletionParams:x=>Ss(x,`The user has selected rows at the following indices: ${y.map(w=>`"${w}"`).join(", ")} in the ${e.name} table ${e.sheetName?` in the ${e.sheetName} sheet`:""}`,C)})}else if(b.current){const y=b.current.range.x,C=b.current.range.y,x=b.current.range.x+b.current.range.width,w=b.current.range.y+b.current.range.height,T=(x-y)*(w-C);let D="";T===1&&(D=e.rows[b.current.cell[1]][b.current.cell[0]]),Kn.logEvent(qn.adaRangeTargeted);const _=T>1?d.formatMessage({id:"Ia9GsC",defaultMessage:"{totalCells} cells"},{totalCells:T}):d.formatMessage({id:"MEl4hN",defaultMessage:'"{cellContent}" cell'},{cellContent:D});s({type:"object",isFocusedViewContent:r,label:_,createNewCompletionParams:P=>Ss(P,`The user has selected a range at the iloc: ${C}:${w}, ${y}:${x} in the ${e.name} table ${e.sheetName?` in the ${e.sheetName} sheet`:""}`,_)})}b.columns.length===0&&b.rows.length===0&&b.current===void 0&&s(void 0),m(b)},[e.columnNames,s,r,e.rows,d,e.name,e.sheetName]);u.useEffect(()=>{i===void 0&&m({columns:ze.empty(),rows:ze.empty()})},[i]);const v=u.useCallback(b=>{const w=e.rows[b];if(!w)return 44;const T=w.reduce((A,L)=>{const $=A?.length||0,q=L?.length||0;return $>q?A:L})??"",P=(l[w.indexOf(T)]?.width||150)/8,W=Math.ceil(T.length/P);return 24+(W<4?W:4)*20},[e.rows,l]);u.useEffect(()=>{if(!document.getElementById("portal")){const b=document.createElement("div");b.id="portal",b.style.position="fixed",b.style.left="0",b.style.top="0",b.style.zIndex="9999",document.body.appendChild(b)}return()=>{const b=document.getElementById("portal");b&&document.body.removeChild(b)}},[]);const k=u.useCallback(()=>e.rows&&e.rows.length>999?10+10*String(e.rows.length).length:30,[e.rows]);return I.jsx(Ym,{getCellContent:p,columns:l,rows:e.rows.length,gridSelection:f,onGridSelectionChange:g,smoothScrollX:!0,smoothScrollY:!0,overscrollX:50,className:o,rowMarkers:"clickable-number",height:t,width:n,rowMarkerTheme:{bgCell:c.getPropertyValue("--main-surface-secondary").trim(),textLight:c.getPropertyValue("--text-primary").trim()},theme:{textDark:c.getPropertyValue("--text-primary").trim(),textMedium:c.getPropertyValue("--text-primary").trim(),textLight:c.getPropertyValue("--text-primary").trim(),textHeader:c.getPropertyValue("--text-primary").trim(),bgHeader:c.getPropertyValue("--main-surface-secondary").trim(),bgCell:c.getPropertyValue("--main-surface-primary").trim(),bgBubbleSelected:c.getPropertyValue("--main-surface-tertiary").trim(),bgHeaderHovered:c.getPropertyValue("--main-surface-tertiary").trim(),bgHeaderHasFocus:c.getPropertyValue("--main-surface-tertiary").trim(),accentColor:c.getPropertyValue("--selection").trim(),drilldownBorder:c.getPropertyValue("--selection").trim(),editorFontSize:"400 14px",baseFontStyle:"400 14px",markerFontStyle:"400 14px",headerFontStyle:"500 14px",cellHorizontalPadding:12,cellVerticalPadding:10},rowMarkerWidth:k(),rowHeight:v,verticalBorder:!0,minColumnWidth:ca,maxColumnWidth:ua,onColumnResize:(b,y,C)=>{y>=ca&&y<=ua&&a(x=>{const w=[...x];return w[C]={...b,width:y},w})}})}function Ss(e,t,n){const r=Eu(t);return{...e,promptMessage:mu(e.promptMessage,{metadata:{targeted_reply:t,targeted_reply_label:n}}),appendMessages:e.appendMessages==null?[r]:[...e.appendMessages,r]}}const mr=["#FFAF00","#F46920","#F53255","#F857C1","#29BDFD","#00CBBF","#01C159","#9DCA1C"];function _c({colorList:e,label:t,color:n,onColorUpdate:r}){return I.jsxs(Gn.Root,{children:[I.jsx(Gn.Trigger,{asChild:!0,children:I.jsxs("div",{className:"flex w-full items-center justify-between py-2 pl-4 pr-3.5 hover:bg-token-main-surface-secondary",children:[I.jsx("span",{className:"max-w-28 truncate text-sm",children:t||I.jsx(It,{id:"UnyV2o",defaultMessage:"Dataset"})}),I.jsxs("div",{className:"flex gap-1",children:[I.jsx("div",{className:"h-4 w-4 rounded-sm",style:{backgroundColor:n}}),I.jsx(Tu,{className:"icon-sm"})]})]})}),I.jsx(Gn.Portal,{children:I.jsx(Gn.Content,{className:"flex min-w-36 flex-col gap-4 p-4 align-middle",sideOffset:5,side:"right",children:I.jsx(Gm,{currentColor:n,colorList:e,onUpdate:r})})})]})}function Gm({colorList:e,currentColor:t,onUpdate:n}){const[r,o]=u.useState(t??""),i=$s(),s=l=>/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(l);return I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"grid grid-cols-4 flex-wrap gap-2",children:e.map((l,a)=>I.jsx("button",{onClick:()=>{o(l),n(l)},className:Nt("flex h-6 w-6 items-center justify-center rounded-md"),style:{backgroundColor:l},children:t===l&&I.jsx(Iu,{className:"text-white"})},a))}),I.jsxs("div",{className:"flex h-6 rounded-md border border-token-border-light",children:[I.jsx("div",{className:"flex w-6 items-center justify-center bg-gray-200 px-2 py-1 text-sm text-gray-500",children:"#"}),I.jsx("input",{className:Nt("w-16 flex-1 rounded-r-md border-0 p-2 text-xs uppercase leading-6 outline-none"),placeholder:i.formatMessage({id:"3xKVHs",defaultMessage:"F1B023"}),value:r.slice(1),onChange:l=>{const a=`#${l.target.value}`;o(a),s(a)&&n(a)}})]})]})}function Zm({chartData:e,setChartData:t}){let n=e.datasets[0].colors?[...e.datasets[0].colors]:[...mr];return I.jsx(I.Fragment,{children:e.labels.map((r,o)=>I.jsx(_c,{label:r,colorList:mr,color:n[o],onColorUpdate:i=>{Array.isArray(n)?n[o]=i:n=[i],e.datasets[0].colors=n,t?.({...e})}},o))})}function Qm({chartData:e,setChartData:t}){return I.jsx(I.Fragment,{children:e.datasets.map((n,r)=>I.jsx(_c,{label:n.label,colorList:mr,color:n.colors?Array.isArray(n.colors)?n.colors[0]:n.colors:"",onColorUpdate:o=>{n.colors=[o],t?.({...e})}},r))})}function Jm({chartData:e,setChartData:t}){return I.jsxs(Gn.Root,{children:[I.jsx(Gn.Trigger,{className:"h-5 px-0 hover:bg-transparent",asChild:!0,children:I.jsx("button",{children:I.jsx(pu,{className:Nt("icon-md text-token-text-tertiary hover:text-token-text-primary")})})}),I.jsx(Gn.Portal,{children:I.jsx(Gn.Content,{className:"flex min-w-48 max-w-xs flex-col px-0 py-1",sideOffset:7,children:e&&e.datasets.length<$a&&I.jsxs(I.Fragment,{children:[I.jsx("span",{className:"py-2 pl-4 pr-3.5 text-xs font-semibold text-token-text-quaternary",children:I.jsx(It,{id:"yYiKvS",defaultMessage:"Colors"})}),I.jsx("div",{className:"flex max-h-36 flex-col overflow-auto",children:e.chart_type==="pie"?I.jsx(Zm,{chartData:e,setChartData:t}):I.jsx(Qm,{chartData:e,setChartData:t})})]})})})]})}const ep=(e,t,n)=>{const{colors:r}=t;let o;return r&&r.length>0?o=r:e==="pie"?o=t.data.map((i,s)=>mr[s%mr.length]):o=mr[n%mr.length],Array.isArray(o)?o:[o]},tp=e=>{const{file_name:t="",context_connector_info:n}=e,{source_url:r=null,context_connector:o,synthetic_extension:i}=n??{};let s=null;if(n&&o){const l=i??wu(t)??null;s=vu(o,l)}return{sourceUrl:r,contextConnectorName:s}},Ac=async e=>{if(e.image_url==null){bo.addError("No image url provided for download");return}const t=yu(e.image_url),n=await Pu.getFileDownloadLink(t);if(n.status===Du.Success){const o=await(await fetch(n.download_url)).blob();il(URL.createObjectURL(o),"output.png")}},il=(e,t="")=>{const n=document.createElement("a");n.href=e,t&&(n.download=t),n.click()},Lc=300,np=350;function rp({visualization:e,clientThreadId:t,expanded:n=!1}){switch(e.type){case"chart":return e.fallback_image==null?(bo.addError("Chart visualizations require a fallback image message"),null):e.fallback_to_image?e.fallback_image==null?(bo.addError("No fallback image message provided for fallback chart"),null):I.jsx(cp,{visualization:e,expanded:n,clientThreadId:t}):I.jsx(ap,{visualization:e,clientThreadId:t,expanded:n});case"table":return I.jsx(op,{visualization:e,expanded:n,clientThreadId:t});default:return bo.addError(`Unsupported visualization type ${e.type}`),null}}function op({visualization:e,expanded:t,clientThreadId:n,customTable:r}){const i=ma(),s=i&&!t,{isLoading:l,data:a,isError:c}=ed(e),[d,f]=u.useState(),m=u.useCallback(()=>{a&&il(a.download_url)},[a]),[p,g]=u.useState(0),[v,k]=u.useState(0),b=u.useRef(null);let y;a&&(Array.isArray(a.content)?y=a.content.find(x=>x.name===d)??a.content[0]:y=a.content);const C=()=>{b.current&&k(b.current.offsetWidth)};return u.useEffect(()=>(C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)),[]),u.useEffect(()=>{const x=()=>{const T=window.innerHeight-48;g(T)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),c?I.jsx(Hc,{fileName:e.title}):I.jsx(jo,{ref:b,focusObject:{type:Ho.ADAVisualization,visualization:e},title:I.jsxs(I.Fragment,{children:[e.title,!s&&Array.isArray(a?.content)&&I.jsxs($r.Root,{defaultValue:d,onValueChange:x=>{f(x)},children:[I.jsxs($r.Trigger,{className:"m-0 h-4 bg-transparent p-1 text-xs font-semibold",children:[d??a.content[0].name,I.jsx($r.Icon,{})]}),I.jsx($r.Portal,{children:I.jsx($r.Content,{children:a.content.map(x=>I.jsx($r.Item,{className:"text-xs font-semibold",value:x.name??"",children:x.name},x.name))})})]})]}),onDownload:m,expanded:t,clientThreadId:n,forceSmallBadge:!1,children:l||y==null?I.jsx("div",{className:"flex w-full items-center justify-center",children:I.jsx(ya,{})}):I.jsx("div",{className:"border-t border-token-border-light",children:I.jsx(qm,{table:{...y,name:e.title,sheetName:d},height:t?p:Lc,width:v,isInFocusedView:i})})})}function ip({showStatic:e,setShowStatic:t}){return I.jsx(xo,{side:"top",sideOffset:4,label:e?I.jsx(It,{id:"o0thnT",defaultMessage:"Switch to interactive chart"}):I.jsx(It,{id:"cigiQO",defaultMessage:"Switch to static chart"}),children:I.jsx("button",{className:"flex",onClick:()=>{t(!e)},children:e?I.jsx(ld,{className:"icon-md text-token-text-tertiary hover:text-token-text-primary"}):I.jsx(Ns,{className:"icon-md text-token-text-tertiary hover:text-token-text-primary"})})})}function sp({type:e}){return I.jsx(lp,{children:e==="chart"?I.jsxs(I.Fragment,{children:[I.jsx(It,{id:"XBhWwK",defaultMessage:"Now interactive! (Beta)"})," ",I.jsx(Ns,{className:"icon-md"})]}):I.jsx(It,{id:"N0TMRs",defaultMessage:"Now interactive!"})})}const lp=_u.div`flex flex-shrink-0 cursor-pointer flex-nowrap items-center gap-1 rounded-lg bg-blue-selection/[0.1] py-1 pl-2 pr-1.5 text-xs font-semibold text-blue-selection`;function ap({visualization:e,clientThreadId:t,expanded:n}){const{isLoading:r,data:o,isError:i}=td(e),s=u.useRef(null),l=nd(),[a,c]=u.useState(!l),d=u.useCallback(async()=>{if(a&&e.fallback_image)Kn.logEvent(qn.adaDownloadedStaticChart),await Ac(e.fallback_image);else if(s.current){const k=s.current.getBase64Image();k&&(Kn.logEvent(qn.adaDownloadedInteractiveChart),il(k,`${e.title}.png`))}},[e.fallback_image,a,s,e.title]),[f,m]=u.useState(void 0),p=Au(t),g=bu(()=>{Kn.logEvent(qn.adaToggledInteractiveChart,{conversationId:p})}),v=k=>{g(),c(k)};return u.useEffect(()=>{Kn.logEvent(qn.adaInteractiveChartShown)},[]),u.useEffect(()=>{if(o&&o.content!==f){const{chart_type:k,datasets:b,labels:y}=o.content,C=o.content;C.datasets=b.map((x,w)=>{const T=ep(k,x,w);return{...x,colors:T}}),C.labels=Array.isArray(y)?y:[y],m(C)}},[f,o]),i?I.jsx(Hc,{fileName:e.title}):I.jsx(jo,{focusObject:{type:Ho.ADAVisualization,visualization:e},title:e.title,onDownload:d,additionalActions:[I.jsx(ip,{showStatic:a,setShowStatic:v},0),I.jsx(Jm,{chartData:f,setChartData:m},1)],expanded:n,clientThreadId:t,children:r||f==null?I.jsx("div",{className:"flex w-full items-center justify-center",children:I.jsx(ya,{})}):a&&e.fallback_image?I.jsx(ba,{jupyterMessage:e.fallback_image}):I.jsx(Na,{ref:s,chart:f})})}function cp({visualization:e,expanded:t,clientThreadId:n}){const[r,o]=u.useState(!1),i=rd(),s=u.useCallback(async()=>{e.fallback_image&&await Ac(e.fallback_image)},[e.fallback_image]);return e.fallback_image==null?null:I.jsx(jo,{focusObject:{type:Ho.ADAVisualization,visualization:e},title:e.title,onDownload:s,expanded:t,clientThreadId:n,children:I.jsx("div",{className:Nt("h-full w-full",t&&"cursor-pointer items-center justify-center"),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:I.jsxs("div",{className:Nt("relative flex h-full cursor-pointer items-center justify-center",!t&&"w-full"),children:[I.jsx(ba,{jupyterMessage:e.fallback_image}),i&&I.jsx(id,{isHovered:r})]})})})}const jo=xt.forwardRef(({focusObject:e,title:t="",onDownload:n=()=>{},additionalActions:r=[],expanded:o=!1,expandable:i=!0,children:s,footer:l,headerBackgroundColor:a="bg-token-main-surface-primary",forceSmallBadge:c=!1,wrapperStyles:d="flex items-center justify-center bg-token-main-surface-primary"},f)=>{const m=ma(),p=xu(),g=p&&p.type===Ho.ADAVisualization&&p.type===e.type&&p.visualization.file_id===e.visualization.file_id&&e.visualization.title===p.visualization.title,v=Lu(),k=e.visualization.type,[b,y]=od(k,v?.id??""),C=Cu(),x=e.visualization.type,{sourceUrl:w,contextConnectorName:T}=tp(e.visualization);if(m&&!o||C||c)return I.jsx(up,{focusObject:e,title:t,type:x,isFocused:g??!1,disabled:C||c});const D=I.jsxs(I.Fragment,{children:[r.map((_,P)=>I.jsx("div",{className:"flex p-0",children:_},P)),w&&T&&I.jsx(xo,{side:"top",sideOffset:4,label:I.jsx(It,{id:"KG958Q",defaultMessage:"Open in {contextConnectorName}",values:{contextConnectorName:T}}),children:I.jsx("a",{className:"flex items-center text-xs",href:w,target:"_blank",rel:"noreferrer",children:I.jsx(ku,{className:Nt("icon-md text-token-text-tertiary hover:text-token-text-primary")})})}),n&&I.jsx(xo,{side:"top",sideOffset:4,label:I.jsx(It,{id:"X0SJIT",defaultMessage:"Download {type}",values:{type:x}}),children:I.jsx("button",{onClick:n,className:"flex items-center text-xs",children:I.jsx(Su,{className:Nt("icon-md text-token-text-tertiary hover:text-token-text-primary")})})}),i&&I.jsx(xo,{side:"top",sideOffset:4,label:g?I.jsx(It,{id:"vilGuu",defaultMessage:"Collapse {type}",values:{type:x}}):I.jsx(It,{id:"7kLyF5",defaultMessage:"Expand {type}",values:{type:x}}),children:I.jsx("button",{onClick:()=>{zc(g??!1,e)},className:"flex items-center text-xs",children:g?I.jsx(Ra,{className:Nt("icon-md text-token-text-tertiary hover:text-token-text-primary")}):I.jsx(wa,{className:Nt("icon-md text-token-text-tertiary hover:text-token-text-primary")})})})]});return I.jsxs(Ci.div,{className:Nt("relative overflow-hidden border-token-border-light text-token-text-primary",!o&&"rounded-2xl border"),ref:f,onMouseEnter:()=>{y(!0)},...pa,children:[I.jsxs("div",{className:Nt("flex items-center justify-between gap-2 px-4 py-3",a),children:[I.jsx("span",{className:"flex-grow items-center truncate font-semibold capitalize",children:t}),I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx(da,{children:!b&&I.jsx(Ci.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.2},className:"absolute right-3 top-3",children:I.jsx(sp,{type:x})})}),b&&D]})]}),I.jsx("div",{className:d,style:{height:o?"calc(100vh - 48px)":`${x==="table"?Lc:np}px`},children:s}),I.jsx("div",{children:l})]})});jo.displayName="ADAVisualizationWrapper";function up({focusObject:e,title:t="",type:n,isFocused:r,disabled:o=!1}){const[i,s]=u.useState(!1),l=n==="chart"?sd:ad,a=r||i||o;return I.jsx(Ci.div,{className:Nt("relative w-52 overflow-hidden rounded-2xl border",r&&"border-blue-selection/[.3]",a?"text-token-text-primary":"text-token-text-secondary",!o&&"cursor-pointer"),onMouseEnter:()=>{o||s(!0)},onMouseLeave:()=>{o||s(!1)},onClick:()=>{o||zc(r,e)},...pa,children:I.jsxs("div",{className:"flex justify-between bg-token-main-surface-primary px-3 py-2",children:[I.jsxs("div",{className:"my-0 flex w-full items-center gap-2 overflow-hidden text-sm font-semibold capitalize",children:[I.jsx(l,{className:Nt("icon-lg flex-shrink-0",a?"text-brand-green-800":"text-token-text-quaternary")}),I.jsx("span",{className:"flex-grow truncate",children:t})]}),i&&I.jsx("div",{className:"flex items-center gap-2",children:I.jsx(xo,{side:"top",sideOffset:4,label:r?I.jsx(It,{id:"vilGuu",defaultMessage:"Collapse {type}",values:{type:n}}):I.jsx(It,{id:"7kLyF5",defaultMessage:"Expand {type}",values:{type:n}}),children:r?I.jsx(Ra,{className:"icon-md icon-md text-token-text-secondary"}):I.jsx(wa,{className:Nt("icon-md text-token-text-secondary")})})})]})})}function Hc({fileName:e=""}){return I.jsx("div",{className:"w-full rounded-2xl border border-red-600 p-3",children:I.jsxs("div",{className:"my-0 flex items-center justify-between",children:[I.jsx("div",{className:"flex items-center gap-2",children:I.jsx("p",{className:"m-0 p-0 text-lg font-semibold capitalize",children:e})}),I.jsx("span",{className:"text-sm text-red-600",children:I.jsx(It,{id:"ADAVisualzationComponent.unableToLoadOutput",defaultMessage:"Unable to display visualization"})})]})})}const zc=(e,t)=>{Kn.logEvent(qn.adaFocusModeToggled),e?Cl.close():Cl.setFocusedObject(t)};function dp({title:e,expanded:t,expandable:n=!0,children:r,actions:o,clientThreadId:i,onDownload:s,footer:l}){n=!1;const a={type:"table",file_id:"stub"};return I.jsx("div",{className:"mb-2",children:I.jsx(jo,{title:e,focusObject:{type:Ho.ADAVisualization,visualization:a},additionalActions:o,expanded:t,expandable:n,clientThreadId:i,onDownload:s,footer:l,headerBackgroundColor:"bg-gray-50",wrapperStyles:"flex overflow-y-scroll bg-token-main-surface-primary",children:r})})}const xp=Object.freeze(Object.defineProperty({__proto__:null,ADAGenericWrapper:dp,default:rp},Symbol.toStringTag,{value:"Module"}));export{xp as A,L0 as C,fg as T,Vr as a,Ud as b,Br as i,dg as m,Jt as s};
//# sourceMappingURL=hz7md1hverpbqmow.js.map
